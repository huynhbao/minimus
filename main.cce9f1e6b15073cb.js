"use strict";(self.webpackChunkMinimus=self.webpackChunkMinimus||[]).push([[179],{2011:(lt,Ce,L)=>{L.d(Ce,{Dh:()=>pe,GT:()=>fe,cc:()=>Se,hO:()=>Be,on:()=>$,pX:()=>se,xv:()=>me});var p=L(4650),J=L(127),O=L(5813);lt=L.hmd(lt);const ae=["ngOnDestroy"],se=(Ae,De,Le,Me={})=>new Proxy(Ae,{get:(Ee,Re)=>Le.runOutsideAngular(()=>{var je;if(Ae[Re])return!(null===(je=Me?.spy)||void 0===je)&&je.get&&Me.spy.get(Re,Ae[Re]),Ae[Re];if(ae.indexOf(Re)>-1)return()=>{};const Oe=De.toPromise().then(H=>{const we=H&&H[Re];return"function"==typeof we?we.bind(H):we&&we.then?we.then(K=>Le.run(()=>K)):Le.run(()=>we)});return new Proxy(()=>{},{get:(H,we)=>Oe[we],apply:(H,we,K)=>Oe.then(X=>{var ie;const ne=X&&X(...K);return!(null===(ie=Me?.spy)||void 0===ie)&&ie.apply&&Me.spy.apply(Re,K,ne),ne})})})}),fe=(Ae,De)=>{De.forEach(Le=>{Object.getOwnPropertyNames(Le.prototype||Le).forEach(Me=>{Object.defineProperty(Ae.prototype,Me,Object.getOwnPropertyDescriptor(Le.prototype||Le,Me))})})};class ce{constructor(De){return De}}const pe=new p.OlP("angularfire2.app.options"),me=new p.OlP("angularfire2.app.name");function $(Ae,De,Le){const Ee="object"==typeof Le&&Le||{};Ee.name=Ee.name||"string"==typeof Le&&Le||"[DEFAULT]";const je=J.Z.apps.filter(Oe=>Oe&&Oe.name===Ee.name)[0]||De.runOutsideAngular(()=>J.Z.initializeApp(Ae,Ee));try{JSON.stringify(Ae)!==JSON.stringify(je.options)&&G("error",`${je.name} Firebase App already initialized with different options${lt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ce(je)}const G=(Ae,...De)=>{(0,p.X6Q)()&&typeof console<"u"&&console[Ae](...De)},Q={provide:ce,useFactory:$,deps:[pe,p.R0b,[new p.FiY,me]]};let Be=(()=>{class Ae{constructor(Le){J.Z.registerVersion("angularfire",O.q4.full,"core"),J.Z.registerVersion("angularfire",O.q4.full,"app-compat"),J.Z.registerVersion("angular",p.q4F.full,Le.toString())}static initializeApp(Le,Me){return{ngModule:Ae,providers:[{provide:pe,useValue:Le},{provide:me,useValue:Me}]}}}return Ae.\u0275fac=function(Le){return new(Le||Ae)(p.LFG(p.Lbi))},Ae.\u0275mod=p.oAB({type:Ae}),Ae.\u0275inj=p.cJS({providers:[Q]}),Ae})();function Se(Ae,De,Le,Me,Ee){const[,Re,je]=globalThis.\u0275AngularfireInstanceCache.find(Oe=>Oe[0]===Ae)||[];if(Re)return function Ye(Ae,De){try{return Ae.toString()===De.toString()}catch{return Ae===De}}(Ee,je)||(ge("error",`${De} was already initialized on the ${Le} Firebase App with different settings.${at?" You may need to reload as Firebase is not HMR aware.":""}`),ge("warn",{is:Ee,was:je})),Re;{const Oe=Me();return globalThis.\u0275AngularfireInstanceCache.push([Ae,Oe,Ee]),Oe}}const at=!!lt.hot,ge=(Ae,...De)=>{(0,p.X6Q)()&&typeof console<"u"&&console[Ae](...De)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(lt,Ce,L)=>{L.d(Ce,{q4:()=>rv,iC:()=>Ke,fc:()=>Qn,HU:()=>el,vb:()=>Or,JM:()=>kn});var p=L(4650),J=L(5867),O=L(5861),ae=L(9681),se=L(2090),fe=L(4859),ce=L(1877),pe=L(8766);const me="@firebase/installations",$="0.5.16",Q=`w:${$}`,Be="FIS_v2",De=new se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Le(D){return D instanceof se.ZR&&D.code.includes("request-failed")}function Me({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function Ee(D){return{token:D.token,requestStatus:2,expiresIn:X(D.expiresIn),creationTime:Date.now()}}function Re(D,T){return je.apply(this,arguments)}function je(){return(je=(0,O.Z)(function*(D,T){const U=(yield T.json()).error;return De.create("request-failed",{requestName:D,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function Oe({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function H(D,{refreshToken:T}){const M=Oe(D);return M.append("Authorization",function ie(D){return`${Be} ${D}`}(T)),M}function we(D){return K.apply(this,arguments)}function K(){return(K=(0,O.Z)(function*(D){const T=yield D();return T.status>=500&&T.status<600?D():T})).apply(this,arguments)}function X(D){return Number(D.replace("s","000"))}function ne(D,T){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:T},{fid:M}){const U=Me(D),Y=Oe(D),re=T.getImmediate({optional:!0});if(re){const Et=yield re.getHeartbeatsHeader();Et&&Y.append("x-firebase-client",Et)}const $e={method:"POST",headers:Y,body:JSON.stringify({fid:M,authVersion:Be,appId:D.appId,sdkVersion:Q})},dt=yield we(()=>fetch(U,$e));if(dt.ok){const Et=yield dt.json();return{fid:Et.fid||M,registrationStatus:2,refreshToken:Et.refreshToken,authToken:Ee(Et.authToken)}}throw yield Re("Create Installation",dt)})).apply(this,arguments)}function Fe(D){return new Promise(T=>{setTimeout(T,D)})}const sn=/^[cdef][\w-]{21}$/;function Pt(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const M=function Lt(D){return function ct(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return sn.test(M)?M:""}catch{return""}}function gt(D){return`${D.appName}!${D.appId}`}const en=new Map;function Sr(D,T){const M=gt(D);wn(M,T),function yi(D,T){const M=function Wr(){return!li&&"BroadcastChannel"in self&&(li=new BroadcastChannel("[Firebase] FID Change"),li.onmessage=D=>{wn(D.data.key,D.data.fid)}),li}();M&&M.postMessage({key:D,fid:T}),function Ar(){0===en.size&&li&&(li.close(),li=null)}()}(M,T)}function wn(D,T){const M=en.get(D);if(M)for(const U of M)U(T)}let li=null;const vi="firebase-installations-store";let zr=null;function Ks(){return zr||(zr=(0,pe.X3)("firebase-installations-database",1,{upgrade:(D,T)=>{0===T&&D.createObjectStore(vi)}})),zr}function _n(D,T){return ci.apply(this,arguments)}function ci(){return(ci=(0,O.Z)(function*(D,T){const M=gt(D),Y=(yield Ks()).transaction(vi,"readwrite"),re=Y.objectStore(vi),Ie=yield re.get(M);return yield re.put(T,M),yield Y.done,(!Ie||Ie.fid!==T.fid)&&Sr(D,T.fid),T})).apply(this,arguments)}function _t(D){return ys.apply(this,arguments)}function ys(){return(ys=(0,O.Z)(function*(D){const T=gt(D),U=(yield Ks()).transaction(vi,"readwrite");yield U.objectStore(vi).delete(T),yield U.done})).apply(this,arguments)}function Fi(D,T){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,O.Z)(function*(D,T){const M=gt(D),Y=(yield Ks()).transaction(vi,"readwrite"),re=Y.objectStore(vi),Ie=yield re.get(M),$e=T(Ie);return void 0===$e?yield re.delete(M):yield re.put($e,M),yield Y.done,$e&&(!Ie||Ie.fid!==$e.fid)&&Sr(D,$e.fid),$e})).apply(this,arguments)}function xr(D){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,O.Z)(function*(D){let T;const M=yield Fi(D.appConfig,U=>{const Y=Mt(U),re=vt(D,Y);return T=re.registrationPromise,re.installationEntry});return""===M.fid?{installationEntry:yield T}:{installationEntry:M,registrationPromise:T}})).apply(this,arguments)}function Mt(D){return vr(D||{fid:Pt(),registrationStatus:0})}function vt(D,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(De.create("app-offline"))};const M={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},U=function Tt(D,T){return vs.apply(this,arguments)}(D,M);return{installationEntry:M,registrationPromise:U}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:An(D)}:{installationEntry:T}}function vs(){return(vs=(0,O.Z)(function*(D,T){try{const M=yield ne(D,T);return _n(D.appConfig,M)}catch(M){throw Le(M)&&409===M.customData.serverCode?yield _t(D.appConfig):yield _n(D.appConfig,{fid:T.fid,registrationStatus:0}),M}})).apply(this,arguments)}function An(D){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,O.Z)(function*(D){let T=yield Li(D.appConfig);for(;1===T.registrationStatus;)yield Fe(100),T=yield Li(D.appConfig);if(0===T.registrationStatus){const{installationEntry:M,registrationPromise:U}=yield xr(D);return U||M}return T})).apply(this,arguments)}function Li(D){return Fi(D,T=>{if(!T)throw De.create("installation-not-found");return vr(T)})}function vr(D){return function Wo(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function ln(D,T){return ts.apply(this,arguments)}function ts(){return(ts=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:T},M){const U=Zt(D,M),Y=H(D,M),re=T.getImmediate({optional:!0});if(re){const Et=yield re.getHeartbeatsHeader();Et&&Y.append("x-firebase-client",Et)}const $e={method:"POST",headers:Y,body:JSON.stringify({installation:{sdkVersion:Q,appId:D.appId}})},dt=yield we(()=>fetch(U,$e));if(dt.ok)return Ee(yield dt.json());throw yield Re("Generate Auth Token",dt)})).apply(this,arguments)}function Zt(D,{fid:T}){return`${Me(D)}/${T}/authTokens:generate`}function Mr(D){return ns.apply(this,arguments)}function ns(){return(ns=(0,O.Z)(function*(D,T=!1){let M;const U=yield Fi(D.appConfig,re=>{if(!Ot(re))throw De.create("not-registered");const Ie=re.authToken;if(!T&&W(Ie))return re;if(1===Ie.requestStatus)return M=He(D,T),re;{if(!navigator.onLine)throw De.create("app-offline");const $e=Z(re);return M=bt(D,$e),$e}});return M?yield M:U.authToken})).apply(this,arguments)}function He(D,T){return Te.apply(this,arguments)}function Te(){return(Te=(0,O.Z)(function*(D,T){let M=yield tt(D.appConfig);for(;1===M.authToken.requestStatus;)yield Fe(100),M=yield tt(D.appConfig);const U=M.authToken;return 0===U.requestStatus?Mr(D,T):U})).apply(this,arguments)}function tt(D){return Fi(D,T=>{if(!Ot(T))throw De.create("not-registered");return function ye(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function bt(D,T){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,O.Z)(function*(D,T){try{const M=yield ln(D,T),U=Object.assign(Object.assign({},T),{authToken:M});return yield _n(D.appConfig,U),M}catch(M){if(!Le(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const U=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield _n(D.appConfig,U)}else yield _t(D.appConfig);throw M}})).apply(this,arguments)}function Ot(D){return void 0!==D&&2===D.registrationStatus}function W(D){return 2===D.requestStatus&&!function j(D){const T=Date.now();return T<D.creationTime||D.creationTime+D.expiresIn<T+36e5}(D)}function Z(D){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:T})}function st(){return(st=(0,O.Z)(function*(D){const T=D,{installationEntry:M,registrationPromise:U}=yield xr(T);return U?U.catch(console.error):Mr(T).catch(console.error),M.fid})).apply(this,arguments)}function zt(){return(zt=(0,O.Z)(function*(D,T=!1){const M=D;return yield xn(M),(yield Mr(M,T)).token})).apply(this,arguments)}function xn(D){return wt.apply(this,arguments)}function wt(){return(wt=(0,O.Z)(function*(D){const{registrationPromise:T}=yield xr(D);T&&(yield T)})).apply(this,arguments)}function Au(D){return De.create("missing-app-config-values",{valueName:D})}const Ul="installations",Mn=D=>{const T=D.getProvider("app").getImmediate(),M=function xa(D){if(!D||!D.options)throw Au("App Configuration");if(!D.name)throw Au("App Name");const T=["projectId","apiKey","appId"];for(const M of T)if(!D.options[M])throw Au(M);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(T);return{app:T,appConfig:M,heartbeatServiceProvider:(0,ae._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},wd=D=>{const T=D.getProvider("app").getImmediate(),M=(0,ae._getProvider)(T,Ul).getImmediate();return{getId:()=>function te(D){return st.apply(this,arguments)}(M),getToken:Y=>function Vt(D){return zt.apply(this,arguments)}(M,Y)}};(function Bl(){(0,ae._registerComponent)(new fe.wA(Ul,Mn,"PUBLIC")),(0,ae._registerComponent)(new fe.wA("installations-internal",wd,"PRIVATE"))})(),(0,ae.registerVersion)(me,$),(0,ae.registerVersion)(me,$,"esm2017");const Ma="@firebase/remote-config",Kn=new se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class qo{constructor(T,M,U,Y){this.client=T,this.storage=M,this.storageCache=U,this.logger=Y}isCachedDataFresh(T,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-M,Y=U<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${Y}.`),Y}fetch(T){var M=this;return(0,O.Z)(function*(){const[U,Y]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(Y&&M.isCachedDataFresh(T.cacheMaxAgeMillis,U))return Y;T.eTag=Y&&Y.eTag;const re=yield M.client.fetch(T),Ie=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===re.status&&Ie.push(M.storage.setLastSuccessfulFetchResponse(re)),yield Promise.all(Ie),re})()}}function di(D=navigator){return D.languages&&D.languages[0]||D.language}class Es{constructor(T,M,U,Y,re,Ie){this.firebaseInstallations=T,this.sdkVersion=M,this.namespace=U,this.projectId=Y,this.apiKey=re,this.appId=Ie}fetch(T){var M=this;return(0,O.Z)(function*(){var U,Y,re;const[Ie,$e]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),Et=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,yt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},ft={sdk_version:M.sdkVersion,app_instance_id:Ie,app_instance_id_token:$e,app_id:M.appId,language_code:di()},Dn={method:"POST",headers:yt,body:JSON.stringify(ft)},Fr=fetch(Et,Dn),$t=new Promise((Xr,xs)=>{T.signal.addEventListener(()=>{const sp=new Error("The operation was aborted.");sp.name="AbortError",xs(sp)})});let zi;try{yield Promise.race([Fr,$t]),zi=yield Fr}catch(Xr){let xs="fetch-client-network";throw"AbortError"===(null===(U=Xr)||void 0===U?void 0:U.name)&&(xs="fetch-timeout"),Kn.create(xs,{originalErrorMessage:null===(Y=Xr)||void 0===Y?void 0:Y.message})}let fi=zi.status;const $d=zi.headers.get("ETag")||void 0;let gc,Ro;if(200===zi.status){let Xr;try{Xr=yield zi.json()}catch(xs){throw Kn.create("fetch-client-parse",{originalErrorMessage:null===(re=xs)||void 0===re?void 0:re.message})}gc=Xr.entries,Ro=Xr.state}if("INSTANCE_STATE_UNSPECIFIED"===Ro?fi=500:"NO_CHANGE"===Ro?fi=304:("NO_TEMPLATE"===Ro||"EMPTY_CONFIG"===Ro)&&(gc={}),304!==fi&&200!==fi)throw Kn.create("fetch-status",{httpStatus:fi});return{status:fi,eTag:$d,config:gc}})()}}class Of{constructor(T,M){this.client=T,this.storage=M}fetch(T){var M=this;return(0,O.Z)(function*(){const U=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(T,U)})()}attemptFetch(T,{throttleEndTimeMillis:M,backoffCount:U}){var Y=this;return(0,O.Z)(function*(){yield function jn(D,T){return new Promise((M,U)=>{const Y=Math.max(T-Date.now(),0),re=setTimeout(M,Y);D.addEventListener(()=>{clearTimeout(re),U(Kn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,M);try{const re=yield Y.client.fetch(T);return yield Y.storage.deleteThrottleMetadata(),re}catch(re){if(!function cn(D){if(!(D instanceof se.ZR&&D.customData))return!1;const T=Number(D.customData.httpStatus);return 429===T||500===T||503===T||504===T}(re))throw re;const Ie={throttleEndTimeMillis:Date.now()+(0,se.$s)(U),backoffCount:U+1};return yield Y.storage.setThrottleMetadata(Ie),Y.attemptFetch(T,Ie)}})()}}class ka{constructor(T,M,U,Y,re){this.app=T,this._client=M,this._storageCache=U,this._storage=Y,this._logger=re,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Qs(D,T){var M;const U=D.target.error||void 0;return Kn.create(T,{originalErrorMessage:U&&(null===(M=U)||void 0===M?void 0:M.message)})}const wi="app_namespace_store";class Kr{constructor(T,M,U,Y=function Ff(){return new Promise((D,T)=>{var M;try{const U=indexedDB.open("firebase_remote_config",1);U.onerror=Y=>{T(Qs(Y,"storage-open"))},U.onsuccess=Y=>{D(Y.target.result)},U.onupgradeneeded=Y=>{0===Y.oldVersion&&Y.target.result.createObjectStore(wi,{keyPath:"compositeKey"})}}catch(U){T(Kn.create("storage-open",{originalErrorMessage:null===(M=U)||void 0===M?void 0:M.message}))}})}()){this.appId=T,this.appName=M,this.namespace=U,this.openDbPromise=Y}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var M=this;return(0,O.Z)(function*(){const U=yield M.openDbPromise;return new Promise((Y,re)=>{var Ie;const dt=U.transaction([wi],"readonly").objectStore(wi),Et=M.createCompositeKey(T);try{const yt=dt.get(Et);yt.onerror=ft=>{re(Qs(ft,"storage-get"))},yt.onsuccess=ft=>{const Dn=ft.target.result;Y(Dn?Dn.value:void 0)}}catch(yt){re(Kn.create("storage-get",{originalErrorMessage:null===(Ie=yt)||void 0===Ie?void 0:Ie.message}))}})})()}set(T,M){var U=this;return(0,O.Z)(function*(){const Y=yield U.openDbPromise;return new Promise((re,Ie)=>{var $e;const Et=Y.transaction([wi],"readwrite").objectStore(wi),yt=U.createCompositeKey(T);try{const ft=Et.put({compositeKey:yt,value:M});ft.onerror=Dn=>{Ie(Qs(Dn,"storage-set"))},ft.onsuccess=()=>{re()}}catch(ft){Ie(Kn.create("storage-set",{originalErrorMessage:null===($e=ft)||void 0===$e?void 0:$e.message}))}})})()}delete(T){var M=this;return(0,O.Z)(function*(){const U=yield M.openDbPromise;return new Promise((Y,re)=>{var Ie;const dt=U.transaction([wi],"readwrite").objectStore(wi),Et=M.createCompositeKey(T);try{const yt=dt.delete(Et);yt.onerror=ft=>{re(Qs(ft,"storage-delete"))},yt.onsuccess=()=>{Y()}}catch(yt){re(Kn.create("storage-delete",{originalErrorMessage:null===(Ie=yt)||void 0===Ie?void 0:Ie.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class hi{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,O.Z)(function*(){const M=T.storage.getLastFetchStatus(),U=T.storage.getLastSuccessfulFetchTimestampMillis(),Y=T.storage.getActiveConfig(),re=yield M;re&&(T.lastFetchStatus=re);const Ie=yield U;Ie&&(T.lastSuccessfulFetchTimestampMillis=Ie);const $e=yield Y;$e&&(T.activeConfig=$e)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function kr(){return Id.apply(this,arguments)}function Id(){return(Id=(0,O.Z)(function*(){if(!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}!function Is(){(0,ae._registerComponent)(new fe.wA("remote-config",function D(T,{instanceIdentifier:M}){const U=T.getProvider("app").getImmediate(),Y=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Kn.create("registration-window");if(!(0,se.hl)())throw Kn.create("indexed-db-unavailable");const{projectId:re,apiKey:Ie,appId:$e}=U.options;if(!re)throw Kn.create("registration-project-id");if(!Ie)throw Kn.create("registration-api-key");if(!$e)throw Kn.create("registration-app-id");const dt=new Kr($e,U.name,M=M||"firebase"),Et=new hi(dt),yt=new ce.Yd(Ma);yt.logLevel=ce.in.ERROR;const ft=new Es(Y,ae.SDK_VERSION,M,re,Ie,$e),Dn=new Of(ft,dt),Fr=new qo(Dn,dt,Et,yt),$t=new ka(U,Fr,Et,dt,yt);return function En(D){const T=(0,se.m9)(D);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}($t),$t},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(Ma,"0.3.15"),(0,ae.registerVersion)(Ma,"0.3.15","esm2017")}();const Cd="/firebase-messaging-sw.js",Cs="/firebase-cloud-messaging-push-scope",Xs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",bd="google.c.a.c_id",Lf="google.c.a.c_l",Hl="google.c.a.ts",Dd="google.c.a.e";var Ru=(()=>{return(D=Ru||(Ru={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",Ru;var D})();function Bi(D){const T=new Uint8Array(D);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Td(D){const M=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(M),Y=new Uint8Array(U.length);for(let re=0;re<U.length;++re)Y[re]=U.charCodeAt(re);return Y}const $l="fcm_token_details_db",Ei="fcm_token_object_Store";function Am(D){return Gl.apply(this,arguments)}function Gl(){return Gl=(0,O.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(re=>re.name).includes($l))return null;let T=null;return(yield(0,pe.X3)($l,5,{upgrade:(U=(0,O.Z)(function*(Y,re,Ie,$e){var dt;if(re<2||!Y.objectStoreNames.contains(Ei))return;const Et=$e.objectStore(Ei),yt=yield Et.index("fcmSenderId").get(D);if(yield Et.clear(),yt)if(2===re){const ft=yt;if(!ft.auth||!ft.p256dh||!ft.endpoint)return;T={token:ft.fcmToken,createTime:null!==(dt=ft.createTime)&&void 0!==dt?dt:Date.now(),subscriptionOptions:{auth:ft.auth,p256dh:ft.p256dh,endpoint:ft.endpoint,swScope:ft.swScope,vapidKey:"string"==typeof ft.vapidKey?ft.vapidKey:Bi(ft.vapidKey)}}}else if(3===re){const ft=yt;T={token:ft.fcmToken,createTime:ft.createTime,subscriptionOptions:{auth:Bi(ft.auth),p256dh:Bi(ft.p256dh),endpoint:ft.endpoint,swScope:ft.swScope,vapidKey:Bi(ft.vapidKey)}}}else if(4===re){const ft=yt;T={token:ft.fcmToken,createTime:ft.createTime,subscriptionOptions:{auth:Bi(ft.auth),p256dh:Bi(ft.p256dh),endpoint:ft.endpoint,swScope:ft.swScope,vapidKey:Bi(ft.vapidKey)}}}}),function(re,Ie,$e,dt){return U.apply(this,arguments)})})).close(),yield(0,pe.Lj)($l),yield(0,pe.Lj)("fcm_vapid_details_db"),yield(0,pe.Lj)("undefined"),Wl(T)?T:null;var U}),Gl.apply(this,arguments)}function Wl(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:T}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const Io="firebase-messaging-store";let Ad=null;function Ii(){return Ad||(Ad=(0,pe.X3)("firebase-messaging-database",1,{upgrade:(D,T)=>{0===T&&D.createObjectStore(Io)}})),Ad}function Nu(D){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,O.Z)(function*(D){const T=La(D),U=yield(yield Ii()).transaction(Io).objectStore(Io).get(T);if(U)return U;{const Y=yield Am(D.appConfig.senderId);if(Y)return yield Js(D,Y),Y}})).apply(this,arguments)}function Js(D,T){return ku.apply(this,arguments)}function ku(){return(ku=(0,O.Z)(function*(D,T){const M=La(D),Y=(yield Ii()).transaction(Io,"readwrite");return yield Y.objectStore(Io).put(T,M),yield Y.done,T})).apply(this,arguments)}function Pu(D){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,O.Z)(function*(D){const T=La(D),U=(yield Ii()).transaction(Io,"readwrite");yield U.objectStore(Io).delete(T),yield U.done})).apply(this,arguments)}function La({appConfig:D}){return D.appId}const Nn=new se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ou(D,T){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,O.Z)(function*(D,T){var M;const U=yield On(D),Y=Vu(T),re={method:"POST",headers:U,body:JSON.stringify(Y)};let Ie;try{Ie=yield(yield fetch(Lu(D.appConfig),re)).json()}catch($e){throw Nn.create("token-subscribe-failed",{errorInfo:null===(M=$e)||void 0===M?void 0:M.toString()})}if(Ie.error)throw Nn.create("token-subscribe-failed",{errorInfo:Ie.error.message});if(!Ie.token)throw Nn.create("token-subscribe-no-token");return Ie.token})).apply(this,arguments)}function eo(D,T){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,O.Z)(function*(D,T){var M;const U=yield On(D),Y=Vu(T.subscriptionOptions),re={method:"PATCH",headers:U,body:JSON.stringify(Y)};let Ie;try{Ie=yield(yield fetch(`${Lu(D.appConfig)}/${T.token}`,re)).json()}catch($e){throw Nn.create("token-update-failed",{errorInfo:null===(M=$e)||void 0===M?void 0:M.toString()})}if(Ie.error)throw Nn.create("token-update-failed",{errorInfo:Ie.error.message});if(!Ie.token)throw Nn.create("token-update-no-token");return Ie.token})).apply(this,arguments)}function Yo(D,T){return xd.apply(this,arguments)}function xd(){return(xd=(0,O.Z)(function*(D,T){var M;const Y={method:"DELETE",headers:yield On(D)};try{const Ie=yield(yield fetch(`${Lu(D.appConfig)}/${T}`,Y)).json();if(Ie.error)throw Nn.create("token-unsubscribe-failed",{errorInfo:Ie.error.message})}catch(re){throw Nn.create("token-unsubscribe-failed",{errorInfo:null===(M=re)||void 0===M?void 0:M.toString()})}})).apply(this,arguments)}function Lu({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function On(D){return Va.apply(this,arguments)}function Va(){return(Va=(0,O.Z)(function*({appConfig:D,installations:T}){const M=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function Vu({p256dh:D,auth:T,endpoint:M,vapidKey:U}){const Y={web:{endpoint:M,auth:T,p256dh:D}};return U!==Xs&&(Y.web.applicationPubKey=U),Y}const Ua=6048e5;function Ir(D){return ql.apply(this,arguments)}function ql(){return(ql=(0,O.Z)(function*(D){const T=yield is(D.swRegistration,D.vapidKey),M={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:T.endpoint,auth:Bi(T.getKey("auth")),p256dh:Bi(T.getKey("p256dh"))},U=yield Nu(D.firebaseDependencies);if(U){if(Ba(U.subscriptionOptions,M))return Date.now()>=U.createTime+Ua?Zr(D,{token:U.token,createTime:Date.now(),subscriptionOptions:M}):U.token;try{yield Yo(D.firebaseDependencies,U.token)}catch(Y){console.warn(Y)}return Co(D.firebaseDependencies,M)}return Co(D.firebaseDependencies,M)})).apply(this,arguments)}function Qo(D){return to.apply(this,arguments)}function to(){return(to=(0,O.Z)(function*(D){const T=yield Nu(D.firebaseDependencies);T&&(yield Yo(D.firebaseDependencies,T.token),yield Pu(D.firebaseDependencies));const M=yield D.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function Zr(D,T){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,O.Z)(function*(D,T){try{const M=yield eo(D.firebaseDependencies,T),U=Object.assign(Object.assign({},T),{token:M,createTime:Date.now()});return yield Js(D.firebaseDependencies,U),M}catch(M){throw yield Qo(D),M}})).apply(this,arguments)}function Co(D,T){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,O.Z)(function*(D,T){const U={token:yield Ou(D,T),createTime:Date.now(),subscriptionOptions:T};return yield Js(D,U),U.token})).apply(this,arguments)}function is(D,T){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,O.Z)(function*(D,T){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Td(T)})})).apply(this,arguments)}function Ba(D,T){return T.vapidKey===D.vapidKey&&T.endpoint===D.endpoint&&T.auth===D.auth&&T.p256dh===D.p256dh}function it(D){const T={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Yl(D,T){if(!T.notification)return;D.notification={};const M=T.notification.title;M&&(D.notification.title=M);const U=T.notification.body;U&&(D.notification.body=U);const Y=T.notification.image;Y&&(D.notification.image=Y);const re=T.notification.icon;re&&(D.notification.icon=re)}(T,D),function tv(D,T){!T.data||(D.data=T.data)}(T,D),function Mm(D,T){var M,U,Y,re,Ie;if(!(T.fcmOptions||null!==(M=T.notification)&&void 0!==M&&M.click_action))return;D.fcmOptions={};const $e=null!==(Y=null===(U=T.fcmOptions)||void 0===U?void 0:U.link)&&void 0!==Y?Y:null===(re=T.notification)||void 0===re?void 0:re.click_action;$e&&(D.fcmOptions.link=$e);const dt=null===(Ie=T.fcmOptions)||void 0===Ie?void 0:Ie.analytics_label;dt&&(D.fcmOptions.analyticsLabel=dt)}(T,D),T}function Md(D){return"object"==typeof D&&!!D&&bd in D}function Vf(D,T){const M=[];for(let U=0;U<D.length;U++)M.push(D.charAt(U)),U<T.length&&M.push(T.charAt(U));return M.join("")}function ja(D){return Nn.create("missing-app-config-values",{valueName:D})}Vf("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Vf("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Rm{constructor(T,M,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Y=function Uf(D){if(!D||!D.options)throw ja("App Configuration Object");if(!D.name)throw ja("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:M}=D;for(const U of T)if(!M[U])throw ja(U);return{appName:D.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:Y,installations:M,analyticsProvider:U}}_delete(){return Promise.resolve()}}function be(D){return qt.apply(this,arguments)}function qt(){return(qt=(0,O.Z)(function*(D){var T;try{D.swRegistration=yield navigator.serviceWorker.register(Cd,{scope:Cs}),D.swRegistration.update().catch(()=>{})}catch(M){throw Nn.create("failed-service-worker-registration",{browserErrorMessage:null===(T=M)||void 0===T?void 0:T.message})}})).apply(this,arguments)}function Ha(D,T){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,O.Z)(function*(D,T){if(!T&&!D.swRegistration&&(yield be(D)),T||!D.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw Nn.create("invalid-sw-registration");D.swRegistration=T}})).apply(this,arguments)}function Zn(D,T){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,O.Z)(function*(D,T){T?D.vapidKey=T:D.vapidKey||(D.vapidKey=Xs)})).apply(this,arguments)}function ji(){return(ji=(0,O.Z)(function*(D,T){if(!navigator)throw Nn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Nn.create("permission-blocked");return yield Zn(D,T?.vapidKey),yield Ha(D,T?.serviceWorkerRegistration),Ir(D)})).apply(this,arguments)}function ju(D,T,M){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,O.Z)(function*(D,T,M){const U=Ql(T);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:M[bd],message_name:M[Lf],message_time:M[Hl],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ql(D){switch(D){case Ru.NOTIFICATION_CLICKED:return"notification_open";case Ru.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Xl(){return(Xl=(0,O.Z)(function*(D,T){const M=T.data;if(!M.isFirebaseMessaging)return;D.onMessageHandler&&M.messageType===Ru.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(it(M)):D.onMessageHandler.next(it(M)));const U=M.data;Md(U)&&"1"===U[Dd]&&(yield ju(D,M.messageType,U))})).apply(this,arguments)}const Jl="@firebase/messaging",no=D=>{const T=new Rm(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function Bf(D,T){return Xl.apply(this,arguments)}(T,M)),T},ea=D=>{const T=D.getProvider("messaging").getImmediate();return{getToken:U=>function Ci(D,T){return ji.apply(this,arguments)}(T,U)}};function bs(){return Rd.apply(this,arguments)}function Rd(){return(Rd=(0,O.Z)(function*(){try{yield(0,se.eu)()}catch{return!1}return typeof window<"u"&&(0,se.hl)()&&(0,se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function ta(){(0,ae._registerComponent)(new fe.wA("messaging",no,"PUBLIC")),(0,ae._registerComponent)(new fe.wA("messaging-internal",ea,"PRIVATE")),(0,ae.registerVersion)(Jl,"0.11.0"),(0,ae.registerVersion)(Jl,"0.11.0","esm2017")}();const ec="analytics",Wf="firebase_id",bo="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",$u="https://www.googletagmanager.com/gtag/js",sr=new ce.Yd("@firebase/analytics");function kd(D){return Promise.all(D.map(T=>T.catch(M=>M)))}function nc(D,T){const M=document.createElement("script");M.src=`${$u}?l=${D}&id=${T}`,M.async=!0,document.head.appendChild(M)}function Ds(D,T,M,U,Y,re){return an.apply(this,arguments)}function an(){return(an=(0,O.Z)(function*(D,T,M,U,Y,re){const Ie=U[Y];try{if(Ie)yield T[Ie];else{const dt=(yield kd(M)).find(Et=>Et.measurementId===Y);dt&&(yield T[dt.appId])}}catch($e){sr.error($e)}D("config",Y,re)})).apply(this,arguments)}function Pd(D,T,M,U,Y){return Do.apply(this,arguments)}function Do(){return(Do=(0,O.Z)(function*(D,T,M,U,Y){try{let re=[];if(Y&&Y.send_to){let Ie=Y.send_to;Array.isArray(Ie)||(Ie=[Ie]);const $e=yield kd(M);for(const dt of Ie){const Et=$e.find(ft=>ft.measurementId===dt),yt=Et&&T[Et.appId];if(!yt){re=[];break}re.push(yt)}}0===re.length&&(re=Object.values(T)),yield Promise.all(re),D("event",U,Y||{})}catch(re){sr.error(re)}})).apply(this,arguments)}function qf(D){const T=window.document.getElementsByTagName("script");for(const M of Object.values(T))if(M.src&&M.src.includes($u)&&M.src.includes(D))return M;return null}const or=new se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),To=new class Hi{constructor(T={},M=1e3){this.throttleMetadata=T,this.intervalMillis=M}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,M){this.throttleMetadata[T]=M}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function Od(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Yr(D){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,O.Z)(function*(D){var T;const{appId:M,apiKey:U}=D,Y={method:"GET",headers:Od(U)},re=bo.replace("{app-id}",M),Ie=yield fetch(re,Y);if(200!==Ie.status&&304!==Ie.status){let $e="";try{const dt=yield Ie.json();null!==(T=dt.error)&&void 0!==T&&T.message&&($e=dt.error.message)}catch{}throw or.create("config-fetch-failed",{httpStatus:Ie.status,responseMessage:$e})}return Ie.json()})).apply(this,arguments)}function Hn(D){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,O.Z)(function*(D,T=To,M){const{appId:U,apiKey:Y,measurementId:re}=D.options;if(!U)throw or.create("no-app-id");if(!Y){if(re)return{measurementId:re,appId:U};throw or.create("no-api-key")}const Ie=T.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},$e=new sc;return setTimeout((0,O.Z)(function*(){$e.abort()}),void 0!==M?M:6e4),ro({appId:U,apiKey:Y,measurementId:re},Ie,$e,T)})).apply(this,arguments)}function ro(D,T,M){return $a.apply(this,arguments)}function $a(){return($a=(0,O.Z)(function*(D,{throttleEndTimeMillis:T,backoffCount:M},U,Y=To){var re,Ie;const{appId:$e,measurementId:dt}=D;try{yield ic(U,T)}catch(Et){if(dt)return sr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${dt} provided in the "measurementId" field in the local Firebase config. [${null===(re=Et)||void 0===re?void 0:re.message}]`),{appId:$e,measurementId:dt};throw Et}try{const Et=yield Yr(D);return Y.deleteThrottleMetadata($e),Et}catch(Et){const yt=Et;if(!Zf(yt)){if(Y.deleteThrottleMetadata($e),dt)return sr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${dt} provided in the "measurementId" field in the local Firebase config. [${yt?.message}]`),{appId:$e,measurementId:dt};throw Et}const ft=503===Number(null===(Ie=yt?.customData)||void 0===Ie?void 0:Ie.httpStatus)?(0,se.$s)(M,Y.intervalMillis,30):(0,se.$s)(M,Y.intervalMillis),Dn={throttleEndTimeMillis:Date.now()+ft,backoffCount:M+1};return Y.setThrottleMetadata($e,Dn),sr.debug(`Calling attemptFetch again in ${ft} millis`),ro(D,Dn,U,Y)}})).apply(this,arguments)}function ic(D,T){return new Promise((M,U)=>{const Y=Math.max(T-Date.now(),0),re=setTimeout(M,Y);D.addEventListener(()=>{clearTimeout(re),U(or.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function Zf(D){if(!(D instanceof se.ZR&&D.customData))return!1;const T=Number(D.customData.httpStatus);return 429===T||500===T||503===T||504===T}class sc{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let zu,oo;function Ss(){return(Ss=(0,O.Z)(function*(D,T,M,U,Y){if(Y&&Y.global)D("event",M,U);else{const re=yield T;D("event",M,Object.assign(Object.assign({},U),{send_to:re}))}})).apply(this,arguments)}function Ld(D){oo=D}function oc(D){zu=D}function Ku(){return Yf.apply(this,arguments)}function Yf(){return(Yf=(0,O.Z)(function*(){var D;if(!(0,se.hl)())return sr.warn(or.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,se.eu)()}catch(T){return sr.warn(or.create("indexeddb-unavailable",{errorInfo:null===(D=T)||void 0===D?void 0:D.toString()}).message),!1}return!0})).apply(this,arguments)}function Zu(){return(Zu=(0,O.Z)(function*(D,T,M,U,Y,re,Ie){var $e;const dt=Hn(D);dt.then(Fr=>{M[Fr.measurementId]=Fr.appId,D.options.measurementId&&Fr.measurementId!==D.options.measurementId&&sr.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${Fr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Fr=>sr.error(Fr)),T.push(dt);const Et=Ku().then(Fr=>{if(Fr)return U.getId()}),[yt,ft]=yield Promise.all([dt,Et]);qf(re)||nc(re,yt.measurementId),oo&&(Y("consent","default",oo),Ld(void 0)),Y("js",new Date);const Dn=null!==($e=Ie?.config)&&void 0!==$e?$e:{};return Dn.origin="firebase",Dn.update=!0,null!=ft&&(Dn[Wf]=ft),Y("config",yt.measurementId,Dn),zu&&(Y("set",zu),oc(void 0)),yt.measurementId})).apply(this,arguments)}class ac{constructor(T){this.app=T}_delete(){return delete Gi[this.app.options.appId],Promise.resolve()}}let Gi={},ia=[];const za={};let Yu,Wi,ao="dataLayer",uo=!1;function Qu(D,T,M){!function Pm(){const D=[];if((0,se.ru)()&&D.push("This is a browser extension environment."),(0,se.zI)()||D.push("Cookies are not available."),D.length>0){const T=D.map((U,Y)=>`(${Y+1}) ${U}`).join(" "),M=or.create("invalid-analytics-context",{errorInfo:T});sr.warn(M.message)}}();const U=D.options.appId;if(!U)throw or.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw or.create("no-api-key");sr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Gi[U])throw or.create("already-exists",{id:U});if(!uo){!function Yn(D){let T=[];Array.isArray(window[D])?T=window[D]:window[D]=T}(ao);const{wrappedGtag:re,gtagCore:Ie}=function zf(D,T,M,U,Y){let re=function(...Ie){window[U].push(arguments)};return window[Y]&&"function"==typeof window[Y]&&(re=window[Y]),window[Y]=function rc(D,T,M,U){function re(){return(re=(0,O.Z)(function*(Ie,$e,dt){try{"event"===Ie?yield Pd(D,T,M,$e,dt):"config"===Ie?yield Ds(D,T,M,U,$e,dt):"consent"===Ie?D("consent","update",dt):D("set",$e)}catch(Et){sr.error(Et)}})).apply(this,arguments)}return function Y(Ie,$e,dt){return re.apply(this,arguments)}}(re,D,T,M),{gtagCore:re,wrappedGtag:window[Y]}}(Gi,ia,za,ao,"gtag");Wi=re,Yu=Ie,uo=!0}return Gi[U]=function Qr(D,T,M,U,Y,re,Ie){return Zu.apply(this,arguments)}(D,ia,za,T,Yu,ao,M),new ac(D)}function lc(){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,O.Z)(function*(){if((0,se.ru)()||!(0,se.zI)()||!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}const As="@firebase/analytics";!function Ka(){(0,ae._registerComponent)(new fe.wA(ec,(T,{options:M})=>Qu(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,ae._registerComponent)(new fe.wA("analytics-internal",function D(T){try{const M=T.getProvider(ec).getImmediate();return{logEvent:(U,Y,re)=>function Vd(D,T,M,U){D=(0,se.m9)(D),function Fd(D,T,M,U,Y){return Ss.apply(this,arguments)}(Wi,Gi[D.app.options.appId],T,M,U).catch(Y=>sr.error(Y))}(M,U,Y,re)}}catch(M){throw or.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,ae.registerVersion)(As,"0.8.4"),(0,ae.registerVersion)(As,"0.8.4","esm2017")}();var dc=L(4408),lo=L(7565);const jd=new class Bd extends lo.v{}(class Ud extends dc.o{constructor(T,M){super(T,M),this.scheduler=T,this.work=M}schedule(T,M=0){return M>0?super.schedule(T,M):(this.delay=M,this.state=T,this.scheduler.flush(this),this)}execute(T,M){return M>0||this.closed?super.execute(T,M):this._execute(T,M)}requestAsyncId(T,M,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(T,M,U):(T.flush(this),0)}});var ep=L(4986),hc=L(8505),Ao=L(5363),tp=L(9468);const rv=new p.GfV("7.5.0"),np="__angularfire_symbol__analyticsIsSupportedValue",rp="__angularfire_symbol__analyticsIsSupported",co="__angularfire_symbol__remoteConfigIsSupportedValue",Hd="__angularfire_symbol__remoteConfigIsSupported",ip="__angularfire_symbol__messagingIsSupportedValue",$n="__angularfire_symbol__messagingIsSupported";function kn(D,T,M){if(T){if(1===T.length)return T[0];const re=T.filter(Ie=>Ie.app===M);if(1===re.length)return re[0]}return M.container.getProvider(D).getImmediate({optional:!0})}globalThis[rp]||(globalThis[rp]=lc().then(D=>globalThis[np]=D).catch(()=>globalThis[np]=!1)),globalThis[$n]||(globalThis[$n]=bs().then(D=>globalThis[ip]=D).catch(()=>globalThis[ip]=!1)),globalThis[Hd]||(globalThis[Hd]=kr().then(D=>globalThis[co]=D).catch(()=>globalThis[co]=!1));const Or=(D,T)=>{const M=T?[T]:(0,J.C6)(),U=[];return M.forEach(Y=>{Y.container.getProvider(D).instances.forEach(Ie=>{U.includes(Ie)||U.push(Ie)})}),U};function Kt(){}class Xe{constructor(T,M=jd){this.zone=T,this.delegate=M}now(){return this.delegate.now()}schedule(T,M,U){const Y=this.zone;return this.delegate.schedule(function(Ie){Y.runGuarded(()=>{T.apply(this,[Ie])})},M,U)}}class Cr{constructor(T){this.zone=T,this.task=null}call(T,M){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Kt,{},Kt,Kt)),M.pipe((0,hc.b)({next:U,complete:U,error:U})).subscribe(T).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let el=(()=>{class D{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new Xe(Zone.current)),this.insideAngular=M.run(()=>new Xe(Zone.current,ep.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(M){return new(M||D)(p.LFG(p.R0b))},D.\u0275prov=p.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function bi(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Qn(D){return D.pipe((0,Ao.Q)(bi().outsideAngular))}function Ke(D){return bi(),function tl(D){return function(M){return(M=M.lift(new Cr(D.ngZone))).pipe((0,tp.R)(D.outsideAngular),(0,Ao.Q)(D.insideAngular))}}(bi())(D)}},2090:(lt,Ce,L)=>{L.d(Ce,{$s:()=>tt,BH:()=>hn,DV:()=>vi,Dv:()=>An,G6:()=>Re,GJ:()=>_o,L:()=>pe,LL:()=>en,Pz:()=>sn,Sg:()=>Pt,UG:()=>Ye,UI:()=>Ks,US:()=>fe,Wj:()=>vr,Wl:()=>wn,Yr:()=>Ee,ZB:()=>G,ZR:()=>gt,aH:()=>ct,b$:()=>Ae,cI:()=>mt,dS:()=>ln,eu:()=>Oe,g5:()=>O,gK:()=>Cn,gQ:()=>xr,h$:()=>ce,hl:()=>je,hu:()=>J,jU:()=>at,lb:()=>Wo,m9:()=>Ot,ne:()=>Zs,p$:()=>$,pd:()=>Sn,r3:()=>qs,ru:()=>ge,tV:()=>me,uI:()=>Se,ug:()=>ts,vZ:()=>_n,w1:()=>Le,w9:()=>Ar,xO:()=>ys,xb:()=>zr,z$:()=>Be,zI:()=>H,zd:()=>Fi});const J=function(W,j){if(!W)throw O(j)},O=function(W){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+W)},ae=function(W){const j=[];let Z=0;for(let ye=0;ye<W.length;ye++){let te=W.charCodeAt(ye);te<128?j[Z++]=te:te<2048?(j[Z++]=te>>6|192,j[Z++]=63&te|128):55296==(64512&te)&&ye+1<W.length&&56320==(64512&W.charCodeAt(ye+1))?(te=65536+((1023&te)<<10)+(1023&W.charCodeAt(++ye)),j[Z++]=te>>18|240,j[Z++]=te>>12&63|128,j[Z++]=te>>6&63|128,j[Z++]=63&te|128):(j[Z++]=te>>12|224,j[Z++]=te>>6&63|128,j[Z++]=63&te|128)}return j},fe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(W,j){if(!Array.isArray(W))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Z=j?this.byteToCharMapWebSafe_:this.byteToCharMap_,ye=[];for(let te=0;te<W.length;te+=3){const st=W[te],Vt=te+1<W.length,zt=Vt?W[te+1]:0,xn=te+2<W.length,wt=xn?W[te+2]:0;let nr=(15&zt)<<2|wt>>6,zo=63&wt;xn||(zo=64,Vt||(nr=64)),ye.push(Z[st>>2],Z[(3&st)<<4|zt>>4],Z[nr],Z[zo])}return ye.join("")},encodeString(W,j){return this.HAS_NATIVE_SUPPORT&&!j?btoa(W):this.encodeByteArray(ae(W),j)},decodeString(W,j){return this.HAS_NATIVE_SUPPORT&&!j?atob(W):function(W){const j=[];let Z=0,ye=0;for(;Z<W.length;){const te=W[Z++];if(te<128)j[ye++]=String.fromCharCode(te);else if(te>191&&te<224){const st=W[Z++];j[ye++]=String.fromCharCode((31&te)<<6|63&st)}else if(te>239&&te<365){const xn=((7&te)<<18|(63&W[Z++])<<12|(63&W[Z++])<<6|63&W[Z++])-65536;j[ye++]=String.fromCharCode(55296+(xn>>10)),j[ye++]=String.fromCharCode(56320+(1023&xn))}else{const st=W[Z++],Vt=W[Z++];j[ye++]=String.fromCharCode((15&te)<<12|(63&st)<<6|63&Vt)}}return j.join("")}(this.decodeStringToByteArray(W,j))},decodeStringToByteArray(W,j){this.init_();const Z=j?this.charToByteMapWebSafe_:this.charToByteMap_,ye=[];for(let te=0;te<W.length;){const st=Z[W.charAt(te++)],zt=te<W.length?Z[W.charAt(te)]:0;++te;const wt=te<W.length?Z[W.charAt(te)]:64;++te;const Ht=te<W.length?Z[W.charAt(te)]:64;if(++te,null==st||null==zt||null==wt||null==Ht)throw Error();ye.push(st<<2|zt>>4),64!==wt&&(ye.push(zt<<4&240|wt>>2),64!==Ht&&ye.push(wt<<6&192|Ht))}return ye},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let W=0;W<this.ENCODED_VALS.length;W++)this.byteToCharMap_[W]=this.ENCODED_VALS.charAt(W),this.charToByteMap_[this.byteToCharMap_[W]]=W,this.byteToCharMapWebSafe_[W]=this.ENCODED_VALS_WEBSAFE.charAt(W),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[W]]=W,W>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(W)]=W,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(W)]=W)}}},ce=function(W){const j=ae(W);return fe.encodeByteArray(j,!0)},pe=function(W){return ce(W).replace(/\./g,"")},me=function(W){try{return fe.decodeString(W,!0)}catch(j){console.error("base64Decode failed: ",j)}return null};function $(W){return G(void 0,W)}function G(W,j){if(!(j instanceof Object))return j;switch(j.constructor){case Date:return new Date(j.getTime());case Object:void 0===W&&(W={});break;case Array:W=[];break;default:return j}for(const Z in j)!j.hasOwnProperty(Z)||!Q(Z)||(W[Z]=G(W[Z],j[Z]));return W}function Q(W){return"__proto__"!==W}function Be(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Se(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Be())}function Ye(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function at(){return"object"==typeof self&&self.self===self}function ge(){const W="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof W&&void 0!==W.id}function Ae(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Le(){const W=Be();return W.indexOf("MSIE ")>=0||W.indexOf("Trident/")>=0}function Ee(){return!1}function Re(){return!Ye()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function je(){return"object"==typeof indexedDB}function Oe(){return new Promise((W,j)=>{try{let Z=!0;const ye="validate-browser-context-for-indexeddb-analytics-module",te=self.indexedDB.open(ye);te.onsuccess=()=>{te.result.close(),Z||self.indexedDB.deleteDatabase(ye),W(!0)},te.onupgradeneeded=()=>{Z=!1},te.onerror=()=>{var st;j((null===(st=te.error)||void 0===st?void 0:st.message)||"")}}catch(Z){j(Z)}})}function H(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const ne=()=>{try{return function we(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const W=process.env.__FIREBASE_DEFAULTS__;return W?JSON.parse(W):void 0})()||(()=>{if(typeof document>"u")return;let W;try{W=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const j=W&&me(W[1]);return j&&JSON.parse(j)})()}catch(W){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${W}`)}},ct=()=>{var W;return null===(W=ne())||void 0===W?void 0:W.config},sn=W=>{var j;return null===(j=ne())||void 0===j?void 0:j[`_${W}`]};class hn{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((j,Z)=>{this.resolve=j,this.reject=Z})}wrapCallback(j){return(Z,ye)=>{Z?this.reject(Z):this.resolve(ye),"function"==typeof j&&(this.promise.catch(()=>{}),1===j.length?j(Z):j(Z,ye))}}}function Pt(W,j){if(W.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ye=j||"demo-project",te=W.iat||0,st=W.sub||W.user_id;if(!st)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Vt=Object.assign({iss:`https://securetoken.google.com/${ye}`,aud:ye,iat:te,exp:te+3600,auth_time:te,sub:st,user_id:st,firebase:{sign_in_provider:"custom",identities:{}}},W);return[pe(JSON.stringify({alg:"none",type:"JWT"})),pe(JSON.stringify(Vt)),""].join(".")}class gt extends Error{constructor(j,Z,ye){super(Z),this.code=j,this.customData=ye,this.name="FirebaseError",Object.setPrototypeOf(this,gt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,en.prototype.create)}}class en{constructor(j,Z,ye){this.service=j,this.serviceName=Z,this.errors=ye}create(j,...Z){const ye=Z[0]||{},te=`${this.service}/${j}`,st=this.errors[j],Vt=st?function Sr(W,j){return W.replace(Gr,(Z,ye)=>{const te=j[ye];return null!=te?String(te):`<${ye}?>`})}(st,ye):"Error";return new gt(te,`${this.serviceName}: ${Vt} (${te}).`,ye)}}const Gr=/\{\$([^}]+)}/g;function mt(W){return JSON.parse(W)}function wn(W){return JSON.stringify(W)}const yi=function(W){let j={},Z={},ye={},te="";try{const st=W.split(".");j=mt(me(st[0])||""),Z=mt(me(st[1])||""),te=st[2],ye=Z.d||{},delete Z.d}catch{}return{header:j,claims:Z,data:ye,signature:te}},Ar=function(W){const Z=yi(W).claims;return!!Z&&"object"==typeof Z&&Z.hasOwnProperty("iat")},_o=function(W){const j=yi(W).claims;return"object"==typeof j&&!0===j.admin};function qs(W,j){return Object.prototype.hasOwnProperty.call(W,j)}function vi(W,j){if(Object.prototype.hasOwnProperty.call(W,j))return W[j]}function zr(W){for(const j in W)if(Object.prototype.hasOwnProperty.call(W,j))return!1;return!0}function Ks(W,j,Z){const ye={};for(const te in W)Object.prototype.hasOwnProperty.call(W,te)&&(ye[te]=j.call(Z,W[te],te,W));return ye}function _n(W,j){if(W===j)return!0;const Z=Object.keys(W),ye=Object.keys(j);for(const te of Z){if(!ye.includes(te))return!1;const st=W[te],Vt=j[te];if(ci(st)&&ci(Vt)){if(!_n(st,Vt))return!1}else if(st!==Vt)return!1}for(const te of ye)if(!Z.includes(te))return!1;return!0}function ci(W){return null!==W&&"object"==typeof W}function ys(W){const j=[];for(const[Z,ye]of Object.entries(W))Array.isArray(ye)?ye.forEach(te=>{j.push(encodeURIComponent(Z)+"="+encodeURIComponent(te))}):j.push(encodeURIComponent(Z)+"="+encodeURIComponent(ye));return j.length?"&"+j.join("&"):""}function Fi(W){const j={};return W.replace(/^\?/,"").split("&").forEach(ye=>{if(ye){const[te,st]=ye.split("=");j[decodeURIComponent(te)]=decodeURIComponent(st)}}),j}function Sn(W){const j=W.indexOf("?");if(!j)return"";const Z=W.indexOf("#",j);return W.substring(j,Z>0?Z:void 0)}class xr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let j=1;j<this.blockSize;++j)this.pad_[j]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(j,Z){Z||(Z=0);const ye=this.W_;if("string"==typeof j)for(let Ht=0;Ht<16;Ht++)ye[Ht]=j.charCodeAt(Z)<<24|j.charCodeAt(Z+1)<<16|j.charCodeAt(Z+2)<<8|j.charCodeAt(Z+3),Z+=4;else for(let Ht=0;Ht<16;Ht++)ye[Ht]=j[Z]<<24|j[Z+1]<<16|j[Z+2]<<8|j[Z+3],Z+=4;for(let Ht=16;Ht<80;Ht++){const nr=ye[Ht-3]^ye[Ht-8]^ye[Ht-14]^ye[Ht-16];ye[Ht]=4294967295&(nr<<1|nr>>>31)}let wt,hr,te=this.chain_[0],st=this.chain_[1],Vt=this.chain_[2],zt=this.chain_[3],xn=this.chain_[4];for(let Ht=0;Ht<80;Ht++){Ht<40?Ht<20?(wt=zt^st&(Vt^zt),hr=1518500249):(wt=st^Vt^zt,hr=1859775393):Ht<60?(wt=st&Vt|zt&(st|Vt),hr=2400959708):(wt=st^Vt^zt,hr=3395469782);const nr=(te<<5|te>>>27)+wt+xn+hr+ye[Ht]&4294967295;xn=zt,zt=Vt,Vt=4294967295&(st<<30|st>>>2),st=te,te=nr}this.chain_[0]=this.chain_[0]+te&4294967295,this.chain_[1]=this.chain_[1]+st&4294967295,this.chain_[2]=this.chain_[2]+Vt&4294967295,this.chain_[3]=this.chain_[3]+zt&4294967295,this.chain_[4]=this.chain_[4]+xn&4294967295}update(j,Z){if(null==j)return;void 0===Z&&(Z=j.length);const ye=Z-this.blockSize;let te=0;const st=this.buf_;let Vt=this.inbuf_;for(;te<Z;){if(0===Vt)for(;te<=ye;)this.compress_(j,te),te+=this.blockSize;if("string"==typeof j){for(;te<Z;)if(st[Vt]=j.charCodeAt(te),++Vt,++te,Vt===this.blockSize){this.compress_(st),Vt=0;break}}else for(;te<Z;)if(st[Vt]=j[te],++Vt,++te,Vt===this.blockSize){this.compress_(st),Vt=0;break}}this.inbuf_=Vt,this.total_+=Z}digest(){const j=[];let Z=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let te=this.blockSize-1;te>=56;te--)this.buf_[te]=255&Z,Z/=256;this.compress_(this.buf_);let ye=0;for(let te=0;te<5;te++)for(let st=24;st>=0;st-=8)j[ye]=this.chain_[te]>>st&255,++ye;return j}}function Zs(W,j){const Z=new Mt(W,j);return Z.subscribe.bind(Z)}class Mt{constructor(j,Z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Z,this.task.then(()=>{j(this)}).catch(ye=>{this.error(ye)})}next(j){this.forEachObserver(Z=>{Z.next(j)})}error(j){this.forEachObserver(Z=>{Z.error(j)}),this.close(j)}complete(){this.forEachObserver(j=>{j.complete()}),this.close()}subscribe(j,Z,ye){let te;if(void 0===j&&void 0===Z&&void 0===ye)throw new Error("Missing Observer.");te=function Tt(W,j){if("object"!=typeof W||null===W)return!1;for(const Z of j)if(Z in W&&"function"==typeof W[Z])return!0;return!1}(j,["next","error","complete"])?j:{next:j,error:Z,complete:ye},void 0===te.next&&(te.next=vs),void 0===te.error&&(te.error=vs),void 0===te.complete&&(te.complete=vs);const st=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?te.error(this.finalError):te.complete()}catch{}}),this.observers.push(te),st}unsubscribeOne(j){void 0===this.observers||void 0===this.observers[j]||(delete this.observers[j],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(j){if(!this.finalized)for(let Z=0;Z<this.observers.length;Z++)this.sendOne(Z,j)}sendOne(j,Z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[j])try{Z(this.observers[j])}catch(ye){typeof console<"u"&&console.error&&console.error(ye)}})}close(j){this.finalized||(this.finalized=!0,void 0!==j&&(this.finalError=j),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vs(){}const An=function(W,j,Z,ye){let te;if(ye<j?te="at least "+j:ye>Z&&(te=0===Z?"none":"no more than "+Z),te)throw new Error(W+" failed: Was called with "+ye+(1===ye?" argument.":" arguments.")+" Expects "+te+".")};function Cn(W,j){return`${W} failed: ${j} argument `}function vr(W,j,Z,ye){if((!ye||Z)&&"function"!=typeof Z)throw new Error(Cn(W,j)+"must be a valid function.")}function Wo(W,j,Z,ye){if((!ye||Z)&&("object"!=typeof Z||null===Z))throw new Error(Cn(W,j)+"must be a valid context object.")}const ln=function(W){const j=[];let Z=0;for(let ye=0;ye<W.length;ye++){let te=W.charCodeAt(ye);if(te>=55296&&te<=56319){const st=te-55296;ye++,J(ye<W.length,"Surrogate pair missing trail surrogate."),te=65536+(st<<10)+(W.charCodeAt(ye)-56320)}te<128?j[Z++]=te:te<2048?(j[Z++]=te>>6|192,j[Z++]=63&te|128):te<65536?(j[Z++]=te>>12|224,j[Z++]=te>>6&63|128,j[Z++]=63&te|128):(j[Z++]=te>>18|240,j[Z++]=te>>12&63|128,j[Z++]=te>>6&63|128,j[Z++]=63&te|128)}return j},ts=function(W){let j=0;for(let Z=0;Z<W.length;Z++){const ye=W.charCodeAt(Z);ye<128?j++:ye<2048?j+=2:ye>=55296&&ye<=56319?(j+=4,Z++):j+=3}return j};function tt(W,j=1e3,Z=2){const ye=j*Math.pow(Z,W),te=Math.round(.5*ye*(Math.random()-.5)*2);return Math.min(144e5,ye+te)}function Ot(W){return W&&W._delegate?W._delegate:W}},3591:(lt,Ce,L)=>{var p=L(4650);let J=null;function O(){return J}class fe{}const ce=new p.OlP("DocumentToken");let pe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return function me(){return(0,p.LFG)(G)}()},providedIn:"platform"}),n})();const $=new p.OlP("Location Initialized");let G=(()=>{class n extends pe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){Q()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){Q()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ce))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function Be(){return new G((0,p.LFG)(ce))}()},providedIn:"platform"}),n})();function Q(){return!!window.history.pushState}function Se(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ye(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function at(n){return n&&"?"!==n[0]?"?"+n:n}let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(De)},providedIn:"root"}),n})();const Ae=new p.OlP("appBaseHref");let De=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,p.f3M)(ce).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Se(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+at(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+at(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+at(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(pe),p.LFG(Ae,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Le=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Se(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+at(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+at(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(pe),p.LFG(Ae,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Me=(()=>{class n{constructor(t){this._subject=new p.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Ye(je(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+at(r))}normalize(t){return n.stripTrailingSlash(function Re(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,je(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+at(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+at(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=at,n.joinWithSlash=Se,n.stripTrailingSlash=Ye,n.\u0275fac=function(t){return new(t||n)(p.LFG(ge))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function Ee(){return new Me((0,p.LFG)(ge))}()},providedIn:"root"}),n})();function je(n){return n.replace(/\/index.html$/,"")}function wr(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}let qr=(()=>{class n{constructor(t,r,i,a){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=a,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,p.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,p.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.ZZ4),p.Y36(p.aQg),p.Y36(p.SBq),p.Y36(p.Qsj))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class Nr{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ws=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Nr(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===a?void 0:a);else if(null!==a){const h=r.get(a);r.move(h,l),Rn(h,i)}});for(let i=0,a=r.length;i<a;i++){const h=r.get(i).context;h.index=i,h.count=a,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Rn(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Rn(n,e){n.context.$implicit=e.item}let En=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new yo,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Ys("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Ys("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class yo{constructor(){this.$implicit=null,this.ngIf=null}}function Ys(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,p.AaK)(e)}'.`)}let Bi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();function Gl(n){return"server"===n}let Io=(()=>{class n{}return n.\u0275prov=(0,p.Yz7)({token:n,providedIn:"root",factory:()=>new Ad((0,p.LFG)(ce),window)}),n})();class Ad{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Nu(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ii(this.window.history)||Ii(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ii(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Js{}class kd extends fe{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class nc extends kd{static makeCurrent(){!function se(n){J||(J=n)}(new nc)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Ds(){return Yn=Yn||document.querySelector("base"),Yn?Yn.getAttribute("href"):null}();return null==t?null:function Pd(n){an=an||document.createElement("a"),an.setAttribute("href",n);const e=an.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Yn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return wr(document.cookie,e)}}let an,Yn=null;const Do=new p.OlP("TRANSITION_ID"),zf=[{provide:p.ip1,useFactory:function rc(n,e,t){return()=>{t.get(p.CZH).donePromise.then(()=>{const r=O(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[Do,ce,p.zs3],multi:!0}];let Kf=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const or=new p.OlP("EventManagerPlugins");let ss=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(or),p.LFG(p.R0b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class Gu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=O().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Hi=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),To=(()=>{class n extends Hi{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const l=this._doc.createElement("style");l.textContent=a,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Od),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Od))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ce))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function Od(n){O().remove(n)}const Yr={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ts=/%COMP%/g;function sc(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?sc(n,i,t):(i=i.replace(Ts,n),t.push(i))}return t}function zu(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Ss=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Ga(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case p.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new io(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case p.ifc.ShadowDom:return new qu(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=sc(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ss),p.LFG(To),p.LFG(p.AFp))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class Ga{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Yr[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Wa(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Wa(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=Yr[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Yr[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(p.JOm.DashCase|p.JOm.Important)?e.style.setProperty(t,r,i&p.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&p.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,zu(r)):this.eventManager.addEventListener(e,t,zu(r))}}function Wa(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class io extends Ga{constructor(e,t,r,i){super(e),this.component=r;const a=sc(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function ic(n){return"_ngcontent-%COMP%".replace(Ts,n)}(i+"-"+r.id),this.hostAttr=function Zf(n){return"_nghost-%COMP%".replace(Ts,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class qu extends Ga{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=sc(i.id,i.styles,[]);for(let l=0;l<a.length;l++){const h=document.createElement("style");h.textContent=a[l],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let so=(()=>{class n extends Gu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ce))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const ra=["alt","control","meta","shift"],oo={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ld={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let oc=(()=>{class n extends Gu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="",h=r.indexOf("code");if(h>-1&&(r.splice(h,1),l="code."),ra.forEach(w=>{const b=r.indexOf(w);b>-1&&(r.splice(b,1),l+=w+".")}),l+=a,0!=r.length||0===a.length)return null;const _={};return _.domEventName=i,_.fullKey=l,_}static matchEventFullKeyCode(t,r){let i=oo[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),ra.forEach(l=>{l!==i&&(0,Ld[l])(t)&&(a+=l+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ce))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const uc=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:"browser"},{provide:p.g9A,useValue:function Gi(){nc.makeCurrent()},multi:!0},{provide:ce,useFactory:function za(){return(0,p.RDi)(document),document},deps:[]}]),Yu=new p.OlP(""),Wi=[{provide:p.rWj,useClass:class qf{addToWindow(e){p.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},p.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(r=>{const i=p.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const h=function(_){l=l||_,a--,0==a&&r(l)};i.forEach(function(_){_.whenStable(h)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:p.lri,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]}],uo=[{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function ia(){return new p.qLn},deps:[]},{provide:or,useClass:so,multi:!0,deps:[ce,p.R0b,p.Lbi]},{provide:or,useClass:oc,multi:!0,deps:[ce]},{provide:Ss,useClass:Ss,deps:[ss,To,p.AFp]},{provide:p.FYo,useExisting:Ss},{provide:Hi,useExisting:To},{provide:To,useClass:To,deps:[ce]},{provide:ss,useClass:ss,deps:[or,p.R0b]},{provide:Js,useClass:Kf,deps:[]},[]];let Qf=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:p.AFp,useValue:t.appId},{provide:Do,useExisting:p.AFp},zf]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Yu,12))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[...uo,...Wi],imports:[Bi,p.hGG]}),n})(),lc=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ce))},n.\u0275prov=p.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Xf(){return new lc((0,p.LFG)(ce))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;const pc_config={apiKey:"AIzaSyB-MFP8032_sS3zKTq75A0OjuaObpAwDfo",authDomain:"minimus-4d4e9.firebaseapp.com",projectId:"minimus-4d4e9",storageBucket:"minimus-4d4e9.appspot.com",messagingSenderId:"323639367331",appId:"1:323639367331:web:e8e9a8081230459e4a5116",measurementId:"G-4VL77V8MMR"};var ar=L(2011),kn=L(7579),Or=L(7669),Kt=L(8996);function Xe(...n){const e=(0,Or.yG)(n);return(0,Kt.D)(n,e)}var Cr=L(9751),el=L(6451),bi=L(5363),Mo=L(8421),vn=L(4482),Qn=L(5403);function bn(n,e){return(0,vn.e)((t,r)=>{let i=null,a=0,l=!1;const h=()=>l&&!i&&r.complete();t.subscribe((0,Qn.x)(r,_=>{i?.unsubscribe();let w=0;const b=a++;(0,Mo.Xf)(n(_,b)).subscribe(i=(0,Qn.x)(r,A=>r.next(e?e(_,A,b,w++):A),()=>{i=null,h()}))},()=>{l=!0,h()}))})}var Ke=L(4004),tl=L(6063);class oa extends kn.x{constructor(e=1/0,t=1/0,r=tl.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let h=0;for(let _=1;_<r.length&&r[_]<=l;_+=2)h=_;h&&r.splice(0,h+1)}}}var Om=L(3099);function D(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,Om.B)({connector:()=>new oa(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const M=(0,L(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function U(n,e){return(0,vn.e)((t,r)=>{let i=0;t.subscribe((0,Qn.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var Y=L(515);function re(n){return n<=0?()=>Y.E:(0,vn.e)((e,t)=>{let r=0;e.subscribe((0,Qn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Ie(n){return(0,vn.e)((e,t)=>{let r=!1;e.subscribe((0,Qn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function $e(n=dt){return(0,vn.e)((e,t)=>{let r=!1;e.subscribe((0,Qn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function dt(){return new M}var Et=L(4671);function yt(n,e){const t=arguments.length>=2;return r=>r.pipe(n?U((i,a)=>n(i,a,r)):Et.y,re(1),t?Ie(e):$e(()=>new M))}var ft=L(576);function Dn(n,e){return(0,ft.m)(e)?bn(()=>n,e):bn(()=>n)}var Fr=L(9468),$t=L(5813);L(5867);var _e=L(5861),Di=L(9681),as=L(4859),P=L(2090),qi=L(1877);const up=new Map,Gd={activated:!1,tokenObservers:[]},DI={initialized:!1,enabled:!1};function Jr(n){return up.get(n)||Object.assign({},Gd)}function Wd(){return DI}class mc{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,_e.Z)(function*(){t.stop();try{t.pending=new P.BH,yield function Bm(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new P.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ei=new P.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function jm(n){if(!Jr(n).activated)throw ei.create("use-before-activation",{appName:n.name})}function Kd(n,e){return yc.apply(this,arguments)}function yc(){return(yc=(0,_e.Z)(function*({url:n,body:e},t){var r,i;const a={"Content-Type":"application/json"},l=t.getImmediate({optional:!0});if(l){const F=yield l.getHeartbeatsHeader();F&&(a["X-Firebase-Client"]=F)}const h={method:"POST",body:JSON.stringify(e),headers:a};let _,w;try{_=yield fetch(n,h)}catch(F){throw ei.create("fetch-network-error",{originalErrorMessage:null===(r=F)||void 0===r?void 0:r.message})}if(200!==_.status)throw ei.create("fetch-status-error",{httpStatus:_.status});try{w=yield _.json()}catch(F){throw ei.create("fetch-parse-error",{originalErrorMessage:null===(i=F)||void 0===i?void 0:i.message})}const b=w.ttl.match(/^([\d.]+)(s)$/);if(!b||!b[2]||isNaN(Number(b[1])))throw ei.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${w.ttl}`});const A=1e3*Number(b[1]),N=Date.now();return{token:w.token,expireTimeMillis:N+A,issuedAtTimeMillis:N}})).apply(this,arguments)}function av(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Zd="firebase-app-check-store";let nl=null;function hp(){return nl||(nl=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var a;e(ei.create("storage-open",{originalErrorMessage:null===(a=i.target.error)||void 0===a?void 0:a.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(Zd,{keyPath:"compositeKey"})}}catch(r){e(ei.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),nl)}function wc(){return(wc=(0,_e.Z)(function*(n,e){const r=(yield hp()).transaction(Zd,"readwrite"),a=r.objectStore(Zd).put({compositeKey:n,value:e});return new Promise((l,h)=>{a.onsuccess=_=>{l()},r.onerror=_=>{var w;h(ei.create("storage-set",{originalErrorMessage:null===(w=_.target.error)||void 0===w?void 0:w.message}))}})})).apply(this,arguments)}const Ic=new qi.Yd("@firebase/app-check");function _p(n,e){return(0,P.hl)()?function ti(n,e){return function fp(n,e){return wc.apply(this,arguments)}(function Ec(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Ic.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Yd(){return Wd().enabled}function vp(){return wp.apply(this,arguments)}function wp(){return(wp=(0,_e.Z)(function*(){const n=Wd();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Ep={error:"UNKNOWN_ERROR"};function lv(n){return P.US.encodeString(JSON.stringify(n),!1)}function il(n){return aa.apply(this,arguments)}function aa(){return(aa=(0,_e.Z)(function*(n,e=!1){const t=n.app;jm(t);const r=Jr(t);let a,i=r.token;if(i&&!sl(i)&&(r.token=void 0,i=void 0),!i){const _=yield r.cachedTokenPromise;_&&(sl(_)?i=_:yield _p(t,void 0))}if(!e&&i&&sl(i))return{token:i.token};let h,l=!1;if(Yd()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Kd(av(t,yield vp()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const _=yield r.exchangeTokenPromise;return yield _p(t,_),r.token=_,{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield Jr(t).exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?Ic.warn(_.message):Ic.error(_),a=_}return i?a?h=sl(i)?{token:i.token,internalError:a}:Jd(a):(h={token:i.token},r.token=i,yield _p(t,i)):h=Jd(a),l&&Ip(t,h),h})).apply(this,arguments)}function Gm(n,e){const t=Jr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function Qa(n){const{app:e}=n,t=Jr(e);let r=t.tokenRefresher;r||(r=function Xd(n){const{app:e}=n;return new mc((0,_e.Z)(function*(){let r;if(r=Jr(e).token?yield il(n,!0):yield il(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Jr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Ip(n,e){const t=Jr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function sl(n){return n.expireTimeMillis-Date.now()>0}function Jd(n){return{token:lv(Ep),error:n}}class cv{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Jr(this.app);for(const t of e)Gm(this.app,t.next);return Promise.resolve()}}const xp="app-check-internal";!function sh(){(0,Di._registerComponent)(new as.wA("app-check",n=>function Cc(n,e){return new cv(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(xp).initialize()})),(0,Di._registerComponent)(new as.wA(xp,n=>function dv(n){return{getToken:e=>il(n,e),addTokenListener:e=>function Qd(n,e,t,r){const{app:i}=n,a=Jr(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&sl(a.token)){const h=a.token;Promise.resolve().then(()=>{t({token:h.token}),Qa(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>Qa(n))}(n,"INTERNAL",e),removeTokenListener:e=>Gm(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Di.registerVersion)("@firebase/app-check","0.5.17")}();class Ms{constructor(){return(0,$t.vb)("app-check")}}typeof window<"u"&&window;var x=L(127);const z=new p.OlP("angularfire2.auth.use-emulator"),le=new p.OlP("angularfire2.auth.settings"),Ue=new p.OlP("angularfire2.auth.tenant-id"),Je=new p.OlP("angularfire2.auth.langugage-code"),It=new p.OlP("angularfire2.auth.use-device-language"),ht=new p.OlP("angularfire.auth.persistence"),Xn=(n,e,t,r,i,a,l,h)=>(0,ar.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,a&&_.useDeviceLanguage(),l)for(const[w,b]of Object.entries(l))_.settings[w]=b;return h&&_.setPersistence(h),_},[t,r,i,a,l,h]);let gi=(()=>{class n{constructor(t,r,i,a,l,h,_,w,b,A,N,F){const B=new kn.x,oe=Xe(void 0).pipe((0,bi.Q)(l.outsideAngular),bn(()=>a.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,1277)))),(0,Ke.U)(()=>(0,ar.on)(t,a,r)),(0,Ke.U)(he=>Xn(he,a,h,w,b,A,_,N)),D({bufferSize:1,refCount:!1}));if(Gl(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Xe(null);else{oe.pipe(yt()).subscribe();const We=oe.pipe(bn(ut=>ut.getRedirectResult().then(xt=>xt,()=>null)),$t.iC,D({bufferSize:1,refCount:!1})),ot=oe.pipe(bn(ut=>new Cr.y(xt=>({unsubscribe:a.runOutsideAngular(()=>ut.onAuthStateChanged(Bt=>xt.next(Bt),Bt=>xt.error(Bt),()=>xt.complete()))})))),rt=oe.pipe(bn(ut=>new Cr.y(xt=>({unsubscribe:a.runOutsideAngular(()=>ut.onIdTokenChanged(Bt=>xt.next(Bt),Bt=>xt.error(Bt),()=>xt.complete()))}))));this.authState=We.pipe(Dn(ot),(0,Fr.R)(l.outsideAngular),(0,bi.Q)(l.insideAngular)),this.user=We.pipe(Dn(rt),(0,Fr.R)(l.outsideAngular),(0,bi.Q)(l.insideAngular)),this.idToken=this.user.pipe(bn(ut=>ut?(0,Kt.D)(ut.getIdToken()):Xe(null))),this.idTokenResult=this.user.pipe(bn(ut=>ut?(0,Kt.D)(ut.getIdTokenResult()):Xe(null))),this.credential=(0,el.T)(We,B,this.authState.pipe(U(ut=>!ut))).pipe((0,Ke.U)(ut=>ut?.user?ut:null),(0,Fr.R)(l.outsideAngular),(0,bi.Q)(l.insideAngular))}return(0,ar.pX)(this,oe,a,{spy:{apply:(he,We,ot)=>{(he.startsWith("signIn")||he.startsWith("createUser"))&&ot.then(rt=>B.next(rt))}}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ar.Dh),p.LFG(ar.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG($t.HU),p.LFG(z,8),p.LFG(le,8),p.LFG(Ue,8),p.LFG(Je,8),p.LFG(It,8),p.LFG(ht,8),p.LFG(Ms,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),uh=(()=>{class n{constructor(){x.Z.registerVersion("angularfire",$t.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[gi]}),n})();var lh=L(4986),Rs=L(3942);const ru="firebasestorage.googleapis.com",ch="storageBucket";class Fn extends P.ZR{constructor(e,t,r=0){super(Qm(e),`Firebase Storage: ${t} (${Qm(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Fn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Qm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function Qm(n){return"storage/"+n}function ol(){return new Fn("unknown","An unknown error occurred, please check the error payload for server response.")}function la(){return new Fn("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function dh(){return new Fn("canceled","User canceled the upload/download.")}function SS(){return new Fn("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function al(n){return new Fn("invalid-argument",n)}function AS(){return new Fn("app-deleted","The Firebase app was deleted.")}function xS(n){return new Fn("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function hh(n,e){return new Fn("invalid-format","String does not match format '"+n+"': "+e)}function Np(n){throw new Fn("internal-error","Internal error: "+n)}class Si{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Si.makeFromUrl(e,t)}catch{return new Si(e,"")}if(""===r.path)return r;throw function NI(n){return new Fn("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function w(ut){ut.path_=decodeURIComponent(ut.path)}const A=t.replace(/[.]/g,"\\."),rt=[{regex:h,indices:{bucket:1,path:3},postModify:function a(ut){"/"===ut.path.charAt(ut.path.length-1)&&(ut.path_=ut.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${A}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:w},{regex:new RegExp(`^https?://${t===ru?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:w}];for(let ut=0;ut<rt.length;ut++){const xt=rt[ut],Bt=xt.regex.exec(e);if(Bt){let Su=Bt[xt.indices.path];Su||(Su=""),r=new Si(Bt[xt.indices.bucket],Su),xt.postModify(r);break}}if(null==r)throw function RI(n){return new Fn("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class MS{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Jm(n){return"string"==typeof n||n instanceof String}function pr(n){return bv()&&n instanceof Blob}function bv(){return typeof Blob<"u"&&!(0,P.UG)()}function Dv(n,e,t,r){if(r<e)throw al(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw al(`Invalid value for '${n}'. Expected ${t} or less.`)}function ca(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Tv(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var ul=(()=>{return(n=ul||(ul={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",ul;var n})();function OI(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),a=-1!==e.indexOf(n);return t||i||a}class kS{constructor(e,t,r,i,a,l,h,_,w,b,A,N=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=h,this.errorCallback_=_,this.timeout_=w,this.progressCallback_=b,this.connectionFactory_=A,this.retry=N,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((F,B)=>{this.resolve_=F,this.reject_=B,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,l=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const _=this.callback_(h,h.getResponse());!function Xm(n){return void 0!==n}(_)?a():a(_)}catch(_){l(_)}else if(null!==h){const _=ol();_.serverResponse=h.getErrorText(),l(this.errorCallback_?this.errorCallback_(h,_):_)}else l(i.canceled?this.appDelete_?AS():dh():la())};this.canceled_?t(0,new e_(!1,null,!0)):this.backoffId_=function RS(n,e,t){let r=1,i=null,a=null,l=!1,h=0;function _(){return 2===h}let w=!1;function b(...he){w||(w=!0,e.apply(null,he))}function A(he){i=setTimeout(()=>{i=null,n(F,_())},he)}function N(){a&&clearTimeout(a)}function F(he,...We){if(w)return void N();if(he)return N(),void b.call(null,he,...We);if(_()||l)return N(),void b.call(null,he,...We);let rt;r<64&&(r*=2),1===h?(h=2,rt=0):rt=1e3*(r+Math.random()),A(rt)}let B=!1;function oe(he){B||(B=!0,N(),!w&&(null!==i?(he||(h=2),clearTimeout(i),A(0)):he||(h=1)))}return A(0),a=setTimeout(()=>{l=!0,oe(!0)},t),oe}((r,i)=>{if(i)return void r(!1,new e_(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const l=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const h=a.getErrorCode()===ul.NO_ERROR,_=a.getStatus();if((!h||OI(_,this.additionalRetryCodes_))&&this.retry){const b=a.getErrorCode()===ul.ABORT;return void r(!1,new e_(!1,null,b))}const w=-1!==this.successCodes_.indexOf(_);r(!0,new e_(w,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function PI(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class e_{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function VI(...n){const e=function LI(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(bv())return new Blob(n);throw new Fn("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Ns={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class t_{constructor(e,t){this.data=e,this.contentType=t||null}}function n_(n,e){switch(n){case Ns.RAW:return new t_(r_(e));case Ns.BASE64:case Ns.BASE64URL:return new t_(i_(n,e));case Ns.DATA_URL:return new t_(function Av(n){const e=new BI(n);return e.base64?i_(Ns.BASE64,e.rest):function YN(n){let e;try{e=decodeURIComponent(n)}catch{throw hh(Ns.DATA_URL,"Malformed data URL.")}return r_(e)}(e.rest)}(e),function jI(n){return new BI(n).contentType}(e))}throw ol()}function r_(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function i_(n,e){switch(n){case Ns.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw hh(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Ns.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw hh(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function PS(n){if(typeof atob>"u")throw function Iv(n){return new Fn("unsupported-environment",`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:hh(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class BI{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw hh(Ns.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function HI(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Ai{constructor(e,t){let r=0,i="";pr(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(pr(this.data_)){const i=function UI(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Ai(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Ai(r,!0)}}static getBlob(...e){if(bv()){const t=e.map(r=>r instanceof Ai?r.data_:r);return new Ai(VI.apply(null,t))}{const t=e.map(l=>Jm(l)?n_(Ns.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(l=>{for(let h=0;h<l.length;h++)i[a++]=l[h]}),new Ai(i,!0)}}uploadData(){return this.data_}}function xv(n){let e;try{e=JSON.parse(n)}catch{return null}return function Cv(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function $I(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function Rv(n,e){return e}class ni{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||Rv}}let da=null;function Dc(){if(da)return da;const n=[];n.push(new ni("bucket")),n.push(new ni("generation")),n.push(new ni("metageneration")),n.push(new ni("name","fullPath",!0));const t=new ni("name");t.xform=function e(a,l){return function GI(n){return!Jm(n)||n.length<2?n:$I(n)}(l)},n.push(t);const i=new ni("size");return i.xform=function r(a,l){return void 0!==l?Number(l):l},n.push(i),n.push(new ni("timeCreated")),n.push(new ni("updated")),n.push(new ni("md5Hash",null,!0)),n.push(new ni("cacheControl",null,!0)),n.push(new ni("contentDisposition",null,!0)),n.push(new ni("contentEncoding",null,!0)),n.push(new ni("contentLanguage",null,!0)),n.push(new ni("contentType",null,!0)),n.push(new ni("metadata","customMetadata",!0)),da=n,da}function Nv(n,e,t){const r=xv(e);return null===r?null:function FS(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const l=t[a];r[l.local]=l.xform(r,e[l.server])}return function OS(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new Si(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function kv(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const WI="prefixes";class ko{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function ha(n){if(!n)throw ol()}function Pp(n,e){return function t(r,i){const a=Nv(n,i,e);return ha(null!==a),a}}function fa(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function TS(){return new Fn("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function DS(){return new Fn("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function bS(n){return new Fn("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function Ev(n){return new Fn("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function Op(n){const e=fa(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function wv(n){return new Fn("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function Tc(n,e,t){const i=ca(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new ko(i,"GET",Pp(n,t),l);return h.errorHandler=Op(e),h}function Fp(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const h=ca(e.bucketOnlyServerUrl(),n.host,n._protocol),w=n.maxOperationRetryTime,b=new ko(h,"GET",function QN(n,e){return function t(r,i){const a=function LS(n,e,t){const r=xv(t);return null===r?null:function Pv(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[WI])for(const i of t[WI]){const a=i.replace(/\/$/,""),l=n._makeStorageReference(new Si(e,a));r.prefixes.push(l)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new Si(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return ha(null!==a),a}}(n,e.bucket),w);return b.urlParams=a,b.errorHandler=fa(e),b}function ZI(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function BS(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class Lp{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function Vp(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{ha(!1)}return ha(!!t&&-1!==(e||["active"]).indexOf(t)),t}const HS={STATE_CHANGED:"state_changed"},Ki={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Lv(n){switch(n){case"running":case"pausing":case"canceling":return Ki.RUNNING;case"paused":return Ki.PAUSED;case"success":return Ki.SUCCESS;case"canceled":return Ki.CANCELED;default:return Ki.ERROR}}class $S{constructor(e,t,r){if(function NS(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function ph(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class GS{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ul.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ul.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ul.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Np("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Np("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Np("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Np("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Np("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class gh extends GS{initXhr(){this.xhr_.responseType="text"}}function Vr(){return new gh}class Vv{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Dc(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if(OI(i.status,[])){if(!a)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=la()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function Fv(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l=ZI(e,r,i),h={name:l.fullPath},_=ca(a,n.host,n._protocol),b={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},A=kv(l,t),B=new ko(_,"POST",function F(oe){let he;Vp(oe);try{he=oe.getResponseHeader("X-Goog-Upload-URL")}catch{ha(!1)}return ha(Jm(he)),he},n.maxUploadRetryTime);return B.urlParams=h,B.headers=b,B.body=A,B.errorHandler=fa(e),B}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Vr,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function jS(n,e,t,r){const _=new ko(t,"POST",function a(w){const b=Vp(w,["active","final"]);let A=null;try{A=w.getResponseHeader("X-Goog-Upload-Size-Received")}catch{ha(!1)}A||ha(!1);const N=Number(A);return ha(!isNaN(N)),new Lp(N,r.size(),"final"===b)},n.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=fa(e),_}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,Vr,t,r);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new Lp(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let l;try{l=function Up(n,e,t,r,i,a,l,h){const _=new Lp(0,0);if(l?(_.current=l.current,_.total=l.total):(_.current=0,_.total=r.size()),r.size()!==_.total)throw function zN(){return new Fn("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const w=_.total-_.current;let b=w;i>0&&(b=Math.min(b,i));const A=_.current;let F="";F=0===b?"finalize":w===b?"upload, finalize":"upload";const B={"X-Goog-Upload-Command":F,"X-Goog-Upload-Offset":`${_.current}`},oe=r.slice(A,A+b);if(null===oe)throw SS();const rt=new ko(t,"POST",function he(ut,xt){const Bt=Vp(ut,["active","final"]),yr=_.current+b,Su=r.size();let WN;return WN="final"===Bt?Pp(e,a)(ut,xt):null,new Lp(yr,Su,"final"===Bt,WN)},e.maxUploadRetryTime);return rt.headers=B,rt.body=oe.uploadData(),rt.progressCallback=h||null,rt.errorHandler=fa(n),rt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const h=this._ref.storage._makeRequest(l,Vr,i,a,!1);this._request=h,h.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=Tc(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Vr,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function Ov(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},_=function h(){let rt="";for(let ut=0;ut<2;ut++)rt+=Math.random().toString().slice(2);return rt}();l["Content-Type"]="multipart/related; boundary="+_;const w=ZI(e,r,i),b=kv(w,t),F=Ai.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+b+"\r\n--"+_+"\r\nContent-Type: "+w.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===F)throw SS();const B={name:w.fullPath},oe=ca(a,n.host,n._protocol),We=n.maxUploadRetryTime,ot=new ko(oe,"POST",Pp(n,t),We);return ot.urlParams=B,ot.headers=l,ot.body=F.uploadData(),ot.errorHandler=fa(e),ot}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Vr,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=dh(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Lv(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new $S(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Lv(this._state)){case Ki.SUCCESS:ph(this._resolve.bind(null,this.snapshot))();break;case Ki.CANCELED:case Ki.ERROR:ph(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Lv(this._state)){case Ki.RUNNING:case Ki.PAUSED:e.next&&ph(e.next.bind(e,this.snapshot))();break;case Ki.SUCCESS:e.complete&&ph(e.complete.bind(e))();break;default:e.error&&ph(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class mh{constructor(e,t){this._service=e,this._location=t instanceof Si?t:Si.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new mh(e,t)}get root(){const e=new Si(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return $I(this._location.path)}get storage(){return this._service}get parent(){const e=function Mv(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Si(this._location.bucket,e);return new mh(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw xS(e)}}function JI(n,e,t){return ks.apply(this,arguments)}function ks(){return(ks=(0,_e.Z)(function*(n,e,t){const i=yield eC(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield JI(n,e,i.nextPageToken))})).apply(this,arguments)}function eC(n,e){null!=e&&"number"==typeof e.maxResults&&Dv("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=Fp(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Vr)}function YS(n){n._throwIfRoot("getDownloadURL");const e=function XN(n,e,t){const i=ca(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new ko(i,"GET",function VS(n,e){return function t(r,i){const a=Nv(n,i,e);return ha(null!==a),function fh(n,e,t,r){const i=xv(e);if(null===i||!Jm(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const l=encodeURIComponent;return a.split(",").map(w=>{const A=n.fullPath;return ca("/b/"+l(n.bucket)+"/o/"+l(A),t,r)+Tv({alt:"media",token:w})})[0]}(a,i,n.host,n._protocol)}}(n,t),l);return h.errorHandler=Op(e),h}(n.storage,n._location,Dc());return n.storage.makeRequestWithTokens(e,Vr).then(t=>{if(null===t)throw function qN(){return new Fn("no-download-url","The given file does not have any download URLs.")}();return t})}function nC(n,e){const t=function s_(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Si(n._location.bucket,t);return new mh(n.storage,r)}function iC(n,e){if(n instanceof a_){const t=n;if(null==t._bucket)throw function kI(){return new Fn("no-default-bucket","No default bucket found. Did you set the '"+ch+"' property when initializing the app?")}();const r=new mh(t,t._bucket);return null!=e?iC(r,e):r}return void 0!==e?nC(n,e):n}function JS(n,e){if(e&&function rC(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof a_)return function XS(n,e){return new mh(n,e)}(n,e);throw al("To use ref(service, url), the first argument must be a Storage instance.")}return iC(n,e)}function Ut(n,e){const t=e?.[ch];return null==t?null:Si.makeFromBucketSpec(t,n)}class a_{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=ru,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Si.makeFromBucketSpec(i,this._host):Ut(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Si.makeFromBucketSpec(this._url,e):Ut(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Dv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Dv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,_e.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,_e.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new mh(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new MS(AS());{const l=function Sv(n,e,t,r,i,a,l=!0){const h=Tv(n.urlParams),_=n.url+h,w=Object.assign({},n.headers);return function ZN(n,e){e&&(n["X-Firebase-GMPID"]=e)}(w,e),function FI(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(w,t),function KN(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(w,a),function kp(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(w,r),new kS(_,n.method,w,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}(e,this._appId,r,i,t,this._firebaseVersion,a);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,_e.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const Bv="@firebase/storage";function u_(n,e){return JS(n=(0,P.m9)(n),e)}function oA(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new a_(t,r,i,e,Di.SDK_VERSION)}!function cC(){(0,Di._registerComponent)(new as.wA("storage",oA,"PUBLIC").setMultipleInstances(!0)),(0,Di.registerVersion)(Bv,"0.9.14",""),(0,Di.registerVersion)(Bv,"0.9.14","esm2017")}();class Hv{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class dC{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Hv(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new Hv(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?l=>t(new Hv(l,this,this._ref)):{next:t.next?l=>t.next(new Hv(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class Ac{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new iu(e,this._service))}get items(){return this._delegate.items.map(e=>new iu(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class iu{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function jv(n,e){return nC(n,e)}(this._delegate,e);return new iu(t,this.storage)}get root(){return new iu(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new iu(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new dC(function nA(n,e,t){return function qS(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new Vv(n,new Ai(e),t)}(n=(0,P.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Ns.RAW,r){this._throwIfRoot("putString");const i=n_(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new dC(new Vv(this._delegate,new Ai(i.data,!0),a),this)}listAll(){return function lC(n){return function KS(n){const e={prefixes:[],items:[]};return JI(n,e).then(()=>e)}(n=(0,P.m9)(n))}(this._delegate).then(e=>new Ac(e,this.storage))}list(e){return function uC(n,e){return eC(n=(0,P.m9)(n),e)}(this._delegate,e||void 0).then(t=>new Ac(t,this.storage))}getMetadata(){return function rA(n){return function tC(n){n._throwIfRoot("getMetadata");const e=Tc(n.storage,n._location,Dc());return n.storage.makeRequestWithTokens(e,Vr)}(n=(0,P.m9)(n))}(this._delegate)}updateMetadata(e){return function rk(n,e){return function ZS(n,e){n._throwIfRoot("updateMetadata");const t=function KI(n,e,t,r){const a=ca(e.fullServerUrl(),n.host,n._protocol),h=kv(t,r),w=n.maxOperationRetryTime,b=new ko(a,"PATCH",Pp(n,r),w);return b.headers={"Content-Type":"application/json; charset=utf-8"},b.body=h,b.errorHandler=Op(e),b}(n.storage,n._location,e,Dc());return n.storage.makeRequestWithTokens(t,Vr)}(n=(0,P.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function Sc(n){return YS(n=(0,P.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function iA(n){return function QS(n){n._throwIfRoot("deleteObject");const e=function US(n,e){const r=ca(e.fullServerUrl(),n.host,n._protocol),h=new ko(r,"DELETE",function l(_,w){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=Op(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Vr)}(n=(0,P.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw xS(e)}}class $v{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(Bp(e))throw al("ref() expected a child path but got a URL, use refFromURL instead.");return new iu(u_(this._delegate,e),this)}refFromURL(e){if(!Bp(e))throw al("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Si.makeFromUrl(e,this._delegate.host)}catch{throw al("refFromUrl() expected a valid full URL but got an invalid one.")}return new iu(u_(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function sA(n,e,t,r={}){!function sC(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,P.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function Bp(n){return/^[A-Za-z]+:\/\//.test(n)}function lA(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new $v(t,r)}function fC(n){const e=function dA(n){return new Cr.y(e=>{const t=l=>e.next(l);t(n.snapshot);const a=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){a()}}).pipe(function Rp(n,e=lh.z){return(0,vn.e)((t,r)=>{let i=null,a=null,l=null;const h=()=>{if(i){i.unsubscribe(),i=null;const w=a;a=null,r.next(w)}};function _(){const w=l+n,b=e.now();if(b<w)return i=this.schedule(void 0,w-b),void r.add(i);h()}t.subscribe((0,Qn.x)(r,w=>{a=w,l=e.now(),i||(i=e.schedule(_,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Ke.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function jp(n){return{getDownloadURL:()=>Xe(void 0).pipe($t.fc,bn(()=>n.getDownloadURL()),$t.iC),getMetadata:()=>Xe(void 0).pipe($t.fc,bn(()=>n.getMetadata()),$t.iC),delete:()=>(0,Kt.D)(n.delete()),child:e=>jp(n.child(e)),updateMetadata:e=>(0,Kt.D)(n.updateMetadata(e)),put:(e,t)=>fC(n.put(e,t)),putString:(e,t,r)=>fC(n.putString(e,t,r)),list:e=>(0,Kt.D)(n.list(e)),listAll:()=>(0,Kt.D)(n.listAll())}}!function cA(n){const e={TaskState:Ki,TaskEvent:HS,StringFormat:Ns,Storage:$v,Reference:iu};n.INTERNAL.registerComponent(new as.wA("storage-compat",lA,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.22")}(Rs.Z);const hA=new p.OlP("angularfire2.storageBucket"),pC=new p.OlP("angularfire2.storage.maxUploadRetryTime"),gC=new p.OlP("angularfire2.storage.maxOperationRetryTime"),Gv=new p.OlP("angularfire2.storage.use-emulator");let sk=(()=>{class n{constructor(t,r,i,a,l,h,_,w,b,A){const N=(0,ar.on)(t,l,r);this.storage=(0,ar.cc)(`${N.name}.storage.${i}`,"AngularFireStorage",N.name,()=>{const F=l.runOutsideAngular(()=>N.storage(i||void 0)),B=b;return B&&F.useEmulator(...B),_&&F.setMaxUploadRetryTime(_),w&&F.setMaxOperationRetryTime(w),F},[_,w])}ref(t){return jp(this.storage.ref(t))}refFromURL(t){return jp(this.storage.refFromURL(t))}upload(t,r,i){return jp(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ar.Dh),p.LFG(ar.xv,8),p.LFG(hA,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG($t.HU),p.LFG(pC,8),p.LFG(gC,8),p.LFG(Gv,8),p.LFG(Ms,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),fA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})(),ok=(()=>{class n{constructor(){x.Z.registerVersion("angularfire",$t.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[sk],imports:[fA]}),n})();var pa=L(8189);function l_(...n){return function _C(){return(0,pa.J)(1)}()((0,Kt.D)(n,(0,Or.yG)(n)))}function xc(...n){const e=(0,Or.yG)(n);return(0,vn.e)((t,r)=>{(e?l_(n,t,e):l_(n,t)).subscribe(r)})}function Ps(){return(0,vn.e)((n,e)=>{let t,r=!1;n.subscribe((0,Qn.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function yC(n,e,t,r,i){return(a,l)=>{let h=t,_=e,w=0;a.subscribe((0,Qn.x)(l,b=>{const A=w++;_=h?n(_,b,A):(h=!0,b),r&&l.next(_)},i&&(()=>{h&&l.next(_),l.complete()})))}}function Mc(n,e){return(0,vn.e)(yC(n,e,arguments.length>=2,!0))}function c_(n,e=Et.y){return n=n??su,(0,vn.e)((t,r)=>{let i,a=!0;t.subscribe((0,Qn.x)(r,l=>{const h=e(l);(a||!n(i,h))&&(a=!1,i=h,r.next(l))}))})}function su(n,e){return n===e}L(1277);var pt,wC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Po={},d_=d_||{},jt=wC||self;function Rc(){}function Nc(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function kc(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Hp="closure_uid_"+(1e9*Math.random()>>>0),ak=0;function pA(n,e,t){return n.call.apply(n.bind,arguments)}function gA(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function xi(n,e,t){return(xi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?pA:gA).apply(null,arguments)}function h_(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ri(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,a){for(var l=Array(arguments.length-2),h=2;h<arguments.length;h++)l[h-2]=arguments[h];return e.prototype[i].apply(r,l)}}function Pc(){this.s=this.s,this.o=this.o}Pc.prototype.s=!1,Pc.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function Wv(n){Object.prototype.hasOwnProperty.call(n,Hp)&&n[Hp]||(n[Hp]=++ak)}(this)},Pc.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const _A=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function f_(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function zv(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Nc(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let l=0;l<a;l++)n[i+l]=r[l]}else n.push(r)}}function Mi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Mi.prototype.h=function(){this.defaultPrevented=!0};var qv=function(){if(!jt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{jt.addEventListener("test",Rc,e),jt.removeEventListener("test",Rc,e)}catch{}return n}();function Kv(n){return/^[\s\xa0]*$/.test(n)}var yA=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function EC(n,e){return n<e?-1:n>e?1:0}function Zv(){var n=jt.navigator;return n&&(n=n.userAgent)?n:""}function ou(n){return-1!=Zv().indexOf(n)}function IC(n){return IC[" "](n),n}IC[" "]=Rc;var _h,n,lk=ou("Opera"),$p=ou("Trident")||ou("MSIE"),vA=ou("Edge"),ga=vA||$p,p_=ou("Gecko")&&!(-1!=Zv().toLowerCase().indexOf("webkit")&&!ou("Edge"))&&!(ou("Trident")||ou("MSIE"))&&!ou("Edge"),wA=-1!=Zv().toLowerCase().indexOf("webkit")&&!ou("Edge");function Yv(){var n=jt.document;return n?n.documentMode:void 0}e:{var g_="",Gp=(n=Zv(),p_?/rv:([^\);]+)(\)|;)/.exec(n):vA?/Edge\/([\d\.]+)/.exec(n):$p?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):wA?/WebKit\/(\S+)/.exec(n):lk?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Gp&&(g_=Gp?Gp[1]:""),$p){var Qv=Yv();if(null!=Qv&&Qv>parseFloat(g_)){_h=String(Qv);break e}}_h=g_}var ll={};var DC=jt.document&&$p&&(Yv()||parseInt(_h,10))||void 0;function Wp(n,e){if(Mi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(p_){e:{try{IC(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:EA[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Wp.X.h.call(this)}}ri(Wp,Mi);var EA={2:"touch",3:"pen",4:"mouse"};Wp.prototype.h=function(){Wp.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var cl="closure_listenable_"+(1e6*Math.random()|0),yh=0;function Jv(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++yh,this.ba=this.ea=!1}function dl(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function zp(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function qp(n){const e={};for(const t in n)e[t]=n[t];return e}const ew="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function m_(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<ew.length;a++)t=ew[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function vh(n){this.src=n,this.g={},this.h=0}function Kp(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=_A(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(dl(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function __(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ba&&a.listener==e&&a.capture==!!t&&a.ha==r)return i}return-1}vh.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=__(n,e,r,i);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new Jv(e,this.src,a,!!r,i)).ea=t,n.push(e)),e};var Zp="closure_lm_"+(1e6*Math.random()|0),tw={};function TC(n,e,t,r,i){if(r&&r.once)return rw(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)TC(n,e[a],t,r,i);return null}return t=AC(t),n&&n[cl]?n.N(e,t,kc(r)?!!r.capture:!!r,i):nw(n,e,t,!1,r,i)}function nw(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=kc(i)?!!i.capture:!!i,h=y_(n);if(h||(n[Zp]=h=new vh(n)),(t=h.add(e,t,r,l,a)).proxy)return t;if(r=function IA(){const e=Os;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)qv||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(SC(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function rw(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)rw(n,e[a],t,r,i);return null}return t=AC(t),n&&n[cl]?n.O(e,t,kc(r)?!!r.capture:!!r,i):nw(n,e,t,!0,r,i)}function iw(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)iw(n,e[a],t,r,i);else r=kc(r)?!!r.capture:!!r,t=AC(t),n&&n[cl]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=__(a=n.g[e],t,r,i))&&(dl(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=y_(n))&&(e=n.g[e.toString()],n=-1,e&&(n=__(e,t,r,i)),(t=-1<n?e[n]:null)&&sw(t))}function sw(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[cl])Kp(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(SC(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=y_(e))?(Kp(t,n),0==t.h&&(t.src=null,e[Zp]=null)):dl(n)}}}function SC(n){return n in tw?tw[n]:tw[n]="on"+n}function Os(n,e){if(n.ba)n=!0;else{e=new Wp(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&sw(n),n=t.call(r,e)}return n}function y_(n){return(n=n[Zp])instanceof vh?n:null}var ow="__closure_events_fn_"+(1e9*Math.random()>>>0);function AC(n){return"function"==typeof n?n:(n[ow]||(n[ow]=function(e){return n.handleEvent(e)}),n[ow])}function br(){Pc.call(this),this.i=new vh(this),this.P=this,this.I=null}function ii(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Mi(e,n);else if(e instanceof Mi)e.target=e.target||n;else{var i=e;m_(e=new Mi(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=v_(l,r,!0,e)&&i}if(i=v_(l=e.g=n,r,!0,e)&&i,i=v_(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=v_(l=e.g=t[a],r,!1,e)&&i}function v_(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ba&&l.capture==t){var h=l.listener,_=l.ha||l.src;l.ea&&Kp(n.i,l),i=!1!==h.call(_,r)&&i}}return i&&!r.defaultPrevented}ri(br,Pc),br.prototype[cl]=!0,br.prototype.removeEventListener=function(n,e,t,r){iw(this,n,e,t,r)},br.prototype.M=function(){if(br.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)dl(t[r]);delete n.g[e],n.h--}}this.I=null},br.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},br.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var aw=jt.JSON.stringify;function CA(){var n=NC;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var lw,MC=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new bA,n=>n.reset());class bA{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function uw(n){jt.setTimeout(()=>{throw n},0)}function RC(n,e){lw||function DA(){var n=jt.Promise.resolve(void 0);lw=function(){n.then(ma)}}(),cw||(lw(),cw=!0),NC.add(n,e)}var cw=!1,NC=new class xC{constructor(){this.h=this.g=null}add(e,t){const r=MC.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function ma(){for(var n;n=CA();){try{n.h.call(n.g)}catch(t){uw(t)}var e=MC;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}cw=!1}function wh(n,e){br.call(this),this.h=n||1,this.g=e||jt,this.j=xi(this.lb,this),this.l=Date.now()}function dw(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function hw(n,e,t){if("function"==typeof n)t&&(n=xi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=xi(n.handleEvent,n)}return 2147483647<Number(e)?-1:jt.setTimeout(n,e||0)}function TA(n){n.g=hw(()=>{n.g=null,n.i&&(n.i=!1,TA(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ri(wh,br),(pt=wh.prototype).ca=!1,pt.R=null,pt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),ii(this,"tick"),this.ca&&(dw(this),this.start()))}},pt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},pt.M=function(){wh.X.M.call(this),dw(this),delete this.g};class kC extends Pc{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:TA(this)}M(){super.M(),this.g&&(jt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yp(n){Pc.call(this),this.h=n,this.g={}}ri(Yp,Pc);var PC=[];function OC(n,e,t,r){Array.isArray(t)||(t&&(PC[0]=t.toString()),t=PC);for(var i=0;i<t.length;i++){var a=TC(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function w_(n){zp(n.g,function(e,t){this.g.hasOwnProperty(t)&&sw(e)},n),n.g={}}function E_(){this.g=!0}function hl(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function ck(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return aw(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Yp.prototype.M=function(){Yp.X.M.call(this),w_(this)},Yp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},E_.prototype.Aa=function(){this.g=!1},E_.prototype.info=function(){};var au={},AA=null;function Qp(){return AA=AA||new br}function fw(n){Mi.call(this,au.Pa,n)}function Eh(n){const e=Qp();ii(e,new fw(e))}function pw(n,e){Mi.call(this,au.STAT_EVENT,n),this.stat=e}function mi(n){const e=Qp();ii(e,new pw(e,n))}function _a(n,e){Mi.call(this,au.Qa,n),this.size=e}function fl(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return jt.setTimeout(function(){n()},e)}au.Pa="serverreachability",ri(fw,Mi),au.STAT_EVENT="statevent",ri(pw,Mi),au.Qa="timingevent",ri(_a,Mi);var Oc={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Ih={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function gw(){}function mw(){}gw.prototype.h=null;var yw,Xp={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function _w(){Mi.call(this,"d")}function Fc(){Mi.call(this,"c")}function vw(){}function Jp(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Yp(this),this.O=MA,this.T=new wh(n=ga?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new xA}function xA(){this.i=null,this.g="",this.h=!1}ri(_w,Mi),ri(Fc,Mi),ri(vw,gw),vw.prototype.g=function(){return new XMLHttpRequest},vw.prototype.i=function(){return{}},yw=new vw;var MA=45e3,ww={},D_={};function Ew(n,e,t){n.K=1,n.v=bw(uu(e)),n.s=t,n.P=!0,FC(n,null)}function FC(n,e){n.F=Date.now(),Lc(n),n.A=uu(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),Uc(t.i,"t",r),n.C=0,t=n.l.H,n.h=new xA,n.g=QC(n.l,t?e:null,!n.s),0<n.N&&(n.L=new kC(xi(n.La,n,n.g),n.N)),OC(n.S,n.g,"readystatechange",n.ib),e=n.H?qp(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Eh(),function SA(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",h=a.split("&"),_=0;_<h.length;_++){var w=h[_].split("=");if(1<w.length){var b=w[0];w=w[1];var A=b.split("_");l=2<=A.length&&"type"==A[1]?l+(b+"=")+w+"&":l+(b+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function LC(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function VC(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=UC(n,t),i==D_){4==e&&(n.o=4,mi(14),r=!1),hl(n.j,n.m,null,"[Incomplete Response]");break}if(i==ww){n.o=4,mi(15),hl(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}hl(n.j,n.m,i,null),Iw(n,i)}LC(n)&&i!=D_&&i!=ww&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,mi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),V_(e),e.K=!0,mi(11))):(hl(n.j,n.m,t,"[Invalid Chunked Response]"),Vc(n),eg(n))}function UC(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?D_:(t=Number(e.substring(t,r)),isNaN(t)?ww:(r+=1)+t>e.length?D_:(e=e.substr(r,t),n.C=r+t,e))}function Lc(n){n.V=Date.now()+n.O,BC(n,n.O)}function BC(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=fl(xi(n.gb,n),e)}function Ch(n){n.B&&(jt.clearTimeout(n.B),n.B=null)}function eg(n){0==n.l.G||n.I||Lw(n.l,n)}function Vc(n){Ch(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,dw(n.T),w_(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Iw(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||gl(t.h,n)))if(!n.J&&gl(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;hg(t),lg(t)}L_(t),mi(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=fl(xi(t.cb,t),6e3));if(1>=Hc(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else ml(t,11)}else if((n.J||t.g==n)&&hg(t),!Kv(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let w=i[e];if(t.T=w[0],w=w[1],2==t.G)if("c"==w[0]){t.I=w[1],t.ka=w[2];const b=w[3];null!=b&&(t.ma=b,t.j.info("VER="+t.ma));const A=w[4];null!=A&&(t.Ca=A,t.j.info("SVER="+t.Ca));const N=w[5];null!=N&&"number"==typeof N&&0<N&&(t.J=r=1.5*N,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const F=n.g;if(F){const B=F.g?F.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(B){var a=r.h;a.g||-1==B.indexOf("spdy")&&-1==B.indexOf("quic")&&-1==B.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(A_(a,a.h),a.h=null))}if(r.D){const oe=F.g?F.g.getResponseHeader("X-HTTP-Session-Id"):null;oe&&(r.za=oe,fn(r.F,r.D,oe))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=FA(r,r.H?r.ka:null,r.V),l.J){Dw(r.h,l);var h=l,_=r.J;_&&h.setTimeout(_),h.B&&(Ch(h),Lc(h)),r.g=l}else F_(r);0<t.i.length&&cg(t)}else"stop"!=w[0]&&"close"!=w[0]||ml(t,7);else 3==t.G&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?ml(t,7):O_(t):"noop"!=w[0]&&t.l&&t.l.wa(w),t.A=0)}Eh()}catch{}}function jC(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Nc(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function NA(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Nc(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function RA(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Nc(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(pt=Jp.prototype).setTimeout=function(n){this.O=n},pt.ib=function(n){n=n.target;const e=this.L;e&&3==Vo(n)?e.l():this.La(n)},pt.La=function(n){try{if(n==this.g)e:{const b=Vo(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>b)&&(3!=b||ga||this.g&&(this.h.h||this.g.fa()||Nw(this.g)))){this.I||4!=b||7==e||Eh(),Ch(this);var t=this.g.aa();this.Y=t;t:if(LC(this)){var r=Nw(this.g);n="";var i=r.length,a=4==Vo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Vc(this),eg(this);var l="";break t}this.h.i=new jt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function I_(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.U,b,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var h,_=this.g;if((h=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Kv(h)){var w=h;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,mi(12),Vc(this),eg(this);break e}hl(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Iw(this,t)}this.P?(VC(this,b,l),ga&&this.i&&3==b&&(OC(this.S,this.T,"tick",this.hb),this.T.start())):(hl(this.j,this.m,l,null),Iw(this,l)),4==b&&Vc(this),this.i&&!this.I&&(4==b?Lw(this.l,this):(this.i=!1,Lc(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,mi(12)):(this.o=0,mi(13)),Vc(this),eg(this)}}}catch{}},pt.hb=function(){if(this.g){var n=Vo(this.g),e=this.g.fa();this.C<e.length&&(Ch(this),VC(this,n,e),this.i&&4!=n&&Lc(this))}},pt.cancel=function(){this.I=!0,Vc(this)},pt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function C_(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Eh(),mi(17)),Vc(this),this.o=2,eg(this)):BC(this,this.V-n)};var HC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pl(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof pl){this.h=void 0!==e?e:n.h,Cw(this,n.j),this.s=n.s,this.g=n.g,tg(this,n.m),this.l=n.l,e=n.i;var t=new Oo;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),ng(this,t),this.o=n.o}else n&&(t=String(n).match(HC))?(this.h=!!e,Cw(this,t[1]||"",!0),this.s=lu(t[2]||""),this.g=lu(t[3]||"",!0),tg(this,t[4]),this.l=lu(t[5]||"",!0),ng(this,t[6]||"",!0),this.o=lu(t[7]||"")):(this.h=!!e,this.i=new Oo(null,this.h))}function uu(n){return new pl(n)}function Cw(n,e,t){n.j=t?lu(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function tg(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function ng(n,e,t){e instanceof Oo?(n.i=e,function bh(n,e){e&&!n.j&&(Fo(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Fs(this,r),Uc(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=rg(e,ig)),n.i=new Oo(e,n.h))}function fn(n,e,t){n.i.set(e,t)}function bw(n){return fn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function lu(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function rg(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,kA),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function kA(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}pl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(rg(e,T_,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(rg(e,T_,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(rg(t,"/"==t.charAt(0)?ya:PA,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",rg(t,Ri)),n.join("")};var T_=/[#\/\?@]/g,PA=/[#\?:]/g,ya=/[#\?]/g,ig=/[#\?@]/g,Ri=/#/g;function Oo(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Fo(n){n.g||(n.g=new Map,n.h=0,n.i&&function $C(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Fs(n,e){Fo(n),e=Lo(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function S_(n,e){return Fo(n),e=Lo(n,e),n.g.has(e)}function Uc(n,e,t){Fs(n,e),0<t.length&&(n.i=null,n.g.set(Lo(n,e),f_(t)),n.h+=t.length)}function Lo(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Bc(n){this.l=n||Th,n=jt.PerformanceNavigationTiming?0<(n=jt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(jt.g&&jt.g.Ga&&jt.g.Ga()&&jt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(pt=Oo.prototype).add=function(n,e){Fo(this),this.i=null,n=Lo(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},pt.forEach=function(n,e){Fo(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},pt.oa=function(){Fo(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},pt.W=function(n){Fo(this);let e=[];if("string"==typeof n)S_(this,n)&&(e=e.concat(this.g.get(Lo(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},pt.set=function(n,e){return Fo(this),this.i=null,S_(this,n=Lo(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},pt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},pt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var i=a;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var Th=10;function jc(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Hc(n){return n.h?1:n.g?n.g.size:0}function gl(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function A_(n,e){n.g?n.g.add(e):n.h=e}function Dw(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Tw(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return f_(n.i)}function x_(){}function GC(){this.g=new x_}function WC(n,e,t){const r=t||"";try{jC(n,function(i,a){let l=i;kc(i)&&(l=aw(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function sg(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Sh(n){this.l=n.ac||null,this.j=n.jb||!1}function M_(n,e){br.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Sw,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Bc.prototype.cancel=function(){if(this.i=Tw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},x_.prototype.stringify=function(n){return jt.JSON.stringify(n,void 0)},x_.prototype.parse=function(n){return jt.JSON.parse(n,void 0)},ri(Sh,gw),Sh.prototype.g=function(){return new M_(this.l,this.j)},Sh.prototype.i=function(n){return function(){return n}}({}),ri(M_,br);var Sw=0;function Aw(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function og(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Ah(n)}function Ah(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(pt=M_.prototype).open=function(n,e){if(this.readyState!=Sw)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Ah(this)},pt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||jt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},pt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,og(this)),this.readyState=Sw},pt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Ah(this)),this.g&&(this.readyState=3,Ah(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof jt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Aw(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},pt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?og(this):Ah(this),3==this.readyState&&Aw(this)}},pt.Va=function(n){this.g&&(this.response=this.responseText=n,og(this))},pt.Ua=function(n){this.g&&(this.response=n,og(this))},pt.ga=function(){this.g&&og(this)},pt.setRequestHeader=function(n,e){this.v.append(n,e)},pt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},pt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(M_.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var xw=jt.JSON.parse;function Wn(n){br.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=qC,this.K=this.L=!1}ri(Wn,br);var qC="",R_=/^https?$/i,N_=["POST","PUT"];function KC(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,k_(n),ag(n)}function k_(n){n.D||(n.D=!0,ii(n,"complete"),ii(n,"error"))}function P_(n){if(n.h&&typeof d_<"u"&&(!n.C[1]||4!=Vo(n)||2!=n.aa()))if(n.v&&4==Vo(n))hw(n.Ha,0,n);else if(ii(n,"readystatechange"),4==Vo(n)){n.h=!1;try{const h=n.aa();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(HC)[1]||null;if(!i&&jt.self&&jt.self.location){var a=jt.self.location.protocol;i=a.substr(0,a.length-1)}r=!R_.test(i?i.toLowerCase():"")}t=r}if(t)ii(n,"complete"),ii(n,"success");else{n.m=6;try{var l=2<Vo(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",k_(n)}}finally{ag(n)}}}function ag(n,e){if(n.g){Rw(n);const t=n.g,r=n.C[0]?Rc:null;n.g=null,n.C=null,e||ii(n,"ready");try{t.onreadystatechange=r}catch{}}}function Rw(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(jt.clearTimeout(n.A),n.A=null)}function Vo(n){return n.g?n.g.readyState:0}function Nw(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case qC:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function kw(n){let e="";return zp(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function ug(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=kw(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):fn(n,e,t))}function xh(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function ZC(n){this.Ca=0,this.i=[],this.j=new E_,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=xh("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=xh("baseRetryDelayMs",5e3,n),this.bb=xh("retryDelaySeedMs",1e4,n),this.$a=xh("forwardChannelMaxRetries",2,n),this.ta=xh("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new Bc(n&&n.concurrentRequestLimit),this.Fa=new GC,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function O_(n){if(Pw(n),3==n.G){var e=n.U++,t=uu(n.F);fn(t,"SID",n.I),fn(t,"RID",e),fn(t,"TYPE","terminate"),dg(n,t),(e=new Jp(n,n.j,e,void 0)).K=2,e.v=bw(uu(t)),t=!1,jt.navigator&&jt.navigator.sendBeacon&&(t=jt.navigator.sendBeacon(e.v.toString(),"")),!t&&jt.Image&&((new Image).src=e.v,t=!0),t||(e.g=QC(e.l,null),e.g.da(e.v)),e.F=Date.now(),Lc(e)}Uw(n)}function lg(n){n.g&&(V_(n),n.g.cancel(),n.g=null)}function Pw(n){lg(n),n.u&&(jt.clearTimeout(n.u),n.u=null),hg(n),n.h.cancel(),n.m&&("number"==typeof n.m&&jt.clearTimeout(n.m),n.m=null)}function cg(n){jc(n.h)||n.m||(n.m=!0,RC(n.Ja,n),n.C=0)}function YC(n,e){var t;t=e?e.m:n.U++;const r=uu(n.F);fn(r,"SID",n.I),fn(r,"RID",t),fn(r,"AID",n.T),dg(n,r),n.o&&n.s&&ug(r,n.o,n.s),t=new Jp(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=Ow(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),A_(n.h,t),Ew(t,r,e)}function dg(n,e){n.ia&&zp(n.ia,function(t,r){fn(e,r,t)}),n.l&&jC({},function(t,r){fn(e,r,t)})}function Ow(n,e,t){t=Math.min(n.i.length,t);var r=n.l?xi(n.l.Ra,n.l,n):null;e:{var i=n.i;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let h=!0;for(let _=0;_<t;_++){let w=i[_].h;const b=i[_].g;if(w-=a,0>w)a=Math.max(0,i[_].h-100),h=!1;else try{WC(b,l,"req"+w+"_")}catch{r&&r(b)}}if(h){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function F_(n){n.g||n.u||(n.Z=1,RC(n.Ia,n),n.A=0)}function L_(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=fl(xi(n.Ia,n),Vw(n,n.A)),n.A++,0))}function V_(n){null!=n.B&&(jt.clearTimeout(n.B),n.B=null)}function Fw(n){n.g=new Jp(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=uu(n.sa);fn(e,"RID","rpc"),fn(e,"SID",n.I),fn(e,"CI",n.L?"0":"1"),fn(e,"AID",n.T),fn(e,"TYPE","xmlhttp"),dg(n,e),n.o&&n.s&&ug(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=bw(uu(e)),t.s=null,t.P=!0,FC(t,n)}function hg(n){null!=n.v&&(jt.clearTimeout(n.v),n.v=null)}function Lw(n,e){var t=null;if(n.g==e){hg(n),V_(n),n.g=null;var r=2}else{if(!gl(n.h,e))return;t=e.D,Dw(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;ii(r=Qp(),new _a(r,t)),cg(n)}else F_(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function OA(n,e){return!(Hc(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=fl(xi(n.Ja,n,e),Vw(n,n.C)),n.C++,0)))}(n,e)||2==r&&L_(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:ml(n,5);break;case 4:ml(n,10);break;case 3:ml(n,6);break;default:ml(n,2)}}function Vw(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function ml(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=xi(n.kb,n);t||(t=new pl("//www.google.com/images/cleardot.gif"),jt.location&&"http"==jt.location.protocol||Cw(t,"https"),bw(t)),function zC(n,e){const t=new E_;if(jt.Image){const r=new Image;r.onload=h_(sg,t,r,"TestLoadImage: loaded",!0,e),r.onerror=h_(sg,t,r,"TestLoadImage: error",!1,e),r.onabort=h_(sg,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=h_(sg,t,r,"TestLoadImage: timeout",!1,e),jt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else mi(2);n.G=0,n.l&&n.l.va(e),Uw(n),Pw(n)}function Uw(n){if(n.G=0,n.la=[],n.l){const e=Tw(n.h);(0!=e.length||0!=n.i.length)&&(zv(n.la,e),zv(n.la,n.i),n.h.i.length=0,f_(n.i),n.i.length=0),n.l.ua()}}function FA(n,e,t){var r=t instanceof pl?uu(t):new pl(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),tg(r,r.m);else{var i=jt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new pl(null,void 0);r&&Cw(a,r),e&&(a.g=e),i&&tg(a,i),t&&(a.l=t),r=a}return e=n.za,(t=n.D)&&e&&fn(r,t,e),fn(r,"VER",n.ma),dg(n,r),r}function QC(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Wn(t&&n.Da&&!n.ra?new Sh({jb:!0}):n.ra)).Ka(n.H),e}function XC(){}function fg(){if($p&&!(10<=Number(DC)))throw Error("Environmental error: no available transport.")}function Ls(n,e){br.call(this),this.g=new ZC(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Kv(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Kv(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Mh(this)}function Dr(n){_w.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Bw(){Fc.call(this),this.status=1}function Mh(n){this.g=n}(pt=Wn.prototype).Ka=function(n){this.L=n},pt.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():yw.g(),this.C=function b_(n){return n.h||(n.h=n.i())}(this.u?this.u:yw),this.g.onreadystatechange=xi(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void KC(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=jt.FormData&&n instanceof jt.FormData,!(0<=_A(N_,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,l]of t)this.g.setRequestHeader(a,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Rw(this),0<this.B&&((this.K=function Mw(n){return $p&&function CC(){return function uk(n){var e=ll;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=yA(String(_h)).split("."),t=yA("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",a=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=EC(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||EC(0==i[2].length,0==a[2].length)||EC(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=xi(this.qa,this)):this.A=hw(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){KC(this,a)}},pt.qa=function(){typeof d_<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ii(this,"timeout"),this.abort(8))},pt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ii(this,"complete"),ii(this,"abort"),ag(this))},pt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ag(this,!0)),Wn.X.M.call(this)},pt.Ha=function(){this.s||(this.F||this.v||this.l?P_(this):this.fb())},pt.fb=function(){P_(this)},pt.aa=function(){try{return 2<Vo(this)?this.g.status:-1}catch{return-1}},pt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},pt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),xw(e)}},pt.Ea=function(){return this.m},pt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(pt=ZC.prototype).ma=8,pt.G=1,pt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new Jp(this,this.j,n,void 0);let a=this.s;if(this.S&&(a?(a=qp(a),m_(a,this.S)):a=this.S),null!==this.o||this.N||(i.H=a,a=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Ow(this,i,e),fn(t=uu(this.F),"RID",n),fn(t,"CVER",22),this.D&&fn(t,"X-HTTP-Session-Id",this.D),dg(this,t),a&&(this.N?e="headers="+encodeURIComponent(String(kw(a)))+"&"+e:this.o&&ug(t,this.o,a)),A_(this.h,i),this.Ya&&fn(t,"TYPE","init"),this.O?(fn(t,"$req",e),fn(t,"SID","null"),i.Z=!0,Ew(i,t,null)):Ew(i,t,e),this.G=2}}else 3==this.G&&(n?YC(this,n):0==this.i.length||jc(this.h)||YC(this))},pt.Ia=function(){if(this.u=null,Fw(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=fl(xi(this.eb,this),n)}},pt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,mi(10),lg(this),Fw(this))},pt.cb=function(){null!=this.v&&(this.v=null,lg(this),L_(this),mi(19))},pt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),mi(2)):(this.j.info("Failed to ping google.com"),mi(1))},(pt=XC.prototype).xa=function(){},pt.wa=function(){},pt.va=function(){},pt.ua=function(){},pt.Ra=function(){},fg.prototype.g=function(n,e){return new Ls(n,e)},ri(Ls,br),Ls.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;mi(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=FA(n,null,n.V),cg(n)},Ls.prototype.close=function(){O_(this.g)},Ls.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=aw(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&cg(e)},Ls.prototype.M=function(){this.g.l=null,delete this.j,O_(this.g),delete this.g,Ls.X.M.call(this)},ri(Dr,_w),ri(Bw,Fc),ri(Mh,XC),Mh.prototype.xa=function(){ii(this.g,"a")},Mh.prototype.wa=function(n){ii(this.g,new Dr(n))},Mh.prototype.va=function(n){ii(this.g,new Bw)},Mh.prototype.ua=function(){ii(this.g,"b")},fg.prototype.createWebChannel=fg.prototype.g,Ls.prototype.send=Ls.prototype.u,Ls.prototype.open=Ls.prototype.m,Ls.prototype.close=Ls.prototype.close,Oc.NO_ERROR=0,Oc.TIMEOUT=8,Oc.HTTP_ERROR=6,Ih.COMPLETE="complete",mw.EventType=Xp,Xp.OPEN="a",Xp.CLOSE="b",Xp.ERROR="c",Xp.MESSAGE="d",br.prototype.listen=br.prototype.N,Wn.prototype.listenOnce=Wn.prototype.O,Wn.prototype.getLastError=Wn.prototype.Oa,Wn.prototype.getLastErrorCode=Wn.prototype.Ea,Wn.prototype.getStatus=Wn.prototype.aa,Wn.prototype.getResponseJson=Wn.prototype.Sa,Wn.prototype.getResponseText=Wn.prototype.fa,Wn.prototype.send=Wn.prototype.da,Wn.prototype.setWithCredentials=Wn.prototype.Ka;var LA=Po.createWebChannelTransport=function(){return new fg},JC=Po.getStatEventTarget=function(){return Qp()},jw=Po.ErrorCode=Oc,eb=Po.EventType=Ih,tb=Po.Event=au,$c=Po.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},VA=Po.FetchXmlHttpFactory=Sh,U_=Po.WebChannel=mw,nb=Po.XhrIo=Wn;const rb="@firebase/firestore";class Ur{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ur.UNAUTHENTICATED=new Ur(null),Ur.GOOGLE_CREDENTIALS=new Ur("google-credentials-uid"),Ur.FIRST_PARTY=new Ur("first-party-uid"),Ur.MOCK_USER=new Ur("mock-user");let pg="9.14.0";const cu=new qi.Yd("@firebase/firestore");function gg(){return cu.logLevel}function Pe(n,...e){if(cu.logLevel<=qi.in.DEBUG){const t=e.map(Vs);cu.debug(`Firestore (${pg}): ${n}`,...t)}}function gr(n,...e){if(cu.logLevel<=qi.in.ERROR){const t=e.map(Vs);cu.error(`Firestore (${pg}): ${n}`,...t)}}function Ni(n,...e){if(cu.logLevel<=qi.in.WARN){const t=e.map(Vs);cu.warn(`Firestore (${pg}): ${n}`,...t)}}function Vs(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Qe(n="Unexpected state"){const e=`FIRESTORE (${pg}) INTERNAL ASSERTION FAILED: `+n;throw gr(e),new Error(e)}function St(n,e){n||Qe()}function Ze(n,e){return n}const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends P.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Br{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class B_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mg{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ur.UNAUTHENTICATED))}shutdown(){}}class UA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class sb{constructor(e){this.t=e,this.currentUser=Ur.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=w=>this.i!==i?(i=this.i,t(w)):Promise.resolve();let l=new Br;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Br,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const w=l;e.enqueueRetryable((0,_e.Z)(function*(){yield w.promise,yield a(r.currentUser)}))},_=w=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(w=>_(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?_(w):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Br)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(St("string"==typeof r.accessToken),new B_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return St(null===e||"string"==typeof e),new Ur(e)}}class BA{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=Ur.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(St(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class ob{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new BA(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Ur.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Hw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class j_{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=a=>{null!=a.error&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.A;return this.A=a.token,Pe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.T.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.T.getImmediate({optional:!0});a?i(a):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(St("string"==typeof t.token),this.A=t.token,new Hw(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function ab(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class $w{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=ab(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Ft(n,e){return n<e?-1:n>e?1:0}function _l(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Gw(n){return n+"\0"}class Ln{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ne(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ln.fromMillis(Date.now())}static fromDate(e){return Ln.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Ln(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ft(this.nanoseconds,e.nanoseconds):Ft(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class At{constructor(e){this.timestamp=e}static fromTimestamp(e){return new At(e)}static min(){return new At(new Ln(0,0))}static max(){return new At(new Ln(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Rh{constructor(e,t,r){void 0===t?t=0:t>e.length&&Qe(),void 0===r?r=e.length-t:r>e.length-t&&Qe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Rh.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Rh?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class on extends Rh{construct(e,t,r){return new on(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ne(de.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new on(t)}static emptyPath(){return new on([])}}const ub=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Jn extends Rh{construct(e,t,r){return new Jn(e,t,r)}static isValidIdentifier(e){return ub.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Jn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Jn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Ne(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Ne(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Ne(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===h?(l=!l,i++):"."!==h||l?(r+=h,i++):(a(),i++)}if(a(),l)throw new Ne(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Jn(t)}static emptyPath(){return new Jn([])}}class ze{constructor(e){this.path=e}static fromPath(e){return new ze(on.fromString(e))}static fromName(e){return new ze(on.fromString(e).popFirst(5))}static empty(){return new ze(on.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===on.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return on.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ze(new on(e.slice()))}}class H_{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Ww(n){return n.fields.find(e=>2===e.kind)}function Gc(n){return n.fields.filter(e=>2!==e.kind)}H_.UNKNOWN_ID=-1;class $_{constructor(e,t){this.fieldPath=e,this.kind=t}}class _g{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new _g(0,Us.min())}}function lb(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=At.fromTimestamp(1e9===r?new Ln(t+1,0):new Ln(t,r));return new Us(i,ze.empty(),e)}function cb(n){return new Us(n.readTime,n.key,-1)}class Us{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Us(At.min(),ze.empty(),-1)}static max(){return new Us(At.max(),ze.empty(),-1)}}function zw(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=ze.comparator(n.documentKey,e.documentKey),0!==t?t:Ft(n.largestBatchId,e.largestBatchId))}const db="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function yl(n){return qw.apply(this,arguments)}function qw(){return qw=(0,_e.Z)(function*(n){if(n.code!==de.FAILED_PRECONDITION||n.message!==db)throw n;Pe("LocalStore","Unexpectedly lost primary lease")}),qw.apply(this,arguments)}class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Qe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ue((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ue?t:ue.resolve(t)}catch(t){return ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.reject(t)}static resolve(e){return new ue((t,r)=>{t(e)})}static reject(e){return new ue((t,r)=>{r(e)})}static waitFor(e){return new ue((t,r)=>{let i=0,a=0,l=!1;e.forEach(h=>{++i,h.next(()=>{++a,l&&a===i&&t()},_=>r(_))}),l=!0,a===i&&t()})}static or(e){let t=ue.resolve(!1);for(const r of e)t=t.next(i=>i?ue.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new ue((r,i)=>{const a=e.length,l=new Array(a);let h=0;for(let _=0;_<a;_++){const w=_;t(e[w]).next(b=>{l[w]=b,++h,h===a&&r(l)},b=>i(b))}})}static doWhile(e,t){return new ue((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class G_{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Br,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Nh(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=W_(r.target.error);this.P.reject(new Nh(e,i))}}static open(e,t,r,i){try{return new G_(t,e.transaction(i,r))}catch(a){throw new Nh(t,a)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Pe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new pb(t)}}class Uo{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Uo.D((0,P.z$)())&&gr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Pe("SimpleDb","Removing database:",e),vl(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,P.hl)())return!1;if(Uo.N())return!0;const e=(0,P.z$)(),t=Uo.D(e),r=0<t&&t<10,i=Uo.k(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,_e.Z)(function*(){return t.db||(Pe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new Nh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const h=l.target.error;i("VersionError"===h.name?new Ne(de.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Ne(de.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new Nh(e,h))},a.onupgradeneeded=l=>{Pe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{Pe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,_e.Z)(function*(){const l="readonly"===t;let h=0;for(;;){++h;try{a.db=yield a.F(e);const _=G_.open(a.db,e,l?"readonly":"readwrite",r),w=i(_).next(b=>(_.V(),b)).catch(b=>(_.abort(b),ue.reject(b))).toPromise();return w.catch(()=>{}),yield _.v,w}catch(_){const w=_,b="FirebaseError"!==w.name&&h<3;if(Pe("SimpleDb","Transaction failed with error:",w.message,"Retrying:",b),a.close(),!b)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class fb{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return vl(this.U.delete())}}class Nh extends Ne{constructor(e,t){super(de.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function du(n){return"IndexedDbTransactionError"===n.name}class pb{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Pe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Pe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),vl(r)}add(e){return Pe("SimpleDb","ADD",this.store.name,e,e),vl(this.store.add(e))}get(e){return vl(this.store.get(e)).next(t=>(void 0===t&&(t=null),Pe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Pe("SimpleDb","DELETE",this.store.name,e),vl(this.store.delete(e))}count(){return Pe("SimpleDb","COUNT",this.store.name),vl(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.H(i,(l,h)=>{a.push(h)}).next(()=>a)}{const i=this.store.getAll(r.range);return new ue((a,l)=>{i.onerror=h=>{l(h.target.error)},i.onsuccess=h=>{a(h.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ue((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Y(e,t){Pe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(a,l,h)=>h.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new ue((r,i)=>{t.onerror=a=>{const l=W_(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(h=>{h?l.continue():r()}):r()}})}H(e,t){const r=[];return new ue((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const h=l.target.result;if(!h)return void i();const _=new fb(h),w=t(h.primaryKey,h.value,_);if(w instanceof ue){const b=w.catch(A=>(_.done(),ue.reject(A)));r.push(b)}_.isDone?i():null===_.G?h.continue():h.continue(_.G)}}).next(()=>ue.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function vl(n){return new ue((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=W_(r.target.error);t(i)}})}let Kw=!1;function W_(n){const e=Uo.D((0,P.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Kw||(Kw=!0,setTimeout(()=>{throw r},0)),r}}return n}class gb{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Pe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,_e.Z)(function*(){t.task=null;try{Pe("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){du(r)?Pe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield yl(r)}yield t.nt(6e4)}))}}class mb{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,_e.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,a=!0;return ue.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Pe("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,i).next(h=>{i-=h,r.add(l)});a=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(i,a)).next(h=>(Pe("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,a)=>{const l=cb(a);zw(l,r)>0&&(r=l)}),new Us(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Zi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function Zw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Bs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function _b(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Zi.at=-1;class ur{constructor(e,t){this.comparator=e,this.root=t||ki.EMPTY}insert(e,t){return new ur(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ki.BLACK,null,null))}remove(e){return new ur(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ki.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hu(this.root,e,this.comparator,!1)}getReverseIterator(){return new hu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hu(this.root,e,this.comparator,!0)}}class hu{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ki{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??ki.RED,this.left=i??ki.EMPTY,this.right=a??ki.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new ki(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ki.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ki.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ki.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ki.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Qe();const e=this.left.check();if(e!==this.right.check())throw Qe();return e+(this.isRed()?0:1)}}ki.EMPTY=null,ki.RED=!0,ki.BLACK=!1,ki.EMPTY=new class{constructor(){this.size=0}get key(){throw Qe()}get value(){throw Qe()}get color(){throw Qe()}get left(){throw Qe()}get right(){throw Qe()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ki(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class pn{constructor(e){this.comparator=e,this.data=new ur(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $A(this.data.getIterator())}getIteratorFrom(e){return new $A(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof pn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new pn(this.comparator);return t.data=e,t}}class $A{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Wc(n){return n.hasNext()?n.getNext():void 0}class ls{constructor(e){this.fields=e,e.sort(Jn.comparator)}static empty(){return new ls([])}unionWith(e){let t=new pn(Jn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ls(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return _l(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class nt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new nt(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new nt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ft(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nt.EMPTY_BYTE_STRING=new nt("");const GA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wl(n){if(St(!!n),"string"==typeof n){let e=0;const t=GA.exec(n);if(St(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:lr(n.seconds),nanos:lr(n.nanos)}}function lr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ho(n){return"string"==typeof n?nt.fromBase64String(n):nt.fromUint8Array(n)}function Yw(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function yg(n){const e=n.mapValue.fields.__previous_value__;return Yw(e)?yg(e):e}function El(n){const e=wl(n.mapValue.fields.__local_write_time__.timestampValue);return new Ln(e.seconds,e.nanos)}class cr{constructor(e,t,r,i,a,l,h,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.useFetchStreams=_}}class zc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new zc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof zc&&e.projectId===this.projectId&&e.database===this.database}}function kh(n){return null==n}function Ph(n){return 0===n&&1/n==-1/0}function yb(n){return"number"==typeof n&&Number.isInteger(n)&&!Ph(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const fu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},vg={nullValue:"NULL_VALUE"};function Il(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Yw(n)?4:Oh(n)?9007199254740991:10:Qe()}function Bo(n,e){if(n===e)return!0;const t=Il(n);if(t!==Il(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return El(n).isEqual(El(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=wl(r.timestampValue),l=wl(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,ho(n.bytesValue).isEqual(ho(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return lr(r.geoPointValue.latitude)===lr(i.geoPointValue.latitude)&&lr(r.geoPointValue.longitude)===lr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return lr(r.integerValue)===lr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=lr(r.doubleValue),l=lr(i.doubleValue);return a===l?Ph(a)===Ph(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return _l(n.arrayValue.values||[],e.arrayValue.values||[],Bo);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(Zw(a)!==Zw(l))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(void 0===l[h]||!Bo(a[h],l[h])))return!1;return!0}(n,e);default:return Qe()}var i}function wg(n,e){return void 0!==(n.values||[]).find(t=>Bo(t,e))}function Cl(n,e){if(n===e)return 0;const t=Il(n),r=Il(e);if(t!==r)return Ft(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ft(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=lr(i.integerValue||i.doubleValue),h=lr(a.integerValue||a.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1}(n,e);case 3:return vb(n.timestampValue,e.timestampValue);case 4:return vb(El(n),El(e));case 5:return Ft(n.stringValue,e.stringValue);case 6:return function(i,a){const l=ho(i),h=ho(a);return l.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),h=a.split("/");for(let _=0;_<l.length&&_<h.length;_++){const w=Ft(l[_],h[_]);if(0!==w)return w}return Ft(l.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Ft(lr(i.latitude),lr(a.latitude));return 0!==l?l:Ft(lr(i.longitude),lr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],h=a.values||[];for(let _=0;_<l.length&&_<h.length;++_){const w=Cl(l[_],h[_]);if(w)return w}return Ft(l.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===fu.mapValue&&a===fu.mapValue)return 0;if(i===fu.mapValue)return 1;if(a===fu.mapValue)return-1;const l=i.fields||{},h=Object.keys(l),_=a.fields||{},w=Object.keys(_);h.sort(),w.sort();for(let b=0;b<h.length&&b<w.length;++b){const A=Ft(h[b],w[b]);if(0!==A)return A;const N=Cl(l[h[b]],_[w[b]]);if(0!==N)return N}return Ft(h.length,w.length)}(n.mapValue,e.mapValue);default:throw Qe()}}function vb(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ft(n,e);const t=wl(n),r=wl(e),i=Ft(t.seconds,r.seconds);return 0!==i?i:Ft(t.nanos,r.nanos)}function wa(n){return Qw(n)}function Qw(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=wl(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ho(n.bytesValue).toBase64():"referenceValue"in n?ze.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=Qw(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const h of i)l?l=!1:a+=",",a+=`${h}:${Qw(r.fields[h])}`;return a+"}"}(n.mapValue):Qe();var e}function qc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Xw(n){return!!n&&"integerValue"in n}function bl(n){return!!n&&"arrayValue"in n}function Jw(n){return!!n&&"nullValue"in n}function e0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Eg(n){return!!n&&"mapValue"in n}function Ig(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Bs(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ig(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ig(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Oh(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Cg(n){return"nullValue"in n?vg:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?qc(zc.empty(),ze.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Qe()}function WA(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?qc(zc.empty(),ze.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?fu:Qe()}function wb(n,e){const t=Cl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Eb(n,e){const t=Cl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class si{constructor(e){this.value=e}static empty(){return new si({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Eg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ig(t)}setAll(e){let t=Jn.emptyPath(),r={},i=[];e.forEach((l,h)=>{if(!t.isImmediateParentOf(h)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=h.popLast()}l?r[h.lastSegment()]=Ig(l):i.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Eg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Bo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Eg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Bs(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new si(Ig(this.value))}}function t0(n){const e=[];return Bs(n.fields,(t,r)=>{const i=new Jn([t]);if(Eg(r)){const a=t0(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new ls(e)}class Tn{constructor(e,t,r,i,a,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Tn(e,0,At.min(),At.min(),si.empty(),0)}static newFoundDocument(e,t,r){return new Tn(e,1,t,At.min(),r,0)}static newNoDocument(e,t){return new Tn(e,2,t,At.min(),si.empty(),0)}static newUnknownDocument(e,t){return new Tn(e,3,t,At.min(),si.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=si.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=si.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=At.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class zA{constructor(e,t=null,r=[],i=[],a=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=h,this.ht=null}}function n0(n,e=null,t=[],r=[],i=null,a=null,l=null){return new zA(n,e,t,r,i,a,l)}function Kc(n){const e=Ze(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+wa(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),kh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>wa(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>wa(r)).join(",")),e.ht=t}return e.ht}function z_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!tx(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Bo(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Lh(n.startAt,e.startAt)&&Lh(n.endAt,e.endAt)}function r0(n){return ze.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function s0(n,e){return n.filters.filter(t=>t instanceof Tr&&t.field.isEqual(e))}function KA(n,e,t){let r=vg,i=!0;for(const a of s0(n,e)){let l=vg,h=!0;switch(a.op){case"<":case"<=":l=Cg(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,h=!1;break;case"!=":case"not-in":l=vg}wb({value:r,inclusive:i},{value:l,inclusive:h})<0&&(r=l,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];wb({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function o0(n,e,t){let r=fu,i=!0;for(const a of s0(n,e)){let l=fu,h=!0;switch(a.op){case">=":case">":l=WA(a.value),h=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,h=!1;break;case"!=":case"not-in":l=fu}Eb({value:r,inclusive:i},{value:l,inclusive:h})>0&&(r=l,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];Eb({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class Tr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new ZA(e,t,r):"array-contains"===t?new QA(e,r):"in"===t?new XA(e,r):"not-in"===t?new JA(e,r):"array-contains-any"===t?new ex(e,r):new Tr(e,t,r)}static lt(e,t,r){return"in"===t?new YA(e,r):new Ib(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(Cl(t,this.value)):null!==t&&Il(this.value)===Il(t)&&this.ft(Cl(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Qe()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class ZA extends Tr{constructor(e,t,r){super(e,t,r),this.key=ze.fromName(r.referenceValue)}matches(e){const t=ze.comparator(e.key,this.key);return this.ft(t)}}class YA extends Tr{constructor(e,t){super(e,"in",t),this.keys=Fh(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Ib extends Tr{constructor(e,t){super(e,"not-in",t),this.keys=Fh(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Fh(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>ze.fromName(r.referenceValue))}class QA extends Tr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return bl(t)&&wg(t.arrayValue,this.value)}}class XA extends Tr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&wg(this.value.arrayValue,t)}}class JA extends Tr{constructor(e,t){super(e,"not-in",t)}matches(e){if(wg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!wg(this.value.arrayValue,t)}}class ex extends Tr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!bl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>wg(this.value.arrayValue,r))}}class Dl{constructor(e,t){this.position=e,this.inclusive=t}}class Zc{constructor(e,t="asc"){this.field=e,this.dir=t}}function tx(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Cb(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?ze.comparator(ze.fromName(l.referenceValue),t.key):Cl(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Lh(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Bo(n.position[t],e.position[t]))return!1;return!0}class pu{constructor(e,t=null,r=[],i=[],a=null,l="F",h=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=h,this.endAt=_,this._t=null,this.wt=null}}function a0(n,e,t,r,i,a,l,h){return new pu(n,e,t,r,i,a,l,h)}function Vh(n){return new pu(n)}function u0(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function l0(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function q_(n){for(const e of n.filters)if(e.dt())return e.field;return null}function c0(n){return null!==n.collectionGroup}function Tl(n){const e=Ze(n);if(null===e._t){e._t=[];const t=q_(e),r=l0(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new Zc(t)),e._t.push(new Zc(Jn.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e._t.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Zc(Jn.keyField(),a))}}}return e._t}function Yi(n){const e=Ze(n);if(!e.wt)if("F"===e.limitType)e.wt=n0(e.path,e.collectionGroup,Tl(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Tl(e))t.push(new Zc(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Dl(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Dl(e.startAt.position,e.startAt.inclusive):null;e.wt=n0(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function bg(n,e,t){return new pu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Uh(n,e){return z_(Yi(n),Yi(e))&&n.limitType===e.limitType}function bb(n){return`${Kc(Yi(n))}|lt:${n.limitType}`}function d0(n){return`Query(target=${function qA(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${wa(r.value)}`;var r}).join(", ")}]`),kh(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>wa(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>wa(t)).join(",")),`Target(${e})`}(Yi(n))}; limitType=${n.limitType})`}function h0(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):ze.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const h=Cb(i,a,l);return i.inclusive?h<=0:h<0}(t.startAt,Tl(t),r)||t.endAt&&!function(i,a,l){const h=Cb(i,a,l);return i.inclusive?h>=0:h>0}(t.endAt,Tl(t),r)));var t,r}function K_(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Db(n){return(e,t)=>{let r=!1;for(const i of Tl(n)){const a=Tb(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function Tb(n,e,t){const r=n.field.isKeyField()?ze.comparator(e.key,t.key):function(i,a,l){const h=a.data.field(i),_=l.data.field(i);return null!==h&&null!==_?Cl(h,_):Qe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Qe()}}function Sb(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ph(e)?"-0":e}}function Ab(n){return{integerValue:""+n}}function xb(n,e){return yb(e)?Ab(e):Sb(n,e)}class Z_{constructor(){this._=void 0}}function nx(n,e,t){return n instanceof Bh?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Sl?f0(n,e):n instanceof Yc?Rb(n,e):function(r,i){const a=Mb(r,i),l=Nb(a)+Nb(r.yt);return Xw(a)&&Xw(r.yt)?Ab(l):Sb(r.It,l)}(n,e)}function rx(n,e,t){return n instanceof Sl?f0(n,e):n instanceof Yc?Rb(n,e):t}function Mb(n,e){return n instanceof Qc?Xw(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Bh extends Z_{}class Sl extends Z_{constructor(e){super(),this.elements=e}}function f0(n,e){const t=kb(e);for(const r of n.elements)t.some(i=>Bo(i,r))||t.push(r);return{arrayValue:{values:t}}}class Yc extends Z_{constructor(e){super(),this.elements=e}}function Rb(n,e){let t=kb(e);for(const r of n.elements)t=t.filter(i=>!Bo(i,r));return{arrayValue:{values:t}}}class Qc extends Z_{constructor(e,t){super(),this.It=e,this.yt=t}}function Nb(n){return lr(n.integerValue||n.doubleValue)}function kb(n){return bl(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Dg{constructor(e,t){this.field=e,this.transform=t}}class g0{constructor(e,t){this.version=e,this.transformResults=t}}class Vn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Vn}static exists(e){return new Vn(void 0,e)}static updateTime(e){return new Vn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jh(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Y_{}function Pb(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Hh(n.key,Vn.none()):new Jc(n.key,n.data,Vn.none());{const t=n.data,r=si.empty();let i=new pn(Jn.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);null===l&&a.length>1&&(a=a.popLast(),l=t.field(a)),null===l?r.delete(a):r.set(a,l),i=i.add(a)}return new gu(n.key,r,new ls(i.toArray()),Vn.none())}}function m0(n,e,t){n instanceof Jc?function(r,i,a){const l=r.value.clone(),h=_0(r.fieldTransforms,i,a.transformResults);l.setAll(h),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof gu?function(r,i,a){if(!jh(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=_0(r.fieldTransforms,i,a.transformResults),h=i.data;h.setAll(ix(r)),h.setAll(l),i.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Tg(n,e,t,r){return n instanceof Jc?function(i,a,l,h){if(!jh(i.precondition,a))return l;const _=i.value.clone(),w=Q_(i.fieldTransforms,h,a);return _.setAll(w),a.convertToFoundDocument(a.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof gu?function(i,a,l,h){if(!jh(i.precondition,a))return l;const _=Q_(i.fieldTransforms,h,a),w=a.data;return w.setAll(ix(i)),w.setAll(_),a.convertToFoundDocument(a.version,w).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(b=>b.field))}(n,e,t,r):(l=t,jh(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l);var a,l}function Ob(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=Mb(r.transform,i||null);null!=a&&(null===t&&(t=si.empty()),t.set(r.field,a))}return t||null}function Xc(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&_l(t,r,(i,a)=>function p0(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Sl&&r instanceof Sl||t instanceof Yc&&r instanceof Yc?_l(t.elements,r.elements,Bo):t instanceof Qc&&r instanceof Qc?Bo(t.yt,r.yt):t instanceof Bh&&r instanceof Bh);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Jc extends Y_{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class gu extends Y_{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function ix(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function _0(n,e,t){const r=new Map;St(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,h=e.data.field(a.field);r.set(a.field,rx(l,h,t[i]))}return r}function Q_(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,nx(a,l,e))}return r}class Hh extends Y_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Sg extends Y_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class sx{constructor(e){this.count=e}}var mr,tn;function y0(n){switch(n){default:return Qe();case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0}}function v0(n){if(void 0===n)return gr("GRPC error has no .code"),de.UNKNOWN;switch(n){case mr.OK:return de.OK;case mr.CANCELLED:return de.CANCELLED;case mr.UNKNOWN:return de.UNKNOWN;case mr.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case mr.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case mr.INTERNAL:return de.INTERNAL;case mr.UNAVAILABLE:return de.UNAVAILABLE;case mr.UNAUTHENTICATED:return de.UNAUTHENTICATED;case mr.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case mr.NOT_FOUND:return de.NOT_FOUND;case mr.ALREADY_EXISTS:return de.ALREADY_EXISTS;case mr.PERMISSION_DENIED:return de.PERMISSION_DENIED;case mr.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case mr.ABORTED:return de.ABORTED;case mr.OUT_OF_RANGE:return de.OUT_OF_RANGE;case mr.UNIMPLEMENTED:return de.UNIMPLEMENTED;case mr.DATA_LOSS:return de.DATA_LOSS;default:return Qe()}}(tn=mr||(mr={}))[tn.OK=0]="OK",tn[tn.CANCELLED=1]="CANCELLED",tn[tn.UNKNOWN=2]="UNKNOWN",tn[tn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tn[tn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tn[tn.NOT_FOUND=5]="NOT_FOUND",tn[tn.ALREADY_EXISTS=6]="ALREADY_EXISTS",tn[tn.PERMISSION_DENIED=7]="PERMISSION_DENIED",tn[tn.UNAUTHENTICATED=16]="UNAUTHENTICATED",tn[tn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tn[tn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tn[tn.ABORTED=10]="ABORTED",tn[tn.OUT_OF_RANGE=11]="OUT_OF_RANGE",tn[tn.UNIMPLEMENTED=12]="UNIMPLEMENTED",tn[tn.INTERNAL=13]="INTERNAL",tn[tn.UNAVAILABLE=14]="UNAVAILABLE",tn[tn.DATA_LOSS=15]="DATA_LOSS";class mu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Bs(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return _b(this.inner)}size(){return this.innerSize}}const Fb=new ur(ze.comparator);function cs(){return Fb}const Lb=new ur(ze.comparator);function Ag(...n){let e=Lb;for(const t of n)e=e.insert(t.key,t);return e}function Vb(n){let e=Lb;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function jo(){return $h()}function ox(){return $h()}function $h(){return new mu(n=>n.toString(),(n,e)=>n.isEqual(e))}const ax=new ur(ze.comparator),ux=new pn(ze.comparator);function Gt(...n){let e=ux;for(const t of n)e=e.add(t);return e}const fk=new pn(Ft);function X_(){return fk}class xg{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Gh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new xg(At.min(),i,X_(),cs(),Gt())}}class Gh{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Gh(r,t,Gt(),Gt(),Gt())}}class Mg{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class w0{constructor(e,t){this.targetId=e,this.At=t}}class Ub{constructor(e,t,r=nt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Bb{constructor(){this.Rt=0,this.bt=Hb(),this.Pt=nt.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Gt(),t=Gt(),r=Gt();return this.bt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Qe()}}),new Gh(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=Hb()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class lx{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=cs(),this.qt=jb(),this.Kt=new pn(Ft)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:Qe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const a=i.target;if(r0(a))if(0===r){const l=new ze(a.path);this.jt(t,l,Tn.newNoDocument(l,At.min()))}else St(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((a,l)=>{const h=this.Xt(l);if(h){if(a.current&&r0(h.target)){const _=new ze(h.target.path);null!==this.Ut.get(_)||this.ee(l,_)||this.jt(l,_,Tn.newNoDocument(_,e))}a.Dt&&(t.set(l,a.xt()),a.Nt())}});let r=Gt();this.qt.forEach((a,l)=>{let h=!0;l.forEachWhile(_=>{const w=this.Xt(_);return!w||2===w.purpose||(h=!1,!1)}),h&&(r=r.add(a))}),this.Ut.forEach((a,l)=>l.setReadTime(e));const i=new xg(e,t,this.Kt,this.Ut,r);return this.Ut=cs(),this.qt=jb(),this.Kt=new pn(Ft),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new Bb,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new pn(Ft),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Pe("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new Bb),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function jb(){return new ur(ze.comparator)}function Hb(){return new ur(ze.comparator)}const cx={asc:"ASCENDING",desc:"DESCENDING"},dx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Rg{constructor(e,t){this.databaseId=e,this.gt=t}}function Wh(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function E0(n,e){return n.gt?e.toBase64():e.toUint8Array()}function $b(n,e){return Wh(n,e.toTimestamp())}function jr(n){return St(!!n),At.fromTimestamp(function(e){const t=wl(e);return new Ln(t.seconds,t.nanos)}(n))}function J_(n,e){return(t=n,new on(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Gb(n){const e=on.fromString(n);return St(Qb(e)),e}function Ng(n,e){return J_(n.databaseId,e.path)}function _u(n,e){const t=Gb(e);if(t.get(1)!==n.databaseId.projectId)throw new Ne(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ne(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ze(zb(t))}function I0(n,e){return J_(n.databaseId,e)}function Wb(n){const e=Gb(n);return 4===e.length?on.emptyPath():zb(e)}function kg(n){return new on(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function zb(n){return St(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function qb(n,e,t){return{name:Ng(n,e),fields:t.value.mapValue.fields}}function zh(n,e,t){const r=_u(n,e.name),i=jr(e.updateTime),a=new si({mapValue:{fields:e.fields}}),l=Tn.newFoundDocument(r,i,a);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function ds(n,e){let t;if(e instanceof Jc)t={update:qb(n,e.key,e.value)};else if(e instanceof Hh)t={delete:Ng(n,e.key)};else if(e instanceof gu)t={update:qb(n,e.key,e.data),updateMask:Yb(e.fieldMask)};else{if(!(e instanceof Sg))return Qe();t={verify:Ng(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Bh)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Sl)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Yc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Qc)return{fieldPath:a.field.canonicalString(),increment:l.yt};throw Qe()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:$b(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:Qe()),t;var i}function b0(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Vn.updateTime(jr(i.updateTime)):void 0!==i.exists?Vn.exists(i.exists):Vn.none():Vn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let h=null;"setToServerValue"in l?(St("REQUEST_TIME"===l.setToServerValue),h=new Bh):"appendMissingElements"in l?h=new Sl(l.appendMissingElements.values||[]):"removeAllFromArray"in l?h=new Yc(l.removeAllFromArray.values||[]):"increment"in l?h=new Qc(a,l.increment):Qe();const _=Jn.fromServerFormat(l.fieldPath);return new Dg(_,h)}(n,i)):[];var i;if(e.update){const i=_u(n,e.update.name),a=new si({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new ls((e.updateMask.fieldPaths||[]).map(w=>Jn.fromServerFormat(w)));return new gu(i,a,l,t,r)}return new Jc(i,a,t,r)}if(e.delete){const i=_u(n,e.delete);return new Hh(i,t)}if(e.verify){const i=_u(n,e.verify);return new Sg(i,t)}return Qe()}function qh(n,e){return{documents:[I0(n,e.path)]}}function T0(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=I0(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=I0(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0===_.length)return;const w=_.map(b=>function(A){if("=="===A.op){if(e0(A.value))return{unaryFilter:{field:Kh(A.field),op:"IS_NAN"}};if(Jw(A.value))return{unaryFilter:{field:Kh(A.field),op:"IS_NULL"}}}else if("!="===A.op){if(e0(A.value))return{unaryFilter:{field:Kh(A.field),op:"IS_NOT_NAN"}};if(Jw(A.value))return{unaryFilter:{field:Kh(A.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Kh(A.field),op:px(A.op),value:A.value}}}(b));return 1===w.length?w[0]:{compositeFilter:{op:"AND",filters:w}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(_){if(0!==_.length)return _.map(w=>{return{field:Kh((b=w).field),direction:ey(b.dir)};var b})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=(w=e.limit,n.gt||kh(w)?w:{value:w});var w,h,_;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function Kb(n){let e=Wb(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){St(1===r);const b=t.from[0];b.allDescendants?i=b.collectionId:e=e.child(b.collectionId)}let a=[];t.where&&(a=Pg(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(b=>{return new Zc(ed((A=b).field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction));var A}));let h=null;t.limit&&(h=function(b){let A;return A="object"==typeof b?b.value:b,kh(A)?null:A}(t.limit));let _=null;var b;t.startAt&&(_=new Dl((b=t.startAt).values||[],!!b.before));let w=null;return t.endAt&&(w=function(b){return new Dl(b.values||[],!b.before)}(t.endAt)),a0(e,i,l,a,h,"F",_,w)}function Pg(n){return n?void 0!==n.unaryFilter?[S0(n)]:void 0!==n.fieldFilter?[Zb(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>Pg(e)).reduce((e,t)=>e.concat(t)):Qe():[]}function ey(n){return cx[n]}function px(n){return dx[n]}function Kh(n){return{fieldPath:n.canonicalString()}}function ed(n){return Jn.fromServerFormat(n.fieldPath)}function Zb(n){return Tr.create(ed(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Qe()}}(n.fieldFilter.op),n.fieldFilter.value)}function S0(n){switch(n.unaryFilter.op){case"IS_NAN":const e=ed(n.unaryFilter.field);return Tr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=ed(n.unaryFilter.field);return Tr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ed(n.unaryFilter.field);return Tr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ed(n.unaryFilter.field);return Tr.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Qe()}}function Yb(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Qb(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Qi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ty(e)),e=pk(n.get(t),e);return ty(e)}function pk(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function ty(n){return n+"\x01\x01"}function fo(n){const e=n.length;if(St(e>=2),2===e)return St("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),on.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&Qe(),n.charAt(l+1)){case"\x01":const h=n.substring(a,l);let _;0===i.length?_=h:(i+=h,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:Qe()}a=l+2}return new on(r)}const A0=["userId","batchId"];function Zh(n,e){return[n,Qi(e)]}function ny(n,e,t){return[n,Qi(e),t]}const gx={},mx=["prefixPath","collectionGroup","readTime","documentId"],_x=["prefixPath","collectionGroup","documentId"],yx=["collectionGroup","readTime","prefixPath","documentId"],Xb=["canonicalId","targetId"],x0=["targetId","path"],Jb=["path","targetId"],vx=["collectionId","parent"],eD=["indexId","uid"],tD=["uid","sequenceNumber"],wx=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],nD=["indexId","uid","orderedDocumentKey"],rD=["userId","collectionPath","documentId"],Ex=["userId","collectionPath","largestBatchId"],iD=["userId","collectionGroup","largestBatchId"],sD=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Xi=[...sD,"documentOverlays"],td=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],oD=td,Ix=[...oD,"indexConfiguration","indexState","indexEntries"];class aD extends hb{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function _i(n,e){const t=Ze(n);return Uo.M(t.ie,e)}class ry{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&m0(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Tg(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Tg(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=ox();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let h=this.applyToLocalView(l,a.mutatedFields);h=t.has(i.key)?null:h;const _=Pb(l,h);null!==_&&r.set(i.key,_),l.isValidDocument()||l.convertToNoDocument(At.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Gt())}isEqual(e){return this.batchId===e.batchId&&_l(this.mutations,e.mutations,(t,r)=>Xc(t,r))&&_l(this.baseMutations,e.baseMutations,(t,r)=>Xc(t,r))}}class iy{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){St(e.mutations.length===r.length);let i=ax;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new iy(e,t,r,i)}}class nd{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Al{constructor(e,t,r,i,a=At.min(),l=At.min(),h=nt.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h}withSequenceNumber(e){return new Al(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Al(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Al(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class sy{constructor(e){this.re=e}}function M0(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:oy(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Ng(i=n.re,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:Wh(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:rd(e.version)};else{if(!e.isUnknownDocument())return Qe();r.unknownDocument={path:t.path.toArray(),version:rd(e.version)}}var i,a;return r}function oy(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function rd(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function id(n){const e=new Ln(n.seconds,n.nanoseconds);return At.fromTimestamp(e)}function yu(n,e){const t=(e.baseMutations||[]).map(a=>b0(n.re,a));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(l.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>b0(n.re,a)),i=Ln.fromMillis(e.localWriteTimeMs);return new ry(e.batchId,i,t,r)}function Yh(n){const e=id(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?id(n.lastLimboFreeSnapshotVersion):At.min();let r;var i;return void 0!==n.query.documents?(St(1===(i=n.query).documents.length),r=Yi(Vh(Wb(i.documents[0])))):r=Yi(Kb(n.query)),new Al(r,n.targetId,0,n.lastListenSequenceNumber,e,t,nt.fromBase64String(n.resumeToken))}function R0(n,e){const t=rd(e.snapshotVersion),r=rd(e.lastLimboFreeSnapshotVersion);let i;i=r0(e.target)?qh(n.re,e.target):T0(n.re,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Kc(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Qh(n){const e=Kb({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?bg(e,e.limit,"L"):e}function Og(n,e){return new nd(e.largestBatchId,b0(n.re,e.overlayMutation))}function bx(n,e){const t=e.path.lastSegment();return[n,Qi(e.path.popLast()),t]}function N0(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:rd(r.readTime),documentKey:Qi(r.documentKey.path),largestBatchId:r.largestBatchId}}class Dx{getBundleMetadata(e,t){return k0(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:id(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return k0(e).put({bundleId:(r=t).id,createTime:rd(jr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return sd(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Qh(i.bundledQuery),readTime:id(i.readTime)};var i})}saveNamedQuery(e,t){return sd(e).put({name:(r=t).name,readTime:rd(jr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function k0(n){return _i(n,"bundles")}function sd(n){return _i(n,"namedQueries")}class ay{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new ay(e,t.uid||"")}getOverlay(e,t){return Xh(e).get(bx(this.userId,t)).next(r=>r?Og(this.It,r):null)}getOverlays(e,t){const r=jo();return ue.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const h=new nd(t,l);i.push(this.ue(e,h))}),ue.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Qi(l.getCollectionPath())));const a=[];return i.forEach(l=>{const h=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(Xh(e).Y("collectionPathOverlayIndex",h))}),ue.waitFor(a)}getOverlaysForCollection(e,t,r){const i=jo(),a=Qi(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Xh(e).W("collectionPathOverlayIndex",l).next(h=>{for(const _ of h){const w=Og(this.It,_);i.set(w.getKey(),w)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=jo();let l;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Xh(e).Z({index:"collectionGroupOverlayIndex",range:h},(_,w,b)=>{const A=Og(this.It,w);a.size()<i||A.largestBatchId===l?(a.set(A.getKey(),A),l=A.largestBatchId):b.done()}).next(()=>a)}ue(e,t){return Xh(e).put(function(r,i,a){const[l,h,_]=bx(i,a.mutation.key);return{userId:i,collectionPath:h,documentId:_,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:ds(r.re,a.mutation)}}(this.It,this.userId,t))}}function Xh(n){return _i(n,"documentOverlays")}class vu{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(lr(e.integerValue));else if("doubleValue"in e){const r=lr(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),Ph(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(ho(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?Oh(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):Qe()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),ze.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function gk(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function uD(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=gk(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}vu.Te=new vu;class mk{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=uD(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=uD(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Tx{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class Sx{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class Fg{constructor(){this.Be=new mk,this.Le=new Tx(this.Be),this.Ue=new Sx(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class xl{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new xl(this.indexId,this.documentKey,this.arrayValue,r)}}function Ml(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=lD(n.arrayValue,e.arrayValue),0!==t?t:(t=lD(n.directionalValue,e.directionalValue),0!==t?t:ze.comparator(n.documentKey,e.documentKey)))}function lD(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class cD{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=Ww(e);if(void 0!==t&&!this.ze(t))return!1;const r=Gc(e);let i=0,a=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const l=r[i];if(!this.He(this.je,l)||!this.Je(this.Ge[a++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(a>=this.Ge.length||!this.Je(this.Ge[a++],l))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class dD{constructor(){this.Ye=new P0}addToCollectionParentIndex(e,t){return this.Ye.add(t),ue.resolve()}getCollectionParents(e,t){return ue.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return ue.resolve()}deleteFieldIndex(e,t){return ue.resolve()}getDocumentsMatchingTarget(e,t){return ue.resolve(null)}getIndexType(e,t){return ue.resolve(0)}getFieldIndexes(e,t){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,t){return ue.resolve(Us.min())}getMinOffsetFromCollectionGroup(e,t){return ue.resolve(Us.min())}updateCollectionGroup(e,t,r){return ue.resolve()}updateIndexEntries(e,t){return ue.resolve()}}class P0{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new pn(on.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new pn(on.comparator)).toArray()}}const uy=new Uint8Array(0);class hD{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new P0,this.Ze=new mu(r=>Kc(r),(r,i)=>z_(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const a={collectionId:r,parent:Qi(i)};return fD(e).put(a)}return ue.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Gw(t),""],!1,!0);return fD(e).W(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(fo(l.parent))}return r})}addFieldIndex(e,t){const r=Lg(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var l;delete i.indexId;const a=r.add(i);if(t.indexState){const l=ef(e);return a.next(h=>{l.put(N0(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=Lg(e),i=ef(e),a=Jh(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Jh(e);let i=!0;const a=new Map;return ue.forEach(this.tn(t),l=>this.en(e,l).next(h=>{i&&(i=!!h),a.set(l,h)})).next(()=>{if(i){let l=Gt();const h=[];return ue.forEach(a,(_,w)=>{var b;Pe("IndexedDbIndexManager",`Using index ${b=_,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(rt=>`${rt.fieldPath}:${rt.kind}`).join(",")}`} to execute ${Kc(t)}`);const A=function(rt,ut){const xt=Ww(ut);if(void 0===xt)return null;for(const Bt of s0(rt,xt.fieldPath))switch(Bt.op){case"array-contains-any":return Bt.value.arrayValue.values||[];case"array-contains":return[Bt.value]}return null}(w,_),N=function(rt,ut){const xt=new Map;for(const Bt of Gc(ut))for(const yr of s0(rt,Bt.fieldPath))switch(yr.op){case"==":case"in":xt.set(Bt.fieldPath.canonicalString(),yr.value);break;case"not-in":case"!=":return xt.set(Bt.fieldPath.canonicalString(),yr.value),Array.from(xt.values())}return null}(w,_),F=function(rt,ut){const xt=[];let Bt=!0;for(const yr of Gc(ut)){const Su=0===yr.kind?KA(rt,yr.fieldPath,rt.startAt):o0(rt,yr.fieldPath,rt.startAt);xt.push(Su.value),Bt&&(Bt=Su.inclusive)}return new Dl(xt,Bt)}(w,_),B=function(rt,ut){const xt=[];let Bt=!0;for(const yr of Gc(ut)){const Su=0===yr.kind?o0(rt,yr.fieldPath,rt.endAt):KA(rt,yr.fieldPath,rt.endAt);xt.push(Su.value),Bt&&(Bt=Su.inclusive)}return new Dl(xt,Bt)}(w,_),oe=this.nn(_,w,F),he=this.nn(_,w,B),We=this.sn(_,w,N),ot=this.rn(_.indexId,A,oe,F.inclusive,he,B.inclusive,We);return ue.forEach(ot,rt=>r.J(rt,t.limit).next(ut=>{ut.forEach(xt=>{const Bt=ze.fromSegments(xt.documentKey);l.has(Bt)||(l=l.add(Bt),h.push(Bt))})}))}).next(()=>h)}return ue.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,a,l,h){const _=(null!=t?t.length:1)*Math.max(r.length,a.length),w=_/(null!=t?t.length:1),b=[];for(let A=0;A<_;++A){const N=t?this.on(t[A/w]):uy,F=this.un(e,N,r[A%w],i),B=this.cn(e,N,a[A%w],l),oe=h.map(he=>this.un(e,N,he,!0));b.push(...this.createRange(F,B,oe))}return b}un(e,t,r,i){const a=new xl(e,ze.empty(),t,r);return i?a:a.Ke()}cn(e,t,r,i){const a=new xl(e,ze.empty(),t,r);return i?a.Ke():a}en(e,t){const r=new cD(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const h of a)r.We(h)&&(!l||h.fields.length>l.fields.length)&&(l=h);return l})}getIndexType(e,t){let r=2;return ue.forEach(this.tn(t),i=>this.en(e,i).next(a=>{a?0!==r&&a.fields.length<function(l){let h=new pn(Jn.comparator),_=!1;for(const w of l.filters){const b=w;b.field.isKeyField()||("array-contains"===b.op||"array-contains-any"===b.op?_=!0:h=h.add(b.field))}for(const w of l.orderBy)w.field.isKeyField()||(h=h.add(w.field));return h.size+(_?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new Fg;for(const i of Gc(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.qe(i.kind);vu.Te.ce(a,l)}return r.$e()}on(e){const t=new Fg;return vu.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new Fg;return vu.Te.ce(qc(this.databaseId,t),r.qe(function(i){const a=Gc(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new Fg);let a=0;for(const l of Gc(e)){const h=r[a++];for(const _ of i)if(this.ln(t,l.fieldPath)&&bl(h))i=this.fn(i,l,h);else{const w=_.qe(l.kind);vu.Te.ce(h,w)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const h of i){const _=new Fg;_.seed(h.$e()),vu.Te.ce(l,_.qe(t.kind)),a.push(_)}return a}ln(e,t){return!!e.filters.find(r=>r instanceof Tr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Lg(e),i=ef(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(a=>{const l=[];return ue.forEach(a,h=>i.get([h.indexId,this.uid]).next(_=>{l.push(function(w,b){const A=b?new _g(b.sequenceNumber,new Us(id(b.readTime),new ze(fo(b.documentKey)),b.largestBatchId)):_g.empty(),N=w.fields.map(([F,B])=>new $_(Jn.fromServerFormat(F),B));return new H_(w.indexId,w.collectionGroup,N,A)}(h,_))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Ft(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Lg(e),a=ef(e);return this._n(e).next(l=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>ue.forEach(h,_=>a.put(N0(_.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return ue.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?ue.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),ue.forEach(h,_=>this.wn(e,i,_).next(w=>{const b=this.mn(a,_);return w.isEqual(b)?ue.resolve():this.gn(e,a,_,w,b)}))))})}yn(e,t,r,i){return Jh(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return Jh(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=Jh(e);let a=new pn(Ml);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(l,h)=>{a=a.add(new xl(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>a)}mn(e,t){let r=new pn(Ml);const i=this.an(t,e);if(null==i)return r;const a=Ww(t);if(null!=a){const l=e.data.field(a.fieldPath);if(bl(l))for(const h of l.arrayValue.values||[])r=r.add(new xl(t.indexId,e.key,this.on(h),i))}else r=r.add(new xl(t.indexId,e.key,uy,i));return r}gn(e,t,r,i,a){Pe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(h,_,w,b,A){const N=h.getIterator(),F=_.getIterator();let B=Wc(N),oe=Wc(F);for(;B||oe;){let he=!1,We=!1;if(B&&oe){const ot=w(B,oe);ot<0?We=!0:ot>0&&(he=!0)}else null!=B?We=!0:he=!0;he?(b(oe),oe=Wc(F)):We?(A(B),B=Wc(N)):(B=Wc(N),oe=Wc(F))}}(i,a,Ml,h=>{l.push(this.yn(e,t,r,h))},h=>{l.push(this.pn(e,t,r,h))}),ue.waitFor(l)}_n(e){let t=1;return ef(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,h)=>Ml(l,h)).filter((l,h,_)=>!h||0!==Ml(l,_[h-1]));const i=[];i.push(e);for(const l of r){const h=Ml(l,e),_=Ml(l,t);if(0===h)i[0]=e.Ke();else if(h>0&&_<0)i.push(l),i.push(l.Ke());else if(_>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2)a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,uy,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,uy,[]]));return a}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(O0)}getMinOffset(e,t){return ue.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||Qe())).next(O0)}}function fD(n){return _i(n,"collectionParents")}function Jh(n){return _i(n,"indexEntries")}function Lg(n){return _i(n,"indexConfiguration")}function ef(n){return _i(n,"indexState")}function O0(n){St(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;zw(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Us(e.readTime,e.documentKey,t)}const pD={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class hs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new hs(e,hs.DEFAULT_COLLECTION_PERCENTILE,hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Ax(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let h=0;const _=r.Z({range:l},(b,A,N)=>(h++,N.delete()));a.push(_.next(()=>{St(1===h)}));const w=[];for(const b of t.mutations){const A=ny(e,b.key.path,t.batchId);a.push(i.delete(A)),w.push(b.key)}return ue.waitFor(a).next(()=>w)}function Vg(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Qe();e=n.noDocument}return JSON.stringify(e).length}hs.DEFAULT_COLLECTION_PERCENTILE=10,hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hs.DEFAULT=new hs(41943040,hs.DEFAULT_COLLECTION_PERCENTILE,hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hs.DISABLED=new hs(-1,0,0);class F0{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){St(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new F0(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return od(e).Z({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=Ug(e),l=od(e);return l.add({}).next(h=>{St("number"==typeof h);const _=new ry(h,t,r,i),w=function(N,F,B){const oe=B.baseMutations.map(We=>ds(N.re,We)),he=B.mutations.map(We=>ds(N.re,We));return{userId:F,batchId:B.batchId,localWriteTimeMs:B.localWriteTime.toMillis(),baseMutations:oe,mutations:he}}(this.It,this.userId,_),b=[];let A=new pn((N,F)=>Ft(N.canonicalString(),F.canonicalString()));for(const N of i){const F=ny(this.userId,N.key.path,h);A=A.add(N.key.path.popLast()),b.push(l.put(w)),b.push(a.put(F,gx))}return A.forEach(N=>{b.push(this.indexManager.addToCollectionParentIndex(e,N))}),e.addOnCommittedListener(()=>{this.In[h]=_.keys()}),ue.waitFor(b).next(()=>_)})}lookupMutationBatch(e,t){return od(e).get(t).next(r=>r?(St(r.userId===this.userId),yu(this.It,r)):null)}Tn(e,t){return this.In[t]?ue.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return od(e).Z({index:"userMutationsIndex",range:i},(l,h,_)=>{h.userId===this.userId&&(St(h.batchId>=r),a=yu(this.It,h)),_.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return od(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return od(e).W("userMutationsIndex",t).next(r=>r.map(i=>yu(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Zh(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Ug(e).Z({range:i},(l,h,_)=>{const[w,b,A]=l,N=fo(b);if(w===this.userId&&t.path.isEqual(N))return od(e).get(A).next(F=>{if(!F)throw Qe();St(F.userId===this.userId),a.push(yu(this.It,F))});_.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new pn(Ft);const i=[];return t.forEach(a=>{const l=Zh(this.userId,a.path),h=IDBKeyRange.lowerBound(l),_=Ug(e).Z({range:h},(w,b,A)=>{const[N,F,B]=w,oe=fo(F);N===this.userId&&a.path.isEqual(oe)?r=r.add(B):A.done()});i.push(_)}),ue.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=Zh(this.userId,r),l=IDBKeyRange.lowerBound(a);let h=new pn(Ft);return Ug(e).Z({range:l},(_,w,b)=>{const[A,N,F]=_,B=fo(N);A===this.userId&&r.isPrefixOf(B)?B.length===i&&(h=h.add(F)):b.done()}).next(()=>this.En(e,h))}En(e,t){const r=[],i=[];return t.forEach(a=>{i.push(od(e).get(a).next(l=>{if(null===l)throw Qe();St(l.userId===this.userId),r.push(yu(this.It,l))}))}),ue.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Ax(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),ue.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ue.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Ug(e).Z({range:r},(a,l,h)=>{if(a[0]===this.userId){const _=fo(a[1]);i.push(_)}else h.done()}).next(()=>{St(0===i.length)})})}containsKey(e,t){return xx(e,this.userId,t)}Rn(e){return Mx(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function xx(n,e,t){const r=Zh(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return Ug(n).Z({range:a,X:!0},(h,_,w)=>{const[b,A,N]=h;b===e&&A===i&&(l=!0),w.done()}).next(()=>l)}function od(n){return _i(n,"mutations")}function Ug(n){return _i(n,"documentMutations")}function Mx(n){return _i(n,"mutationQueues")}class tf{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new tf(0)}static vn(){return new tf(-1)}}class _k{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new tf(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>At.fromTimestamp(new Ln(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Bg(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(St(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return Bg(e).Z((l,h)=>{const _=Yh(h);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,a.push(this.removeTargetData(e,_)))}).next(()=>ue.waitFor(a)).next(()=>i)}forEachTarget(e,t){return Bg(e).Z((r,i)=>{const a=Yh(i);t(a)})}Vn(e){return jg(e).get("targetGlobalKey").next(t=>(St(null!==t),t))}Sn(e,t){return jg(e).put("targetGlobalKey",t)}Dn(e,t){return Bg(e).put(R0(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Kc(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Bg(e).Z({range:i,index:"queryTargetsIndex"},(l,h,_)=>{const w=Yh(h);z_(t,w.target)&&(a=w,_.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=ad(e);return t.forEach(l=>{const h=Qi(l.path);i.push(a.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,l))}),ue.waitFor(i)}removeMatchingKeys(e,t,r){const i=ad(e);return ue.forEach(t,a=>{const l=Qi(a.path);return ue.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=ad(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=ad(e);let a=Gt();return i.Z({range:r,X:!0},(l,h,_)=>{const w=fo(l[1]),b=new ze(w);a=a.add(b)}).next(()=>a)}containsKey(e,t){const r=Qi(t.path),i=IDBKeyRange.bound([r],[Gw(r)],!1,!0);let a=0;return ad(e).Z({index:"documentTargetsIndex",X:!0,range:i},([l,h],_,w)=>{0!==l&&(a++,w.done())}).next(()=>a>0)}se(e,t){return Bg(e).get(t).next(r=>r?Yh(r):null)}}function Bg(n){return _i(n,"targets")}function jg(n){return _i(n,"targetGlobal")}function ad(n){return _i(n,"targetDocuments")}function L0([n,e],[t,r]){const i=Ft(n,t);return 0===i?Ft(e,r):i}class ly{constructor(e){this.xn=e,this.buffer=new pn(L0),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();L0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class gD{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Pe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,_e.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){du(r)?Pe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield yl(r)}yield t.Fn(3e5)}))}}class mD{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ue.resolve(Zi.at);const r=new ly(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(pD)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pD):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,a,l,h,_,w;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),i=this.params.maximumSequenceNumbersToCollect):i=A,l=Date.now(),this.nthSequenceNumber(e,i))).next(A=>(r=A,h=Date.now(),this.removeTargets(e,r,t))).next(A=>(a=A,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(A=>(w=Date.now(),gg()<=qi.in.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-b}ms\n\tDetermined least recently used ${i} in `+(h-l)+`ms\n\tRemoved ${a} targets in `+(_-h)+`ms\n\tRemoved ${A} documents in `+(w-_)+`ms\nTotal Duration: ${w-b}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:A})))}}class yk{constructor(e,t){this.db=e,this.garbageCollector=new mD(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return nf(e,r)}removeReference(e,t,r){return nf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return nf(e,t)}Gn(e,t){return function(r,i){let a=!1;return Mx(r).tt(l=>xx(r,l,i).next(h=>(h&&(a=!0),ue.resolve(!h)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Kn(e,(l,h)=>{if(h<=t){const _=this.Gn(e,l).next(w=>{if(!w)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,At.min()),ad(e).delete([0,Qi(l.path)])))});i.push(_)}}).next(()=>ue.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return nf(e,t)}Kn(e,t){const r=ad(e);let i,a=Zi.at;return r.Z({index:"documentTargetsIndex"},([l,h],{path:_,sequenceNumber:w})=>{0===l?(a!==Zi.at&&t(new ze(fo(i)),a),a=w,i=_):a=Zi.at}).next(()=>{a!==Zi.at&&t(new ze(fo(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function nf(n,e){return ad(n).put((r=n.currentSequenceNumber,{targetId:0,path:Qi(e.path),sequenceNumber:r}));var r}class V0{constructor(){this.changes=new mu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Tn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ue.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Rx{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ud(e).put(r)}removeEntry(e,t,r){return ud(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],oy(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Tn.newInvalidDocument(t);return ud(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Hg(t))},(i,a)=>{r=this.jn(t,a)}).next(()=>r)}Wn(e,t){let r={size:0,document:Tn.newInvalidDocument(t)};return ud(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Hg(t))},(i,a)=>{r={document:this.jn(t,a),size:Vg(a)}}).next(()=>r)}getEntries(e,t){let r=cs();return this.zn(e,t,(i,a)=>{const l=this.jn(i,a);r=r.insert(i,l)}).next(()=>r)}Hn(e,t){let r=cs(),i=new ur(ze.comparator);return this.zn(e,t,(a,l)=>{const h=this.jn(a,l);r=r.insert(a,h),i=i.insert(a,Vg(l))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return ue.resolve();let i=new pn(_D);t.forEach(_=>i=i.add(_));const a=IDBKeyRange.bound(Hg(i.first()),Hg(i.last())),l=i.getIterator();let h=l.getNext();return ud(e).Z({index:"documentKeyIndex",range:a},(_,w,b)=>{const A=ze.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;h&&_D(h,A)<0;)r(h,null),h=l.getNext();h&&h.isEqual(A)&&(r(h,w),h=l.hasNext()?l.getNext():null),h?b.j(Hg(h)):b.done()}).next(()=>{for(;h;)r(h,null),h=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),oy(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ud(e).W(IDBKeyRange.bound(i,a,!0)).next(l=>{let h=cs();for(const _ of l){const w=this.jn(ze.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);h=h.insert(w.key,w)}return h})}getAllFromCollectionGroup(e,t,r,i){let a=cs();const l=$g(t,r),h=$g(t,Us.max());return ud(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,h,!0)},(_,w,b)=>{const A=this.jn(ze.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);a=a.insert(A.key,A),a.size===i&&b.done()}).next(()=>a)}newChangeBuffer(e){return new vk(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Nx(e).get("remoteDocumentGlobalKey").next(t=>(St(!!t),t))}Qn(e,t){return Nx(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function Cx(n,e){let t;if(e.document)t=zh(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ze.fromSegments(e.noDocument.path),i=id(e.noDocument.readTime);t=Tn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Qe();{const r=ze.fromSegments(e.unknownDocument.path),i=id(e.unknownDocument.version);t=Tn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Ln(r[0],r[1]);return At.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(At.min()))return r}return Tn.newInvalidDocument(e)}}function U0(n){return new Rx(n)}class vk extends V0{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new mu(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new pn((a,l)=>Ft(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const h=this.Xn.get(a);if(t.push(this.Yn.removeEntry(e,a,h.readTime)),l.isValidDocument()){const _=M0(this.Yn.It,l);i=i.add(a.path.popLast());const w=Vg(_);r+=w-h.size,t.push(this.Yn.addEntry(e,a,_))}else if(r-=h.size,this.trackRemovals){const _=M0(this.Yn.It,l.convertToNoDocument(At.min()));t.push(this.Yn.addEntry(e,a,_))}}),i.forEach(a=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Yn.updateMetadata(e,r)),ue.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((a,l)=>{this.Xn.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function Nx(n){return _i(n,"remoteDocumentGlobal")}function ud(n){return _i(n,"remoteDocumentsV14")}function Hg(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function $g(n,e){const t=e.documentKey.path.toArray();return[n,oy(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function _D(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Ft(t[a],r[a]),i)return i;return i=Ft(t.length,r.length),i||(i=Ft(t[t.length-2],r[r.length-2]),i||Ft(t[t.length-1],r[r.length-1]))}class wk{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class kx{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&Tg(r.mutation,i,ls.empty(),Ln.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Gt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Gt()){const i=jo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let l=Ag();return a.forEach((h,_)=>{l=l.insert(h,_.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=jo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Gt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,h)=>{t.set(l,h)})})}computeViews(e,t,r,i){let a=cs();const l=$h(),h=$h();return t.forEach((_,w)=>{const b=r.get(w.key);i.has(w.key)&&(void 0===b||b.mutation instanceof gu)?a=a.insert(w.key,w):void 0!==b&&(l.set(w.key,b.mutation.getFieldMask()),Tg(b.mutation,w,b.mutation.getFieldMask(),Ln.now()))}),this.recalculateAndSaveOverlays(e,a).next(_=>(_.forEach((w,b)=>l.set(w,b)),t.forEach((w,b)=>{var A;return h.set(w,new wk(b,null!==(A=l.get(w))&&void 0!==A?A:null))}),h))}recalculateAndSaveOverlays(e,t){const r=$h();let i=new ur((l,h)=>l-h),a=Gt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const h of l)h.keys().forEach(_=>{const w=t.get(_);if(null===w)return;let b=r.get(_)||ls.empty();b=h.applyToLocalView(w,b),r.set(_,b);const A=(i.get(h.batchId)||Gt()).add(_);i=i.insert(h.batchId,A)})}).next(()=>{const l=[],h=i.getReverseIterator();for(;h.hasNext();){const _=h.getNext(),w=_.key,b=_.value,A=ox();b.forEach(N=>{if(!a.has(N)){const F=Pb(t.get(N),r.get(N));null!==F&&A.set(N,F),a=a.add(N)}}),l.push(this.documentOverlayCache.saveOverlays(e,w,A))}return ue.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return ze.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):c0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):ue.resolve(jo());let h=-1,_=a;return l.next(w=>ue.forEach(w,(b,A)=>(h<A.largestBatchId&&(h=A.largestBatchId),a.get(b)?ue.resolve():this.getBaseDocument(e,b,A).next(N=>{_=_.insert(b,N)}))).next(()=>this.populateOverlays(e,w,a)).next(()=>this.computeViews(e,_,w,Gt())).next(b=>({batchId:h,changes:Vb(b)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ze(t)).next(r=>{let i=Ag();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=Ag();return this.indexManager.getCollectionParents(e,i).next(l=>ue.forEach(l,h=>{const _=(w=t,b=h.child(i),new pu(b,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,b;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(w=>{w.forEach((b,A)=>{a=a.insert(b,A)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(a=>{a.forEach((h,_)=>{const w=_.getKey();null===i.get(w)&&(i=i.insert(w,Tn.newInvalidDocument(w)))});let l=Ag();return i.forEach((h,_)=>{const w=a.get(h);void 0!==w&&Tg(w.mutation,_,ls.empty(),Ln.now()),h0(t,_)&&(l=l.insert(h,_))}),l})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):ue.resolve(Tn.newInvalidDocument(t))}}class Ek{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return ue.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:jr(r.createTime)}),ue.resolve()}getNamedQuery(e,t){return ue.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:Qh(r.bundledQuery),readTime:jr(r.readTime)}),ue.resolve();var r}}class Px{constructor(){this.overlays=new ur(ze.comparator),this.es=new Map}getOverlay(e,t){return ue.resolve(this.overlays.get(t))}getOverlays(e,t){const r=jo();return ue.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.ue(e,t,a)}),ue.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.es.delete(r)),ue.resolve()}getOverlaysForCollection(e,t,r){const i=jo(),a=t.length+1,l=new ze(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const _=h.getNext().value,w=_.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===a&&_.largestBatchId>r&&i.set(_.getKey(),_)}return ue.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new ur((w,b)=>w-b);const l=this.overlays.getIterator();for(;l.hasNext();){const w=l.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>r){let b=a.get(w.largestBatchId);null===b&&(b=jo(),a=a.insert(w.largestBatchId,b)),b.set(w.getKey(),w)}}const h=jo(),_=a.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((w,b)=>h.set(w,b)),!(h.size()>=i)););return ue.resolve(h)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new nd(t,r));let a=this.es.get(t);void 0===a&&(a=Gt(),this.es.set(t,a)),this.es.set(t,a.add(r.key))}}class B0{constructor(){this.ns=new pn(oi.ss),this.rs=new pn(oi.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new oi(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new oi(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new ze(new on([])),r=new oi(t,e),i=new oi(t,e+1),a=[];return this.rs.forEachInRange([r,i],l=>{this.cs(l),a.push(l.key)}),a}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new ze(new on([])),r=new oi(t,e),i=new oi(t,e+1);let a=Gt();return this.rs.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new oi(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class oi{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return ze.comparator(e.key,t.key)||Ft(e._s,t._s)}static os(e,t){return Ft(e._s,t._s)||ze.comparator(e.key,t.key)}}class Ik{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new pn(oi.ss)}checkEmpty(e){return ue.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.ws;this.ws++;const l=new ry(a,t,r,i);this.mutationQueue.push(l);for(const h of i)this.gs=this.gs.add(new oi(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ue.resolve(l)}lookupMutationBatch(e,t){return ue.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),a=i<0?0:i;return ue.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new oi(t,0),i=new oi(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],l=>{const h=this.ys(l._s);a.push(h)}),ue.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new pn(Ft);return t.forEach(i=>{const a=new oi(i,0),l=new oi(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([a,l],h=>{r=r.add(h._s)})}),ue.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;ze.isDocumentKey(a)||(a=a.child(""));const l=new oi(new ze(a),0);let h=new pn(Ft);return this.gs.forEachWhile(_=>{const w=_.key.path;return!!r.isPrefixOf(w)&&(w.length===i&&(h=h.add(_._s)),!0)},l),ue.resolve(this.Is(h))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){St(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return ue.forEach(t.mutations,i=>{const a=new oi(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new oi(t,0),i=this.gs.firstAfterOrEqual(r);return ue.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ue.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Ox{constructor(e){this.Es=e,this.docs=new ur(ze.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ue.resolve(r?r.document.mutableCopy():Tn.newInvalidDocument(t))}getEntries(e,t){let r=cs();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Tn.newInvalidDocument(i))}),ue.resolve(r)}getAllFromCollection(e,t,r){let i=cs();const a=new ze(t.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:h,value:{document:_}}=l.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||zw(cb(_),r)<=0||(i=i.insert(_.key,_.mutableCopy()))}return ue.resolve(i)}getAllFromCollectionGroup(e,t,r,i){Qe()}As(e,t){return ue.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new yD(this)}getSize(e){return ue.resolve(this.size)}}class yD extends V0{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),ue.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class vD{constructor(e){this.persistence=e,this.Rs=new mu(t=>Kc(t),z_),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this.bs=0,this.Ps=new B0,this.targetCount=0,this.vs=tf.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),ue.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new tf(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,ue.resolve()}updateTargetData(e,t){return this.Dn(t),ue.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Rs.forEach((l,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Rs.delete(l),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),ue.waitFor(a).next(()=>i)}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return ue.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),ue.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),ue.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),ue.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return ue.resolve(r)}containsKey(e,t){return ue.resolve(this.Ps.containsKey(t))}}class Fx{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Zi(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new vD(this),this.indexManager=new dD,this.remoteDocumentCache=new Ox(r=>this.referenceDelegate.xs(r)),this.It=new sy(t),this.Ns=new Ek(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Px,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new Ik(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Pe("MemoryPersistence","Starting transaction:",e);const i=new Ho(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(a=>this.referenceDelegate.Os(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ms(e,t){return ue.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class Ho extends hb{constructor(e){super(),this.currentSequenceNumber=e}}class cy{constructor(e){this.persistence=e,this.Fs=new B0,this.$s=null}static Bs(e){return new cy(e)}get Ls(){if(this.$s)return this.$s;throw Qe()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),ue.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),ue.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),ue.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ls.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.Ls,r=>{const i=ze.fromPath(r);return this.Us(e,i).next(a=>{a||t.removeEntry(i,At.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return ue.or([()=>ue.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class j0{constructor(e){this.It=e}$(e,t,r,i){const a=new G_("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",A0,{unique:!0}),h.createObjectStore("documentMutations"),wD(e),function(h){h.createObjectStore("remoteDocuments")}(e));let l=ue.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),wD(e)),l=l.next(()=>function(h){const _=h.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:At.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",w)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(h,_){return _.store("mutations").W().next(w=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",A0,{unique:!0});const b=_.store("mutations"),A=w.map(N=>b.put(N));return ue.waitFor(A)})}(e,a))),l=l.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.qs(a))),r<6&&i>=6&&(l=l.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(a)))),r<7&&i>=7&&(l=l.next(()=>this.Gs(a))),r<8&&i>=8&&(l=l.next(()=>this.Qs(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.js(a))),r<11&&i>=11&&(l=l.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(h){const _=h.createObjectStore("documentOverlays",{keyPath:rD});_.createIndex("collectionPathOverlayIndex",Ex,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",iD,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(h){const _=h.createObjectStore("remoteDocumentsV14",{keyPath:mx});_.createIndex("documentKeyIndex",_x),_.createIndex("collectionGroupIndex",yx)}(e)).next(()=>this.Ws(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.zs(e,a))),r<15&&i>=15&&(l=l.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:eD}).createIndex("sequenceNumberIndex",tD,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:wx}).createIndex("documentKeyIndex",nD,{unique:!1})}(e))),l}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=Vg(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>ue.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(h=>ue.forEach(h,_=>{St(_.userId===a.userId);const w=yu(this.It,_);return Ax(e,a.userId,w).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Z((l,h)=>{const _=new on(l),w=[0,Qi(_)];a.push(t.get(w).next(b=>b?ue.resolve():t.put({targetId:0,path:Qi(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ue.waitFor(a))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:vx});const r=t.store("collectionParents"),i=new P0,a=l=>{if(i.add(l)){const h=l.lastSegment(),_=l.popLast();return r.put({collectionId:h,parent:Qi(_)})}};return t.store("remoteDocuments").Z({X:!0},(l,h)=>{const _=new on(l);return a(_.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([l,h,_],w)=>{const b=fo(h);return a(b.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const a=Yh(i),l=R0(this.It,a);return t.put(l)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((a,l)=>{const h=t.store("remoteDocumentsV14"),_=(w=l,w.document?new ze(on.fromString(w.document.name).popFirst(5)):w.noDocument?ze.fromSegments(w.noDocument.path):w.unknownDocument?ze.fromSegments(w.unknownDocument.path):Qe()).path.toArray();var w;const b={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(h.put(b))}).next(()=>ue.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=U0(this.It),a=new Fx(cy.Bs,this.It.re);return r.W().next(l=>{const h=new Map;return l.forEach(_=>{var w;let b=null!==(w=h.get(_.userId))&&void 0!==w?w:Gt();yu(this.It,_).keys().forEach(A=>b=b.add(A)),h.set(_.userId,b)}),ue.forEach(h,(_,w)=>{const b=new Ur(w),A=ay.oe(this.It,b),N=a.getIndexManager(b),F=F0.oe(b,this.It,N,a.referenceDelegate);return new kx(i,F,A,N).recalculateAndSaveOverlaysForDocumentKeys(new aD(t,Zi.at),_).next()})})}}function wD(n){n.createObjectStore("targetDocuments",{keyPath:x0}).createIndex("documentTargetsIndex",Jb,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Xb,{unique:!0}),n.createObjectStore("targetGlobal")}const ED="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class fs{constructor(e,t,r,i,a,l,h,_,w,b,A=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=a,this.window=l,this.document=h,this.Js=w,this.Ys=b,this.Xs=A,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=N=>Promise.resolve(),!fs.C())throw new Ne(de.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new yk(this,i),this.ii=t+"main",this.It=new sy(_),this.ri=new Uo(this.ii,this.Xs,new j0(this.It)),this.Cs=new _k(this.referenceDelegate,this.It),this.remoteDocumentCache=U0(this.It),this.Ns=new Dx,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===b&&gr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ne(de.FAILED_PRECONDITION,ED);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Zi(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,_e.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,_e.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,_e.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>rf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(du(e))return Pe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Pe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Gg(e).get("owner").next(t=>ue.resolve(this.mi(t)))}gi(e){return rf(e).delete(this.clientId)}yi(){var e=this;return(0,_e.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=_i(r,"clientMetadata");return i.W().next(a=>{const l=e.Ii(a,18e5),h=a.filter(_=>-1===l.indexOf(_));return ue.forEach(h,_=>i.delete(_.clientId)).next(()=>h)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?ue.resolve(!0):Gg(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Ne(de.FAILED_PRECONDITION,ED);return!1}}return!(!this.networkEnabled||!this.inForeground)||rf(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Pe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,_e.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new aD(t,Zi.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>rf(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return F0.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new hD(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return ay.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Pe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(l=this.Xs)?Ix:14===l?oD:13===l?td:12===l?Xi:11===l?sD:void Qe();var l;let h;return this.ri.runTransaction(e,i,a,_=>(h=new aD(_,this.Ss?this.Ss.next():Zi.at),"readwrite-primary"===t?this.fi(h).next(w=>!!w||this.di(h)).next(w=>{if(!w)throw gr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Ne(de.FAILED_PRECONDITION,db);return r(h)}).next(w=>this.wi(h).next(()=>w)):this.Vi(h).next(()=>r(h)))).then(_=>(h.raiseOnCommittedEvent(),_))}Vi(e){return Gg(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ne(de.FAILED_PRECONDITION,ED)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Gg(e).put("owner",t)}static C(){return Uo.C()}_i(e){const t=Gg(e);return t.get("owner").next(r=>this.mi(r)?(Pe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ue.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(gr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,P.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Pe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return gr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){gr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Gg(n){return _i(n,"owner")}function rf(n){return _i(n,"clientMetadata")}function H0(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class $0{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=Gt(),i=Gt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new $0(e,t.fromCache,r,i)}}class dy{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(a=>a||this.Oi(e,t,i,r)).next(a=>a||this.Mi(e,t))}ki(e,t){if(u0(t))return ue.resolve(null);let r=Yi(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=bg(t,null,"F"),r=Yi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=Gt(...a);return this.Ni.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,r).next(_=>{const w=this.Fi(t,h);return this.$i(t,w,l,_.readTime)?this.ki(e,bg(t,null,"F")):this.Bi(e,w,t,_)}))})))}Oi(e,t,r,i){return u0(t)||i.isEqual(At.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(a=>{const l=this.Fi(t,a);return this.$i(t,l,r,i)?this.Mi(e,t):(gg()<=qi.in.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),d0(t)),this.Bi(e,l,t,lb(i,-1)))})}Fi(e,t){let r=new pn(Db(e));return t.forEach((i,a)=>{h0(e,a)&&(r=r.add(a))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Mi(e,t){return gg()<=qi.in.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",d0(t)),this.Ni.getDocumentsMatchingQuery(e,t,Us.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}class ID{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new ur(Ft),this.qi=new mu(a=>Kc(a),z_),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kx(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function G0(n,e,t,r){return new ID(n,e,t,r)}function CD(n,e){return hy.apply(this,arguments)}function hy(){return hy=(0,_e.Z)(function*(n,e){const t=Ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],h=[];let _=Gt();for(const w of i){l.push(w.batchId);for(const b of w.mutations)_=_.add(b.key)}for(const w of a){h.push(w.batchId);for(const b of w.mutations)_=_.add(b.key)}return t.localDocuments.getDocuments(r,_).next(w=>({ji:w,removedBatchIds:l,addedBatchIds:h}))})})}),hy.apply(this,arguments)}function bD(n,e){const t=Ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Gi.newChangeBuffer({trackRemovals:!0});return function(l,h,_,w){const b=_.batch,A=b.keys();let N=ue.resolve();return A.forEach(F=>{N=N.next(()=>w.getEntry(h,F)).next(B=>{const oe=_.docVersions.get(F);St(null!==oe),B.version.compareTo(oe)<0&&(b.applyToRemoteDocument(B,_),B.isValidDocument()&&(B.setReadTime(_.commitVersion),w.addEntry(B)))})}),N.next(()=>l.mutationQueue.removeMutationBatch(h,b))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let h=Gt();for(let _=0;_<l.mutationResults.length;++_)l.mutationResults[_].transformResults.length>0&&(h=h.add(l.batch.mutations[_].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function DD(n){const e=Ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function TD(n,e){const t=Ze(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const h=[];e.targetChanges.forEach((b,A)=>{const N=i.get(A);if(!N)return;h.push(t.Cs.removeMatchingKeys(a,b.removedDocuments,A).next(()=>t.Cs.addMatchingKeys(a,b.addedDocuments,A)));let F=N.withSequenceNumber(a.currentSequenceNumber);var B,oe,he;e.targetMismatches.has(A)?F=F.withResumeToken(nt.EMPTY_BYTE_STRING,At.min()).withLastLimboFreeSnapshotVersion(At.min()):b.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(b.resumeToken,r)),i=i.insert(A,F),oe=F,he=b,(0===(B=N).resumeToken.approximateByteSize()||oe.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8||he.addedDocuments.size+he.modifiedDocuments.size+he.removedDocuments.size>0)&&h.push(t.Cs.updateTargetData(a,F))});let _=cs(),w=Gt();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,b))}),h.push(SD(a,l,e.documentUpdates).next(b=>{_=b.Wi,w=b.zi})),!r.isEqual(At.min())){const b=t.Cs.getLastRemoteSnapshotVersion(a).next(A=>t.Cs.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(b)}return ue.waitFor(h).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,_,w)).next(()=>_)}).then(a=>(t.Ui=i,a))}function SD(n,e,t){let r=Gt(),i=Gt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let l=cs();return t.forEach((h,_)=>{const w=a.get(h);_.isFoundDocument()!==w.isFoundDocument()&&(i=i.add(h)),_.isNoDocument()&&_.version.isEqual(At.min())?(e.removeEntry(h,_.readTime),l=l.insert(h,_)):!w.isValidDocument()||_.version.compareTo(w.version)>0||0===_.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(_),l=l.insert(h,_)):Pe("LocalStore","Ignoring outdated watch update for ",h,". Current version:",w.version," Watch version:",_.version)}),{Wi:l,zi:i}})}function W0(n,e){const t=Ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function js(n,e){const t=Ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(a=>a?(i=a,ue.resolve(i)):t.Cs.allocateTargetId(r).next(l=>(i=new Al(e,l,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function ld(n,e,t){return Wg.apply(this,arguments)}function Wg(){return Wg=(0,_e.Z)(function*(n,e,t){const r=Ze(n),i=r.Ui.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!du(l))throw l;Pe("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),Wg.apply(this,arguments)}function po(n,e,t){const r=Ze(n);let i=At.min(),a=Gt();return r.persistence.runTransaction("Execute query","readonly",l=>function(h,_,w){const b=Ze(h),A=b.qi.get(w);return void 0!==A?ue.resolve(b.Ui.get(A)):b.Cs.getTargetData(_,w)}(r,l,Yi(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(l,h.targetId).next(_=>{a=_})}).next(()=>r.Li.getDocumentsMatchingQuery(l,e,t?i:At.min(),t?a:Gt())).next(h=>(xD(r,K_(e),h),{documents:h,Hi:a})))}function AD(n,e){const t=Ze(n),r=Ze(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.se(a,e).next(l=>l?l.target:null))}function Lx(n,e){const t=Ze(n),r=t.Ki.get(e)||At.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,lb(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(xD(t,e,i),i))}function xD(n,e,t){let r=n.Ki.get(e)||At.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Ki.set(e,r)}function z0(){return z0=(0,_e.Z)(function*(n,e,t,r){const i=Ze(n);let a=Gt(),l=cs();for(const w of t){const b=e.Ji(w.metadata.name);w.document&&(a=a.add(b));const A=e.Yi(w);A.setReadTime(e.Xi(w.metadata.readTime)),l=l.insert(b,A)}const h=i.Gi.newChangeBuffer({trackRemovals:!0}),_=yield js(i,(w=r,Yi(Vh(on.fromString(`__bundle__/docs/${w}`)))));var w;return i.persistence.runTransaction("Apply bundle documents","readwrite",w=>SD(w,h,l).next(b=>(h.apply(w),b)).next(b=>i.Cs.removeMatchingKeysForTargetId(w,_.targetId).next(()=>i.Cs.addMatchingKeys(w,a,_.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(w,b.Wi,b.zi)).next(()=>b.Wi)))}),z0.apply(this,arguments)}function Ux(n,e){return fy.apply(this,arguments)}function fy(){return fy=(0,_e.Z)(function*(n,e,t=Gt()){const r=yield js(n,Yi(Qh(e.bundledQuery))),i=Ze(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=jr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Ns.saveNamedQuery(a,e);const h=r.withResumeToken(nt.EMPTY_BYTE_STRING,l);return i.Ui=i.Ui.insert(h.targetId,h),i.Cs.updateTargetData(a,h).next(()=>i.Cs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Cs.addMatchingKeys(a,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(a,e))})}),fy.apply(this,arguments)}function Bx(n,e){return`firestore_clients_${n}_${e}`}function q0(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function K0(n,e){return`firestore_targets_${n}_${e}`}class zg{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new Ne(i.error.code,i.error.message))),l?new zg(e,t,i.state,a):(gr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class py{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Ne(r.error.code,r.error.message))),a?new py(e,r.state,i):(gr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=X_();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=yb(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new sf(e,a):(gr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class gy{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new gy(t.clientId,t.onlineState):(gr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class my{constructor(){this.activeTargetIds=X_()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _y{constructor(e,t,r,i,a){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new ur(Ft),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=Bx(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new my),this.lr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,_e.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const a=e.getItem(Bx(e.persistenceKey,i));if(a){const l=sf.Zi(i,a);l&&(e.ur=e.ur.insert(l.clientId,l))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(K0(this.persistenceKey,e));if(r){const i=py.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(K0(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Pe("SharedClientState","READ",e,t),t}setItem(e,t){Pe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Pe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Pe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void gr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,_e.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(a){let l=Zi.at;if(null!=a)try{const h=JSON.parse(a);St("number"==typeof h),l=h}catch(h){gr("SharedClientState","Failed to read sequence number from WebStorage",h)}return l}(r.newValue);i!==Zi.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Mr(a)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new zg(this.currentUser,e,t,r),a=q0(this.persistenceKey,this.currentUser,e);this.setItem(a,i.tr())}Er(e){const t=q0(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=K0(this.persistenceKey,e),a=new py(e,t,r);this.setItem(i,a.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return sf.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return zg.Zi(new Ur(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return py.Zi(i,t)}yr(e){return gy.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,_e.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Pe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),l=[],h=[];return a.forEach(_=>{i.has(_)||l.push(_)}),i.forEach(_=>{a.has(_)||h.push(_)}),this.syncEngine.Br(l,h).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=X_();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class Z0{constructor(){this.Lr=new my,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new my,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class MD{qr(e){}shutdown(){}}class qg{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const yy={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class RD{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class jx extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,a){const l=this.ho(e,t);Pe("RestConnection","Sending: ",l,r);const h={};return this.lo(h,i,a),this.fo(e,l,h,r).then(_=>(Pe("RestConnection","Received: ",_),_),_=>{throw Ni("RestConnection",`${e} failed with error: `,_,"url: ",l,"request:",r),_})}_o(e,t,r,i,a,l){return this.ao(e,t,r,i,a)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+pg,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}ho(e,t){return`${this.oo}/v1/${t}:${yy[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((a,l)=>{const h=new nb;h.setWithCredentials(!0),h.listenOnce(eb.COMPLETE,()=>{var w;try{switch(h.getLastErrorCode()){case jw.NO_ERROR:const b=h.getResponseJson();Pe("Connection","XHR received:",JSON.stringify(b)),a(b);break;case jw.TIMEOUT:Pe("Connection",'RPC "'+e+'" timed out'),l(new Ne(de.DEADLINE_EXCEEDED,"Request time out"));break;case jw.HTTP_ERROR:const A=h.getStatus();if(Pe("Connection",'RPC "'+e+'" failed with status:',A,"response text:",h.getResponseText()),A>0){let N=h.getResponseJson();Array.isArray(N)&&(N=N[0]);const F=null===(w=N)||void 0===w?void 0:w.error;if(F&&F.status&&F.message){const B=function(oe){const he=oe.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(he)>=0?he:de.UNKNOWN}(F.status);l(new Ne(B,F.message))}else l(new Ne(de.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new Ne(de.UNAVAILABLE,"Connection failed."));break;default:Qe()}}finally{Pe("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(i);h.send(t,"POST",_,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=LA(),l=JC(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new VA({})),this.lo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const _=i.join("");Pe("Connection","Creating WebChannel: "+_,h);const w=a.createWebChannel(_,h);let b=!1,A=!1;const N=new RD({Hr:B=>{A?Pe("Connection","Not sending because WebChannel is closed:",B):(b||(Pe("Connection","Opening WebChannel transport."),w.open(),b=!0),Pe("Connection","WebChannel sending:",B),w.send(B))},Jr:()=>w.close()}),F=(B,oe,he)=>{B.listen(oe,We=>{try{he(We)}catch(ot){setTimeout(()=>{throw ot},0)}})};return F(w,U_.EventType.OPEN,()=>{A||Pe("Connection","WebChannel transport opened.")}),F(w,U_.EventType.CLOSE,()=>{A||(A=!0,Pe("Connection","WebChannel transport closed"),N.io())}),F(w,U_.EventType.ERROR,B=>{A||(A=!0,Ni("Connection","WebChannel transport errored:",B),N.io(new Ne(de.UNAVAILABLE,"The operation could not be completed")))}),F(w,U_.EventType.MESSAGE,B=>{var oe;if(!A){const he=B.data[0];St(!!he);const We=he,ot=We.error||(null===(oe=We[0])||void 0===oe?void 0:oe.error);if(ot){Pe("Connection","WebChannel received error:",ot);const rt=ot.status;let ut=function(Bt){const yr=mr[Bt];if(void 0!==yr)return v0(yr)}(rt),xt=ot.message;void 0===ut&&(ut=de.INTERNAL,xt="Unknown error status: "+rt+" with message "+ot.message),A=!0,N.io(new Ne(ut,xt)),w.close()}else Pe("Connection","WebChannel received:",he),N.ro(he)}}),F(l,tb.STAT_EVENT,B=>{B.stat===$c.PROXY?Pe("Connection","Detected buffering proxy"):B.stat===$c.NOPROXY&&Pe("Connection","Detected no buffering proxy")}),setTimeout(()=>{N.so()},0),N}}function ND(){return typeof window<"u"?window:null}function vy(){return typeof document<"u"?document:null}function wy(n){return new Rg(n,!0)}class kD{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&Pe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Y0{constructor(e,t,r,i,a,l,h,_){this.Hs=e,this.vo=r,this.Vo=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=_,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new kD(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,_e.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,_e.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,_e.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(gr(t.toString()),gr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===de.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new Ne(de.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,_e.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Pe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Hx extends Y0{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.It=a}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function C0(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:Qe(),i=e.targetChange.targetIds||[],a=function(_,w){return _.gt?(St(void 0===w||"string"==typeof w),nt.fromBase64String(w||"")):(St(void 0===w||w instanceof Uint8Array),nt.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(_){const w=void 0===_.code?de.UNKNOWN:v0(_.code);return new Ne(w,_.message||"")}(l);t=new Ub(r,i,a,h||null)}else if("documentChange"in e){const r=e.documentChange,i=_u(n,r.document.name),a=jr(r.document.updateTime),l=new si({mapValue:{fields:r.document.fields}}),h=Tn.newFoundDocument(i,a,l);t=new Mg(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=_u(n,r.document),a=r.readTime?jr(r.readTime):At.min(),l=Tn.newNoDocument(i,a);t=new Mg([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=_u(n,r.document);t=new Mg([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Qe();{const r=e.filter,a=new sx(r.count||0);t=new w0(r.targetId,a)}}var _;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return At.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?At.min():a.readTime?jr(a.readTime):At.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=kg(this.It),t.addTarget=function(i,a){let l;const h=a.target;return l=r0(h)?{documents:qh(i,h)}:{query:T0(i,h)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?l.resumeToken=E0(i,a.resumeToken):a.snapshotVersion.compareTo(At.min())>0&&(l.readTime=Wh(i,a.snapshotVersion.toTimestamp())),l}(this.It,e);const r=function fx(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Qe()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=kg(this.It),t.removeTarget=e,this.Bo(t)}}class $x extends Y0{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.It=a,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(St(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function D0(n,e){return n&&n.length>0?(St(void 0!==e),n.map(t=>function(r,i){let a=jr(r.updateTime?r.updateTime:i);return a.isEqual(At.min())&&(a=jr(i)),new g0(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=jr(e.commitTime);return this.listener.Zo(r,t)}return St(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=kg(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>ds(this.It,r))};this.Bo(t)}}class Gx extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.It=i,this.nu=!1}su(){if(this.nu)throw new Ne(de.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.ao(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ne(de.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection._o(e,t,r,a,l,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ne(de.UNKNOWN,a.toString())})}terminate(){this.nu=!0}}class bk{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(gr(t),this.ou=!1):Pe("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class Dk{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.qr(h=>{r.enqueueAndForget((0,_e.Z)(function*(){var _;Iu(l)&&(Pe("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,_e.Z)(function*(w){const b=Ze(w);b._u.add(4),yield wu(b),b.gu.set("Unknown"),b._u.delete(4),yield Ey(b)}),function(w){return _.apply(this,arguments)})(l))}))}),this.gu=new bk(r,i)}}function Ey(n){return Q0.apply(this,arguments)}function Q0(){return Q0=(0,_e.Z)(function*(n){if(Iu(n))for(const e of n.wu)yield e(!0)}),Q0.apply(this,arguments)}function wu(n){return X0.apply(this,arguments)}function X0(){return X0=(0,_e.Z)(function*(n){for(const e of n.wu)yield e(!1)}),X0.apply(this,arguments)}function Iy(n,e){const t=Ze(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),Zg(t)?Kg(t):cf(t).ko()&&Eu(t,e))}function af(n,e){const t=Ze(n),r=cf(t);t.du.delete(e),r.ko()&&J0(t,e),0===t.du.size&&(r.ko()?r.Fo():Iu(t)&&t.gu.set("Unknown"))}function Eu(n,e){n.yu.Mt(e.targetId),cf(n).zo(e)}function J0(n,e){n.yu.Mt(e),cf(n).Ho(e)}function Kg(n){n.yu=new lx({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),cf(n).start(),n.gu.uu()}function Zg(n){return Iu(n)&&!cf(n).No()&&n.du.size>0}function Iu(n){return 0===Ze(n)._u.size}function Cy(n){n.yu=void 0}function eE(n){return uf.apply(this,arguments)}function uf(){return uf=(0,_e.Z)(function*(n){n.du.forEach((e,t)=>{Eu(n,e)})}),uf.apply(this,arguments)}function Tk(n,e){return OD.apply(this,arguments)}function OD(){return OD=(0,_e.Z)(function*(n,e){Cy(n),Zg(n)?(n.gu.hu(e),Kg(n)):n.gu.set("Unknown")}),OD.apply(this,arguments)}function Sk(n,e,t){return FD.apply(this,arguments)}function FD(){return FD=(0,_e.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof Ub&&2===e.state&&e.cause)try{yield(r=(0,_e.Z)(function*(i,a){const l=a.cause;for(const h of a.targetIds)i.du.has(h)&&(yield i.remoteSyncer.rejectListen(h,l),i.du.delete(h),i.yu.removeTarget(h))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Pe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Yg(n,r)}else if(e instanceof Mg?n.yu.Gt(e):e instanceof w0?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(At.min()))try{const r=yield DD(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.yu.te(a);return l.targetChanges.forEach((h,_)=>{if(h.resumeToken.approximateByteSize()>0){const w=i.du.get(_);w&&i.du.set(_,w.withResumeToken(h.resumeToken,a))}}),l.targetMismatches.forEach(h=>{const _=i.du.get(h);if(!_)return;i.du.set(h,_.withResumeToken(nt.EMPTY_BYTE_STRING,_.snapshotVersion)),J0(i,h);const w=new Al(_.target,h,1,_.sequenceNumber);Eu(i,w)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Pe("RemoteStore","Failed to raise snapshot:",r),yield Yg(n,r)}var r}),FD.apply(this,arguments)}function Yg(n,e,t){return tE.apply(this,arguments)}function tE(){return tE=(0,_e.Z)(function*(n,e,t){if(!du(e))throw e;n._u.add(1),yield wu(n),n.gu.set("Offline"),t||(t=()=>DD(n.localStore)),n.asyncQueue.enqueueRetryable((0,_e.Z)(function*(){Pe("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield Ey(n)}))}),tE.apply(this,arguments)}function LD(n,e){return e().catch(t=>Yg(n,t,e))}function lf(n){return nE.apply(this,arguments)}function nE(){return nE=(0,_e.Z)(function*(n){const e=Ze(n),t=cd(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;VD(e);)try{const i=yield W0(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,UD(e,i)}catch(i){yield Yg(e,i)}rE(e)&&BD(e)}),nE.apply(this,arguments)}function VD(n){return Iu(n)&&n.fu.length<10}function UD(n,e){n.fu.push(e);const t=cd(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function rE(n){return Iu(n)&&!cd(n).No()&&n.fu.length>0}function BD(n){cd(n).start()}function Wx(n){return by.apply(this,arguments)}function by(){return by=(0,_e.Z)(function*(n){cd(n).eu()}),by.apply(this,arguments)}function iE(n){return jD.apply(this,arguments)}function jD(){return jD=(0,_e.Z)(function*(n){const e=cd(n);for(const t of n.fu)e.Xo(t.mutations)}),jD.apply(this,arguments)}function HD(n,e,t){return Qg.apply(this,arguments)}function Qg(){return Qg=(0,_e.Z)(function*(n,e,t){const r=n.fu.shift(),i=iy.from(r,e,t);yield LD(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield lf(n)}),Qg.apply(this,arguments)}function zx(n,e){return sE.apply(this,arguments)}function sE(){return sE=(0,_e.Z)(function*(n,e){var t;e&&cd(n).Yo&&(yield(t=(0,_e.Z)(function*(r,i){if(y0(a=i.code)&&a!==de.ABORTED){const l=r.fu.shift();cd(r).Mo(),yield LD(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield lf(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),rE(n)&&BD(n)}),sE.apply(this,arguments)}function qx(n,e){return $D.apply(this,arguments)}function $D(){return $D=(0,_e.Z)(function*(n,e){const t=Ze(n);t.asyncQueue.verifyOperationInProgress(),Pe("RemoteStore","RemoteStore received new credentials");const r=Iu(t);t._u.add(3),yield wu(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield Ey(t)}),$D.apply(this,arguments)}function oE(n,e){return aE.apply(this,arguments)}function aE(){return aE=(0,_e.Z)(function*(n,e){const t=Ze(n);e?(t._u.delete(2),yield Ey(t)):e||(t._u.add(2),yield wu(t),t.gu.set("Unknown"))}),aE.apply(this,arguments)}function cf(n){return n.pu||(n.pu=function(e,t,r){const i=Ze(e);return i.su(),new Hx(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:eE.bind(null,n),Zr:Tk.bind(null,n),Wo:Sk.bind(null,n)}),n.wu.push(function(){var e=(0,_e.Z)(function*(t){t?(n.pu.Mo(),Zg(n)?Kg(n):n.gu.set("Unknown")):(yield n.pu.stop(),Cy(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function cd(n){return n.Iu||(n.Iu=function(e,t,r){const i=Ze(e);return i.su(),new $x(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:Wx.bind(null,n),Zr:zx.bind(null,n),tu:iE.bind(null,n),Zo:HD.bind(null,n)}),n.wu.push(function(){var e=(0,_e.Z)(function*(t){t?(n.Iu.Mo(),yield lf(n)):(yield n.Iu.stop(),n.fu.length>0&&(Pe("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class GD{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,h=new GD(e,t,l,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ne(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xg(n,e){if(gr("AsyncQueue",`${e}: ${n}`),du(n))return new Ne(de.UNAVAILABLE,`${e}: ${n}`);throw n}class Jg{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ze.comparator(t.key,r.key):(t,r)=>ze.comparator(t.key,r.key),this.keyedMap=Ag(),this.sortedSet=new ur(this.comparator)}static emptySet(e){return new Jg(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Jg)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Jg;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Kx{constructor(){this.Tu=new ur(ze.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):Qe():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class df{constructor(e,t,r,i,a,l,h,_,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=_,this.hasCachedResults=w}static fromInitialDocuments(e,t,r,i,a){const l=[];return t.forEach(h=>{l.push({type:0,doc:h})}),new df(e,t,Jg.emptySet(t),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class Ak{constructor(){this.Au=void 0,this.listeners=[]}}class xk{constructor(){this.queries=new mu(e=>bb(e),Uh),this.onlineState="Unknown",this.Ru=new Set}}function WD(n,e){return zD.apply(this,arguments)}function zD(){return zD=(0,_e.Z)(function*(n,e){const t=Ze(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new Ak),i)try{a.Au=yield t.onListen(r)}catch(l){const h=Xg(l,`Initialization of query '${d0(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,a),a.listeners.push(e),e.bu(t.onlineState),a.Au&&e.Pu(a.Au)&&u(t)}),zD.apply(this,arguments)}function qD(n,e){return KD.apply(this,arguments)}function KD(){return KD=(0,_e.Z)(function*(n,e){const t=Ze(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),KD.apply(this,arguments)}function s(n,e){const t=Ze(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const h of l.listeners)h.Pu(i)&&(r=!0);l.Au=i}}r&&u(t)}function o(n,e,t){const r=Ze(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function u(n){n.Ru.forEach(e=>{e.next()})}class c{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new df(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=df.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class d{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class g{constructor(e){this.It=e}Ji(e){return _u(this.It,e)}Yi(e){return e.metadata.exists?zh(this.It,e.document,!1):Tn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return jr(e)}}class y{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=I(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=on.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new g(this.It);for(const i of e)if(i.metadata.queries){const a=r.Ji(i.metadata.name);for(const l of i.metadata.queries){const h=(t.get(l)||Gt()).add(a);t.set(l,h)}}return t}complete(){var e=this;return(0,_e.Z)(function*(){const t=yield function Vx(n,e,t,r){return z0.apply(this,arguments)}(e.localStore,new g(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield Ux(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function I(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class C{constructor(e){this.key=e}}class S{constructor(e){this.key=e}}class R{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Gt(),this.mutatedKeys=Gt(),this.Gu=Db(e),this.Qu=new Jg(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new Kx,i=t?t.Qu:this.Qu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,h=!1;const _="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,w="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((b,A)=>{const N=i.get(b),F=h0(this.query,A)?A:null,B=!!N&&this.mutatedKeys.has(N.key),oe=!!F&&(F.hasLocalMutations||this.mutatedKeys.has(F.key)&&F.hasCommittedMutations);let he=!1;N&&F?N.data.isEqual(F.data)?B!==oe&&(r.track({type:3,doc:F}),he=!0):this.Hu(N,F)||(r.track({type:2,doc:F}),he=!0,(_&&this.Gu(F,_)>0||w&&this.Gu(F,w)<0)&&(h=!0)):!N&&F?(r.track({type:0,doc:F}),he=!0):N&&!F&&(r.track({type:1,doc:N}),he=!0,(_||w)&&(h=!0)),he&&(F?(l=l.add(F),a=oe?a.add(b):a.delete(b)):(l=l.delete(b),a=a.delete(b)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const b="F"===this.query.limitType?l.last():l.first();l=l.delete(b.key),a=a.delete(b.key),r.track({type:1,doc:b})}return{Qu:l,zu:r,$i:h,mutatedKeys:a}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const a=e.zu.Eu();a.sort((w,b)=>function(A,N){const F=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qe()}};return F(A)-F(N)}(w.type,b.type)||this.Gu(w.doc,b.doc)),this.Ju(r);const l=t?this.Yu():[],h=0===this.Ku.size&&this.current?1:0,_=h!==this.qu;return this.qu=h,0!==a.length||_?{snapshot:new df(this.query,e.Qu,i,a,e.mutatedKeys,0===h,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:l}:{Xu:l}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Kx,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Gt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new S(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new C(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=Gt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return df.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class V{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class q{constructor(e){this.key=e,this.nc=!1}}class ee{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.sc={},this.ic=new mu(h=>bb(h),Uh),this.rc=new Map,this.oc=new Set,this.uc=new ur(ze.comparator),this.cc=new Map,this.ac=new B0,this.hc={},this.lc=new Map,this.fc=tf.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function ve(n,e){return ke.apply(this,arguments)}function ke(){return ke=(0,_e.Z)(function*(n,e){const t=aM(n);let r,i;const a=t.ic.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.ec();else{const l=yield js(t.localStore,Yi(e));t.isPrimaryClient&&Iy(t.remoteStore,l);const h=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield Ge(t,e,r,"current"===h,l.resumeToken)}return i}),ke.apply(this,arguments)}function Ge(n,e,t,r,i){return et.apply(this,arguments)}function et(){return et=(0,_e.Z)(function*(n,e,t,r,i){n._c=(A,N,F)=>{return(B=(0,_e.Z)(function*(oe,he,We,ot){let rt=he.view.Wu(We);rt.$i&&(rt=yield po(oe.localStore,he.query,!1).then(({documents:Bt})=>he.view.Wu(Bt,rt)));const ut=ot&&ot.targetChanges.get(he.targetId),xt=he.view.applyChanges(rt,oe.isPrimaryClient,ut);return Yx(oe,he.targetId,xt.Xu),xt.snapshot}),function(oe,he,We,ot){return B.apply(this,arguments)})(n,A,N,F);var B};const a=yield po(n.localStore,e,!0),l=new R(e,a.Hi),h=l.Wu(a.documents),_=Gh.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),w=l.applyChanges(h,n.isPrimaryClient,_);Yx(n,t,w.Xu);const b=new V(e,t,l);return n.ic.set(e,b),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),w.snapshot}),et.apply(this,arguments)}function Ct(n,e){return xe.apply(this,arguments)}function xe(){return xe=(0,_e.Z)(function*(n,e){const t=Ze(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(a=>!Uh(a,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield ld(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),af(t.remoteStore,r.targetId),Ty(t,r.targetId)}).catch(yl))):(Ty(t,r.targetId),yield ld(t.localStore,r.targetId,!0))}),xe.apply(this,arguments)}function gn(){return gn=(0,_e.Z)(function*(n,e,t){const r=uM(n);try{const i=yield function(a,l){const h=Ze(a),_=Ln.now(),w=l.reduce((N,F)=>N.add(F.key),Gt());let b,A;return h.persistence.runTransaction("Locally write mutations","readwrite",N=>{let F=cs(),B=Gt();return h.Gi.getEntries(N,w).next(oe=>{F=oe,F.forEach((he,We)=>{We.isValidDocument()||(B=B.add(he))})}).next(()=>h.localDocuments.getOverlayedDocuments(N,F)).next(oe=>{b=oe;const he=[];for(const We of l){const ot=Ob(We,b.get(We.key).overlayedDocument);null!=ot&&he.push(new gu(We.key,ot,t0(ot.value.mapValue),Vn.exists(!0)))}return h.mutationQueue.addMutationBatch(N,_,he,l)}).next(oe=>{A=oe;const he=oe.applyToLocalDocumentSet(b,B);return h.documentOverlayCache.saveOverlays(N,oe.batchId,he)})}).then(()=>({batchId:A.batchId,changes:Vb(b)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,h){let _=a.hc[a.currentUser.toKey()];_||(_=new ur(Ft)),_=_.insert(l,h),a.hc[a.currentUser.toKey()]=_}(r,i.batchId,t),yield dd(r,i.changes),yield lf(r.remoteStore)}catch(i){const a=Xg(i,"Failed to persist write");t.reject(a)}}),gn.apply(this,arguments)}function Pn(n,e){return hf.apply(this,arguments)}function hf(){return hf=(0,_e.Z)(function*(n,e){const t=Ze(n);try{const r=yield TD(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.cc.get(a);l&&(St(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.nc=!0:i.modifiedDocuments.size>0?St(l.nc):i.removedDocuments.size>0&&(St(l.nc),l.nc=!1))}),yield dd(t,r,e)}catch(r){yield yl(r)}}),hf.apply(this,arguments)}function Dy(n,e,t){const r=Ze(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((a,l)=>{const h=l.view.bu(e);h.snapshot&&i.push(h.snapshot)}),function(a,l){const h=Ze(a);h.onlineState=l;let _=!1;h.queries.forEach((w,b)=>{for(const A of b.listeners)A.bu(l)&&(_=!0)}),_&&u(h)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function uE(n,e,t){return em.apply(this,arguments)}function em(){return em=(0,_e.Z)(function*(n,e,t){const r=Ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),a=i&&i.key;if(a){let l=new ur(ze.comparator);l=l.insert(a,Tn.newNoDocument(a,At.min()));const h=Gt().add(a),_=new xg(At.min(),new Map,new pn(Ft),l,h);yield Pn(r,_),r.uc=r.uc.remove(a),r.cc.delete(e),Qx(r)}else yield ld(r.localStore,e,!1).then(()=>Ty(r,e,t)).catch(yl)}),em.apply(this,arguments)}function lE(n,e){return tm.apply(this,arguments)}function tm(){return tm=(0,_e.Z)(function*(n,e){const t=Ze(n),r=e.batch.batchId;try{const i=yield bD(t.localStore,e);Zx(t,r,null),hE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield dd(t,i)}catch(i){yield yl(i)}}),tm.apply(this,arguments)}function cE(n,e,t){return nm.apply(this,arguments)}function nm(){return nm=(0,_e.Z)(function*(n,e,t){const r=Ze(n);try{const i=yield function(a,l){const h=Ze(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let w;return h.mutationQueue.lookupMutationBatch(_,l).next(b=>(St(null!==b),w=b.keys(),h.mutationQueue.removeMutationBatch(_,b))).next(()=>h.mutationQueue.performConsistencyCheck(_)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(_,w,l)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,w)).next(()=>h.localDocuments.getDocuments(_,w))})}(r.localStore,e);Zx(r,e,t),hE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield dd(r,i)}catch(i){yield yl(i)}}),nm.apply(this,arguments)}function rm(){return rm=(0,_e.Z)(function*(n,e){const t=Ze(n);Iu(t.remoteStore)||Pe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=Ze(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>l.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=Xg(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),rm.apply(this,arguments)}function hE(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function Zx(n,e,t){const r=Ze(n);let i=r.hc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function Ty(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||Mk(n,r)})}function Mk(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(af(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),Qx(n))}function Yx(n,e,t){for(const r of t)r instanceof C?(n.ac.addReference(r.key,e),qV(n,r)):r instanceof S?(Pe("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||Mk(n,r.key)):Qe()}function qV(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(Pe("SyncEngine","New document in limbo: "+t),n.oc.add(r),Qx(n))}function Qx(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new ze(on.fromString(e)),r=n.fc.next();n.cc.set(r,new q(t)),n.uc=n.uc.insert(t,r),Iy(n.remoteStore,new Al(Yi(Vh(t.path)),r,2,Zi.at))}}function dd(n,e,t){return Xx.apply(this,arguments)}function Xx(){return Xx=(0,_e.Z)(function*(n,e,t){const r=Ze(n),i=[],a=[],l=[];var h;r.ic.isEmpty()||(r.ic.forEach((h,_)=>{l.push(r._c(_,e,t).then(w=>{if((w||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,w?.fromCache?"not-current":"current"),w){i.push(w);const b=$0.Ci(_.targetId,w);a.push(b)}}))}),yield Promise.all(l),r.sc.Wo(i),yield(h=(0,_e.Z)(function*(_,w){const b=Ze(_);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>ue.forEach(w,N=>ue.forEach(N.Si,F=>b.persistence.referenceDelegate.addReference(A,N.targetId,F)).next(()=>ue.forEach(N.Di,F=>b.persistence.referenceDelegate.removeReference(A,N.targetId,F)))))}catch(A){if(!du(A))throw A;Pe("LocalStore","Failed to update sequence numbers: "+A)}for(const A of w){const N=A.targetId;if(!A.fromCache){const F=b.Ui.get(N),oe=F.withLastLimboFreeSnapshotVersion(F.snapshotVersion);b.Ui=b.Ui.insert(N,oe)}}}),function(_,w){return h.apply(this,arguments)})(r.localStore,a))}),Xx.apply(this,arguments)}function KV(n,e){return Jx.apply(this,arguments)}function Jx(){return Jx=(0,_e.Z)(function*(n,e){const t=Ze(n);if(!t.currentUser.isEqual(e)){Pe("SyncEngine","User change. New user:",e.toKey());const r=yield CD(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(l=>{l.forEach(h=>{h.reject(new Ne(de.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield dd(t,r.ji)}var i}),Jx.apply(this,arguments)}function ZV(n,e){const t=Ze(n),r=t.cc.get(e);if(r&&r.nc)return Gt().add(r.key);{let i=Gt();const a=t.rc.get(e);if(!a)return i;for(const l of a){const h=t.ic.get(l);i=i.unionWith(h.view.ju)}return i}}function YV(n,e){return eM.apply(this,arguments)}function eM(){return eM=(0,_e.Z)(function*(n,e){const t=Ze(n),r=yield po(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&Yx(t,e.targetId,i.Xu),i}),eM.apply(this,arguments)}function QV(n,e){return tM.apply(this,arguments)}function tM(){return tM=(0,_e.Z)(function*(n,e){const t=Ze(n);return Lx(t.localStore,e).then(r=>dd(t,r))}),tM.apply(this,arguments)}function XV(n,e,t,r){return nM.apply(this,arguments)}function nM(){return nM=(0,_e.Z)(function*(n,e,t,r){const i=Ze(n),a=yield function(l,h){const _=Ze(l),w=Ze(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",b=>w.Tn(b,h).next(A=>A?_.localDocuments.getDocuments(b,A):ue.resolve(null)))}(i.localStore,e);var h;null!==a?("pending"===t?yield lf(i.remoteStore):"acknowledged"===t||"rejected"===t?(Zx(i,e,r||null),hE(i,e),h=e,Ze(Ze(i.localStore).mutationQueue).An(h)):Qe(),yield dd(i,a)):Pe("SyncEngine","Cannot apply mutation batch with id: "+e)}),nM.apply(this,arguments)}function rM(){return rM=(0,_e.Z)(function*(n,e){const t=Ze(n);if(aM(t),uM(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield Rk(t,r.toArray());t.dc=!0,yield oE(t.remoteStore,!0);for(const a of i)Iy(t.remoteStore,a)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(Ty(t,l),ld(t.localStore,l,!0))),af(t.remoteStore,l)}),yield i,yield Rk(t,r),function(a){const l=Ze(a);l.cc.forEach((h,_)=>{af(l.remoteStore,_)}),l.ac.fs(),l.cc=new Map,l.uc=new ur(ze.comparator)}(t),t.dc=!1,yield oE(t.remoteStore,!1)}}),rM.apply(this,arguments)}function Rk(n,e,t){return iM.apply(this,arguments)}function iM(){return iM=(0,_e.Z)(function*(n,e,t){const r=Ze(n),i=[],a=[];for(const l of e){let h;const _=r.rc.get(l);if(_&&0!==_.length){h=yield js(r.localStore,Yi(_[0]));for(const w of _){const b=r.ic.get(w),A=yield YV(r,b);A.snapshot&&a.push(A.snapshot)}}else{const w=yield AD(r.localStore,l);h=yield js(r.localStore,w),yield Ge(r,Nk(w),l,!1,h.resumeToken)}i.push(h)}return r.sc.Wo(a),i}),iM.apply(this,arguments)}function Nk(n){return a0(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function eU(n){const e=Ze(n);return Ze(Ze(e.localStore).persistence).vi()}function tU(n,e,t,r){return sM.apply(this,arguments)}function sM(){return sM=(0,_e.Z)(function*(n,e,t,r){const i=Ze(n);if(i.dc)return void Pe("SyncEngine","Ignoring unexpected query state notification.");const a=i.rc.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield Lx(i.localStore,K_(a[0])),h=xg.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,nt.EMPTY_BYTE_STRING);yield dd(i,l,h);break}case"rejected":yield ld(i.localStore,e,!0),Ty(i,e,r);break;default:Qe()}}),sM.apply(this,arguments)}function nU(n,e,t){return oM.apply(this,arguments)}function oM(){return oM=(0,_e.Z)(function*(n,e,t){const r=aM(n);if(r.dc){for(const i of e){if(r.rc.has(i)){Pe("SyncEngine","Adding an already active target "+i);continue}const a=yield AD(r.localStore,i),l=yield js(r.localStore,a);yield Ge(r,Nk(a),l.targetId,!1,l.resumeToken),Iy(r.remoteStore,l)}for(const i of t)r.rc.has(i)&&(yield ld(r.localStore,i,!1).then(()=>{af(r.remoteStore,i),Ty(r,i)}).catch(yl))}}),oM.apply(this,arguments)}function aM(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Pn.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ZV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uE.bind(null,e),e.sc.Wo=s.bind(null,e.eventManager),e.sc.wc=o.bind(null,e.eventManager),e}function uM(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lE.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cE.bind(null,e),e}class kk{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,_e.Z)(function*(){t.It=wy(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return G0(this.persistence,new dy,e.initialUser,this.It)}yc(e){return new Fx(cy.Bs,this.It)}gc(e){return new Z0}terminate(){var e=this;return(0,_e.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Pk extends kk{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield uM(r.Ac.syncEngine),yield lf(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return G0(this.persistence,new dy,e.initialUser,this.It)}Tc(e,t){return new gD(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new mb(t,this.persistence);return new gb(e.asyncQueue,r)}yc(e){const t=H0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?hs.withCacheSize(this.cacheSizeBytes):hs.DEFAULT;return new fs(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,ND(),vy(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new Z0}}class iU extends Pk{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof _y&&(r.sharedClientState.syncEngine={Fr:XV.bind(null,i),$r:tU.bind(null,i),Br:nU.bind(null,i),vi:eU.bind(null,i),Mr:QV.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var a=(0,_e.Z)(function*(l){yield function JV(n,e){return rM.apply(this,arguments)}(r.Ac.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}gc(e){const t=ND();if(!_y.C(t))throw new Ne(de.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=H0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new _y(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class lM{initialize(e,t){var r=this;return(0,_e.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>Dy(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=KV.bind(null,r.syncEngine),yield oE(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new xk}createDatastore(e){const t=wy(e.databaseInfo.databaseId),r=new jx(e.databaseInfo);return new Gx(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=h=>Dy(this.syncEngine,h,0),l=qg.C()?new qg:new MD,new Dk(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,h,_,w){const b=new ee(r,i,a,l,h,_);return w&&(b.dc=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,_e.Z)(function*(t){const r=Ze(t);Pe("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield wu(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function cM(n,e,t){if(!t)throw new Ne(de.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Ok(n,e,t,r){if(!0===e&&!0===r)throw new Ne(de.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Fk(n){if(!ze.isDocumentKey(n))throw new Ne(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Lk(n){if(ze.isDocumentKey(n))throw new Ne(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ZD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Qe()}function un(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ne(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ZD(n);throw new Ne(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Vk(n,e){if(e<=0)throw new Ne(de.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const Uk=new Map;class Bk{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ne(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ne(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Ok("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class fE{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bk({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ne(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ne(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bk(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new mg;switch(t.type){case"gapi":return new ob(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ne(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Uk.get(e);t&&(Pe("ComponentProvider","Removing Datastore"),Uk.delete(e),t.terminate())}(this),Promise.resolve()}}class er{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new er(this.firestore,e,this._key)}}class ps{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ps(this.firestore,e,this._query)}}class Rl extends ps{constructor(e,t,r){super(e,t,Vh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new er(this.firestore,null,new ze(e))}withConverter(e){return new Rl(this.firestore,e,this._path)}}function Hk(n,e,...t){if(n=(0,P.m9)(n),cM("collection","path",e),n instanceof fE){const r=on.fromString(e,...t);return Lk(r),new Rl(n,null,r)}{if(!(n instanceof er||n instanceof Rl))throw new Ne(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(on.fromString(e,...t));return Lk(r),new Rl(n.firestore,null,r)}}function YD(n,e,...t){if(n=(0,P.m9)(n),1===arguments.length&&(e=$w.R()),cM("doc","path",e),n instanceof fE){const r=on.fromString(e,...t);return Fk(r),new er(n,null,new ze(r))}{if(!(n instanceof er||n instanceof Rl))throw new Ne(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(on.fromString(e,...t));return Fk(r),new er(n.firestore,n instanceof Rl?n.converter:null,new ze(r))}}function $k(n,e){return n=(0,P.m9)(n),e=(0,P.m9)(e),(n instanceof er||n instanceof Rl)&&(e instanceof er||e instanceof Rl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function dM(n,e){return n=(0,P.m9)(n),e=(0,P.m9)(e),n instanceof ps&&e instanceof ps&&n.firestore===e.firestore&&Uh(n._query,e._query)&&n.converter===e.converter}function Gk(n,e=10240){let t=0;return{read:()=>(0,_e.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,_e.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class QD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):gr("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class oU{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new Br,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,_e.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,_e.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const a=yield e.Cc(i);return new d(JSON.parse(a),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,_e.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,_e.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class lU{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,_e.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ne(de.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,_e.Z)(function*(a,l){const h=Ze(a),_=kg(h.It)+"/documents",w={documents:l.map(F=>Ng(h.It,F))},b=yield h._o("BatchGetDocuments",_,w,l.length),A=new Map;b.forEach(F=>{const B=function hx(n,e){return"found"in e?function(t,r){St(!!r.found);const i=_u(t,r.found.name),a=jr(r.found.updateTime),l=new si({mapValue:{fields:r.found.fields}});return Tn.newFoundDocument(i,a,l)}(n,e):"missing"in e?function(t,r){St(!!r.missing),St(!!r.readTime);const i=_u(t,r.missing),a=jr(r.readTime);return Tn.newNoDocument(i,a)}(n,e):Qe()}(h.It,F);A.set(B.key.toString(),B)});const N=[];return l.forEach(F=>{const B=A.get(F.toString());St(!!B),N.push(B)}),N}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Hh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,_e.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=ze.fromPath(i);e.mutations.push(new Sg(a,e.precondition(a)))}),yield(r=(0,_e.Z)(function*(i,a){const l=Ze(i),h=kg(l.It)+"/documents",_={writes:a.map(w=>ds(l.It,w))};yield l.ao("Commit",h,_)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Qe();t=At.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ne(de.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(At.min())?Vn.exists(!1):Vn.updateTime(t):Vn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(At.min()))throw new Ne(de.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Vn.updateTime(t)}return Vn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class cU{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.kc=r.maxAttempts,this.xo=new kD(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,_e.Z)(function*(){const t=new lU(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Fc(a)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!kh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!y0(t)}return!1}}class dU{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ur.UNAUTHENTICATED,this.clientId=$w.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,_e.Z)(function*(h){Pe("FirestoreClient","Received user=",h.uid),yield a.authCredentialListener(h),a.user=h});return function(h){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Pe("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,_e.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ne(de.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Xg(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function Wk(n,e){return hM.apply(this,arguments)}function hM(){return hM=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Pe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,_e.Z)(function*(a){r.isEqual(a)||(yield CD(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),hM.apply(this,arguments)}function zk(n,e){return fM.apply(this,arguments)}function fM(){return fM=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield pM(n);Pe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>qx(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>qx(e.remoteStore,a)),n.onlineComponents=e}),fM.apply(this,arguments)}function pM(n){return gM.apply(this,arguments)}function gM(){return gM=(0,_e.Z)(function*(n){return n.offlineComponents||(Pe("FirestoreClient","Using default OfflineComponentProvider"),yield Wk(n,new kk)),n.offlineComponents}),gM.apply(this,arguments)}function XD(n){return mM.apply(this,arguments)}function mM(){return mM=(0,_e.Z)(function*(n){return n.onlineComponents||(Pe("FirestoreClient","Using default OnlineComponentProvider"),yield zk(n,new lM)),n.onlineComponents}),mM.apply(this,arguments)}function qk(n){return pM(n).then(e=>e.persistence)}function JD(n){return pM(n).then(e=>e.localStore)}function _M(n){return XD(n).then(e=>e.remoteStore)}function yM(n){return XD(n).then(e=>e.syncEngine)}function Sy(n){return vM.apply(this,arguments)}function vM(){return vM=(0,_e.Z)(function*(n){const e=yield XD(n),t=e.eventManager;return t.onListen=ve.bind(null,e.syncEngine),t.onUnlisten=Ct.bind(null,e.syncEngine),t}),vM.apply(this,arguments)}function Zk(n,e,t={}){const r=new Br;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(i,a,l,h,_){const w=new QD({next:A=>{a.enqueueAndForget(()=>qD(i,b));const N=A.docs.has(l);!N&&A.fromCache?_.reject(new Ne(de.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&A.fromCache&&h&&"server"===h.source?_.reject(new Ne(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(A)},error:A=>_.reject(A)}),b=new c(Vh(l.path),w,{includeMetadataChanges:!0,Nu:!0});return WD(i,b)}(yield Sy(n),n.asyncQueue,e,t,r)})),r.promise}function Yk(n,e,t={}){const r=new Br;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(i,a,l,h,_){const w=new QD({next:A=>{a.enqueueAndForget(()=>qD(i,b)),A.fromCache&&"server"===h.source?_.reject(new Ne(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(A)},error:A=>_.reject(A)}),b=new c(l,w,{includeMetadataChanges:!0,Nu:!0});return WD(i,b)}(yield Sy(n),n.asyncQueue,e,t,r)})),r.promise}class vU{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new kD(this,"async_queue_retry"),this.Wc=()=>{const t=vy();t&&Pe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=vy();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=vy();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new Br;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,_e.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!du(t))throw t;Pe("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,gr("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=GD.createAndSchedule(this,e,t,r,a=>this.Yc(a));return this.qc.push(i),i}zc(){this.Kc&&Qe()}verifyOperationInProgress(){}Xc(){var e=this;return(0,_e.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function wM(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class wU{constructor(){this._progressObserver={},this._taskCompletionResolver=new Br,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class tr extends fE{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new vU,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Qk(this),this._firestoreClient.terminate()}}function Hr(n){return n._firestoreClient||Qk(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Qk(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new cr(n._databaseId,a,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var a,h;n._firestoreClient=new dU(n._authCredentials,n._appCheckCredentials,n._queue,r)}function Xk(n,e,t){const r=new Br;return n.asyncQueue.enqueue((0,_e.Z)(function*(){try{yield Wk(n,t),yield zk(n,e),r.resolve()}catch(i){const a=i;if(!("FirebaseError"===(l=a).name?l.code===de.FAILED_PRECONDITION||l.code===de.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw a;Ni("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var l})).then(()=>r.promise)}function Jk(n){if(n._initialized||n._terminated)throw new Ne(de.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Nl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Nl(nt.fromBase64String(e))}catch(t){throw new Ne(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Nl(nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class hd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ne(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class im{constructor(e){this._methodName=e}}class eT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ft(this._lat,e._lat)||Ft(this._long,e._long)}}const MU=/^__.*__$/;class RU{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new gu(e,this.data,this.fieldMask,t,this.fieldTransforms):new Jc(e,this.data,t,this.fieldTransforms)}}class eP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new gu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function tP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qe()}}class tT{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new tT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return iT(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(tP(this.sa)&&MU.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class NU{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||wy(e)}da(e,t,r,i=!1){return new tT({sa:e,methodName:t,fa:r,path:Jn.emptyPath(),oa:!1,la:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function sm(n){const e=n._freezeSettings(),t=wy(n._databaseId);return new NU(n._databaseId,!!e.ignoreUndefinedProperties,t)}function nT(n,e,t,r,i,a={}){const l=n.da(a.merge||a.mergeFields?2:0,e,t,i);bM("Data must be an object, but it was:",l,r);const h=iP(r,l);let _,w;if(a.merge)_=new ls(l.fieldMask),w=l.fieldTransforms;else if(a.mergeFields){const b=[];for(const A of a.mergeFields){const N=DM(e,A,t);if(!l.contains(N))throw new Ne(de.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);oP(b,N)||b.push(N)}_=new ls(b),w=l.fieldTransforms.filter(A=>_.covers(A.field))}else _=null,w=l.fieldTransforms;return new RU(new si(h),_,w)}class pE extends im{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof pE}}function nP(n,e,t){return new tT({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class EM extends im{_toFieldTransform(e){return new Dg(e.path,new Bh)}isEqual(e){return e instanceof EM}}class kU extends im{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=nP(this,e,!0),r=this._a.map(a=>om(a,t)),i=new Sl(r);return new Dg(e.path,i)}isEqual(e){return this===e}}class PU extends im{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=nP(this,e,!0),r=this._a.map(a=>om(a,t)),i=new Yc(r);return new Dg(e.path,i)}isEqual(e){return this===e}}class OU extends im{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Qc(e.It,xb(e.It,this.wa));return new Dg(e.path,t)}isEqual(e){return this===e}}function IM(n,e,t,r){const i=n.da(1,e,t);bM("Data must be an object, but it was:",i,r);const a=[],l=si.empty();Bs(r,(_,w)=>{const b=rT(e,_,t);w=(0,P.m9)(w);const A=i.ca(b);if(w instanceof pE)a.push(b);else{const N=om(w,A);null!=N&&(a.push(b),l.set(b,N))}});const h=new ls(a);return new eP(l,h,i.fieldTransforms)}function CM(n,e,t,r,i,a){const l=n.da(1,e,t),h=[DM(e,r,t)],_=[i];if(a.length%2!=0)throw new Ne(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<a.length;N+=2)h.push(DM(e,a[N])),_.push(a[N+1]);const w=[],b=si.empty();for(let N=h.length-1;N>=0;--N)if(!oP(w,h[N])){const F=h[N];let B=_[N];B=(0,P.m9)(B);const oe=l.ca(F);if(B instanceof pE)w.push(F);else{const he=om(B,oe);null!=he&&(w.push(F),b.set(F,he))}}const A=new ls(w);return new eP(b,A,l.fieldTransforms)}function rP(n,e,t,r=!1){return om(t,n.da(r?4:3,e))}function om(n,e){if(sP(n=(0,P.m9)(n)))return bM("Unsupported field value:",e,n),iP(n,e);if(n instanceof im)return function(t,r){if(!tP(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let h=om(l,r.aa(a));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,P.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return xb(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Ln.fromDate(t);return{timestampValue:Wh(r.It,i)}}if(t instanceof Ln){const i=new Ln(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Wh(r.It,i)}}if(t instanceof eT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Nl)return{bytesValue:E0(r.It,t._byteString)};if(t instanceof er){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.ha(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:J_(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${ZD(t)}`)}(n,e)}function iP(n,e){const t={};return _b(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bs(n,(r,i)=>{const a=om(i,e.ra(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function sP(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Ln||n instanceof eT||n instanceof Nl||n instanceof er||n instanceof im)}function bM(n,e,t){if(!sP(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=ZD(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function DM(n,e,t){if((e=(0,P.m9)(e))instanceof hd)return e._internalPath;if("string"==typeof e)return rT(n,e);throw iT("Field path arguments must be of type string or ",n,!1,void 0,t)}const FU=new RegExp("[~\\*/\\[\\]]");function rT(n,e,t){if(e.search(FU)>=0)throw iT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new hd(...e.split("."))._internalPath}catch{throw iT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function iT(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let _="";return(a||l)&&(_+=" (found",a&&(_+=` in field ${r}`),l&&(_+=` in document ${i}`),_+=")"),new Ne(de.INVALID_ARGUMENT,h+n+_)}function oP(n,e){return n.some(t=>t.isEqual(e))}class gE{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new er(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new LU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(sT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class LU extends gE{data(){return super.data()}}function sT(n,e){return"string"==typeof e?rT(n,e):e instanceof hd?e._internalPath:e._delegate._internalPath}function aP(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ne(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mE{}function ff(n,...e){for(const t of e)n=t._apply(n);return n}class VU extends mE{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=sm(e.firestore),r=function(i,a,l,h,_,w,b){let A;if(_.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Ne(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){fP(b,w);const F=[];for(const B of b)F.push(hP(h,i,B));A={arrayValue:{values:F}}}else A=hP(h,i,b)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||fP(b,w),A=rP(l,"where",b,"in"===w||"not-in"===w);const N=Tr.create(_,w,A);return function(F,B){if(B.dt()){const he=q_(F);if(null!==he&&!he.isEqual(B.field))throw new Ne(de.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${he.toString()}' and '${B.field.toString()}'`);const We=l0(F);null!==We&&pP(0,B.field,We)}const oe=function(he,We){for(const ot of he.filters)if(We.indexOf(ot.op)>=0)return ot.op;return null}(F,function(he){switch(he){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(B.op));if(null!==oe)throw new Ne(de.INVALID_ARGUMENT,oe===B.op?`Invalid query. You cannot use more than one '${B.op.toString()}' filter.`:`Invalid query. You cannot use '${B.op.toString()}' filters with '${oe.toString()}' filters.`)}(i,N),N}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new ps(e.firestore,e.converter,function(i,a){const l=i.filters.concat([a]);return new pu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),l,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class BU extends mE{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Ne(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ne(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Zc(i,a);return function(h,_){if(null===l0(h)){const w=q_(h);null!==w&&pP(0,w,_.field)}}(r,l),l}(e._query,this.ma,this.pa);return new ps(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new pu(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class uP extends mE{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new ps(e.firestore,e.converter,bg(e._query,this.Ia,this.Ta))}}class lP extends mE{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=dP(e,this.type,this.Ea,this.Aa);return new ps(e.firestore,e.converter,(i=t,new pu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class cP extends mE{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=dP(e,this.type,this.Ea,this.Aa);return new ps(e.firestore,e.converter,(i=t,new pu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function dP(n,e,t,r){if(t[0]=(0,P.m9)(t[0]),t[0]instanceof gE)return function(i,a,l,h,_){if(!h)throw new Ne(de.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const w=[];for(const b of Tl(i))if(b.field.isKeyField())w.push(qc(a,h.key));else{const A=h.data.field(b.field);if(Yw(A))throw new Ne(de.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===A){const N=b.field.canonicalString();throw new Ne(de.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${N}' (used as the orderBy) does not exist.`)}w.push(A)}return new Dl(w,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=sm(n.firestore);return function(a,l,h,_,w,b){const A=a.explicitOrderBy;if(w.length>A.length)throw new Ne(de.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const N=[];for(let F=0;F<w.length;F++){const B=w[F];if(A[F].field.isKeyField()){if("string"!=typeof B)throw new Ne(de.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof B}`);if(!c0(a)&&-1!==B.indexOf("/"))throw new Ne(de.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${B}' contains a slash.`);const oe=a.path.child(on.fromString(B));if(!ze.isDocumentKey(oe))throw new Ne(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${oe}' is not because it contains an odd number of segments.`);const he=new ze(oe);N.push(qc(l,he))}else{const oe=rP(h,_,B);N.push(oe)}}return new Dl(N,b)}(n._query,n.firestore._databaseId,i,e,t,r)}}function hP(n,e,t){if("string"==typeof(t=(0,P.m9)(t))){if(""===t)throw new Ne(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!c0(e)&&-1!==t.indexOf("/"))throw new Ne(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(on.fromString(t));if(!ze.isDocumentKey(r))throw new Ne(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return qc(n,new ze(r))}if(t instanceof er)return qc(n,t._key);throw new Ne(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ZD(t)}.`)}function fP(n,e){if(!Array.isArray(n)||0===n.length)throw new Ne(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ne(de.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function pP(n,e,t){if(!t.isEqual(e))throw new Ne(de.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class TM{convertValue(e,t="none"){switch(Il(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ho(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Qe()}}convertObject(e,t){const r={};return Bs(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new eT(lr(e.latitude),lr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=yg(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(El(e));default:return null}}convertTimestamp(e){const t=wl(e);return new Ln(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=on.fromString(e);St(Qb(r));const i=new zc(r.get(1),r.get(3)),a=new ze(r.popFirst(5));return i.isEqual(t)||gr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function oT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class KU extends TM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new er(this.firestore,null,t)}}class am{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fd extends gE{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new _E(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(sT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class _E extends fd{data(e={}){return super.data(e)}}class pf{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new am(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new _E(this._firestore,this._userDataWriter,r.key,r,new am(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ne(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new _E(r._firestore,r._userDataWriter,l.doc.key,l.doc,new am(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const h=new _E(r._firestore,r._userDataWriter,l.doc.key,l.doc,new am(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,w=-1;return 0!==l.type&&(_=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),w=a.indexOf(l.doc.key)),{type:ZU(l.type),doc:h,oldIndex:_,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function ZU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qe()}}function gP(n,e){return n instanceof fd&&e instanceof fd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof pf&&e instanceof pf&&n._firestore===e._firestore&&dM(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class gf extends TM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new er(this.firestore,null,t)}}function mP(n,e,t){n=un(n,er);const r=un(n.firestore,tr),i=oT(n.converter,e,t);return Ay(r,[nT(sm(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Vn.none())])}function _P(n,e,t,...r){n=un(n,er);const i=un(n.firestore,tr),a=sm(i);let l;return l="string"==typeof(e=(0,P.m9)(e))||e instanceof hd?CM(a,"updateDoc",n._key,e,t,r):IM(a,"updateDoc",n._key,e),Ay(i,[l.toMutation(n._key,Vn.exists(!0))])}function yP(n,...e){var t,r,i;n=(0,P.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||wM(e[l])||(a=e[l],l++);const h={includeMetadataChanges:a.includeMetadataChanges};if(wM(e[l])){const A=e[l];e[l]=null===(t=A.next)||void 0===t?void 0:t.bind(A),e[l+1]=null===(r=A.error)||void 0===r?void 0:r.bind(A),e[l+2]=null===(i=A.complete)||void 0===i?void 0:i.bind(A)}let _,w,b;if(n instanceof er)w=un(n.firestore,tr),b=Vh(n._key.path),_={next:A=>{e[l]&&e[l](SM(w,n,A))},error:e[l+1],complete:e[l+2]};else{const A=un(n,ps);w=un(A.firestore,tr),b=A._query;const N=new gf(w);_={next:F=>{e[l]&&e[l](new pf(w,N,A,F))},error:e[l+1],complete:e[l+2]},aP(n._query)}return function(A,N,F,B){const oe=new QD(B),he=new c(N,oe,F);return A.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return WD(yield Sy(A),he)})),()=>{oe.bc(),A.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return qD(yield Sy(A),he)}))}}(Hr(w),b,h,_)}function Ay(n,e){return function(t,r){const i=new Br;return t.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function Rt(n,e,t){return gn.apply(this,arguments)}(yield yM(t),r,i)})),i.promise}(Hr(n),e)}function SM(n,e,t){const r=t.docs.get(e._key),i=new gf(n);return new fd(n,i,e._key,r,new am(t.hasPendingWrites,t.fromCache),e.converter)}const sB={maxAttempts:5};class vP{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=sm(e)}set(e,t,r){this._verifyNotCommitted();const i=mf(e,this._firestore),a=oT(i.converter,t,r),l=nT(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,Vn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=mf(e,this._firestore);let l;return l="string"==typeof(t=(0,P.m9)(t))||t instanceof hd?CM(this._dataReader,"WriteBatch.update",a._key,t,r,i):IM(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,Vn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=mf(e,this._firestore);return this._mutations=this._mutations.concat(new Hh(t._key,Vn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ne(de.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function mf(n,e){if((n=(0,P.m9)(n)).firestore!==e)throw new Ne(de.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class oB extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=sm(e)}get(e){const t=mf(e,this._firestore),r=new KU(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return Qe();const a=i[0];if(a.isFoundDocument())return new gE(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new gE(this._firestore,r,t._key,null,t.converter);throw Qe()})}set(e,t,r){const i=mf(e,this._firestore),a=oT(i.converter,t,r),l=nT(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=mf(e,this._firestore);let l;return l="string"==typeof(t=(0,P.m9)(t))||t instanceof hd?CM(this._dataReader,"Transaction.update",a._key,t,r,i):IM(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=mf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=mf(e,this._firestore),r=new gf(this._firestore);return super.get(e).then(i=>new fd(this._firestore,r,t._key,i._document,new am(!1,!1),t.converter))}}function AM(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ne("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function EP(){if(typeof Uint8Array>"u")throw new Ne("unimplemented","Uint8Arrays are not available in this environment.")}function IP(){if(!function hk(){return typeof atob<"u"}())throw new Ne("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){pg=Di.SDK_VERSION,(0,Di._registerComponent)(new as.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),l=new tr(new sb(t.getProvider("auth-internal")),new j_(t.getProvider("app-check-internal")),function(h,_){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Ne(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zc(h.options.projectId,_)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,Di.registerVersion)(rb,"3.7.3",n),(0,Di.registerVersion)(rb,"3.7.3","esm2017")}();class yE{constructor(e){this._delegate=e}static fromBase64String(e){return IP(),new yE(Nl.fromBase64String(e))}static fromUint8Array(e){return EP(),new yE(Nl.fromUint8Array(e))}toBase64(){return IP(),this._delegate.toBase64()}toUint8Array(){return EP(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function xM(n){return function gB(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class mB{enableIndexedDbPersistence(e,t){return function IU(n,e){Jk(n=un(n,tr));const t=Hr(n),r=n._freezeSettings(),i=new lM;return Xk(t,i,new Pk(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function CU(n){Jk(n=un(n,tr));const e=Hr(n),t=n._freezeSettings(),r=new lM;return Xk(e,r,new iU(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function bU(n){if(n._initialized&&!n._terminated)throw new Ne(de.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Br;return n._queue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{yield(t=(0,_e.Z)(function*(r){if(!Uo.C())return Promise.resolve();const i=r+"main";yield Uo.delete(i)}),function(r){return t.apply(this,arguments)})(H0(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class CP{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof zc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ni("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function jk(n,e,t,r={}){var i;const a=(n=un(n,fE))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&Ni("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,h;if("string"==typeof r.mockUserToken)l=r.mockUserToken,h=Ur.MOCK_USER;else{l=(0,P.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Ne(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ur(_)}n._authCredentials=new UA(new B_(l,h))}}(this._delegate,e,t,r)}enableNetwork(){return function TU(n){return function hU(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield qk(n),t=yield _M(n);return e.setNetworkEnabled(!0),function(r){const i=Ze(r);return i._u.delete(0),Ey(i)}(t)}))}(Hr(n=un(n,tr)))}(this._delegate)}disableNetwork(){return function SU(n){return function fU(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield qk(n),t=yield _M(n);return e.setNetworkEnabled(!1),(r=(0,_e.Z)(function*(i){const a=Ze(i);a._u.add(0),yield wu(a),a.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Hr(n=un(n,tr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Ok("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function DU(n){return function(e){const t=new Br;return e.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function dE(n,e){return rm.apply(this,arguments)}(yield yM(e),t)})),t.promise}(Hr(n=un(n,tr)))}(this._delegate)}onSnapshotsInSync(e){return function iB(n,e){return function mU(n,e){const t=new QD(e);return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield Sy(n),i=t,Ze(r).Ru.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield Sy(n),i=t,void Ze(r).Ru.delete(i);var r,i}))}}(Hr(n=un(n,tr)),wM(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ne("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new xy(this,Hk(this._delegate,e))}catch(t){throw Hs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ea(this,YD(this._delegate,e))}catch(t){throw Hs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new $s(this,function sU(n,e){if(n=un(n,fE),cM("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ne(de.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ps(n,null,(t=e,new pu(on.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Hs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function aB(n,e,t){n=un(n,tr);const r=Object.assign(Object.assign({},sB),t);return function(i){if(i.maxAttempts<1)throw new Ne(de.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,l){const h=new Br;return i.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){const _=yield function Kk(n){return XD(n).then(e=>e.datastore)}(i);new cU(i.asyncQueue,_,l,a,h).run()})),h.promise}(Hr(n),i=>e(new oB(n,i)),r)}(this._delegate,t=>e(new bP(this,t)))}batch(){return Hr(this._delegate),new DP(new vP(this._delegate,e=>Ay(this._delegate,e)))}loadBundle(e){return function AU(n,e){const t=Hr(n=un(n,tr)),r=new wU;return function _U(n,e,t,r){const i=function(a,l){let h;return h="string"==typeof a?(new TextEncoder).encode(a):a,_=function(_,w){if(_ instanceof Uint8Array)return Gk(_,w);if(_ instanceof ArrayBuffer)return Gk(new Uint8Array(_),w);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new oU(_,l);var _}(t,wy(e));n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){!function rU(n,e,t){const r=Ze(n);var i;(i=(0,_e.Z)(function*(a,l,h){try{const _=yield l.getMetadata();if(yield function(N,F){const B=Ze(N),oe=jr(F.createTime);return B.persistence.runTransaction("hasNewerBundle","readonly",he=>B.Ns.getBundleMetadata(he,F.id)).then(he=>!!he&&he.createTime.compareTo(oe)>=0)}(a.localStore,_))return yield l.close(),h._completeWith({taskState:"Success",documentsLoaded:(N=_).totalDocuments,bytesLoaded:N.totalBytes,totalDocuments:N.totalDocuments,totalBytes:N.totalBytes}),Promise.resolve(new Set);h._updateProgress(I(_));const w=new y(_,a.localStore,l.It);let b=yield l.mc();for(;b;){const N=yield w.Fu(b);N&&h._updateProgress(N),b=yield l.mc()}const A=yield w.complete();return yield dd(a,A.Lu,void 0),yield function(N,F){const B=Ze(N);return B.persistence.runTransaction("Save bundle","readwrite",oe=>B.Ns.saveBundleMetadata(oe,F))}(a.localStore,_),h._completeWith(A.progress),Promise.resolve(A.Bu)}catch(_){return Ni("SyncEngine",`Loading bundle failed with ${_}`),h._failWith(_),Promise.resolve(new Set)}var N}),function(a,l,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield yM(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function xU(n,e){return function yU(n,e){return n.asyncQueue.enqueue((0,_e.Z)(function*(){return function(t,r){const i=Ze(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ns.getNamedQuery(a,r))}(yield JD(n),e)}))}(Hr(n=un(n,tr)),e).then(t=>t?new ps(n,null,t.query):null)}(this._delegate,e).then(t=>t?new $s(this,t):null)}}class aT extends TM{constructor(e){super(),this.firestore=e}convertBytes(e){return new yE(new Nl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ea.forKey(t,this.firestore,null)}}class bP{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new aT(e)}get(e){const t=lm(e);return this._delegate.get(t).then(r=>new vE(this._firestore,new fd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=lm(e);return r?(AM("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=lm(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=lm(e);return this._delegate.delete(t),this}}class DP{constructor(e){this._delegate=e}set(e,t,r){const i=lm(e);return r?(AM("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=lm(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=lm(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class um{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new _E(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new wE(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=um.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new um(e,new aT(e),t),i.set(t,a)),a}}um.INSTANCES=new WeakMap;class Ea{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new aT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ne("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ea(t,new er(t._delegate,r,new ze(e)))}static forKey(e,t,r){return new Ea(t,new er(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new xy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new xy(this.firestore,Hk(this._delegate,e))}catch(t){throw Hs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,P.m9)(e))instanceof er&&$k(this._delegate,e)}set(e,t){t=AM("DocumentReference.set",t);try{return t?mP(this._delegate,e,t):mP(this._delegate,e)}catch(r){throw Hs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?_P(this._delegate,e):_P(this._delegate,e,t,...r)}catch(i){throw Hs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function nB(n){return Ay(un(n.firestore,tr),[new Hh(n._key,Vn.none())])}(this._delegate)}onSnapshot(...e){const t=TP(e),r=SP(e,i=>new vE(this.firestore,new fd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return yP(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function QU(n){n=un(n,er);const e=un(n.firestore,tr),t=Hr(e),r=new gf(e);return function pU(n,e){const t=new Br;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(i,a,l){try{const h=yield function(_,w){const b=Ze(_);return b.persistence.runTransaction("read document","readonly",A=>b.localDocuments.getDocument(A,w))}(i,a);h.isFoundDocument()?l.resolve(h):h.isNoDocument()?l.resolve(null):l.reject(new Ne(de.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const _=Xg(h,`Failed to get document '${a} from cache`);l.reject(_)}}),function(i,a,l){return r.apply(this,arguments)})(yield JD(n),e,t);var r})),t.promise}(t,n._key).then(i=>new fd(e,r,n._key,i,new am(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function XU(n){n=un(n,er);const e=un(n.firestore,tr);return Zk(Hr(e),n._key,{source:"server"}).then(t=>SM(e,n,t))}(this._delegate):function YU(n){n=un(n,er);const e=un(n.firestore,tr);return Zk(Hr(e),n._key).then(t=>SM(e,n,t))}(this._delegate),t.then(r=>new vE(this.firestore,new fd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ea(this.firestore,this._delegate.withConverter(e?um.getInstance(this.firestore,e):null))}}function Hs(n,e,t){return n.message=n.message.replace(e,t),n}function TP(n){for(const e of n)if("object"==typeof e&&!xM(e))return e;return{}}function SP(n,e){var t,r;let i;return i=xM(n[0])?n[0]:xM(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class vE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ea(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return gP(this._delegate,e._delegate)}}class wE extends vE{data(e){const t=this._delegate.data(e);return function ib(n,e){n||Qe()}(void 0!==t),t}}class $s{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new aT(e)}where(e,t,r){try{return new $s(this.firestore,ff(this._delegate,function UU(n,e,t){const r=e,i=sT("where",n);return new VU(i,r,t)}(e,t,r)))}catch(i){throw Hs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new $s(this.firestore,ff(this._delegate,function jU(n,e="asc"){const t=e,r=sT("orderBy",n);return new BU(r,t)}(e,t)))}catch(r){throw Hs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new $s(this.firestore,ff(this._delegate,function HU(n){return Vk("limit",n),new uP("limit",n,"F")}(e)))}catch(t){throw Hs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new $s(this.firestore,ff(this._delegate,function $U(n){return Vk("limitToLast",n),new uP("limitToLast",n,"L")}(e)))}catch(t){throw Hs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new $s(this.firestore,ff(this._delegate,function GU(...n){return new lP("startAt",n,!0)}(...e)))}catch(t){throw Hs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new $s(this.firestore,ff(this._delegate,function WU(...n){return new lP("startAfter",n,!1)}(...e)))}catch(t){throw Hs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new $s(this.firestore,ff(this._delegate,function zU(...n){return new cP("endBefore",n,!1)}(...e)))}catch(t){throw Hs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new $s(this.firestore,ff(this._delegate,function qU(...n){return new cP("endAt",n,!0)}(...e)))}catch(t){throw Hs(t,"endAt()","Query.endAt()")}}isEqual(e){return dM(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function eB(n){n=un(n,ps);const e=un(n.firestore,tr),t=Hr(e),r=new gf(e);return function gU(n,e){const t=new Br;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(i,a,l){try{const h=yield po(i,a,!0),_=new R(a,h.Hi),w=_.Wu(h.documents),b=_.applyChanges(w,!1);l.resolve(b.snapshot)}catch(h){const _=Xg(h,`Failed to execute query '${a} against cache`);l.reject(_)}}),function(i,a,l){return r.apply(this,arguments)})(yield JD(n),e,t);var r})),t.promise}(t,n._query).then(i=>new pf(e,r,n,i))}(this._delegate):"server"===e?.source?function tB(n){n=un(n,ps);const e=un(n.firestore,tr),t=Hr(e),r=new gf(e);return Yk(t,n._query,{source:"server"}).then(i=>new pf(e,r,n,i))}(this._delegate):function JU(n){n=un(n,ps);const e=un(n.firestore,tr),t=Hr(e),r=new gf(e);return aP(n._query),Yk(t,n._query).then(i=>new pf(e,r,n,i))}(this._delegate),t.then(r=>new MM(this.firestore,new pf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=TP(e),r=SP(e,i=>new MM(this.firestore,new pf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return yP(this._delegate,t,r)}withConverter(e){return new $s(this.firestore,this._delegate.withConverter(e?um.getInstance(this.firestore,e):null))}}class yB{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new wE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class MM{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new $s(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new wE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new yB(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new wE(this._firestore,r))})}isEqual(e){return gP(this._delegate,e._delegate)}}class xy extends $s{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ea(this.firestore,e):null}doc(e){try{return new Ea(this.firestore,void 0===e?YD(this._delegate):YD(this._delegate,e))}catch(t){throw Hs(t,"doc()","CollectionReference.doc()")}}add(e){return function rB(n,e){const t=un(n.firestore,tr),r=YD(n),i=oT(n.converter,e);return Ay(t,[nT(sm(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Vn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ea(this.firestore,t))}isEqual(e){return $k(this._delegate,e._delegate)}withConverter(e){return new xy(this.firestore,this._delegate.withConverter(e?um.getInstance(this.firestore,e):null))}}function lm(n){return un(n,er)}class RM{constructor(...e){this._delegate=new hd(...e)}static documentId(){return new RM(Jn.keyField().canonicalString())}isEqual(e){return(e=(0,P.m9)(e))instanceof hd&&this._delegate._internalPath.isEqual(e._internalPath)}}class cm{constructor(e){this._delegate=e}static serverTimestamp(){const e=function lB(){return new EM("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new cm(e)}static delete(){const e=function uB(){return new pE("deleteField")}();return e._methodName="FieldValue.delete",new cm(e)}static arrayUnion(...e){const t=function cB(...n){return new kU("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new cm(t)}static arrayRemove(...e){const t=function dB(...n){return new PU("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new cm(t)}static increment(e){const t=function hB(n){return new OU("increment",n)}(e);return t._methodName="FieldValue.increment",new cm(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const vB={Firestore:CP,GeoPoint:eT,Timestamp:Ln,Blob:yE,Transaction:bP,WriteBatch:DP,DocumentReference:Ea,DocumentSnapshot:vE,Query:$s,QueryDocumentSnapshot:wE,QuerySnapshot:MM,CollectionReference:xy,FieldPath:RM,FieldValue:cm,setLogLevel:function _B(n){!function va(n){cu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function AP(n,e){return function IB(n,e=lh.z){return new Cr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function NM(n,e){return AP(n,e).pipe((0,Ke.U)(t=>({payload:t,type:"query"})))}function uT(n,e){return NM(n,e).pipe(xc(void 0),Ps(),(0,Ke.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,h)=>{const _=i.find(b=>b.doc.ref.isEqual(l.ref)),w=t?.payload.docs.find(b=>b.ref.isEqual(l.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(l.metadata)||!_&&w&&JSON.stringify(w.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:l}})}),a}))}function xP(n,e,t){return uT(n,t).pipe(Mc((r,i)=>function bB(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function DB(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return kM(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return kM(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return kM(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),c_(),(0,Ke.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function kM(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function MP(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function EB(n){(function wB(n,e){n.INTERNAL.registerComponent(new as.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},vB)))})(n,(e,t)=>new CP(e,t,new mB)),n.registerVersion("@firebase/firestore-compat","0.2.3")}(Rs.Z);class RP{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=uT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Ke.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(xc(void 0),Ps(),U(([r,i])=>i.length>0||!r),(0,Ke.U)(([r,i])=>i),$t.iC)}auditTrail(e){return this.stateChanges(e).pipe(Mc((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=MP(e);return xP(this.query,t,this.afs.schedulers.outsideAngular).pipe($t.iC)}valueChanges(e={}){return NM(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ke.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),$t.iC)}get(e){return(0,Kt.D)(this.query.get(e)).pipe($t.iC)}add(e){return this.ref.add(e)}doc(e){return new NP(this.ref.doc(e),this.afs)}}class NP{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=OP(r,t);return new RP(i,a,this.afs)}snapshotChanges(){return function CB(n,e){return AP(n,e).pipe(xc(void 0),Ps(),(0,Ke.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe($t.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ke.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Kt.D)(this.ref.get(e)).pipe($t.iC)}}class TB{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?uT(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ke.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),U(t=>t.length>0),$t.iC):uT(this.query,this.afs.schedulers.outsideAngular).pipe($t.iC)}auditTrail(e){return this.stateChanges(e).pipe(Mc((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=MP(e);return xP(this.query,t,this.afs.schedulers.outsideAngular).pipe($t.iC)}valueChanges(e={}){return NM(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ke.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),$t.iC)}get(e){return(0,Kt.D)(this.query.get(e)).pipe($t.iC)}}const kP=new p.OlP("angularfire2.enableFirestorePersistence"),PP=new p.OlP("angularfire2.firestore.persistenceSettings"),SB=new p.OlP("angularfire2.firestore.settings"),AB=new p.OlP("angularfire2.firestore.use-emulator");function OP(n,e=(t=>t)){return{query:e(n),ref:n}}let FP=(()=>{class n{constructor(t,r,i,a,l,h,_,w,b,A,N,F,B,oe,he,We,ot){this.schedulers=_;const rt=(0,ar.on)(t,h,r),ut=b;A&&Xn(rt,h,N,B,oe,he,F,We),[this.firestore,this.persistenceEnabled$]=(0,ar.cc)(`${rt.name}.firestore`,"AngularFirestore",rt.name,()=>{const xt=h.runOutsideAngular(()=>rt.firestore());if(a&&xt.settings(a),ut&&xt.useEmulator(...ut),i&&!Gl(l)){const Bt=()=>{try{return(0,Kt.D)(xt.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(yr){return typeof console<"u"&&console.warn(yr),Xe(!1)}};return[xt,h.runOutsideAngular(Bt)]}return[xt,Xe(!1)]},[a,ut,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=OP(i,r),h=this.schedulers.ngZone.run(()=>a);return new RP(h,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new TB(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new NP(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ar.Dh),p.LFG(ar.xv,8),p.LFG(kP,8),p.LFG(SB,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG($t.HU),p.LFG(PP,8),p.LFG(AB,8),p.LFG(gi,8),p.LFG(z,8),p.LFG(le,8),p.LFG(Ue,8),p.LFG(Je,8),p.LFG(It,8),p.LFG(ht,8),p.LFG(Ms,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),xB=(()=>{class n{constructor(){x.Z.registerVersion("angularfire",$t.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:kP,useValue:!0},{provide:PP,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[FP]}),n})();var MB=L(5032);const LP="@firebase/database",VP="0.13.10";let PM="";function UP(n){PM=n}class kB{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,P.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,P.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class PB{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,P.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const BP=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new kB(e)}}catch{}return new PB},dm=BP("localStorage"),OM=BP("sessionStorage"),My=new qi.Yd("@firebase/database"),jP=function(){let n=1;return function(){return n++}}(),HP=function(n){const e=(0,P.dS)(n),t=new P.gQ;t.update(e);const r=t.digest();return P.US.encodeByteArray(r)},EE=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=EE.apply(null,r):e+="object"==typeof r?(0,P.Wl)(r):r,e+=" "}return e};let hm=null,$P=!0;const GP=function(n,e){(0,P.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(My.logLevel=qi.in.VERBOSE,hm=My.log.bind(My),e&&OM.set("logging_enabled",!0)):"function"==typeof n?hm=n:(hm=null,OM.remove("logging_enabled"))},Pi=function(...n){if(!0===$P&&($P=!1,null===hm&&!0===OM.get("logging_enabled")&&GP(!0)),hm){const e=EE.apply(null,n);hm(e)}},IE=function(n){return function(...e){Pi(n,...e)}},FM=function(...n){const e="FIREBASE INTERNAL ERROR: "+EE(...n);My.error(e)},kl=function(...n){const e=`FIREBASE FATAL ERROR: ${EE(...n)}`;throw My.error(e),new Error(e)},gs=function(...n){const e="FIREBASE WARNING: "+EE(...n);My.warn(e)},lT=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},pd="[MIN_NAME]",Pl="[MAX_NAME]",fm=function(n,e){if(n===e)return 0;if(n===pd||e===Pl)return-1;if(e===pd||n===Pl)return 1;{const t=cT(n),r=cT(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},LB=function(n,e){return n===e?0:n<e?-1:1},CE=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,P.Wl)(e))},LM=function(n){if("object"!=typeof n||null===n)return(0,P.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,P.Wl)(e[r]),t+=":",t+=LM(n[e[r]]);return t+="}",t},WP=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Oi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const zP=function(n){(0,P.hu)(!lT(n),"Invalid JSON number");const r=1023;let i,a,l,h,_;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=h+r,l=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const w=[];for(_=52;_;_-=1)w.push(l%2?1:0),l=Math.floor(l/2);for(_=11;_;_-=1)w.push(a%2?1:0),a=Math.floor(a/2);w.push(i?1:0),w.reverse();const b=w.join("");let A="";for(_=0;_<64;_+=8){let N=parseInt(b.substr(_,8),2).toString(16);1===N.length&&(N="0"+N),A+=N}return A.toLowerCase()},jB=new RegExp("^-?(0*)\\d{1,10}$"),qP=-2147483648,VM=2147483647,cT=function(n){if(jB.test(n)){const e=Number(n);if(e>=qP&&e<=VM)return e}return null},Ry=function(n){try{n()}catch(e){setTimeout(()=>{throw gs("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},bE=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class $B{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){gs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class GB{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Pi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',gs(e)}}let DE=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const XP=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,tO="websocket",nO="long_polling";class BM{constructor(e,t,r,i,a=!1,l="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=dm.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&dm.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function rO(n,e,t){let r;if((0,P.hu)("string"==typeof e,"typeof type must == string"),(0,P.hu)("object"==typeof t,"typeof params must == object"),e===tO)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==nO)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function WB(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Oi(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class zB{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,P.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,P.p$)(this.counters_)}}const jM={},HM={};function $M(n){const e=n.toString();return jM[e]||(jM[e]=new zB),jM[e]}class KB{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Ry(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class _f{constructor(e,t,r,i,a,l,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=IE(e),this.stats_=$M(t),this.urlFn=_=>(this.appCheckToken&&(_.ac=this.appCheckToken),rO(t,nO,_))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new KB(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,P.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new GM((...a)=>{const[l,h,_,w,b]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=h,this.password=_;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&XP.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){_f.forceAllow_=!0}static forceDisallow(){_f.forceDisallow_=!0}static isAvailable(){return!((0,P.Yr)()||!_f.forceAllow_&&(_f.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,P.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,P.h$)(t),i=WP(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,P.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,P.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class GM{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,P.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=jP(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=GM.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(h){Pi("frame writing exception"),h.stack&&Pi(h.stack),Pi(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Pi("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,P.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Pi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let hT=null;typeof MozWebSocket<"u"?hT=MozWebSocket:typeof WebSocket<"u"&&(hT=WebSocket);let Ny=(()=>{class n{constructor(t,r,i,a,l,h,_){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=IE(this.connId),this.stats_=$M(r),this.connURL=n.connectionURL_(r,h,_,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,l){const h={v:"5"};return!(0,P.Yr)()&&typeof location<"u"&&location.hostname&&XP.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),a&&(h.ac=a),l&&(h.p=l),rO(t,tO,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,dm.set("previous_websocket_failure",!0);try{let i;if((0,P.Yr)()){i={headers:{"User-Agent":`Firebase/5/${PM}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,h=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new hT(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==hT&&!n.forceDisallow_}static previouslyFailed(){return dm.isInMemoryStorage||!0===dm.get("previous_websocket_failure")}markConnectionHealthy(){dm.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,P.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,P.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,P.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=WP(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),cO=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[_f,Ny]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Ny&&Ny.isAvailable();let i=r&&!Ny.previouslyFailed();if(t.webSocketOnly&&(r||gs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Ny];else{const a=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class _O{constructor(e,t,r,i,a,l,h,_,w,b){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=h,this.onDisconnect_=_,this.onKill_=w,this.lastSessionId=b,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=IE("c:"+this.id+":"),this.transportManager_=new cO(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=bE(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=CE("t",e),r=CE("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=CE("t",e),r=CE("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=CE("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?FM("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):FM("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&gs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),bE(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):bE(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(dm.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class yO{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class vO{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,P.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,P.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class fT extends vO{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,P.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new fT}getInitialEvent(e){return(0,P.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class In{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function mn(){return new In("")}function Qt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function yf(n){return n.pieces_.length-n.pieceNum_}function Un(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new In(n.pieces_,e)}function zM(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function TE(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function IO(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new In(e,0)}function dr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof In)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new In(t,0)}function Xt(n){return n.pieceNum_>=n.pieces_.length}function Gs(n,e){const t=Qt(n),r=Qt(e);if(null===t)return e;if(t===r)return Gs(Un(n),Un(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function m2(n,e){const t=TE(n,0),r=TE(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=fm(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function qM(n,e){if(yf(n)!==yf(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Ia(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(yf(n)>yf(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class _2{constructor(e,t){this.errorPrefix_=t,this.parts_=TE(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,P.ug)(this.parts_[r]);CO(this)}}function CO(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+pm(n))}function pm(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class KM extends vO{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new KM}getInitialEvent(e){return(0,P.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const SE=1e3;let gT,gm=(()=>{class n extends yO{constructor(t,r,i,a,l,h,_,w){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=h,this.appCheckTokenProvider_=_,this.authOverride_=w,this.id=n.nextPersistentConnectionId_++,this.log_=IE("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=SE,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,w&&!(0,P.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");KM.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&fT.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,P.Wl)(l)),(0,P.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new P.BH,a={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:h=>{const _=h.d;"ok"===h.s?r.resolve(_):r.reject(_)}};return this.outstandingGets_.push(a),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+l),this.listens.has(h)||this.listens.set(h,new Map),(0,P.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,P.hu)(!this.listens.get(h).has(l),"listen() called twice for same path/queryId.");const _={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(h).set(l,_),this.connected_&&this.sendListen_(_)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,_=>{const w=_.d,b=_.s;n.warnOnListenWarnings_(w,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",_),"ok"!==b&&this.removeListen_(i,a),t.onComplete&&t.onComplete(b,w))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,P.r3)(t,"w")){const i=(0,P.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();gs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,P.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,P.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,h=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,P.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const h={p:r,d:i};void 0!==l&&(h.h=l),this.outstandingPuts_.push({action:t,request:h,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,P.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):FM("Unrecognized action received from server: "+(0,P.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,P.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=SE,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=SE,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=SE),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,_e.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let _=!1,w=null;const b=function(){w?w.close():(_=!0,a())};t.realtime_={close:b,sendRequest:function(F){(0,P.hu)(w,"sendRequest call when we're not connected not allowed."),w.sendRequest(F)}};const N=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[F,B]=yield Promise.all([t.authTokenProvider_.getToken(N),t.appCheckTokenProvider_.getToken(N)]);_?Pi("getToken() completed but was canceled"):(Pi("getToken() completed. Creating connection."),t.authToken_=F&&F.accessToken,t.appCheckToken_=B&&B.token,w=new _O(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,oe=>{gs(oe+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(F){t.log_("Failed to get token: "+F),_||(t.repoInfo_.nodeAdmin&&gs(F),b())}}})()}interrupt(t){Pi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Pi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,P.xb)(this.interruptReasons_)&&(this.reconnectDelay_=SE,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>LM(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new In(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Pi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Pi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,P.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+PM.replace(/\./g,"-")]=1,(0,P.uI)()?t["framework.cordova"]=1:(0,P.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=fT.getInstance().currentlyOnline();return(0,P.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class nn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new nn(e,t)}}class pT{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new nn(pd,e),i=new nn(pd,t);return 0!==this.compare(r,i)}minPost(){return nn.MIN}}class TO extends pT{static get __EMPTY_NODE(){return gT}static set __EMPTY_NODE(e){gT=e}compare(e,t){return fm(e.name,t.name)}isDefinedOn(e){throw(0,P.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return nn.MIN}maxPost(){return new nn(Pl,gT)}makePost(e,t){return(0,P.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new nn(e,gT)}toString(){return".key"}}const Ol=new TO;class mT{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let YM,Cu=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??go.EMPTY_NODE,this.right=l??go.EMPTY_NODE}copy(t,r,i,a,l){return new n(t??this.key,r??this.value,i??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return go.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return go.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class go{constructor(e,t=go.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new go(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Cu.BLACK,null,null))}remove(e){return new go(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Cu.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new mT(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new mT(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new mT(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new mT(this.root_,null,this.comparator_,!0,e)}}function D2(n,e){return fm(n.name,e.name)}function ZM(n,e){return fm(n,e)}go.EMPTY_NODE=new class b2{copy(e,t,r,i,a){return this}insert(e,t,r){return new Cu(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const SO=function(n){return"number"==typeof n?"number:"+zP(n):"string:"+n},AO=function(n){if(n.isLeafNode()){const e=n.val();(0,P.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,P.r3)(e,".sv"),"Priority must be a string or number.")}else(0,P.hu)(n===YM||n.isEmpty(),"priority of unexpected type.");(0,P.hu)(n===YM||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let xO,MO,RO,ky=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,P.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),AO(this.priorityNode_)}static set __childrenNodeConstructor(t){xO=t}static get __childrenNodeConstructor(){return xO}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Xt(t)?this:".priority"===Qt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Qt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,P.hu)(".priority"!==i||1===yf(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Un(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+SO(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?zP(this.value_):this.value_,this.lazyHash_=HP(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,P.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,P.hu)(a>=0,"Unknown leaf type: "+r),(0,P.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const zn=new class x2 extends pT{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?fm(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return nn.MIN}maxPost(){return new nn(Pl,new ky("[PRIORITY-POST]",RO))}makePost(e,t){const r=MO(e);return new nn(t,new ky("[PRIORITY-POST]",r))}toString(){return".priority"}},M2=Math.log(2);class R2{constructor(e){this.count=parseInt(Math.log(e+1)/M2,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const _T=function(n,e,t,r){n.sort(e);const i=function(_,w){const b=w-_;let A,N;if(0===b)return null;if(1===b)return A=n[_],N=t?t(A):A,new Cu(N,A.node,Cu.BLACK,null,null);{const F=parseInt(b/2,10)+_,B=i(_,F),oe=i(F+1,w);return A=n[F],N=t?t(A):A,new Cu(N,A.node,Cu.BLACK,B,oe)}},h=function(_){let w=null,b=null,A=n.length;const N=function(B,oe){const he=A-B,We=A;A-=B;const ot=i(he+1,We),rt=n[he],ut=t?t(rt):rt;F(new Cu(ut,rt.node,oe,null,ot))},F=function(B){w?(w.left=B,w=B):(b=B,w=B)};for(let B=0;B<_.count;++B){const oe=_.nextBitIsOne(),he=Math.pow(2,_.count-(B+1));oe?N(he,Cu.BLACK):(N(he,Cu.BLACK),N(he,Cu.RED))}return b}(new R2(n.length));return new go(r||e,h)};let QM;const Py={};class gd{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,P.hu)(Py&&zn,"ChildrenNode.ts has not been loaded"),QM=QM||new gd({".priority":Py},{".priority":zn}),QM}get(e){const t=(0,P.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof go?t:null}hasIndex(e){return(0,P.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,P.hu)(e!==Ol,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(nn.Wrap);let h,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();h=i?_T(r,e.getCompare()):Py;const _=e.toString(),w=Object.assign({},this.indexSet_);w[_]=e;const b=Object.assign({},this.indexes_);return b[_]=h,new gd(b,w)}addToIndexes(e,t){const r=(0,P.UI)(this.indexes_,(i,a)=>{const l=(0,P.DV)(this.indexSet_,a);if((0,P.hu)(l,"Missing index implementation for "+a),i===Py){if(l.isDefinedOn(e.node)){const h=[],_=t.getIterator(nn.Wrap);let w=_.getNext();for(;w;)w.name!==e.name&&h.push(w),w=_.getNext();return h.push(e),_T(h,l.getCompare())}return Py}{const h=t.get(e.name);let _=i;return h&&(_=_.remove(new nn(e.name,h))),_.insert(e,e.node)}});return new gd(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,P.UI)(this.indexes_,i=>{if(i===Py)return i;{const a=t.get(e.name);return a?i.remove(new nn(e.name,a)):i}});return new gd(r,this.indexSet_)}}let AE,Wt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&AO(this.priorityNode_),this.children_.isEmpty()&&(0,P.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return AE||(AE=new n(new go(ZM),null,gd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||AE}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?AE:r}}getChild(t){const r=Qt(t);return null===r?this:this.getImmediateChild(r).getChild(Un(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,P.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new nn(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const h=a.isEmpty()?AE:this.priorityNode_;return new n(a,h,l)}}updateChild(t,r){const i=Qt(t);if(null===i)return r;{(0,P.hu)(".priority"!==Qt(t)||1===yf(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Un(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(zn,(h,_)=>{r[h]=_.val(t),i++,l&&n.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):l=!1}),!t&&l&&a<2*i){const h=[];for(const _ in r)h[_]=r[_];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+SO(this.getPriority().val())+":"),this.forEachChild(zn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":HP(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new nn(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new nn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new nn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,nn.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,nn.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===xE?-1:0}withIndex(t){if(t===Ol||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Ol||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(zn),a=r.getIterator(zn);let l=i.getNext(),h=a.getNext();for(;l&&h;){if(l.name!==h.name||!l.node.equals(h.node))return!1;l=i.getNext(),h=a.getNext()}return null===l&&null===h}return!1}return!1}}resolveIndex_(t){return t===Ol?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const xE=new class N2 extends Wt{constructor(){super(new go(ZM),Wt.EMPTY_NODE,gd.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Wt.EMPTY_NODE}isEmpty(){return!1}};function _r(n,e=null){if(null===n)return Wt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,P.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new ky(n,_r(e));if(n instanceof Array){let t=Wt.EMPTY_NODE;return Oi(n,(r,i)=>{if((0,P.r3)(n,r)&&"."!==r.substring(0,1)){const a=_r(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(_r(e))}{const t=[];let r=!1;if(Oi(n,(l,h)=>{if("."!==l.substring(0,1)){const _=_r(h);_.isEmpty()||(r=r||!_.getPriority().isEmpty(),t.push(new nn(l,_)))}}),0===t.length)return Wt.EMPTY_NODE;const a=_T(t,D2,l=>l.name,ZM);if(r){const l=_T(t,zn.getCompare());return new Wt(a,_r(e),new gd({".priority":l},{".priority":zn}))}return new Wt(a,_r(e),gd.Default)}}Object.defineProperties(nn,{MIN:{value:new nn(pd,Wt.EMPTY_NODE)},MAX:{value:new nn(Pl,xE)}}),TO.__EMPTY_NODE=Wt.EMPTY_NODE,ky.__childrenNodeConstructor=Wt,function T2(n){YM=n}(xE),function A2(n){RO=n}(xE),function S2(n){MO=n}(_r);class XM extends pT{constructor(e){super(),this.indexPath_=e,(0,P.hu)(!Xt(e)&&".priority"!==Qt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?fm(e.name,t.name):a}makePost(e,t){const r=_r(e),i=Wt.EMPTY_NODE.updateChild(this.indexPath_,r);return new nn(t,i)}maxPost(){const e=Wt.EMPTY_NODE.updateChild(this.indexPath_,xE);return new nn(Pl,e)}toString(){return TE(this.indexPath_,0).join("/")}}const JM=new class P2 extends pT{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?fm(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return nn.MIN}maxPost(){return nn.MAX}makePost(e,t){const r=_r(e);return new nn(t,r)}toString(){return".value"}},Oy="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",O2=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=Oy.charAt(t%64),t=Math.floor(t/64);(0,P.hu)(0===t,"Cannot push at time == 0");let l=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=Oy.charAt(e[i]);return(0,P.hu)(20===l.length,"nextPushId: Length should be 20."),l}}(),PO=function(n){if(n===""+VM)return"-";const e=cT(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let l=0;l<t.length;l++)t[l]=n.charAt(l);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Pl;const a=Oy.charAt(Oy.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},OO=function(n){if(n===""+qP)return pd;const e=cT(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+VM:(delete t[t.length-1],t.join("")):(t[t.length-1]=Oy.charAt(Oy.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function FO(n){return{type:"value",snapshotNode:n}}function Fy(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function ME(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function RE(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class tR{constructor(e){this.index_=e}updateChild(e,t,r,i,a,l){(0,P.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(ME(t,h)):(0,P.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?l.trackChildChange(Fy(t,r)):l.trackChildChange(RE(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(zn,(i,a)=>{t.hasChild(i)||r.trackChildChange(ME(i,a))}),t.isLeafNode()||t.forEachChild(zn,(i,a)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(a)||r.trackChildChange(RE(i,a,l))}else r.trackChildChange(Fy(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Wt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class NE{constructor(e){this.indexedFilter_=new tR(e.getIndex()),this.index_=e.getIndex(),this.startPost_=NE.getStartPost_(e),this.endPost_=NE.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,l){return this.matches(new nn(t,r))||(r=Wt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Wt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Wt.EMPTY_NODE);const a=this;return t.forEachChild(zn,(l,h)=>{a.matches(new nn(l,h))||(i=i.updateImmediateChild(l,Wt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class L2{constructor(e){this.rangedFilter_=new NE(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,l){return this.rangedFilter_.matches(new nn(t,r))||(r=Wt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,l):this.fullLimitUpdateChild_(e,t,r,a,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Wt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Wt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const h=a.getNext();let _;if(_=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!_)break;i=i.updateImmediateChild(h.name,h.node),l++}}else{let a,l,h,_;if(i=t.withIndex(this.index_),i=i.updatePriority(Wt.EMPTY_NODE),this.reverse_){_=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();const A=this.index_.getCompare();h=(N,F)=>A(F,N)}else _=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let w=0,b=!1;for(;_.hasNext();){const A=_.getNext();!b&&h(a,A)<=0&&(b=!0),b&&w<this.limit_&&h(A,l)<=0?w++:i=i.updateImmediateChild(A.name,Wt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let l;if(this.reverse_){const A=this.index_.getCompare();l=(N,F)=>A(F,N)}else l=this.index_.getCompare();const h=e;(0,P.hu)(h.numChildren()===this.limit_,"");const _=new nn(t,r),w=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),b=this.rangedFilter_.matches(_);if(h.hasChild(t)){const A=h.getImmediateChild(t);let N=i.getChildAfterChild(this.index_,w,this.reverse_);for(;null!=N&&(N.name===t||h.hasChild(N.name));)N=i.getChildAfterChild(this.index_,N,this.reverse_);const F=null==N?1:l(N,_);if(b&&!r.isEmpty()&&F>=0)return a?.trackChildChange(RE(t,r,A)),h.updateImmediateChild(t,r);{a?.trackChildChange(ME(t,A));const oe=h.updateImmediateChild(t,Wt.EMPTY_NODE);return null!=N&&this.rangedFilter_.matches(N)?(a?.trackChildChange(Fy(N.name,N.node)),oe.updateImmediateChild(N.name,N.node)):oe}}return r.isEmpty()?e:b&&l(w,_)>=0?(null!=a&&(a.trackChildChange(ME(w.name,w.node)),a.trackChildChange(Fy(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(w.name,Wt.EMPTY_NODE)):e}}class yT{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=zn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:pd}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Pl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,P.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===zn}copy(){const e=new yT;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function nR(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function rR(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function vT(n,e){const t=n.copy();return t.index_=e,t}function LO(n){const e={};if(n.isDefault())return e;let t;return n.index_===zn?t="$priority":n.index_===JM?t="$value":n.index_===Ol?t="$key":((0,P.hu)(n.index_ instanceof XM,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,P.Wl)(t),n.startSet_&&(e.startAt=(0,P.Wl)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,P.Wl)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,P.Wl)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,P.Wl)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function VO(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==zn&&(e.i=n.index_.toString()),e}class wT extends yO{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=IE("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,P.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=wT.getListenId_(e,r),h={};this.listens_[l]=h;const _=LO(e._queryParams);this.restRequest_(a+".json",_,(w,b)=>{let A=b;if(404===w&&(A=null,w=null),null===w&&this.onDataUpdate_(a,A,!1,r),(0,P.DV)(this.listens_,l)===h){let N;N=w?401===w?"permission_denied":"rest_error:"+w:"ok",i(N,null)}})}unlisten(e,t){const r=wT.getListenId_(e,t);delete this.listens_[r]}get(e){const t=LO(e._queryParams),r=e._path.toString(),i=new P.BH;return this.restRequest_(r+".json",t,(a,l)=>{let h=l;404===a&&(h=null,a=null),null===a?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,P.xO)(t);this.log_("Sending REST request for "+l);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);let _=null;if(h.status>=200&&h.status<300){try{_=(0,P.cI)(h.responseText)}catch{gs("Failed to parse JSON response for "+l+": "+h.responseText)}r(null,_)}else 401!==h.status&&404!==h.status&&gs("Got unsuccessful REST response for "+l+" Status: "+h.status),r(h.status);r=null}},h.open("GET",l,!0),h.send()})}}class $2{constructor(){this.rootNode_=Wt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function ET(){return{value:null,children:new Map}}function Ly(n,e,t){if(Xt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Qt(e);n.children.has(r)||n.children.set(r,ET()),Ly(n.children.get(r),e=Un(e),t)}}function iR(n,e){if(Xt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(zn,(r,i)=>{Ly(n,new In(r),i)}),iR(n,e)}}if(n.children.size>0){const t=Qt(e);return e=Un(e),n.children.has(t)&&iR(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function sR(n,e,t){null!==n.value?t(e,n.value):function G2(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{sR(i,new In(e.toString()+"/"+r),t)})}class W2{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Oi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class K2{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new W2(e);const r=1e4+2e4*Math.random();bE(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Oi(e,(i,a)=>{a>0&&(0,P.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),bE(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ca=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ca||(Ca={})),Ca))();function uR(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class IT{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Ca.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Xt(this.path)){if(null!=this.affectedTree.value)return(0,P.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new In(e));return new IT(mn(),t,this.revert)}}return(0,P.hu)(Qt(this.path)===e,"operationForChild called for unrelated child."),new IT(Un(this.path),this.affectedTree,this.revert)}}class kE{constructor(e,t){this.source=e,this.path=t,this.type=Ca.LISTEN_COMPLETE}operationForChild(e){return Xt(this.path)?new kE(this.source,mn()):new kE(this.source,Un(this.path))}}class mm{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Ca.OVERWRITE}operationForChild(e){return Xt(this.path)?new mm(this.source,mn(),this.snap.getImmediateChild(e)):new mm(this.source,Un(this.path),this.snap)}}class Vy{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Ca.MERGE}operationForChild(e){if(Xt(this.path)){const t=this.children.subtree(new In(e));return t.isEmpty()?null:t.value?new mm(this.source,mn(),t.value):new Vy(this.source,mn(),t)}return(0,P.hu)(Qt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Vy(this.source,Un(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class vf{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Xt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Qt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Z2{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function PE(n,e,t,r,i,a){const l=r.filter(h=>h.type===t);l.sort((h,_)=>function X2(n,e,t){if(null==e.childName||null==t.childName)throw(0,P.g5)("Should only compare child_ events.");const r=new nn(e.childName,e.snapshotNode),i=new nn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,_)),l.forEach(h=>{const _=function Q2(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,a);i.forEach(w=>{w.respondsTo(h.type)&&e.push(w.createEvent(_,n.query_))})})}function CT(n,e){return{eventCache:n,serverCache:e}}function OE(n,e,t,r){return CT(new vf(e,t,r),n.serverCache)}function BO(n,e,t,r){return CT(n.eventCache,new vf(e,t,r))}function bT(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function _m(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let lR;class qn{constructor(e,t=(()=>(lR||(lR=new go(LB)),lR))()){this.value=e,this.children=t}static fromObject(e){let t=new qn(null);return Oi(e,(r,i)=>{t=t.set(new In(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:mn(),value:this.value};if(Xt(e))return null;{const r=Qt(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Un(e),t);return null!=a?{path:dr(new In(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Xt(e))return this;{const t=Qt(e),r=this.children.get(t);return null!==r?r.subtree(Un(e)):new qn(null)}}set(e,t){if(Xt(e))return new qn(t,this.children);{const r=Qt(e),a=(this.children.get(r)||new qn(null)).set(Un(e),t),l=this.children.insert(r,a);return new qn(this.value,l)}}remove(e){if(Xt(e))return this.children.isEmpty()?new qn(null):new qn(null,this.children);{const t=Qt(e),r=this.children.get(t);if(r){const i=r.remove(Un(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new qn(null):new qn(this.value,a)}return this}}get(e){if(Xt(e))return this.value;{const t=Qt(e),r=this.children.get(t);return r?r.get(Un(e)):null}}setTree(e,t){if(Xt(e))return t;{const r=Qt(e),a=(this.children.get(r)||new qn(null)).setTree(Un(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new qn(this.value,l)}}fold(e){return this.fold_(mn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(dr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,mn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Xt(e))return null;{const a=Qt(e),l=this.children.get(a);return l?l.findOnPath_(Un(e),dr(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,mn(),t)}foreachOnPath_(e,t,r){if(Xt(e))return this;{this.value&&r(t,this.value);const i=Qt(e),a=this.children.get(i);return a?a.foreachOnPath_(Un(e),dr(t,i),r):new qn(null)}}foreach(e){this.foreach_(mn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(dr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class bu{constructor(e){this.writeTree_=e}static empty(){return new bu(new qn(null))}}function FE(n,e,t){if(Xt(e))return new bu(new qn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=Gs(i,e);return a=a.updateChild(l,t),new bu(n.writeTree_.set(i,a))}{const i=new qn(t),a=n.writeTree_.setTree(e,i);return new bu(a)}}}function cR(n,e,t){let r=n;return Oi(t,(i,a)=>{r=FE(r,dr(e,i),a)}),r}function jO(n,e){if(Xt(e))return bu.empty();{const t=n.writeTree_.setTree(e,new qn(null));return new bu(t)}}function dR(n,e){return null!=ym(n,e)}function ym(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Gs(t.path,e)):null}function HO(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(zn,(r,i)=>{e.push(new nn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new nn(r,i.value))}),e}function wf(n,e){if(Xt(e))return n;{const t=ym(n,e);return new bu(null!=t?new qn(t):n.writeTree_.subtree(e))}}function hR(n){return n.writeTree_.isEmpty()}function Uy(n,e){return $O(mn(),n.writeTree_,e)}function $O(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,P.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=$O(dr(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(dr(n,".priority"),r)),t}}function DT(n,e){return KO(e,n)}function ij(n,e){if(n.snap)return Ia(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Ia(dr(n.path,t),e))return!0;return!1}function oj(n){return n.visible}function GO(n,e,t){let r=bu.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let h;if(a.snap)Ia(t,l)?(h=Gs(t,l),r=FE(r,h,a.snap)):Ia(l,t)&&(h=Gs(l,t),r=FE(r,mn(),a.snap.getChild(h)));else{if(!a.children)throw(0,P.g5)("WriteRecord should have .snap or .children");if(Ia(t,l))h=Gs(t,l),r=cR(r,h,a.children);else if(Ia(l,t))if(h=Gs(l,t),Xt(h))r=cR(r,mn(),a.children);else{const _=(0,P.DV)(a.children,Qt(h));if(_){const w=_.getChild(Un(h));r=FE(r,mn(),w)}}}}}return r}function WO(n,e,t,r,i){if(r||i){const a=wf(n.visibleWrites,e);return!i&&hR(a)?t:i||null!=t||dR(a,mn())?Uy(GO(n.allWrites,function(w){return(w.visible||i)&&(!r||!~r.indexOf(w.writeId))&&(Ia(w.path,e)||Ia(e,w.path))},e),t||Wt.EMPTY_NODE):null}{const a=ym(n.visibleWrites,e);if(null!=a)return a;{const l=wf(n.visibleWrites,e);return hR(l)?t:null!=t||dR(l,mn())?Uy(l,t||Wt.EMPTY_NODE):null}}}function TT(n,e,t,r){return WO(n.writeTree,n.treePath,e,t,r)}function fR(n,e){return function aj(n,e,t){let r=Wt.EMPTY_NODE;const i=ym(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(zn,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=wf(n.visibleWrites,e);return t.forEachChild(zn,(l,h)=>{const _=Uy(wf(a,new In(l)),h);r=r.updateImmediateChild(l,_)}),HO(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return HO(wf(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function zO(n,e,t,r){return function uj(n,e,t,r,i){(0,P.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=dr(e,t);if(dR(n.visibleWrites,a))return null;{const l=wf(n.visibleWrites,a);return hR(l)?i.getChild(t):Uy(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function ST(n,e){return function cj(n,e){return ym(n.visibleWrites,e)}(n.writeTree,dr(n.treePath,e))}function pR(n,e,t){return function lj(n,e,t,r){const i=dr(e,t),a=ym(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?Uy(wf(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function qO(n,e){return KO(dr(n.treePath,e),n.writeTree)}function KO(n,e){return{treePath:n,writeTree:e}}class pj{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,P.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,P.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,RE(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,ME(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,Fy(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,P.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,RE(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const ZO=new class gj{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class gR{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new vf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return pR(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:_m(this.viewCache_),a=function fj(n,e,t,r,i,a){return function dj(n,e,t,r,i,a,l){let h;const _=wf(n.visibleWrites,e),w=ym(_,mn());if(null!=w)h=w;else{if(null==t)return[];h=Uy(_,t)}if(h=h.withIndex(l),h.isEmpty()||h.isLeafNode())return[];{const b=[],A=l.getCompare(),N=a?h.getReverseIteratorFrom(r,l):h.getIteratorFrom(r,l);let F=N.getNext();for(;F&&b.length<i;)0!==A(F,r)&&b.push(F),F=N.getNext();return b}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function YO(n,e,t,r,i,a){const l=e.eventCache;if(null!=ST(r,t))return e;{let h,_;if(Xt(t))if((0,P.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const w=_m(e),A=fR(r,w instanceof Wt?w:Wt.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),A,a)}else{const w=TT(r,_m(e));h=n.filter.updateFullNode(e.eventCache.getNode(),w,a)}else{const w=Qt(t);if(".priority"===w){(0,P.hu)(1===yf(t),"Can't have a priority with additional path components");const b=l.getNode();_=e.serverCache.getNode();const A=zO(r,t,b,_);h=null!=A?n.filter.updatePriority(b,A):l.getNode()}else{const b=Un(t);let A;if(l.isCompleteForChild(w)){_=e.serverCache.getNode();const N=zO(r,t,l.getNode(),_);A=null!=N?l.getNode().getImmediateChild(w).updateChild(b,N):l.getNode().getImmediateChild(w)}else A=pR(r,w,e.serverCache);h=null!=A?n.filter.updateChild(l.getNode(),w,A,b,i,a):l.getNode()}}return OE(e,h,l.isFullyInitialized()||Xt(t),n.filter.filtersNodes())}}function AT(n,e,t,r,i,a,l,h){const _=e.serverCache;let w;const b=l?n.filter:n.filter.getIndexedFilter();if(Xt(t))w=b.updateFullNode(_.getNode(),r,null);else if(b.filtersNodes()&&!_.isFiltered()){const F=_.getNode().updateChild(t,r);w=b.updateFullNode(_.getNode(),F,null)}else{const F=Qt(t);if(!_.isCompleteForPath(t)&&yf(t)>1)return e;const B=Un(t),he=_.getNode().getImmediateChild(F).updateChild(B,r);w=".priority"===F?b.updatePriority(_.getNode(),he):b.updateChild(_.getNode(),F,he,B,ZO,null)}const A=BO(e,w,_.isFullyInitialized()||Xt(t),b.filtersNodes());return YO(n,A,t,i,new gR(i,A,a),h)}function mR(n,e,t,r,i,a,l){const h=e.eventCache;let _,w;const b=new gR(i,e,a);if(Xt(t))w=n.filter.updateFullNode(e.eventCache.getNode(),r,l),_=OE(e,w,!0,n.filter.filtersNodes());else{const A=Qt(t);if(".priority"===A)w=n.filter.updatePriority(e.eventCache.getNode(),r),_=OE(e,w,h.isFullyInitialized(),h.isFiltered());else{const N=Un(t),F=h.getNode().getImmediateChild(A);let B;if(Xt(N))B=r;else{const oe=b.getCompleteChild(A);B=null!=oe?".priority"===zM(N)&&oe.getChild(IO(N)).isEmpty()?oe:oe.updateChild(N,r):Wt.EMPTY_NODE}_=F.equals(B)?e:OE(e,n.filter.updateChild(h.getNode(),A,B,N,b,l),h.isFullyInitialized(),n.filter.filtersNodes())}}return _}function QO(n,e){return n.eventCache.isCompleteForChild(e)}function XO(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function _R(n,e,t,r,i,a,l,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let w,_=e;w=Xt(t)?r:new qn(null).setTree(t,r);const b=e.serverCache.getNode();return w.children.inorderTraversal((A,N)=>{if(b.hasChild(A)){const B=XO(0,e.serverCache.getNode().getImmediateChild(A),N);_=AT(n,_,new In(A),B,i,a,l,h)}}),w.children.inorderTraversal((A,N)=>{const F=!e.serverCache.isCompleteForChild(A)&&null===N.value;if(!b.hasChild(A)&&!F){const oe=XO(0,e.serverCache.getNode().getImmediateChild(A),N);_=AT(n,_,new In(A),oe,i,a,l,h)}}),_}class bj{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new tR(r.getIndex()),a=function V2(n){return n.loadsAllData()?new tR(n.getIndex()):n.hasLimit()?new L2(n):new NE(n)}(r);this.processor_=function mj(n){return{filter:n}}(a);const l=t.serverCache,h=t.eventCache,_=i.updateFullNode(Wt.EMPTY_NODE,l.getNode(),null),w=a.updateFullNode(Wt.EMPTY_NODE,h.getNode(),null),b=new vf(_,l.isFullyInitialized(),i.filtersNodes()),A=new vf(w,h.isFullyInitialized(),a.filtersNodes());this.viewCache_=CT(A,b),this.eventGenerator_=new Z2(this.query_)}get query(){return this.query_}}function Sj(n,e){const t=_m(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Xt(e)&&!t.getImmediateChild(Qt(e)).isEmpty())?t.getChild(e):null}function JO(n){return 0===n.eventRegistrations_.length}function e1(n,e,t){const r=[];if(t){(0,P.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function t1(n,e,t,r){e.type===Ca.MERGE&&null!==e.source.queryId&&((0,P.hu)(_m(n.viewCache_),"We should always have a full cache before handling merges"),(0,P.hu)(bT(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function yj(n,e,t,r,i){const a=new pj;let l,h;if(t.type===Ca.OVERWRITE){const w=t;w.source.fromUser?l=mR(n,e,w.path,w.snap,r,i,a):((0,P.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered()&&!Xt(w.path),l=AT(n,e,w.path,w.snap,r,i,h,a))}else if(t.type===Ca.MERGE){const w=t;w.source.fromUser?l=function wj(n,e,t,r,i,a,l){let h=e;return r.foreach((_,w)=>{const b=dr(t,_);QO(e,Qt(b))&&(h=mR(n,h,b,w,i,a,l))}),r.foreach((_,w)=>{const b=dr(t,_);QO(e,Qt(b))||(h=mR(n,h,b,w,i,a,l))}),h}(n,e,w.path,w.children,r,i,a):((0,P.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered(),l=_R(n,e,w.path,w.children,r,i,h,a))}else if(t.type===Ca.ACK_USER_WRITE){const w=t;l=w.revert?function Cj(n,e,t,r,i,a){let l;if(null!=ST(r,t))return e;{const h=new gR(r,e,i),_=e.eventCache.getNode();let w;if(Xt(t)||".priority"===Qt(t)){let b;if(e.serverCache.isFullyInitialized())b=TT(r,_m(e));else{const A=e.serverCache.getNode();(0,P.hu)(A instanceof Wt,"serverChildren would be complete if leaf node"),b=fR(r,A)}w=n.filter.updateFullNode(_,b,a)}else{const b=Qt(t);let A=pR(r,b,e.serverCache);null==A&&e.serverCache.isCompleteForChild(b)&&(A=_.getImmediateChild(b)),w=null!=A?n.filter.updateChild(_,b,A,Un(t),h,a):e.eventCache.getNode().hasChild(b)?n.filter.updateChild(_,b,Wt.EMPTY_NODE,Un(t),h,a):_,w.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=TT(r,_m(e)),l.isLeafNode()&&(w=n.filter.updateFullNode(w,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=ST(r,mn()),OE(e,w,l,n.filter.filtersNodes())}}(n,e,w.path,r,i,a):function Ej(n,e,t,r,i,a,l){if(null!=ST(i,t))return e;const h=e.serverCache.isFiltered(),_=e.serverCache;if(null!=r.value){if(Xt(t)&&_.isFullyInitialized()||_.isCompleteForPath(t))return AT(n,e,t,_.getNode().getChild(t),i,a,h,l);if(Xt(t)){let w=new qn(null);return _.getNode().forEachChild(Ol,(b,A)=>{w=w.set(new In(b),A)}),_R(n,e,t,w,i,a,h,l)}return e}{let w=new qn(null);return r.foreach((b,A)=>{const N=dr(t,b);_.isCompleteForPath(N)&&(w=w.set(b,_.getNode().getChild(N)))}),_R(n,e,t,w,i,a,h,l)}}(n,e,w.path,w.affectedTree,r,i,a)}else{if(t.type!==Ca.LISTEN_COMPLETE)throw(0,P.g5)("Unknown operation type: "+t.type);l=function Ij(n,e,t,r,i){const a=e.serverCache;return YO(n,BO(e,a.getNode(),a.isFullyInitialized()||Xt(t),a.isFiltered()),t,r,ZO,i)}(n,e,t.path,r,a)}const _=a.getChanges();return function vj(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=bT(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(FO(bT(e)))}}(e,l,_),{viewCache:l,changes:_}}(n.processor_,i,e,t,r);return function _j(n,e){(0,P.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,P.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,P.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,n1(n,a.changes,a.viewCache.eventCache.getNode(),null)}function n1(n,e,t,r){return function Y2(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function F2(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),PE(n,i,"child_removed",e,r,t),PE(n,i,"child_added",e,r,t),PE(n,i,"child_moved",a,r,t),PE(n,i,"child_changed",e,r,t),PE(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let xT,RT;class r1{constructor(){this.views=new Map}}function yR(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,P.hu)(null!=a,"SyncTree gave us an op for an invalid query."),t1(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(t1(l,e,t,r));return a}}function i1(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let h=TT(t,i?r:null),_=!1;h?_=!0:r instanceof Wt?(h=fR(t,r),_=!1):(h=Wt.EMPTY_NODE,_=!1);const w=CT(new vf(h,_,!1),new vf(r,i,!1));return new bj(e,w)}return l}function s1(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Ef(n,e){let t=null;for(const r of n.views.values())t=t||Sj(r,e);return t}function o1(n,e){return e._queryParams.loadsAllData()?MT(n):n.views.get(e._queryIdentifier)}function a1(n,e){return null!=o1(n,e)}function If(n){return null!=MT(n)}function MT(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let Lj=1;class u1{constructor(e){this.listenProvider_=e,this.syncPointTree_=new qn(null),this.pendingWriteTree_=function hj(){return{visibleWrites:bu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function vR(n,e,t,r,i){return function ej(n,e,t,r,i){(0,P.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=FE(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?By(n,new mm({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Cf(n,e,t=!1){const r=function nj(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function rj(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,P.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const h=n.allWrites[l];h.visible&&(l>=t&&ij(h,r.path)?i=!1:Ia(r.path,h.path)&&(a=!0)),l--}return!!i&&(a?(function sj(n){n.visibleWrites=GO(n.allWrites,oj,mn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=jO(n.visibleWrites,r.path):Oi(r.children,_=>{n.visibleWrites=jO(n.visibleWrites,dr(r.path,_))}),!0))}(n.pendingWriteTree_,e)){let a=new qn(null);return null!=r.snap?a=a.set(mn(),!0):Oi(r.children,l=>{a=a.set(new In(l),!0)}),By(n,new IT(r.path,a,t))}return[]}function LE(n,e,t){return By(n,new mm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function NT(n,e,t,r,i=!1){const a=e._path,l=n.syncPointTree_.get(a);let h=[];if(l&&("default"===e._queryIdentifier||a1(l,e))){const _=function Pj(n,e,t,r){const i=e._queryIdentifier,a=[];let l=[];const h=If(n);if("default"===i)for(const[_,w]of n.views.entries())l=l.concat(e1(w,t,r)),JO(w)&&(n.views.delete(_),w.query._queryParams.loadsAllData()||a.push(w.query));else{const _=n.views.get(i);_&&(l=l.concat(e1(_,t,r)),JO(_)&&(n.views.delete(i),_.query._queryParams.loadsAllData()||a.push(_.query)))}return h&&!If(n)&&a.push(new(function Rj(){return(0,P.hu)(xT,"Reference.ts has not been loaded"),xT}())(e._repo,e._path)),{removed:a,events:l}}(l,e,t,r);(function Nj(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const w=_.removed;if(h=_.events,!i){const b=-1!==w.findIndex(N=>N._queryParams.loadsAllData()),A=n.syncPointTree_.findOnPath(a,(N,F)=>If(F));if(b&&!A){const N=n.syncPointTree_.subtree(a);if(!N.isEmpty()){const F=function Gj(n){return n.fold((e,t,r)=>{if(t&&If(t))return[MT(t)];{let i=[];return t&&(i=s1(t)),Oi(r,(a,l)=>{i=i.concat(l)}),i}})}(N);for(let B=0;B<F.length;++B){const oe=F[B],he=oe.query,We=h1(n,oe);n.listenProvider_.startListening(UE(he),VE(n,he),We.hashFn,We.onComplete)}}}!A&&w.length>0&&!r&&(b?n.listenProvider_.stopListening(UE(e),null):w.forEach(N=>{const F=n.queryToTagMap.get(PT(N));n.listenProvider_.stopListening(UE(N),F)}))}!function Wj(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=PT(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,w)}return h}function l1(n,e,t,r){const i=ER(n,r);if(null!=i){const a=IR(i),l=a.path,h=a.queryId,_=Gs(l,e);return CR(n,l,new mm(uR(h),_,t))}return[]}function wR(n,e,t,r=!1){const i=e._path;let a=null,l=!1;n.syncPointTree_.foreachOnPath(i,(N,F)=>{const B=Gs(N,i);a=a||Ef(F,B),l=l||If(F)});let _,h=n.syncPointTree_.get(i);h?(l=l||If(h),a=a||Ef(h,mn())):(h=new r1,n.syncPointTree_=n.syncPointTree_.set(i,h)),null!=a?_=!0:(_=!1,a=Wt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((F,B)=>{const oe=Ef(B,mn());oe&&(a=a.updateImmediateChild(F,oe))}));const w=a1(h,e);if(!w&&!e._queryParams.loadsAllData()){const N=PT(e);(0,P.hu)(!n.queryToTagMap.has(N),"View does not exist, but we have a tag");const F=function zj(){return Lj++}();n.queryToTagMap.set(N,F),n.tagToQueryMap.set(F,N)}let A=function kj(n,e,t,r,i,a){const l=i1(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function Aj(n,e){n.eventRegistrations_.push(e)}(l,t),function xj(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(zn,(a,l)=>{r.push(Fy(a,l))}),t.isFullyInitialized()&&r.push(FO(t.getNode())),n1(n,r,t.getNode(),e)}(l,t)}(h,e,t,DT(n.pendingWriteTree_,i),a,_);if(!w&&!l&&!r){const N=o1(h,e);A=A.concat(function qj(n,e,t){const r=e._path,i=VE(n,e),a=h1(n,t),l=n.listenProvider_.startListening(UE(e),i,a.hashFn,a.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,P.hu)(!If(h.value),"If we're adding a query, it shouldn't be shadowed");else{const _=h.fold((w,b,A)=>{if(!Xt(w)&&b&&If(b))return[MT(b).query];{let N=[];return b&&(N=N.concat(s1(b).map(F=>F.query))),Oi(A,(F,B)=>{N=N.concat(B)}),N}});for(let w=0;w<_.length;++w){const b=_[w];n.listenProvider_.stopListening(UE(b),VE(n,b))}}return l}(n,e,N))}return A}function kT(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,h)=>{const w=Ef(h,Gs(l,e));if(w)return w});return WO(i,e,a,t,!0)}function By(n,e){return c1(e,n.syncPointTree_,null,DT(n.pendingWriteTree_,mn()))}function c1(n,e,t,r){if(Xt(n.path))return d1(n,e,t,r);{const i=e.get(mn());null==t&&null!=i&&(t=Ef(i,mn()));let a=[];const l=Qt(n.path),h=n.operationForChild(l),_=e.children.get(l);if(_&&h){const w=t?t.getImmediateChild(l):null,b=qO(r,l);a=a.concat(c1(h,_,w,b))}return i&&(a=a.concat(yR(i,n,r,t))),a}}function d1(n,e,t,r){const i=e.get(mn());null==t&&null!=i&&(t=Ef(i,mn()));let a=[];return e.children.inorderTraversal((l,h)=>{const _=t?t.getImmediateChild(l):null,w=qO(r,l),b=n.operationForChild(l);b&&(a=a.concat(d1(b,h,_,w)))}),i&&(a=a.concat(yR(i,n,r,t))),a}function h1(n,e){const t=e.query,r=VE(n,t);return{hashFn:()=>(function Dj(n){return n.viewCache_.serverCache.getNode()}(e)||Wt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function jj(n,e,t){const r=ER(n,t);if(r){const i=IR(r),a=i.path,l=i.queryId,h=Gs(a,e);return CR(n,a,new kE(uR(l),h))}return[]}(n,t._path,r):function Bj(n,e){return By(n,new kE({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function BB(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return NT(n,t,null,a)}}}}function VE(n,e){const t=PT(e);return n.queryToTagMap.get(t)}function PT(n){return n._path.toString()+"$"+n._queryIdentifier}function ER(n,e){return n.tagToQueryMap.get(e)}function IR(n){const e=n.indexOf("$");return(0,P.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new In(n.substr(0,e))}}function CR(n,e,t){const r=n.syncPointTree_.get(e);return(0,P.hu)(r,"Missing sync point for query tag that we're tracking"),yR(r,t,DT(n.pendingWriteTree_,e),null)}function UE(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function Fj(){return(0,P.hu)(RT,"Reference.ts has not been loaded"),RT}())(n._repo,n._path):n}class bR{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new bR(t)}node(){return this.node_}}class DR{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=dr(this.path_,e);return new DR(this.syncTree_,t)}node(){return kT(this.syncTree_,this.path_)}}const f1=function(n,e,t){return n&&"object"==typeof n?((0,P.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Zj(n[".sv"],e,t):"object"==typeof n[".sv"]?Yj(n[".sv"],e):void(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Zj=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,P.hu)(!1,"Unexpected server value: "+n)},Yj=function(n,e,t){n.hasOwnProperty("increment")||(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,P.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,P.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},p1=function(n,e,t,r){return SR(e,new DR(t,n),r)},TR=function(n,e,t){return SR(n,new bR(e),t)};function SR(n,e,t){const r=n.getPriority().val(),i=f1(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,h=f1(l.getValue(),e,t);return h!==l.getValue()||i!==l.getPriority().val()?new ky(h,_r(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new ky(i))),l.forEachChild(zn,(h,_)=>{const w=SR(_,e.getImmediateChild(h),t);w!==_&&(a=a.updateImmediateChild(h,w))}),a}}class AR{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function OT(n,e){let t=e instanceof In?e:new In(e),r=n,i=Qt(t);for(;null!==i;){const a=(0,P.DV)(r.node.children,i)||{children:{},childCount:0};r=new AR(i,r,a),t=Un(t),i=Qt(t)}return r}function vm(n){return n.node.value}function xR(n,e){n.node.value=e,MR(n)}function g1(n){return n.node.childCount>0}function FT(n,e){Oi(n.node.children,(t,r)=>{e(new AR(t,n,r))})}function m1(n,e,t,r){t&&!r&&e(n),FT(n,i=>{m1(i,e,!0,r)}),t&&r&&e(n)}function BE(n){return new In(null===n.parent?n.name:BE(n.parent)+"/"+n.name)}function MR(n){null!==n.parent&&function Jj(n,e,t){const r=function Qj(n){return void 0===vm(n)&&!g1(n)}(t),i=(0,P.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,MR(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,MR(n))}(n.parent,n.name,n)}const eH=/[\[\].#$\/\u0000-\u001F\u007F]/,tH=/[\[\].#$\u0000-\u001F\u007F]/,RR=10485760,LT=function(n){return"string"==typeof n&&0!==n.length&&!eH.test(n)},_1=function(n){return"string"==typeof n&&0!==n.length&&!tH.test(n)},jE=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!lT(n)||n&&"object"==typeof n&&(0,P.r3)(n,".sv")},Fl=function(n,e,t,r){r&&void 0===e||HE((0,P.gK)(n,"value"),e,t)},HE=function(n,e,t){const r=t instanceof In?new _2(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+pm(r));if("function"==typeof e)throw new Error(n+"contains a function "+pm(r)+" with contents = "+e.toString());if(lT(e))throw new Error(n+"contains "+e.toString()+" "+pm(r));if("string"==typeof e&&e.length>RR/3&&(0,P.ug)(e)>RR)throw new Error(n+"contains a string greater than "+RR+" utf8 bytes "+pm(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Oi(e,(l,h)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!LT(l)))throw new Error(n+" contains an invalid key ("+l+") "+pm(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function y2(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,P.ug)(e),CO(n)})(r,l),HE(n,h,r),function v2(n){const e=n.parts_.pop();n.byteLength_-=(0,P.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+pm(r)+" in addition to actual children.")}},y1=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,P.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Oi(e,(l,h)=>{const _=new In(l);if(HE(i,h,dr(t,_)),".priority"===zM(_)&&!jE(h))throw new Error(i+"contains an invalid value for '"+_.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(_)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=TE(r);for(let l=0;l<a.length;l++)if((".priority"!==a[l]||l!==a.length-1)&&!LT(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(m2);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Ia(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},NR=function(n,e,t){if(!t||void 0!==e){if(lT(e))throw new Error((0,P.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!jE(e))throw new Error((0,P.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},$E=function(n,e,t,r){if(!(r&&void 0===t||LT(t)))throw new Error((0,P.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},GE=function(n,e,t,r){if(!(r&&void 0===t||_1(t)))throw new Error((0,P.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ba=function(n,e){if(".info"===Qt(e))throw new Error(n+" failed = Can't modify data under /.info/")},v1=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!LT(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),_1(n)}(t))throw new Error((0,P.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class sH{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function VT(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!qM(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function w1(n,e,t){VT(n,t),E1(n,r=>qM(r,e))}function $o(n,e,t){VT(n,t),E1(n,r=>Ia(r,e)||Ia(e,r))}function E1(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(oH(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function oH(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();hm&&Pi("event: "+t.toString()),Ry(r)}}}const I1="repo_interrupt";class uH{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new sH,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ET(),this.transactionQueueTree_=new AR,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function C1(n){const t=n.infoData_.getNode(new In(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function WE(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:C1(n)})}function b1(n,e,t,r,i){n.dataUpdateCount++;const a=new In(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const _=(0,P.UI)(t,w=>_r(w));l=function Hj(n,e,t,r){const i=ER(n,r);if(i){const a=IR(i),l=a.path,h=a.queryId,_=Gs(l,e),w=qn.fromObject(t);return CR(n,l,new Vy(uR(h),_,w))}return[]}(n.serverSyncTree_,a,_,i)}else{const _=_r(t);l=l1(n.serverSyncTree_,a,_,i)}else if(r){const _=(0,P.UI)(t,w=>_r(w));l=function Uj(n,e,t){const r=qn.fromObject(t);return By(n,new Vy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,_)}else{const _=_r(t);l=LE(n.serverSyncTree_,a,_)}let h=a;l.length>0&&(h=Hy(n,a)),$o(n.eventQueue_,h,l)}function D1(n,e){kR(n,"connected",e),!1===e&&function fH(n){jy(n,"onDisconnectEvents");const e=WE(n),t=ET();sR(n.onDisconnect_,mn(),(i,a)=>{const l=p1(i,a,n.serverSyncTree_,e);Ly(t,i,l)});let r=[];sR(t,mn(),(i,a)=>{r=r.concat(LE(n.serverSyncTree_,i,a));const l=LR(n,i);Hy(n,l)}),n.onDisconnect_=ET(),$o(n.eventQueue_,mn(),r)}(n)}function kR(n,e,t){const r=new In("/.info/"+e),i=_r(t);n.infoData_.updateSnapshot(r,i);const a=LE(n.infoSyncTree_,r,i);$o(n.eventQueue_,r,a)}function UT(n){return n.nextWriteId_++}function PR(n,e,t,r,i){jy(n,"set",{path:e.toString(),value:t,priority:r});const a=WE(n),l=_r(t,r),h=kT(n.serverSyncTree_,e),_=TR(l,h,a),w=UT(n),b=vR(n.serverSyncTree_,e,_,w,!0);VT(n.eventQueue_,b),n.server_.put(e.toString(),l.val(!0),(N,F)=>{const B="ok"===N;B||gs("set at "+e+" failed: "+N);const oe=Cf(n.serverSyncTree_,w,!B);$o(n.eventQueue_,e,oe),bf(0,i,N,F)});const A=LR(n,e);Hy(n,A),$o(n.eventQueue_,A,[])}function pH(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&iR(n.onDisconnect_,e),bf(0,t,r,i)})}function T1(n,e,t,r){const i=_r(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,l)=>{"ok"===a&&Ly(n.onDisconnect_,e,i),bf(0,r,a,l)})}function OR(n,e,t){let r;r=".info"===Qt(e._path)?NT(n.infoSyncTree_,e,t):NT(n.serverSyncTree_,e,t),w1(n.eventQueue_,e._path,r)}function S1(n){n.persistentConnection_&&n.persistentConnection_.interrupt(I1)}function jy(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Pi(t,...e)}function bf(n,e,t,r){e&&Ry(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const l=new Error(a);l.code=i,e(l)}})}function FR(n,e,t){return kT(n.serverSyncTree_,e,t)||Wt.EMPTY_NODE}function BT(n,e=n.transactionQueueTree_){if(e||jT(n,e),vm(e)){const t=x1(n,e);(0,P.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function wH(n,e,t){const r=t.map(w=>w.currentWriteId),i=FR(n,e,r);let a=i;const l=i.hash();for(let w=0;w<t.length;w++){const b=t[w];(0,P.hu)(0===b.status,"tryToSendTransactionQueue_: items in queue should all be run."),b.status=1,b.retryCount++;const A=Gs(e,b.path);a=a.updateChild(A,b.currentOutputSnapshotRaw)}const h=a.val(!0),_=e;n.server_.put(_.toString(),h,w=>{jy(n,"transaction put response",{path:_.toString(),status:w});let b=[];if("ok"===w){const A=[];for(let N=0;N<t.length;N++)t[N].status=2,b=b.concat(Cf(n.serverSyncTree_,t[N].currentWriteId)),t[N].onComplete&&A.push(()=>t[N].onComplete(null,!0,t[N].currentOutputSnapshotResolved)),t[N].unwatcher();jT(n,OT(n.transactionQueueTree_,e)),BT(n,n.transactionQueueTree_),$o(n.eventQueue_,e,b);for(let N=0;N<A.length;N++)Ry(A[N])}else{if("datastale"===w)for(let A=0;A<t.length;A++)t[A].status=3===t[A].status?4:0;else{gs("transaction at "+_.toString()+" failed: "+w);for(let A=0;A<t.length;A++)t[A].status=4,t[A].abortReason=w}Hy(n,e)}},l)}(n,BE(e),t)}else g1(e)&&FT(e,t=>{BT(n,t)})}function Hy(n,e){const t=A1(n,e),r=BE(t);return function EH(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const _=e[h],w=Gs(t,_.path);let A,b=!1;if((0,P.hu)(null!==w,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_.status)b=!0,A=_.abortReason,i=i.concat(Cf(n.serverSyncTree_,_.currentWriteId,!0));else if(0===_.status)if(_.retryCount>=25)b=!0,A="maxretry",i=i.concat(Cf(n.serverSyncTree_,_.currentWriteId,!0));else{const N=FR(n,_.path,l);_.currentInputSnapshot=N;const F=e[h].update(N.val());if(void 0!==F){HE("transaction failed: Data returned ",F,_.path);let B=_r(F);"object"==typeof F&&null!=F&&(0,P.r3)(F,".priority")||(B=B.updatePriority(N.getPriority()));const he=_.currentWriteId,We=WE(n),ot=TR(B,N,We);_.currentOutputSnapshotRaw=B,_.currentOutputSnapshotResolved=ot,_.currentWriteId=UT(n),l.splice(l.indexOf(he),1),i=i.concat(vR(n.serverSyncTree_,_.path,ot,_.currentWriteId,_.applyLocally)),i=i.concat(Cf(n.serverSyncTree_,he,!0))}else b=!0,A="nodata",i=i.concat(Cf(n.serverSyncTree_,_.currentWriteId,!0))}$o(n.eventQueue_,t,i),i=[],b&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===A?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(A),!1,null)))}jT(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)Ry(r[h]);BT(n,n.transactionQueueTree_)}(n,x1(n,t),r),r}function A1(n,e){let t,r=n.transactionQueueTree_;for(t=Qt(e);null!==t&&void 0===vm(r);)r=OT(r,t),t=Qt(e=Un(e));return r}function x1(n,e){const t=[];return M1(n,e,t),t.sort((r,i)=>r.order-i.order),t}function M1(n,e,t){const r=vm(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);FT(e,i=>{M1(n,i,t)})}function jT(n,e){const t=vm(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,xR(e,t.length>0?t:void 0)}FT(e,r=>{jT(n,r)})}function LR(n,e){const t=BE(A1(n,e)),r=OT(n.transactionQueueTree_,e);return function Xj(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{VR(n,i)}),VR(n,r),m1(r,i=>{VR(n,i)}),t}function VR(n,e){const t=vm(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,P.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,P.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(Cf(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?xR(e,void 0):t.length=a+1,$o(n.eventQueue_,BE(e),i);for(let l=0;l<r.length;l++)Ry(r[l])}}const UR=function(n,e){const t=bH(n),r=t.namespace;return"firebase.com"===t.domain&&kl(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&kl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&gs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new BM(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new In(t.pathString)}},bH=function(n){let e="",t="",r="",i="",a="",l=!0,h="https",_=443;if("string"==typeof n){let w=n.indexOf("//");w>=0&&(h=n.substring(0,w-1),n=n.substring(w+2));let b=n.indexOf("/");-1===b&&(b=n.length);let A=n.indexOf("?");-1===A&&(A=n.length),e=n.substring(0,Math.min(b,A)),b<A&&(i=function IH(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(b,A)));const N=function CH(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):gs(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,A)));w=e.indexOf(":"),w>=0?(l="https"===h||"wss"===h,_=parseInt(e.substring(w+1),10)):w=e.length;const F=e.slice(0,w);if("localhost"===F.toLowerCase())t="localhost";else if(F.split(".").length<=2)t=F;else{const B=e.indexOf(".");r=e.substring(0,B).toLowerCase(),t=e.substring(B+1),a=r}"ns"in N&&(a=N.ns)}return{host:e,port:_,domain:t,subdomain:r,secure:l,scheme:h,pathString:i,namespace:a}};class R1{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,P.Wl)(this.snapshot.exportVal())}}class N1{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class BR{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,P.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class k1{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new P.BH;return pH(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){ba("OnDisconnect.remove",this._path);const e=new P.BH;return T1(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){ba("OnDisconnect.set",this._path),Fl("OnDisconnect.set",e,this._path,!1);const t=new P.BH;return T1(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){ba("OnDisconnect.setWithPriority",this._path),Fl("OnDisconnect.setWithPriority",e,this._path,!1),NR("OnDisconnect.setWithPriority",t,!1);const r=new P.BH;return function gH(n,e,t,r,i){const a=_r(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(l,h)=>{"ok"===l&&Ly(n.onDisconnect_,e,a),bf(0,i,l,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){ba("OnDisconnect.update",this._path),y1("OnDisconnect.update",e,this._path,!1);const t=new P.BH;return function mH(n,e,t,r){if((0,P.xb)(t))return Pi("onDisconnect().update() called with empty data.  Don't do anything."),void bf(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Oi(t,(l,h)=>{const _=_r(h);Ly(n.onDisconnect_,dr(e,l),_)}),bf(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class mo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Xt(this._path)?null:zM(this._path)}get ref(){return new Da(this._repo,this._path)}get _queryIdentifier(){const e=VO(this._queryParams),t=LM(e);return"{}"===t?"default":t}get _queryObject(){return VO(this._queryParams)}isEqual(e){if(!((e=(0,P.m9)(e))instanceof mo))return!1;const t=this._repo===e._repo,r=qM(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function g2(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function HT(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Df(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Ol){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==pd)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Pl)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===zn){if(null!=e&&!jE(e)||null!=t&&!jE(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,P.hu)(n.getIndex()instanceof XM||n.getIndex()===JM,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function $T(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Da extends mo{constructor(e,t){super(e,t,new yT,!1)}get parent(){const e=IO(this._path);return null===e?null:new Da(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class wm{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new In(e),r=Em(this.ref,e);return new wm(this._node.getChild(t),r,zn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new wm(i,Em(this.ref,r),zn)))}hasChild(e){const t=new In(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function P1(n,e){return(n=(0,P.m9)(n))._checkNotDeleted("ref"),void 0!==e?Em(n._root,e):n._root}function O1(n,e){(n=(0,P.m9)(n))._checkNotDeleted("refFromURL");const t=UR(e,n._repo.repoInfo_.nodeAdmin);v1("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&kl("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),P1(n,t.path.toString())}function Em(n,e){return null===Qt((n=(0,P.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),GE("child","path",t,!1)):GE("child","path",e,!1),new Da(n._repo,dr(n._path,e));var t}function jR(n,e){n=(0,P.m9)(n),ba("set",n._path),Fl("set",e,n._path,!1);const t=new P.BH;return PR(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function xH(n,e){y1("update",e,n._path,!1);const t=new P.BH;return function hH(n,e,t,r){jy(n,"update",{path:e.toString(),value:t});let i=!0;const a=WE(n),l={};if(Oi(t,(h,_)=>{i=!1,l[h]=p1(dr(e,h),_r(_),n.serverSyncTree_,a)}),i)Pi("update() called with empty data.  Don't do anything."),bf(0,r,"ok",void 0);else{const h=UT(n),_=function Vj(n,e,t,r){!function tj(n,e,t,r){(0,P.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=cR(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=qn.fromObject(t);return By(n,new Vy({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,h);VT(n.eventQueue_,_),n.server_.merge(e.toString(),t,(w,b)=>{const A="ok"===w;A||gs("update at "+e+" failed: "+w);const N=Cf(n.serverSyncTree_,h,!A),F=N.length>0?Hy(n,e):e;$o(n.eventQueue_,F,N),bf(0,r,w,b)}),Oi(t,w=>{const b=LR(n,dr(e,w));Hy(n,b)}),$o(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function MH(n){n=(0,P.m9)(n);const e=new BR(()=>{}),t=new zE(e);return function dH(n,e,t){const r=function $j(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(w,b)=>{const A=Gs(w,t);r=r||Ef(b,A)});let i=n.syncPointTree_.get(t);i?r=r||Ef(i,mn()):(i=new r1,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,l=a?new vf(r,!0,!1):null;return function Tj(n){return bT(n.viewCache_)}(i1(i,e,DT(n.pendingWriteTree_,e._path),a?l.getNode():Wt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const a=_r(i).withIndex(e._queryParams.getIndex());let l;if(wR(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())l=LE(n.serverSyncTree_,e._path,a);else{const h=VE(n.serverSyncTree_,e);l=l1(n.serverSyncTree_,e._path,a,h)}return $o(n.eventQueue_,e._path,l),NT(n.serverSyncTree_,e,t,null,!0),a},i=>(jy(n,"get for query "+(0,P.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new wm(r,new Da(n._repo,n._path),n._queryParams.getIndex()))}class zE{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new R1("value",this,new wm(e.snapshotNode,new Da(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new N1(this,e,t):null}matches(e){return e instanceof zE&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class GT{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new N1(this,e,t):null}createEvent(e,t){(0,P.hu)(null!=e.childName,"Child events should have a childName.");const r=Em(new Da(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new R1(e.type,this,new wm(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof GT&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function qE(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const _=t,w=(b,A)=>{OR(n._repo,n,h),_(b,A)};w.userCallback=t.userCallback,w.context=t.context,t=w}const l=new BR(t,a||void 0),h="value"===e?new zE(l):new GT(e,l);return function _H(n,e,t){let r;r=".info"===Qt(e._path)?wR(n.infoSyncTree_,e,t):wR(n.serverSyncTree_,e,t),w1(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>OR(n._repo,n,h)}function HR(n,e,t,r){return qE(n,"value",e,t,r)}function F1(n,e,t,r){return qE(n,"child_added",e,t,r)}function L1(n,e,t,r){return qE(n,"child_changed",e,t,r)}function V1(n,e,t,r){return qE(n,"child_moved",e,t,r)}function U1(n,e,t,r){return qE(n,"child_removed",e,t,r)}function B1(n,e,t){let r=null;const i=t?new BR(t):null;"value"===e?r=new zE(i):e&&(r=new GT(e,i)),OR(n._repo,n,r)}class Du{}class j1 extends Du{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Fl("endAt",this._value,e._path,!0);const t=rR(e._queryParams,this._value,this._key);if($T(t),Df(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new mo(e._repo,e._path,t,e._orderByCalled)}}class NH extends Du{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Fl("endBefore",this._value,e._path,!1);const t=function H2(n,e,t){let r,i;return n.index_===Ol?("string"==typeof e&&(e=OO(e)),i=rR(n,e,t)):(r=null==t?pd:OO(t),i=rR(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if($T(t),Df(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new mo(e._repo,e._path,t,e._orderByCalled)}}class H1 extends Du{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Fl("startAt",this._value,e._path,!0);const t=nR(e._queryParams,this._value,this._key);if($T(t),Df(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new mo(e._repo,e._path,t,e._orderByCalled)}}class OH extends Du{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Fl("startAfter",this._value,e._path,!1);const t=function j2(n,e,t){let r;if(n.index_===Ol)"string"==typeof e&&(e=PO(e)),r=nR(n,e,t);else{let i;i=null==t?Pl:PO(t),r=nR(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if($T(t),Df(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new mo(e._repo,e._path,t,e._orderByCalled)}}class LH extends Du{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new mo(e._repo,e._path,function U2(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class UH extends Du{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new mo(e._repo,e._path,function B2(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class jH extends Du{constructor(e){super(),this._path=e}_apply(e){HT(e,"orderByChild");const t=new In(this._path);if(Xt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new XM(t),i=vT(e._queryParams,r);return Df(i),new mo(e._repo,e._path,i,!0)}}class $H extends Du{_apply(e){HT(e,"orderByKey");const t=vT(e._queryParams,Ol);return Df(t),new mo(e._repo,e._path,t,!0)}}class WH extends Du{_apply(e){HT(e,"orderByPriority");const t=vT(e._queryParams,zn);return Df(t),new mo(e._repo,e._path,t,!0)}}class qH extends Du{_apply(e){HT(e,"orderByValue");const t=vT(e._queryParams,JM);return Df(t),new mo(e._repo,e._path,t,!0)}}class ZH extends Du{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Fl("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new j1(this._value,this._key)._apply(new H1(this._value,this._key)._apply(e))}}function Tu(n,...e){let t=(0,P.m9)(n);for(const r of e)t=r._apply(t);return t}(function Mj(n){(0,P.hu)(!xT,"__referenceConstructor has already been defined"),xT=n})(Da),function Oj(n){(0,P.hu)(!RT,"__referenceConstructor has already been defined"),RT=n}(Da);const $R={};function G1(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||kl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Pi("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let _,w,l=UR(a,i),h=l.repoInfo;typeof process<"u"&&process.env&&(w=process.env.FIREBASE_DATABASE_EMULATOR_HOST),w?(_=!0,a=`http://${w}?ns=${h.namespace}`,l=UR(a,i),h=l.repoInfo):_=!l.repoInfo.secure;const b=i&&_?new DE(DE.OWNER):new GB(n.name,n.options,e);v1("Invalid Firebase Database URL",l),Xt(l.path)||kl("Database URL must point to the root of a Firebase Database (not including a child path).");const A=function e$(n,e,t,r){let i=$R[e.name];i||(i={},$R[e.name]=i);let a=i[n.toURLString()];return a&&kl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new uH(n,false,t,r),i[n.toURLString()]=a,a}(h,n,b,new $B(n.name,t));return new n$(A,n)}class n${constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function lH(n,e,t){if(n.stats_=$M(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new wT(n.repoInfo_,(r,i,a,l)=>{b1(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>D1(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,P.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new gm(n.repoInfo_,e,(r,i,a,l)=>{b1(n,r,i,a,l)},r=>{D1(n,r)},r=>{!function cH(n,e){Oi(e,(t,r)=>{kR(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function qB(n,e){const t=n.toString();return HM[t]||(HM[t]=e()),HM[t]}(n.repoInfo_,()=>new K2(n.stats_,n.server_)),n.infoData_=new $2,n.infoSyncTree_=new u1({startListening:(r,i,a,l)=>{let h=[];const _=n.infoData_.getNode(r._path);return _.isEmpty()||(h=LE(n.infoSyncTree_,r._path,_),setTimeout(()=>{l("ok")},0)),h},stopListening:()=>{}}),kR(n,"connected",!1),n.serverSyncTree_=new u1({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(h,_)=>{const w=l(h,_);$o(n.eventQueue_,r._path,w)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Da(this._repo,mn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function JH(n,e){const t=$R[e];(!t||t[n.key]!==n)&&kl(`Database ${e}(${n.repoInfo_}) has already been deleted.`),S1(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&kl("Cannot call "+e+" on a deleted database.")}}function W1(){cO.IS_TRANSPORT_INITIALIZED&&gs("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function r$(){W1(),_f.forceDisallow()}function i$(){W1(),Ny.forceDisallow(),_f.forceAllow()}function a$(n,e){GP(n,e)}const l$={".sv":"timestamp"};class h${constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}gm.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},gm.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function u$(n){UP(Di.SDK_VERSION),(0,Di._registerComponent)(new as.wA("database",(e,{instanceIdentifier:t})=>G1(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Di.registerVersion)(LP,VP,n),(0,Di.registerVersion)(LP,VP,"esm2017")}();const m$=new qi.Yd("@firebase/database-compat"),q1=function(n){m$.warn("FIREBASE WARNING: "+n)};class v${constructor(e){this._delegate=e}cancel(e){(0,P.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,P.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,P.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,P.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,P.Dv)("OnDisconnect.set",1,2,arguments.length),(0,P.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,P.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,P.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,P.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,q1("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,P.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class w${constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,P.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Tf{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,P.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,P.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,P.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,P.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,P.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),GE("DataSnapshot.child","path",e,!1),new Tf(this._database,this._delegate.child(e))}hasChild(e){return(0,P.Dv)("DataSnapshot.hasChild",1,1,arguments.length),GE("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,P.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,P.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,P.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Tf(this._database,t)))}hasChildren(){return(0,P.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,P.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,P.Dv)("DataSnapshot.ref",0,0,arguments.length),new Go(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Ji{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,P.Dv)("Query.on",2,4,arguments.length),(0,P.Wj)("Query.on","callback",t,!1);const l=Ji.getCancelAndContextArgs_("Query.on",r,i),h=(w,b)=>{t.call(l.context,new Tf(this.database,w),b)};h.userCallback=t,h.context=l.context;const _=null===(a=l.cancel)||void 0===a?void 0:a.bind(l.context);switch(e){case"value":return HR(this._delegate,h,_),t;case"child_added":return F1(this._delegate,h,_),t;case"child_removed":return U1(this._delegate,h,_),t;case"child_changed":return L1(this._delegate,h,_),t;case"child_moved":return V1(this._delegate,h,_),t;default:throw new Error((0,P.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,P.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,P.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,P.Wj)("Query.off","callback",t,!0),(0,P.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,B1(this._delegate,e,i)}else B1(this._delegate,e)}get(){return MH(this._delegate).then(e=>new Tf(this.database,e))}once(e,t,r,i){(0,P.Dv)("Query.once",1,4,arguments.length),(0,P.Wj)("Query.once","callback",t,!0);const a=Ji.getCancelAndContextArgs_("Query.once",r,i),l=new P.BH,h=(w,b)=>{const A=new Tf(this.database,w);t&&t.call(a.context,A,b),l.resolve(A)};h.userCallback=t,h.context=a.context;const _=w=>{a.cancel&&a.cancel.call(a.context,w),l.reject(w)};switch(e){case"value":HR(this._delegate,h,_,{onlyOnce:!0});break;case"child_added":F1(this._delegate,h,_,{onlyOnce:!0});break;case"child_removed":U1(this._delegate,h,_,{onlyOnce:!0});break;case"child_changed":L1(this._delegate,h,_,{onlyOnce:!0});break;case"child_moved":V1(this._delegate,h,_,{onlyOnce:!0});break;default:throw new Error((0,P.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,P.Dv)("Query.limitToFirst",1,1,arguments.length),new Ji(this.database,Tu(this._delegate,function VH(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new LH(n)}(e)))}limitToLast(e){return(0,P.Dv)("Query.limitToLast",1,1,arguments.length),new Ji(this.database,Tu(this._delegate,function BH(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new UH(n)}(e)))}orderByChild(e){return(0,P.Dv)("Query.orderByChild",1,1,arguments.length),new Ji(this.database,Tu(this._delegate,function HH(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return GE("orderByChild","path",n,!1),new jH(n)}(e)))}orderByKey(){return(0,P.Dv)("Query.orderByKey",0,0,arguments.length),new Ji(this.database,Tu(this._delegate,function GH(){return new $H}()))}orderByPriority(){return(0,P.Dv)("Query.orderByPriority",0,0,arguments.length),new Ji(this.database,Tu(this._delegate,function zH(){return new WH}()))}orderByValue(){return(0,P.Dv)("Query.orderByValue",0,0,arguments.length),new Ji(this.database,Tu(this._delegate,function KH(){return new qH}()))}startAt(e=null,t){return(0,P.Dv)("Query.startAt",0,2,arguments.length),new Ji(this.database,Tu(this._delegate,function PH(n=null,e){return $E("startAt","key",e,!0),new H1(n,e)}(e,t)))}startAfter(e=null,t){return(0,P.Dv)("Query.startAfter",0,2,arguments.length),new Ji(this.database,Tu(this._delegate,function FH(n,e){return $E("startAfter","key",e,!0),new OH(n,e)}(e,t)))}endAt(e=null,t){return(0,P.Dv)("Query.endAt",0,2,arguments.length),new Ji(this.database,Tu(this._delegate,function RH(n,e){return $E("endAt","key",e,!0),new j1(n,e)}(e,t)))}endBefore(e=null,t){return(0,P.Dv)("Query.endBefore",0,2,arguments.length),new Ji(this.database,Tu(this._delegate,function kH(n,e){return $E("endBefore","key",e,!0),new NH(n,e)}(e,t)))}equalTo(e,t){return(0,P.Dv)("Query.equalTo",1,2,arguments.length),new Ji(this.database,Tu(this._delegate,function YH(n,e){return $E("equalTo","key",e,!0),new ZH(n,e)}(e,t)))}toString(){return(0,P.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,P.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,P.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Ji))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,P.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,P.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,P.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Go(this.database,new Da(this._delegate._repo,this._delegate._path))}}class Go extends Ji{constructor(e,t){super(e,new mo(t._repo,t._path,new yT,!1)),this.database=e,this._delegate=t}getKey(){return(0,P.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,P.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Go(this.database,Em(this._delegate,e))}getParent(){(0,P.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Go(this.database,e):null}getRoot(){return(0,P.Dv)("Reference.root",0,0,arguments.length),new Go(this.database,this._delegate.root)}set(e,t){(0,P.Dv)("Reference.set",1,2,arguments.length),(0,P.Wj)("Reference.set","onComplete",t,!0);const r=jR(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,P.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,q1("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ba("Reference.update",this._delegate._path),(0,P.Wj)("Reference.update","onComplete",t,!0);const r=xH(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,P.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,P.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function AH(n,e,t){if(ba("setWithPriority",n._path),Fl("setWithPriority",e,n._path,!1),NR("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new P.BH;return PR(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,P.Dv)("Reference.remove",0,1,arguments.length),(0,P.Wj)("Reference.remove","onComplete",e,!0);const t=function TH(n){return ba("remove",n._path),jR(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,P.Dv)("Reference.transaction",1,3,arguments.length),(0,P.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,P.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,P.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function f$(n,e,t){var r;if(n=(0,P.m9)(n),ba("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,a=new P.BH,h=HR(n,()=>{});return function vH(n,e,t,r,i,a){jy(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:jP(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=FR(n,e,void 0);l.currentInputSnapshot=h;const _=l.update(h.val());if(void 0===_)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{HE("transaction failed: Data returned ",_,l.path),l.status=0;const w=OT(n.transactionQueueTree_,e),b=vm(w)||[];let A;b.push(l),xR(w,b),"object"==typeof _&&null!==_&&(0,P.r3)(_,".priority")?(A=(0,P.DV)(_,".priority"),(0,P.hu)(jE(A),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):A=(kT(n.serverSyncTree_,e)||Wt.EMPTY_NODE).getPriority().val();const N=WE(n),F=_r(_,A),B=TR(F,h,N);l.currentOutputSnapshotRaw=F,l.currentOutputSnapshotResolved=B,l.currentWriteId=UT(n);const oe=vR(n.serverSyncTree_,e,B,l.currentWriteId,l.applyLocally);$o(n.eventQueue_,e,oe),BT(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(_,w,b)=>{let A=null;_?a.reject(_):(A=new wm(b,new Da(n._repo,n._path),zn),a.resolve(new h$(w,A)))},h,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new w$(a.committed,new Tf(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,P.Dv)("Reference.setPriority",1,2,arguments.length),(0,P.Wj)("Reference.setPriority","onComplete",t,!0);const r=function SH(n,e){n=(0,P.m9)(n),ba("setPriority",n._path),NR("setPriority",e,!1);const t=new P.BH;return PR(n._repo,dr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,P.Dv)("Reference.push",0,2,arguments.length),(0,P.Wj)("Reference.push","onComplete",t,!0);const r=function DH(n,e){n=(0,P.m9)(n),ba("push",n._path),Fl("push",e,n._path,!0);const t=C1(n._repo),r=O2(t),i=Em(n,r),a=Em(n,r);let l;return l=null!=e?jR(a,e).then(()=>a):Promise.resolve(a),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new Go(this.database,l));t&&i.then(()=>t(null),l=>t(l));const a=new Go(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return ba("Reference.onDisconnect",this._delegate._path),new v$(new k1(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class KE{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:r$,forceLongPolling:i$}}useEmulator(e,t,r={}){!function z1(n,e,t,r={}){(n=(0,P.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&kl("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&kl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new DE(DE.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,P.Sg)(r.mockUserToken,n.app.options.projectId);a=new DE(l)}!function XH(n,e,t,r){n.repoInfo_=new BM(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,P.Dv)("database.ref",0,1,arguments.length),e instanceof Go){const t=O1(this._delegate,e.toString());return new Go(this,t)}{const t=P1(this._delegate,e);return new Go(this,t)}}refFromURL(e){(0,P.Dv)("database.refFromURL",1,1,arguments.length);const r=O1(this._delegate,e);return new Go(this,r)}goOffline(){return(0,P.Dv)("database.goOffline",0,0,arguments.length),function s$(n){(n=(0,P.m9)(n))._checkNotDeleted("goOffline"),S1(n._repo)}(this._delegate)}goOnline(){return(0,P.Dv)("database.goOnline",0,0,arguments.length),function o$(n){(n=(0,P.m9)(n))._checkNotDeleted("goOnline"),function yH(n){n.persistentConnection_&&n.persistentConnection_.resume(I1)}(n._repo)}(this._delegate)}}KE.ServerValue={TIMESTAMP:function c$(){return l$}(),increment:n=>function d$(n){return{".sv":{increment:n}}}(n)};var I$=Object.freeze({__proto__:null,initStandalone:function E$({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){UP(t);const l=new as.zt("auth-internal",new as.H0("database-standalone"));return l.setComponent(new as.wA("auth-internal",()=>r,"PRIVATE")),{instance:new KE(G1(n,l,void 0,e,a),n),namespace:i}}});const C$=KE.ServerValue;function K1(n){return null==n}function Z1(n){return"function"==typeof n.set}function Y1(n,e){return Z1(e)?e:n.ref(e)}function Q1(n,e){if(function D$(n){return"string"==typeof n}(n))return e.stringCase();if(Z1(n))return e.firebaseCase();if(function T$(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function ZE(n,e,t="on",r=lh.z){return new Cr.y(i=>{let a=null;return a=n[t](e,(l,h)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,Ke.U)(i=>{const{snapshot:a,prevKey:l}=i;let h=null;return a.exists()&&(h=a.key),{type:e,payload:a,prevKey:l,key:h}}),(0,Om.B)())}function X1(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function x$(n,e){const{payload:t,prevKey:r,key:i}=e,a=X1(n,i),l=function A$(n,e){if(K1(e))return 0;{const t=X1(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(_=>{const w={payload:_,type:"value",prevKey:h,key:_.key};return h=_.key,n=[...n,w],!1})}return n;case"child_added":if(a>-1){const h=n[a-1];(h&&h.key||null)!==r&&(n=n.filter(_=>_.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(a>-1){const h=n.splice(a,1)[0];return(n=n.slice()).splice(l,0,h),n}return n;default:return n}}function J1(n){return(K1(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function eF(n,e,t){return function S$(n,e,t){return ZE(n,"value","once",t).pipe(bn(r=>{const i=[Xe(r)];return e.forEach(a=>i.push(ZE(n,a,"on",t))),(0,el.T)(...i).pipe(Mc(x$,[]))}),c_())}(n,e=J1(e),t)}function tF(n,e,t){const r=(e=J1(e)).map(i=>ZE(n,i,"on",t));return(0,el.T)(...r)}function nF(n,e){return function(r,i){return Q1(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function k$(n){return function(t){return t?Q1(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function rF(n,e){return function(){return ZE(n,"value","on",e)}}!function b$(n){n.INTERNAL.registerComponent(new as.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new KE(i,r)},"PUBLIC").setServiceProps({Reference:Go,Query:Ji,Database:KE,DataSnapshot:Tf,enableLogging:a$,INTERNAL:I$,ServerValue:C$}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.10")}(Rs.Z);const F$=new p.OlP("angularfire2.realtimeDatabaseURL"),L$=new p.OlP("angularfire2.database.use-emulator");let V$=(()=>{class n{constructor(t,r,i,a,l,h,_,w,b,A,N,F,B,oe,he){this.schedulers=h;const We=_,ot=(0,ar.on)(t,l,r);w&&Xn(ot,l,b,N,F,B,A,oe),this.database=(0,ar.cc)(`${ot.name}.database.${i}`,"AngularFireDatabase",ot.name,()=>{const rt=l.runOutsideAngular(()=>ot.database(i||void 0));return We&&rt.useEmulator(...We),rt},[We])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>Y1(this.database,t));let a=i;return r&&(a=r(i)),function P$(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:nF(r,"update"),set:nF(r,"set"),push:i=>r.push(i),remove:k$(r),snapshotChanges:i=>eF(n,i,t).pipe($t.iC),stateChanges:i=>tF(n,i,t).pipe($t.iC),auditTrail:i=>function M$(n,e,t){return function N$(n,e,t){return function R$(n,e){return ZE(n,"value","on",e).pipe((0,Ke.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function RB(...n){const e=(0,Or.jO)(n);return(0,vn.e)((t,r)=>{const i=n.length,a=new Array(i);let l=n.map(()=>!1),h=!1;for(let _=0;_<i;_++)(0,Mo.Xf)(n[_]).subscribe((0,Qn.x)(r,w=>{a[_]=w,!h&&!l[_]&&(l[_]=!0,(h=l.every(Et.y))&&(l=null))},MB.Z));t.subscribe((0,Qn.x)(r,_=>{if(h){const w=[_,...a];r.next(e?e(...w):w)}}))})}(e),(0,Ke.U)(([i,a])=>{const l=i.lastKeyToLoad,h=a.map(_=>_.key);return{actions:a,lastKeyToLoad:l,loadedKeys:h}}),function NB(n){return(0,vn.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,Qn.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,Ke.U)(i=>i.actions))}(n,tF(n,e).pipe(Mc((i,a)=>[...i,a],[])),t)}(n,i,t).pipe($t.iC),valueChanges:(i,a)=>eF(n,i,t).pipe((0,Ke.U)(h=>h.map(_=>a&&a.idField?Object.assign(Object.assign({},_.payload.val()),{[a.idField]:_.key}):_.payload.val())),$t.iC)}}(a,this)}object(t){return function O$(n,e){return{query:n,snapshotChanges:()=>rF(n,e.schedulers.outsideAngular)().pipe($t.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>rF(n,e.schedulers.outsideAngular)().pipe($t.iC,(0,Ke.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Y1(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ar.Dh),p.LFG(ar.xv,8),p.LFG(F$,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG($t.HU),p.LFG(L$,8),p.LFG(gi,8),p.LFG(z,8),p.LFG(le,8),p.LFG(Ue,8),p.LFG(Je,8),p.LFG(It,8),p.LFG(ht,8),p.LFG(Ms,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),U$=(()=>{class n{constructor(){x.Z.registerVersion("angularfire",$t.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[V$]}),n})();class Ta extends kn.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:B$}=Array,{getPrototypeOf:j$,prototype:H$,keys:$$}=Object;function iF(n){if(1===n.length){const e=n[0];if(B$(e))return{args:e,keys:null};if(function G$(n){return n&&"object"==typeof n&&j$(n)===H$}(e)){const t=$$(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:W$}=Array;function sF(n){return(0,Ke.U)(e=>function z$(n,e){return W$(e)?n(...e):n(e)}(n,e))}function oF(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var q$=L(9672);function aF(...n){const e=(0,Or.yG)(n),t=(0,Or.jO)(n),{args:r,keys:i}=iF(n);if(0===r.length)return(0,Kt.D)([],e);const a=new Cr.y(function K$(n,e,t=Et.y){return r=>{uF(e,()=>{const{length:i}=n,a=new Array(i);let l=i,h=i;for(let _=0;_<i;_++)uF(e,()=>{const w=(0,Kt.D)(n[_],e);let b=!1;w.subscribe((0,Qn.x)(r,A=>{a[_]=A,b||(b=!0,h--),h||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>oF(i,l):Et.y));return t?a.pipe(sF(t)):a}function uF(n,e,t){n?(0,q$.f)(t,n,e):e()}function lF(n){return new Cr.y(e=>{(0,Mo.Xf)(n()).subscribe(e)})}var Z$=L(9635);function YE(n,e){const t=(0,ft.m)(n)?n:()=>n,r=i=>i.error(t());return new Cr.y(e?i=>e.schedule(r,0,i):r)}var cF=L(727);function GR(){return(0,vn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Qn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class dF extends Cr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,vn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new cF.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Qn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=cF.w0.EMPTY)}return e}refCount(){return GR()(this)}}var Ws=L(5577);function Sf(n,e){return(0,ft.m)(e)?(0,Ws.z)(n,e,1):(0,Ws.z)(n,1)}var ms=L(8505);function Af(n){return(0,vn.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,Qn.x)(t,void 0,void 0,l=>{a=(0,Mo.Xf)(n(l,Af(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function WR(n){return n<=0?()=>Y.E:(0,vn.e)((e,t)=>{let r=[];e.subscribe((0,Qn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function hF(n,e){const t=arguments.length>=2;return r=>r.pipe(n?U((i,a)=>n(i,a,r)):Et.y,WR(1),t?Ie(e):$e(()=>new M))}function zR(n){return(0,vn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Jt="primary",QE=Symbol("RouteTitle");class X${constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function $y(n){return new X$(n)}function J$(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],h=n[a];if(l.startsWith(":"))i[l.substring(1)]=h;else if(l!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Ll(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!fF(n[i],e[i]))return!1;return!0}function fF(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function pF(n){return Array.prototype.concat.apply([],n)}function gF(n){return n.length>0?n[n.length-1]:null}function es(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function xf(n){return(0,p.CqO)(n)?n:(0,p.QGY)(n)?(0,Kt.D)(Promise.resolve(n)):Xe(n)}const WT=!1,tG={exact:function yF(n,e,t){if(!Cm(n.segments,e.segments)||!zT(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!yF(n.children[r],e.children[r],t))return!1;return!0},subset:vF},mF={exact:function nG(n,e){return Ll(n,e)},subset:function rG(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>fF(n[t],e[t]))},ignored:()=>!0};function _F(n,e,t){return tG[t.paths](n.root,e.root,t.matrixParams)&&mF[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function vF(n,e,t){return wF(n,e,e.segments,t)}function wF(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Cm(i,t)||e.hasChildren()||!zT(i,t,r))}if(n.segments.length===t.length){if(!Cm(n.segments,t)||!zT(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!vF(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(Cm(n.segments,i)&&zT(n.segments,i,r)&&n.children[Jt])&&wF(n.children[Jt],e,a,r)}}function zT(n,e,t){return e.every((r,i)=>mF[t](n[i].parameters,r.parameters))}class Im{constructor(e=new rn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=$y(this.queryParams)),this._queryParamMap}toString(){return oG.serialize(this)}}class rn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,es(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return qT(this)}}class XE{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=$y(this.parameters)),this._parameterMap}toString(){return bF(this)}}function Cm(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let EF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return new qR},providedIn:"root"}),n})();class qR{parse(e){const t=new gG(e);return new Im(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${JE(e.root,!0)}`,r=function lG(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${KT(t)}=${KT(i)}`).join("&"):`${KT(t)}=${KT(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function aG(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const oG=new qR;function qT(n){return n.segments.map(e=>bF(e)).join("/")}function JE(n,e){if(!n.hasChildren())return qT(n);if(e){const t=n.children[Jt]?JE(n.children[Jt],!1):"",r=[];return es(n.children,(i,a)=>{a!==Jt&&r.push(`${a}:${JE(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function sG(n,e){let t=[];return es(n.children,(r,i)=>{i===Jt&&(t=t.concat(e(r,i)))}),es(n.children,(r,i)=>{i!==Jt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Jt?[JE(n.children[Jt],!1)]:[`${i}:${JE(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Jt]?`${qT(n)}/${t[0]}`:`${qT(n)}/(${t.join("//")})`}}function IF(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function KT(n){return IF(n).replace(/%3B/gi,";")}function KR(n){return IF(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ZT(n){return decodeURIComponent(n)}function CF(n){return ZT(n.replace(/\+/g,"%20"))}function bF(n){return`${KR(n.path)}${function uG(n){return Object.keys(n).map(e=>`;${KR(e)}=${KR(n[e])}`).join("")}(n.parameters)}`}const cG=/^[^\/()?;=#]+/;function YT(n){const e=n.match(cG);return e?e[0]:""}const dG=/^[^=?&#]+/,fG=/^[^&#]+/;class gG{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new rn([],{}):new rn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Jt]=new rn(e,t)),r}parseSegment(){const e=YT(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new p.vHH(4009,WT);return this.capture(e),new XE(ZT(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=YT(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=YT(this.remaining);i&&(r=i,this.capture(r))}e[ZT(t)]=ZT(r)}parseQueryParam(e){const t=function hG(n){const e=n.match(dG);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function pG(n){const e=n.match(fG);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=CF(t),a=CF(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=YT(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new p.vHH(4010,WT);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Jt);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[Jt]:new rn([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new p.vHH(4011,WT)}}function ZR(n){return n.segments.length>0?new rn([],{[Jt]:n}):n}function QT(n){const e={};for(const r of Object.keys(n.children)){const a=QT(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function mG(n){if(1===n.numberOfChildren&&n.children[Jt]){const e=n.children[Jt];return new rn(n.segments.concat(e.segments),e.children)}return n}(new rn(n.segments,e))}function bm(n){return n instanceof Im}function vG(n,e,t,r,i){if(0===t.length)return Gy(e.root,e.root,e.root,r,i);const a=function SF(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new TF(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const h={};return es(a.outlets,(_,w)=>{h[w]="string"==typeof _?_.split("/"):_}),[...i,{outlets:h}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((h,_)=>{0==_&&"."===h||(0==_&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,a]},[]);return new TF(t,e,r)}(t);return a.toRoot()?Gy(e.root,e.root,new rn([],{}),r,i):function l(_){const w=function EG(n,e,t,r){if(n.isAbsolute)return new Wy(e.root,!0,0);if(-1===r)return new Wy(t,t===e.root,0);return function AF(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new p.vHH(4005,!1);i=r.segments.length}return new Wy(r,!1,i-a)}(t,r+(eI(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,_),b=w.processChildren?nI(w.segmentGroup,w.index,a.commands):QR(w.segmentGroup,w.index,a.commands);return Gy(e.root,w.segmentGroup,b,r,i)}(n.snapshot?._lastPathIndex)}function eI(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function tI(n){return"object"==typeof n&&null!=n&&n.outlets}function Gy(n,e,t,r,i){let l,a={};r&&es(r,(_,w)=>{a[w]=Array.isArray(_)?_.map(b=>`${b}`):`${_}`}),l=n===e?t:DF(n,e,t);const h=ZR(QT(l));return new Im(h,a,i)}function DF(n,e,t){const r={};return es(n.children,(i,a)=>{r[a]=i===e?t:DF(i,e,t)}),new rn(n.segments,r)}class TF{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&eI(r[0]))throw new p.vHH(4003,!1);const i=r.find(tI);if(i&&i!==gF(r))throw new p.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Wy{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function QR(n,e,t){if(n||(n=new rn([],{})),0===n.segments.length&&n.hasChildren())return nI(n,e,t);const r=function CG(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],h=t[r];if(tI(h))break;const _=`${h}`,w=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&w&&"object"==typeof w&&void 0===w.outlets){if(!MF(_,w,l))return a;r+=2}else{if(!MF(_,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new rn(n.segments.slice(0,r.pathIndex),{});return a.children[Jt]=new rn(n.segments.slice(r.pathIndex),n.children),nI(a,0,i)}return r.match&&0===i.length?new rn(n.segments,{}):r.match&&!n.hasChildren()?XR(n,e,t):r.match?nI(n,0,i):XR(n,e,t)}function nI(n,e,t){if(0===t.length)return new rn(n.segments,{});{const r=function IG(n){return tI(n[0])?n[0].outlets:{[Jt]:n}}(t),i={};return es(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=QR(n.children[l],e,a))}),es(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new rn(n.segments,i)}}function XR(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(tI(a)){const _=bG(a.outlets);return new rn(r,_)}if(0===i&&eI(t[0])){r.push(new XE(n.segments[e].path,xF(t[0]))),i++;continue}const l=tI(a)?a.outlets[Jt]:`${a}`,h=i<t.length-1?t[i+1]:null;l&&h&&eI(h)?(r.push(new XE(l,xF(h))),i+=2):(r.push(new XE(l,{})),i++)}return new rn(r,{})}function bG(n){const e={};return es(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=XR(new rn([],{}),0,t))}),e}function xF(n){const e={};return es(n,(t,r)=>e[r]=`${t}`),e}function MF(n,e,t){return n==t.path&&Ll(e,t.parameters)}class md{constructor(e,t){this.id=e,this.url=t}}class JR extends md{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Dm extends md{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class XT extends md{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class RF extends md{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class DG extends md{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class TG extends md{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class SG extends md{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class AG extends md{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xG extends md{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class MG{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class RG{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class NG{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class kG{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class PG{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class OG{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class NF{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class kF{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=eN(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=eN(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=tN(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return tN(e,this._root).map(t=>t.value)}}function eN(n,e){if(n===e.value)return e;for(const t of e.children){const r=eN(n,t);if(r)return r}return null}function tN(n,e){if(n===e.value)return[e];for(const t of e.children){const r=tN(n,t);if(r.length)return r.unshift(e),r}return[]}class _d{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function zy(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class PF extends kF{constructor(e,t){super(e),this.snapshot=t,nN(this,e)}toString(){return this.snapshot.toString()}}function OF(n,e){const t=function LG(n,e){const l=new JT([],{},{},"",{},Jt,e,null,n.root,-1,{});return new LF("",new _d(l,[]))}(n,e),r=new Ta([new XE("",{})]),i=new Ta({}),a=new Ta({}),l=new Ta({}),h=new Ta(""),_=new qy(r,i,l,h,a,Jt,e,t.root);return _.snapshot=t.root,new PF(new _d(_,[]),t)}class qy{constructor(e,t,r,i,a,l,h,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=h,this.title=this.data?.pipe((0,Ke.U)(w=>w[QE]))??Xe(void 0),this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ke.U)(e=>$y(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ke.U)(e=>$y(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function FF(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function VG(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class JT{constructor(e,t,r,i,a,l,h,_,w,b,A){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=h,this.routeConfig=_,this._urlSegment=w,this._lastPathIndex=b,this._resolve=A}get title(){return this.data?.[QE]}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=$y(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=$y(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class LF extends kF{constructor(e,t){super(t),this.url=e,nN(this,t)}toString(){return VF(this._root)}}function nN(n,e){e.value._routerState=n,e.children.forEach(t=>nN(n,t))}function VF(n){const e=n.children.length>0?` { ${n.children.map(VF).join(", ")} } `:"";return`${n.value}${e}`}function rN(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ll(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ll(e.params,t.params)||n.params.next(t.params),function eG(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ll(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ll(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function iN(n,e){const t=Ll(n.params,e.params)&&function iG(n,e){return Cm(n,e)&&n.every((t,r)=>Ll(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||iN(n.parent,e.parent))}function rI(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function BG(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return rI(n,r,i);return rI(n,r)})}(n,e,t);return new _d(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(h=>rI(n,h)),l}}const r=function jG(n){return new qy(new Ta(n.url),new Ta(n.params),new Ta(n.queryParams),new Ta(n.fragment),new Ta(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>rI(n,a));return new _d(r,i)}}const sN="ngNavigationCancelingError";function UF(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=bm(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=BF(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function BF(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[sN]=!0,r.cancellationCode=e,t&&(r.url=t),r}function jF(n){return HF(n)&&bm(n.url)}function HF(n){return n&&n[sN]}class HG{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new iI,this.attachRef=null}}let iI=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new HG,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const eS=!1;let oN=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Jt,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.parentContexts=(0,p.f3M)(iI),this.location=(0,p.f3M)(p.s_b),this.changeDetector=(0,p.f3M)(p.sBO),this.environmentInjector=(0,p.f3M)(p.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new p.vHH(4012,eS);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new p.vHH(4012,eS);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new p.vHH(4012,eS);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new p.vHH(4013,eS);this._activatedRoute=t;const i=this.location,l=t.snapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,_=new $G(t,h,i.injector);if(r&&function GG(n){return!!n.resolveComponentFactory}(r)){const w=r.resolveComponentFactory(l);this.activated=i.createComponent(w,i.length,_)}else this.activated=i.createComponent(l,{index:i.length,injector:_,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[p.TTD]}),n})();class $G{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===qy?this.route:e===iI?this.childContexts:this.parent.get(e,t)}}let aN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[p.jDz],decls:1,vars:0,template:function(t,r){1&t&&p._UZ(0,"router-outlet")},dependencies:[oN],encapsulation:2}),n})();function $F(n,e){return n.providers&&!n._injector&&(n._injector=(0,p.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function lN(n){const e=n.children&&n.children.map(lN),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Jt&&(t.component=aN),t}function Sa(n){return n.outlet||Jt}function GF(n,e){const t=n.filter(r=>Sa(r)===e);return t.push(...n.filter(r=>Sa(r)!==e)),t}function sI(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class ZG{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),rN(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=zy(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),es(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=zy(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=zy(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=zy(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new OG(a.value.snapshot))}),e.children.length&&this.forwardEvent(new kG(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(rN(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(h.contexts),l.attachRef=h.componentRef,l.route=h.route.value,l.outlet&&l.outlet.attach(h.componentRef,h.route.value),rN(h.route.value),this.activateChildRoutes(e,null,l.children)}else{const h=sI(i.snapshot),_=h?.get(p._Vd)??null;l.attachRef=null,l.route=i,l.resolver=_,l.injector=h,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class WF{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class tS{constructor(e,t){this.component=e,this.route=t}}function YG(n,e,t){const r=n._root;return oI(r,e?e._root:null,t,[r.value])}function Ky(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,p.Z0I)(n)?e.get(n):n:r}function oI(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=zy(e);return n.children.forEach(l=>{(function XG(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const _=function JG(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Cm(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Cm(n.url,e.url)||!Ll(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!iN(n,e)||!Ll(n.queryParams,e.queryParams);default:return!iN(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new WF(r)):(a.data=l.data,a._resolvedData=l._resolvedData),oI(n,e,a.component?h?h.children:null:t,r,i),_&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new tS(h.outlet.component,l))}else l&&aI(e,h,i),i.canActivateChecks.push(new WF(r)),oI(n,null,a.component?h?h.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),es(a,(l,h)=>aI(l,t.getContext(h),i)),i}function aI(n,e,t){const r=zy(n),i=n.value;es(r,(a,l)=>{aI(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new tS(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function uI(n){return"function"==typeof n}function cN(n){return n instanceof M||"EmptyError"===n?.name}const nS=Symbol("INITIAL_VALUE");function Zy(){return bn(n=>aF(n.map(e=>e.pipe(re(1),xc(nS)))).pipe((0,Ke.U)(e=>{for(const t of e)if(!0!==t){if(t===nS)return nS;if(!1===t||t instanceof Im)return t}return!0}),U(e=>e!==nS),re(1)))}function zF(n){return(0,Z$.z)((0,ms.b)(e=>{if(bm(e))throw UF(0,e)}),(0,Ke.U)(e=>!0===e))}const dN={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function qF(n,e,t,r,i){const a=hN(n,e,t);return a.matched?function m3(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?Xe(i.map(l=>{const h=Ky(l,n);return xf(function s3(n){return n&&uI(n.canMatch)}(h)?h.canMatch(e,t):n.runInContext(()=>h(e,t)))})).pipe(Zy(),zF()):Xe(!0)}(r=$F(e,r),e,t).pipe((0,Ke.U)(l=>!0===l?a:{...dN})):Xe(a)}function hN(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...dN}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||J$)(t,n,e);if(!i)return{...dN};const a={};es(i.posParams,(h,_)=>{a[_]=h.path});const l=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function rS(n,e,t,r){if(t.length>0&&function v3(n,e,t){return t.some(r=>iS(n,e,r)&&Sa(r)!==Jt)}(n,t,r)){const a=new rn(e,function y3(n,e,t,r){const i={};i[Jt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&Sa(a)!==Jt){const l=new rn([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[Sa(a)]=l}return i}(n,e,r,new rn(t,n.children)));return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:[]}}if(0===t.length&&function w3(n,e,t){return t.some(r=>iS(n,e,r))}(n,t,r)){const a=new rn(n.segments,function _3(n,e,t,r,i){const a={};for(const l of r)if(iS(n,t,l)&&!i[Sa(l)]){const h=new rn([],{});h._sourceSegment=n,h._segmentIndexShift=e.length,a[Sa(l)]=h}return{...i,...a}}(n,e,t,r,n.children));return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}const i=new rn(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function iS(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function KF(n,e,t,r){return!!(Sa(n)===r||r!==Jt&&iS(e,t,n))&&("**"===n.path||hN(e,n,t).matched)}function ZF(n,e,t){return 0===e.length&&!n.children[t]}const sS=!1;class oS{constructor(e){this.segmentGroup=e||null}}class YF{constructor(e){this.urlTree=e}}function lI(n){return YE(new oS(n))}function QF(n){return YE(new YF(n))}class b3{constructor(e,t,r,i,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const e=rS(this.urlTree.root,[],[],this.config).segmentGroup,t=new rn(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Jt).pipe((0,Ke.U)(a=>this.createUrlTree(QT(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Af(a=>{if(a instanceof YF)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof oS?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Jt).pipe((0,Ke.U)(i=>this.createUrlTree(QT(i),e.queryParams,e.fragment))).pipe(Af(i=>{throw i instanceof oS?this.noMatchError(i):i}))}noMatchError(e){return new p.vHH(4002,sS)}createUrlTree(e,t,r){const i=ZR(e);return new Im(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Ke.U)(a=>new rn([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,Kt.D)(i).pipe(Sf(a=>{const l=r.children[a],h=GF(t,a);return this.expandSegmentGroup(e,h,l,a).pipe((0,Ke.U)(_=>({segment:_,outlet:a})))}),Mc((a,l)=>(a[l.outlet]=l.segment,a),{}),hF())}expandSegment(e,t,r,i,a,l){return(0,Kt.D)(r).pipe(Sf(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,a,l).pipe(Af(w=>{if(w instanceof oS)return Xe(null);throw w}))),yt(h=>!!h),Af((h,_)=>{if(cN(h))return ZF(t,i,a)?Xe(new rn([],{})):lI(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,a,l,h){return KF(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):lI(t):lI(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?QF(a):this.lineralizeSegments(r,a).pipe((0,Ws.z)(l=>{const h=new rn(l,{});return this.expandSegment(e,h,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:h,consumedSegments:_,remainingSegments:w,positionalParamSegments:b}=hN(t,i,a);if(!h)return lI(t);const A=this.applyRedirectCommands(_,i.redirectTo,b);return i.redirectTo.startsWith("/")?QF(A):this.lineralizeSegments(i,A).pipe((0,Ws.z)(N=>this.expandSegment(e,t,r,N.concat(w),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){return"**"===r.path?(e=$F(r,e),r.loadChildren?(r._loadedRoutes?Xe({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,Ke.U)(h=>(r._loadedRoutes=h.routes,r._loadedInjector=h.injector,new rn(i,{})))):Xe(new rn(i,{}))):qF(t,r,i,e).pipe(bn(({matched:l,consumedSegments:h,remainingSegments:_})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,Ws.z)(b=>{const A=b.injector??e,N=b.routes,{segmentGroup:F,slicedSegments:B}=rS(t,h,_,N),oe=new rn(F.segments,F.children);if(0===B.length&&oe.hasChildren())return this.expandChildren(A,N,oe).pipe((0,Ke.U)(rt=>new rn(h,rt)));if(0===N.length&&0===B.length)return Xe(new rn(h,{}));const he=Sa(r)===a;return this.expandSegment(A,oe,N,B,he?Jt:a,!0).pipe((0,Ke.U)(ot=>new rn(h.concat(ot.segments),ot.children)))})):lI(t)))}getChildConfig(e,t,r){return t.children?Xe({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Xe({routes:t._loadedRoutes,injector:t._loadedInjector}):function g3(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?Xe(!0):Xe(i.map(l=>{const h=Ky(l,n);return xf(function t3(n){return n&&uI(n.canLoad)}(h)?h.canLoad(e,t):n.runInContext(()=>h(e,t)))})).pipe(Zy(),zF())}(e,t,r).pipe((0,Ws.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,ms.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function I3(n){return YE(BF(sS,3))}())):Xe({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Xe(r);if(i.numberOfChildren>1||!i.children[Jt])return YE(new p.vHH(4e3,sS));i=i.children[Jt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new Im(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return es(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[a]=t[h]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return es(t.children,(h,_)=>{l[_]=this.createSegmentGroup(e,h,r,i)}),new rn(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new p.vHH(4001,sS);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class T3{}class x3{constructor(e,t,r,i,a,l,h){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=l,this.urlSerializer=h}recognize(){const e=rS(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Jt).pipe((0,Ke.U)(t=>{if(null===t)return null;const r=new JT([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Jt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new _d(r,t),a=new LF(this.url,i);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(e){const t=e.value,r=FF(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,Kt.D)(Object.keys(r.children)).pipe(Sf(i=>{const a=r.children[i],l=GF(t,i);return this.processSegmentGroup(e,l,a,i)}),Mc((i,a)=>i&&a?(i.push(...a),i):null),function Y$(n,e=!1){return(0,vn.e)((t,r)=>{let i=0;t.subscribe((0,Qn.x)(r,a=>{const l=n(a,i++);(l||e)&&r.next(a),!l&&r.complete()}))})}(i=>null!==i),Ie(null),hF(),(0,Ke.U)(i=>{if(null===i)return null;const a=JF(i);return function M3(n){n.sort((e,t)=>e.value.outlet===Jt?-1:t.value.outlet===Jt?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}))}processSegment(e,t,r,i,a){return(0,Kt.D)(t).pipe(Sf(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,a)),yt(l=>!!l),Af(l=>{if(cN(l))return ZF(r,i,a)?Xe([]):Xe(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,a){if(t.redirectTo||!KF(t,r,i,a))return Xe(null);let l;if("**"===t.path){const h=i.length>0?gF(i).parameters:{},_=tL(r)+i.length;l=Xe({snapshot:new JT(i,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,nL(t),Sa(t),t.component??t._loadedComponent??null,t,eL(r),_,rL(t)),consumedSegments:[],remainingSegments:[]})}else l=qF(r,t,i,e).pipe((0,Ke.U)(({matched:h,consumedSegments:_,remainingSegments:w,parameters:b})=>{if(!h)return null;const A=tL(r)+_.length;return{snapshot:new JT(_,b,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,nL(t),Sa(t),t.component??t._loadedComponent??null,t,eL(r),A,rL(t)),consumedSegments:_,remainingSegments:w}}));return l.pipe(bn(h=>{if(null===h)return Xe(null);const{snapshot:_,consumedSegments:w,remainingSegments:b}=h;e=t._injector??e;const A=t._loadedInjector??e,N=function R3(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:F,slicedSegments:B}=rS(r,w,b,N.filter(he=>void 0===he.redirectTo));if(0===B.length&&F.hasChildren())return this.processChildren(A,N,F).pipe((0,Ke.U)(he=>null===he?null:[new _d(_,he)]));if(0===N.length&&0===B.length)return Xe([new _d(_,[])]);const oe=Sa(t)===a;return this.processSegment(A,N,F,B,oe?Jt:a).pipe((0,Ke.U)(he=>null===he?null:[new _d(_,he)]))}))}}function N3(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function JF(n){const e=[],t=new Set;for(const r of n){if(!N3(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=JF(r.children);e.push(new _d(r.value,i))}return e.filter(r=>!t.has(r))}function eL(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function tL(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function nL(n){return n.data||{}}function rL(n){return n.resolve||{}}function iL(n){return"string"==typeof n.title||null===n.title}function fN(n){return bn(e=>{const t=n(e);return t?(0,Kt.D)(t).pipe((0,Ke.U)(()=>e)):Xe(e)})}class B3{constructor(e){this.router=e,this.currentNavigation=null}setupNavigations(e){const t=this.router.events;return e.pipe(U(r=>0!==r.id),(0,Ke.U)(r=>({...r,extractedUrl:this.router.urlHandlingStrategy.extract(r.rawUrl)})),bn(r=>{let i=!1,a=!1;return Xe(r).pipe((0,ms.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.router.lastSuccessfulNavigation?{...this.router.lastSuccessfulNavigation,previousNavigation:null}:null}}),bn(l=>{const h=this.router.browserUrlTree.toString(),_=!this.router.navigated||l.extractedUrl.toString()!==h||h!==this.router.currentUrlTree.toString();if(("reload"===this.router.onSameUrlNavigation||_)&&this.router.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return oL(l.source)&&(this.router.browserUrlTree=l.extractedUrl),Xe(l).pipe(bn(b=>{const A=this.router.transitions.getValue();return t.next(new JR(b.id,this.router.serializeUrl(b.extractedUrl),b.source,b.restoredState)),A!==this.router.transitions.getValue()?Y.E:Promise.resolve(b)}),function D3(n,e,t,r){return bn(i=>function C3(n,e,t,r,i){return new b3(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,Ke.U)(a=>({...i,urlAfterRedirects:a}))))}(this.router.ngModule.injector,this.router.configLoader,this.router.urlSerializer,this.router.config),(0,ms.b)(b=>{this.currentNavigation={...this.currentNavigation,finalUrl:b.urlAfterRedirects},r.urlAfterRedirects=b.urlAfterRedirects}),function P3(n,e,t,r,i){return(0,Ws.z)(a=>function A3(n,e,t,r,i,a,l="emptyOnly"){return new x3(n,e,t,r,i,l,a).recognize().pipe(bn(h=>null===h?function S3(n){return new Cr.y(e=>e.error(n))}(new T3):Xe(h)))}(n,e,t,a.urlAfterRedirects,r.serialize(a.urlAfterRedirects),r,i).pipe((0,Ke.U)(l=>({...a,targetSnapshot:l}))))}(this.router.ngModule.injector,this.router.rootComponentType,this.router.config,this.router.urlSerializer,this.router.paramsInheritanceStrategy),(0,ms.b)(b=>{if(r.targetSnapshot=b.targetSnapshot,"eager"===this.router.urlUpdateStrategy){if(!b.extras.skipLocationChange){const N=this.router.urlHandlingStrategy.merge(b.urlAfterRedirects,b.rawUrl);this.router.setBrowserUrl(N,b)}this.router.browserUrlTree=b.urlAfterRedirects}const A=new DG(b.id,this.router.serializeUrl(b.extractedUrl),this.router.serializeUrl(b.urlAfterRedirects),b.targetSnapshot);t.next(A)}));if(_&&this.router.rawUrlTree&&this.router.urlHandlingStrategy.shouldProcessUrl(this.router.rawUrlTree)){const{id:A,extractedUrl:N,source:F,restoredState:B,extras:oe}=l,he=new JR(A,this.router.serializeUrl(N),F,B);t.next(he);const We=OF(N,this.router.rootComponentType).snapshot;return Xe(r={...l,targetSnapshot:We,urlAfterRedirects:N,extras:{...oe,skipLocationChange:!1,replaceUrl:!1}})}return this.router.rawUrlTree=l.rawUrl,l.resolve(null),Y.E}),(0,ms.b)(l=>{const h=new TG(l.id,this.router.serializeUrl(l.extractedUrl),this.router.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.router.triggerEvent(h)}),(0,Ke.U)(l=>r={...l,guards:YG(l.targetSnapshot,l.currentSnapshot,this.router.rootContexts)}),function a3(n,e){return(0,Ws.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?Xe({...t,guardsResult:!0}):function u3(n,e,t,r){return(0,Kt.D)(n).pipe((0,Ws.z)(i=>function p3(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?Xe(a.map(h=>{const _=sI(e)??i,w=Ky(h,_);return xf(function i3(n){return n&&uI(n.canDeactivate)}(w)?w.canDeactivate(n,e,t,r):_.runInContext(()=>w(n,e,t,r))).pipe(yt())})).pipe(Zy()):Xe(!0)}(i.component,i.route,t,e,r)),yt(i=>!0!==i,!0))}(l,r,i,n).pipe((0,Ws.z)(h=>h&&function e3(n){return"boolean"==typeof n}(h)?function l3(n,e,t,r){return(0,Kt.D)(e).pipe(Sf(i=>l_(function d3(n,e){return null!==n&&e&&e(new NG(n)),Xe(!0)}(i.route.parent,r),function c3(n,e){return null!==n&&e&&e(new PG(n)),Xe(!0)}(i.route,r),function f3(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function QG(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>lF(()=>Xe(l.guards.map(_=>{const w=sI(l.node)??t,b=Ky(_,w);return xf(function r3(n){return n&&uI(n.canActivateChild)}(b)?b.canActivateChild(r,n):w.runInContext(()=>b(r,n))).pipe(yt())})).pipe(Zy())));return Xe(a).pipe(Zy())}(n,i.path,t),function h3(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Xe(!0);const i=r.map(a=>lF(()=>{const l=sI(e)??t,h=Ky(a,l);return xf(function n3(n){return n&&uI(n.canActivate)}(h)?h.canActivate(e,n):l.runInContext(()=>h(e,n))).pipe(yt())}));return Xe(i).pipe(Zy())}(n,i.route,t))),yt(i=>!0!==i,!0))}(r,a,n,e):Xe(h)),(0,Ke.U)(h=>({...t,guardsResult:h})))})}(this.router.ngModule.injector,l=>this.router.triggerEvent(l)),(0,ms.b)(l=>{if(r.guardsResult=l.guardsResult,bm(l.guardsResult))throw UF(0,l.guardsResult);const h=new SG(l.id,this.router.serializeUrl(l.extractedUrl),this.router.serializeUrl(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.router.triggerEvent(h)}),U(l=>!!l.guardsResult||(this.router.restoreHistory(l),this.router.cancelNavigationTransition(l,"",3),!1)),fN(l=>{if(l.guards.canActivateChecks.length)return Xe(l).pipe((0,ms.b)(h=>{const _=new AG(h.id,this.router.serializeUrl(h.extractedUrl),this.router.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.router.triggerEvent(_)}),bn(h=>{let _=!1;return Xe(h).pipe(function O3(n,e){return(0,Ws.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Xe(t);let a=0;return(0,Kt.D)(i).pipe(Sf(l=>function F3(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!iL(i)&&(a[QE]=i.title),function L3(n,e,t,r){const i=function V3(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return Xe({});const a={};return(0,Kt.D)(i).pipe((0,Ws.z)(l=>function U3(n,e,t,r){const i=sI(e)??r,a=Ky(n,i);return xf(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[l],e,t,r).pipe(yt(),(0,ms.b)(h=>{a[l]=h}))),WR(1),function Q$(n){return(0,Ke.U)(()=>n)}(a),Af(l=>cN(l)?Y.E:YE(l)))}(a,n,e,r).pipe((0,Ke.U)(l=>(n._resolvedData=l,n.data=FF(n,t).resolve,i&&iL(i)&&(n.data[QE]=i.title),null)))}(l.route,r,n,e)),(0,ms.b)(()=>a++),WR(1),(0,Ws.z)(l=>a===i.length?Xe(t):Y.E))})}(this.router.paramsInheritanceStrategy,this.router.ngModule.injector),(0,ms.b)({next:()=>_=!0,complete:()=>{_||(this.router.restoreHistory(h),this.router.cancelNavigationTransition(h,"",2))}}))}),(0,ms.b)(h=>{const _=new xG(h.id,this.router.serializeUrl(h.extractedUrl),this.router.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.router.triggerEvent(_)}))}),fN(l=>{const h=_=>{const w=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&w.push(this.router.configLoader.loadComponent(_.routeConfig).pipe((0,ms.b)(b=>{_.component=b}),(0,Ke.U)(()=>{})));for(const b of _.children)w.push(...h(b));return w};return aF(h(l.targetSnapshot.root)).pipe(Ie(),re(1))}),fN(()=>this.router.afterPreactivation()),(0,Ke.U)(l=>{const h=function UG(n,e,t){const r=rI(n,e._root,t?t._root:void 0);return new PF(r,e)}(this.router.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:h}}),(0,ms.b)(l=>{this.router.currentUrlTree=l.urlAfterRedirects,this.router.rawUrlTree=this.router.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),this.router.routerState=l.targetRouterState,"deferred"===this.router.urlUpdateStrategy&&(l.extras.skipLocationChange||this.router.setBrowserUrl(this.router.rawUrlTree,l),this.router.browserUrlTree=l.urlAfterRedirects)}),((n,e,t)=>(0,Ke.U)(r=>(new ZG(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.router.rootContexts,this.router.routeReuseStrategy,l=>this.router.triggerEvent(l)),(0,ms.b)({next(){i=!0},complete(){i=!0}}),zR(()=>{i||a||this.router.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Af(l=>{if(a=!0,HF(l)){jF(l)||(this.router.navigated=!0,this.router.restoreHistory(r,!0));const h=new XT(r.id,this.router.serializeUrl(r.extractedUrl),l.message,l.cancellationCode);if(t.next(h),jF(l)){const _=this.router.urlHandlingStrategy.merge(l.url,this.router.rawUrlTree),w={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.router.urlUpdateStrategy||oL(r.source)};this.router.scheduleNavigation(_,"imperative",null,w,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{this.router.restoreHistory(r,!0);const h=new RF(r.id,this.router.serializeUrl(r.extractedUrl),l,r.targetSnapshot??void 0);t.next(h);try{r.resolve(this.router.errorHandler(l))}catch(_){r.reject(_)}}return Y.E}))}))}}function oL(n){return"imperative"!==n}let aL=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===Jt);return r}getResolvedTitleForRoute(t){return t.data[QE]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(j3)},providedIn:"root"}),n})(),j3=(()=>{class n extends aL{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(lc))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),H3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(G3)},providedIn:"root"}),n})();class $3{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let G3=(()=>{class n extends $3{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const aS=new p.OlP("",{providedIn:"root",factory:()=>({})}),Yy=new p.OlP("ROUTES");let pN=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Xe(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=xf(t.loadComponent()).pipe((0,Ke.U)(lL),(0,ms.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),zR(()=>{this.componentLoaders.delete(t)})),i=new dF(r,()=>new kn.x).pipe(GR());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Xe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,Ke.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(r);let _,w,b=!1;Array.isArray(h)?w=h:(_=h.create(t).injector,w=pF(_.get(Yy,[],p.XFs.Self|p.XFs.Optional)));return{routes:w.map(lN),injector:_}}),zR(()=>{this.childrenLoaders.delete(r)})),l=new dF(a,()=>new kn.x).pipe(GR());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return xf(t()).pipe((0,Ke.U)(lL),(0,Ws.z)(i=>i instanceof p.YKP||Array.isArray(i)?Xe(i):(0,Kt.D)(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.zs3),p.LFG(p.Sil))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function lL(n){return function q3(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let K3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(Z3)},providedIn:"root"}),n})(),Z3=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Y3(n){throw n}function Q3(n,e,t){return e.parse("/")}const X3={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},J3={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function dL(){const n=(0,p.f3M)(EF),e=(0,p.f3M)(iI),t=(0,p.f3M)(Me),r=(0,p.f3M)(p.zs3),i=(0,p.f3M)(p.Sil),a=(0,p.f3M)(Yy,{optional:!0})??[],l=(0,p.f3M)(aS,{optional:!0})??{},h=new ai(null,n,e,t,r,i,pF(a));return function eW(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,h),h}let ai=(()=>{class n{constructor(t,r,i,a,l,h,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=_,this.lastSuccessfulNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new kn.x,this.errorHandler=Y3,this.malformedUriErrorHandler=Q3,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Xe(void 0),this.urlHandlingStrategy=(0,p.f3M)(K3),this.routeReuseStrategy=(0,p.f3M)(H3),this.titleStrategy=(0,p.f3M)(aL),this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.canceledNavigationResolution="replace",this.navigationTransitions=new B3(this),this.configLoader=l.get(pN),this.configLoader.onLoadEndListener=N=>this.triggerEvent(new RG(N)),this.configLoader.onLoadStartListener=N=>this.triggerEvent(new MG(N)),this.ngModule=l.get(p.h0i),this.console=l.get(p.c2e);const A=l.get(p.R0b);this.isNgZoneEnabled=A instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=new Im,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=OF(this.currentUrlTree,this.rootComponentType),this.transitions=new Ta({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.navigationTransitions.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},a=t.state?.navigationId?t.state:null;if(t.state){const h={...t.state};delete h.navigationId,delete h.\u0275routerPageId,0!==Object.keys(h).length&&(i.state=h)}const l=this.parseUrl(t.url);this.scheduleNavigation(l,r,a,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(lN),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:h,preserveFragment:_}=r,w=i||this.routerState.root,b=_?this.currentUrlTree.fragment:l;let A=null;switch(h){case"merge":A={...this.currentUrlTree.queryParams,...a};break;case"preserve":A=this.currentUrlTree.queryParams;break;default:A=a||null}return null!==A&&(A=this.removeEmptyProps(A)),vG(w,this.currentUrlTree,t,A,b??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=bm(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function tW(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new p.vHH(4008,!1)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...X3}:!1===r?{...J3}:r,bm(t))return _F(this.currentUrlTree,t,i);const a=this.parseUrl(t);return _F(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Dm(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.getCurrentNavigation(),this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,l){if(this.disposed)return Promise.resolve(!1);let h,_,w;l?(h=l.resolve,_=l.reject,w=l.promise):w=new Promise((N,F)=>{h=N,_=F});const b=++this.navigationId;let A;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),A=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):A=0,this.setTransition({id:b,targetPageId:A,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,rawUrl:t,extras:a,resolve:h,reject:_,promise:w,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),w.catch(N=>Promise.reject(N))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===i?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const a=new XT(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(a),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){p.$Z()},n.\u0275prov=p.Yz7({token:n,factory:function(){return dL()},providedIn:"root"}),n})(),cI=(()=>{class n{constructor(t,r,i,a,l,h){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=l,this.locationStrategy=h,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new kn.x;const _=l.nativeElement.tagName;this.isAnchorElement="A"===_||"AREA"===_,this.isAnchorElement?this.subscription=t.events.subscribe(w=>{w instanceof Dm&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,p.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,p.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,p.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,a,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||a||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,p.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,a=this.el.nativeElement;null!==r?i.setAttribute(a,t,r):i.removeAttribute(a,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(ai),p.Y36(qy),p.$8M("tabindex"),p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(ge))},n.\u0275dir=p.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&p.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&p.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[p.TTD]}),n})(),hL=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.element=r,this.renderer=i,this.cdr=a,this.link=l,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new p.vpe,this.routerEventsSubscription=t.events.subscribe(h=>{h instanceof Dm&&this.update()})}ngAfterContentInit(){Xe(this.links.changes,Xe(null)).pipe((0,pa.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,Kt.D)(t).pipe((0,pa.J)()).subscribe(r=>{this.isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function nW(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(ai),p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(p.sBO),p.Y36(cI,8))},n.\u0275dir=p.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,i){if(1&t&&p.Suo(i,cI,5),2&t){let a;p.iGM(a=p.CRH())&&(r.links=a)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[p.TTD]}),n})();class fL{}let rW=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(U(t=>t instanceof Dm),Sf(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,p.MMx)(a.providers,t,`Route: ${a.path}`));const l=a._injector??t,h=a._loadedInjector??l;a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent?i.push(this.preloadConfig(l,a)):(a.children||a._loadedRoutes)&&i.push(this.processRoutes(h,a.children??a._loadedRoutes))}return(0,Kt.D)(i).pipe((0,pa.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Xe(null);const a=i.pipe((0,Ws.z)(l=>null===l?Xe(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,Kt.D)([a,l]).pipe((0,pa.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ai),p.LFG(p.Sil),p.LFG(p.lqb),p.LFG(fL),p.LFG(pN))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const gN=new p.OlP("");let pL=(()=>{class n{constructor(t,r,i,a={}){this.router=t,this.viewportScroller=r,this.zone=i,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof JR?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Dm&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof NF&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.router.triggerEvent(new NF(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){p.$Z()},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function Xy(n,e){return{\u0275kind:n,\u0275providers:e}}function mL(){const n=(0,p.f3M)(p.zs3);return e=>{const t=n.get(p.z2F);if(e!==t.components[0])return;const r=n.get(ai),i=n.get(_L);1===n.get(_N)&&r.initialNavigation(),n.get(yL,null,p.XFs.Optional)?.setUpPreloading(),n.get(gN,null,p.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const _L=new p.OlP("",{factory:()=>new kn.x}),_N=new p.OlP("",{providedIn:"root",factory:()=>1});const yL=new p.OlP("");function uW(n){return Xy(0,[{provide:yL,useExisting:rW},{provide:fL,useExisting:n}])}const vL=new p.OlP("ROUTER_FORROOT_GUARD"),lW=[Me,{provide:EF,useClass:qR},{provide:ai,useFactory:dL},iI,{provide:qy,useFactory:function gL(n){return n.routerState.root},deps:[ai]},pN,[]];function cW(){return new p.PXZ("Router",ai)}let wL=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[lW,[],{provide:Yy,multi:!0,useValue:t},{provide:vL,useFactory:pW,deps:[[ai,new p.FiY,new p.tp0]]},{provide:aS,useValue:r||{}},r?.useHash?{provide:ge,useClass:Le}:{provide:ge,useClass:De},{provide:gN,useFactory:()=>{const n=(0,p.f3M)(ai),e=(0,p.f3M)(Io),t=(0,p.f3M)(p.R0b),r=(0,p.f3M)(aS);return r.scrollOffset&&e.setOffset(r.scrollOffset),new pL(n,e,t,r)}},r?.preloadingStrategy?uW(r.preloadingStrategy).\u0275providers:[],{provide:p.PXZ,multi:!0,useFactory:cW},r?.initialNavigation?gW(r):[],[{provide:EL,useFactory:mL},{provide:p.tb,multi:!0,useExisting:EL}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Yy,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(vL,8))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[aN]}),n})();function pW(n){return"guarded"}function gW(n){return["disabled"===n.initialNavigation?Xy(3,[{provide:p.ip1,multi:!0,useFactory:()=>{const e=(0,p.f3M)(ai);return()=>{e.setUpLocationChangeListener()}}},{provide:_N,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Xy(2,[{provide:_N,useValue:0},{provide:p.ip1,multi:!0,deps:[p.zs3],useFactory:e=>{const t=e.get($,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const a=e.get(ai),l=e.get(_L);(function r(i){e.get(ai).events.pipe(U(l=>l instanceof Dm||l instanceof XT||l instanceof RF),(0,Ke.U)(l=>l instanceof Dm||l instanceof XT&&(0===l.code||1===l.code)&&null),U(l=>null!==l),re(1)).subscribe(()=>{i()})})(()=>{i(!0)}),a.afterPreactivation=()=>(i(!0),l.closed?Xe(void 0):l),a.initialNavigation()}))}}]).\u0275providers:[]]}const EL=new p.OlP("");let uS=(()=>{class n{constructor(t,r){this.afAuth=t,this.fs=r,this.afAuth.authState.subscribe(i=>{console.log(i),i?(this.userData=i,localStorage.setItem("user",JSON.stringify(this.userData))):localStorage.setItem("user","null")})}get isAuth(){const t=JSON.parse(localStorage.getItem("user"));return this.userData=t,null!==t}signin(t,r){return this.afAuth.signInWithEmailAndPassword(t,r)}SignUp(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r).then(i=>{console.log(i)}).catch(i=>{window.alert(i.message)})}signOut(){return this.afAuth.signOut()}getCities(){return this.fs.collection(`${this.userData.uid}`).snapshotChanges().pipe((0,Ke.U)(r=>r.map(i=>{const a=i.payload.doc.data();return{id:i.payload.doc.id,...a}})))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(gi),p.LFG(FP))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class lS{}class yN{}class yd{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),a=i.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(l):this.headers.set(a,[l])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof yd?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new yd;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof yd?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const a=e.value;if(a){let l=this.headers.get(t);if(!l)return;l=l.filter(h=>-1===a.indexOf(h)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class _W{encodeKey(e){return IL(e)}encodeValue(e){return IL(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const vW=/%(\d[a-f0-9])/gi,wW={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function IL(n){return encodeURIComponent(n).replace(vW,(e,t)=>wW[t]??e)}function cS(n){return`${n}`}class Mf{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new _W,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function yW(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[l,h]=-1==a?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,a)),e.decodeValue(i.slice(a+1))],_=t.get(l)||[];_.push(h),t.set(l,_)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(cS):[cS(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Mf({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(cS(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(cS(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class EW{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function CL(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function bL(n){return typeof Blob<"u"&&n instanceof Blob}function DL(n){return typeof FormData<"u"&&n instanceof FormData}class hI{constructor(e,t,r,i){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function IW(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new yd),this.context||(this.context=new EW),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const h=t.indexOf("?");this.urlWithParams=t+(-1===h?"?":h<t.length-1?"&":"")+l}}else this.params=new Mf,this.urlWithParams=t}serializeBody(){return null===this.body?null:CL(this.body)||bL(this.body)||DL(this.body)||function CW(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Mf?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||DL(this.body)?null:bL(this.body)?this.body.type||null:CL(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Mf?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,a=void 0!==e.body?e.body:this.body,l=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,h=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let _=e.headers||this.headers,w=e.params||this.params;const b=e.context??this.context;return void 0!==e.setHeaders&&(_=Object.keys(e.setHeaders).reduce((A,N)=>A.set(N,e.setHeaders[N]),_)),e.setParams&&(w=Object.keys(e.setParams).reduce((A,N)=>A.set(N,e.setParams[N]),w)),new hI(t,r,a,{params:w,headers:_,context:b,reportProgress:h,responseType:i,withCredentials:l})}}var ui=(()=>((ui=ui||{})[ui.Sent=0]="Sent",ui[ui.UploadProgress=1]="UploadProgress",ui[ui.ResponseHeader=2]="ResponseHeader",ui[ui.DownloadProgress=3]="DownloadProgress",ui[ui.Response=4]="Response",ui[ui.User=5]="User",ui))();class vN{constructor(e,t=200,r="OK"){this.headers=e.headers||new yd,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class wN extends vN{constructor(e={}){super(e),this.type=ui.ResponseHeader}clone(e={}){return new wN({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class dS extends vN{constructor(e={}){super(e),this.type=ui.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new dS({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class TL extends vN{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function EN(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let SL=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let a;if(t instanceof hI)a=t;else{let _,w;_=i.headers instanceof yd?i.headers:new yd(i.headers),i.params&&(w=i.params instanceof Mf?i.params:new Mf({fromObject:i.params})),a=new hI(t,r,void 0!==i.body?i.body:null,{headers:_,context:i.context,params:w,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const l=Xe(a).pipe(Sf(_=>this.handler.handle(_)));if(t instanceof hI||"events"===i.observe)return l;const h=l.pipe(U(_=>_ instanceof dS));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return h.pipe((0,Ke.U)(_=>{if(null!==_.body&&!(_.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return _.body}));case"blob":return h.pipe((0,Ke.U)(_=>{if(null!==_.body&&!(_.body instanceof Blob))throw new Error("Response is not a Blob.");return _.body}));case"text":return h.pipe((0,Ke.U)(_=>{if(null!==_.body&&"string"!=typeof _.body)throw new Error("Response is not a string.");return _.body}));default:return h.pipe((0,Ke.U)(_=>_.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Mf).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,EN(i,r))}post(t,r,i={}){return this.request("POST",t,EN(i,r))}put(t,r,i={}){return this.request("PUT",t,EN(i,r))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(lS))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function AL(n,e){return e(n)}function bW(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const TW=new p.OlP("HTTP_INTERCEPTORS"),fI=new p.OlP("HTTP_INTERCEPTOR_FNS");function SW(){let n=null;return(e,t)=>(null===n&&(n=((0,p.f3M)(TW,{optional:!0})??[]).reduceRight(bW,AL)),n(e,t))}let xL=(()=>{class n extends lS{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=Array.from(new Set(this.injector.get(fI)));this.chain=r.reduceRight((i,a)=>function DW(n,e,t){return(r,i)=>t.runInContext(()=>e(r,a=>n(a,i)))}(i,a,this.injector),AL)}return this.chain(t,r=>this.backend.handle(r))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(yN),p.LFG(p.lqb))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const RW=/^\)\]\}',?\n/;let RL=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Cr.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((F,B)=>i.setRequestHeader(F,B.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const F=t.detectContentTypeHeader();null!==F&&i.setRequestHeader("Content-Type",F)}if(t.responseType){const F=t.responseType.toLowerCase();i.responseType="json"!==F?F:"text"}const a=t.serializeBody();let l=null;const h=()=>{if(null!==l)return l;const F=i.statusText||"OK",B=new yd(i.getAllResponseHeaders()),oe=function NW(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return l=new wN({headers:B,status:i.status,statusText:F,url:oe}),l},_=()=>{let{headers:F,status:B,statusText:oe,url:he}=h(),We=null;204!==B&&(We=typeof i.response>"u"?i.responseText:i.response),0===B&&(B=We?200:0);let ot=B>=200&&B<300;if("json"===t.responseType&&"string"==typeof We){const rt=We;We=We.replace(RW,"");try{We=""!==We?JSON.parse(We):null}catch(ut){We=rt,ot&&(ot=!1,We={error:ut,text:We})}}ot?(r.next(new dS({body:We,headers:F,status:B,statusText:oe,url:he||void 0})),r.complete()):r.error(new TL({error:We,headers:F,status:B,statusText:oe,url:he||void 0}))},w=F=>{const{url:B}=h(),oe=new TL({error:F,status:i.status||0,statusText:i.statusText||"Unknown Error",url:B||void 0});r.error(oe)};let b=!1;const A=F=>{b||(r.next(h()),b=!0);let B={type:ui.DownloadProgress,loaded:F.loaded};F.lengthComputable&&(B.total=F.total),"text"===t.responseType&&!!i.responseText&&(B.partialText=i.responseText),r.next(B)},N=F=>{let B={type:ui.UploadProgress,loaded:F.loaded};F.lengthComputable&&(B.total=F.total),r.next(B)};return i.addEventListener("load",_),i.addEventListener("error",w),i.addEventListener("timeout",w),i.addEventListener("abort",w),t.reportProgress&&(i.addEventListener("progress",A),null!==a&&i.upload&&i.upload.addEventListener("progress",N)),i.send(a),r.next({type:ui.Sent}),()=>{i.removeEventListener("error",w),i.removeEventListener("abort",w),i.removeEventListener("load",_),i.removeEventListener("timeout",w),t.reportProgress&&(i.removeEventListener("progress",A),null!==a&&i.upload&&i.upload.removeEventListener("progress",N)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Js))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const IN=new p.OlP("XSRF_ENABLED"),NL="XSRF-TOKEN",kL=new p.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>NL}),PL="X-XSRF-TOKEN",OL=new p.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>PL});class FL{}let kW=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=wr(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ce),p.LFG(p.Lbi),p.LFG(kL))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function PW(n,e){const t=n.url.toLowerCase();if(!(0,p.f3M)(IN)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=(0,p.f3M)(FL).getToken(),i=(0,p.f3M)(OL);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var $r=(()=>(($r=$r||{})[$r.Interceptors=0]="Interceptors",$r[$r.LegacyInterceptors=1]="LegacyInterceptors",$r[$r.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",$r[$r.NoXsrfProtection=3]="NoXsrfProtection",$r[$r.JsonpSupport=4]="JsonpSupport",$r[$r.RequestsMadeViaParent=5]="RequestsMadeViaParent",$r))();function Jy(n,e){return{\u0275kind:n,\u0275providers:e}}function OW(...n){const e=[SL,RL,xL,{provide:lS,useExisting:xL},{provide:yN,useExisting:RL},{provide:fI,useValue:PW,multi:!0},{provide:IN,useValue:!0},{provide:FL,useClass:kW}];for(const t of n)e.push(...t.\u0275providers);return(0,p.MR2)(e)}const LL=new p.OlP("LEGACY_INTERCEPTOR_FN");function LW({cookieName:n,headerName:e}){const t=[];return void 0!==n&&t.push({provide:kL,useValue:n}),void 0!==e&&t.push({provide:OL,useValue:e}),Jy($r.CustomXsrfConfiguration,t)}let VW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[OW(Jy($r.LegacyInterceptors,[{provide:LL,useFactory:SW},{provide:fI,useExisting:LL,multi:!0}]),LW({cookieName:NL,headerName:PL}))]}),n})(),UW=(()=>{class n{constructor(t){this.http=t,this.restContryURL="https://restcountries.com/v3.1/all",this.baseURL="https://api.openweathermap.org/data/2.5/weather?q=",this.forcastURL="https://api.openweathermap.org/data/2.5/forecast?q=",this.appID="95b04f098ee7709a620354e26218d932"}getWeather(t,r="metric"){return this.http.get(`${this.baseURL}${t}&units=${r}&APPID=${this.appID}`).pipe(yt())}getCapital(){return this.http.get(`${this.restContryURL}`).pipe((0,Ke.U)(r=>r.map(a=>({...a.capital}))))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(SL))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),VL=(()=>{class n{constructor(){this.darkModeState=new Ta(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),BW=(()=>{class n{set city(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-weather-card"]],inputs:{city:"city"},decls:2,vars:0,template:function(t,r){1&t&&(p.TgZ(0,"p"),p._uU(1,"weather-card works!"),p.qZA())}}),n})();function jW(n,e){if(1&n&&p._UZ(0,"app-weather-card",3),2&n){const t=e.$implicit;p.Q6J("city",null==t?null:t.name)}}function HW(n,e){if(1&n&&(p.TgZ(0,"div",1),p.YNc(1,jW,1,1,"app-weather-card",2),p.qZA()),2&n){const t=p.oxw();p.xp6(1),p.Q6J("ngForOf",t.cities)}}let $W=(()=>{class n{constructor(t,r,i,a){this.fb=t,this.weatherService=r,this.ui=i,this.router=a,this.cities=[]}ngOnInit(){this.fb.getCities().subscribe(t=>{console.log(t)}),this.weatherService.getCapital().subscribe(t=>{console.log(t.sort())})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(uS),p.Y36(UW),p.Y36(VL),p.Y36(ai))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-home"]],decls:1,vars:1,consts:[["class","main__container",4,"ngIf"],[1,"main__container"],[3,"city",4,"ngFor","ngForOf"],[3,"city"]],template:function(t,r){1&t&&p.YNc(0,HW,2,1,"div",0),2&t&&p.Q6J("ngIf",r.cities.length)},dependencies:[ws,En,BW]}),n})(),GW=(()=>{class n{constructor(t,r){this.fb=t,this.router=r}canActivate(t,r){return!!this.fb.isAuth||(this.router.navigate(["/login"]),!1)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(uS),p.LFG(ai))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),UL=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq))},n.\u0275dir=p.lG2({type:n}),n})(),Tm=(()=>{class n extends UL{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,features:[p.qOj]}),n})();const Vl=new p.OlP("NgValueAccessor"),qW={provide:Vl,useExisting:(0,p.Gpc)(()=>hS),multi:!0},ZW=new p.OlP("CompositionEventMode");let hS=(()=>{class n extends UL{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function KW(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(ZW,8))},n.\u0275dir=p.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&p.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[p._Bn([qW]),p.qOj]}),n})();function Rf(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}const _s=new p.OlP("NgValidators"),Nf=new p.OlP("NgAsyncValidators");function GL(n){return Rf(n.value)?{required:!0}:null}function fS(n){return null}function YL(n){return null!=n}function QL(n){return(0,p.QGY)(n)?(0,Kt.D)(n):n}function XL(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function JL(n,e){return e.map(t=>t(n))}function eV(n){return n.map(e=>function XW(n){return!n.validate}(e)?e:t=>e.validate(t))}function CN(n){return null!=n?function tV(n){if(!n)return null;const e=n.filter(YL);return 0==e.length?null:function(t){return XL(JL(t,e))}}(eV(n)):null}function bN(n){return null!=n?function nV(n){if(!n)return null;const e=n.filter(YL);return 0==e.length?null:function(t){return function WW(...n){const e=(0,Or.jO)(n),{args:t,keys:r}=iF(n),i=new Cr.y(a=>{const{length:l}=t;if(!l)return void a.complete();const h=new Array(l);let _=l,w=l;for(let b=0;b<l;b++){let A=!1;(0,Mo.Xf)(t[b]).subscribe((0,Qn.x)(a,N=>{A||(A=!0,w--),h[b]=N},()=>_--,void 0,()=>{(!_||!A)&&(w||a.next(r?oF(r,h):h),a.complete())}))}});return e?i.pipe(sF(e)):i}(JL(t,e).map(QL)).pipe((0,Ke.U)(XL))}}(eV(n)):null}function rV(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function DN(n){return n?Array.isArray(n)?n:[n]:[]}function pS(n,e){return Array.isArray(n)?n.includes(e):n===e}function oV(n,e){const t=DN(e);return DN(n).forEach(i=>{pS(t,i)||t.push(i)}),t}function aV(n,e){return DN(e).filter(t=>!pS(n,t))}class uV{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=CN(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=bN(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class zs extends uV{get formDirective(){return null}get path(){return null}}class kf extends uV{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class lV{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let cV=(()=>{class n extends lV{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(kf,2))},n.\u0275dir=p.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&p.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[p.qOj]}),n})(),dV=(()=>{class n extends lV{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(zs,10))},n.\u0275dir=p.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&p.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[p.qOj]}),n})();const pI="VALID",mS="INVALID",ev="PENDING",gI="DISABLED";function xN(n){return(_S(n)?n.validators:n)||null}function MN(n,e){return(_S(e)?e.asyncValidators:n)||null}function _S(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class gV{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===pI}get invalid(){return this.status===mS}get pending(){return this.status==ev}get disabled(){return this.status===gI}get enabled(){return this.status!==gI}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(oV(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(oV(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(aV(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(aV(e,this._rawAsyncValidators))}hasValidator(e){return pS(this._rawValidators,e)}hasAsyncValidator(e){return pS(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ev,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=gI,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=pI,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===pI||this.status===ev)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?gI:pI}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ev,this._hasOwnPendingAsyncValidator=!0;const t=QL(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?gI:this.errors?mS:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ev)?ev:this._anyControlsHaveStatus(mS)?mS:pI}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){_S(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function sz(n){return Array.isArray(n)?CN(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function oz(n){return Array.isArray(n)?bN(n):n||null}(this._rawAsyncValidators)}}class RN extends gV{constructor(e,t,r){super(xN(t),MN(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function pV(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new p.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function fV(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new p.vHH(1e3,"");if(!r[t])throw new p.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const mI=new p.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>NN}),NN="always";function _I(n,e,t=NN){kN(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function lz(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&mV(n,e)})}(n,e),function dz(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function cz(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&mV(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function uz(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function wS(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function kN(n,e){const t=function iV(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(rV(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function sV(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(rV(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();wS(e._rawValidators,i),wS(e._rawAsyncValidators,i)}function mV(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const mz={provide:zs,useExisting:(0,p.Gpc)(()=>IS)},yI=(()=>Promise.resolve())();let IS=(()=>{class n extends zs{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new p.vpe,this.form=new RN({},CN(t),bN(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){yI.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),_I(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){yI.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){yI.then(()=>{const r=this._findContainer(t.path),i=new RN({});(function _V(n,e){kN(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){yI.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){yI.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function yV(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(_s,10),p.Y36(Nf,10),p.Y36(mI,8))},n.\u0275dir=p.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&p.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([mz]),p.qOj]}),n})();function vV(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function wV(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const EV=class extends gV{constructor(e=null,t,r){super(xN(t),MN(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),_S(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=wV(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){vV(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){vV(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){wV(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},vz={provide:kf,useExisting:(0,p.Gpc)(()=>LN)},bV=(()=>Promise.resolve())();let LN=(()=>{class n extends kf{constructor(t,r,i,a,l,h){super(),this._changeDetectorRef=l,this.callSetDisabledState=h,this.control=new EV,this._registered=!1,this.update=new p.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function FN(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===hS?t=a:function pz(n){return Object.getPrototypeOf(n.constructor)===Tm}(a)?r=a:i=a}),i||r||t||null}(0,a)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function ON(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){_I(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){bV.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,p.D6c)(r);bV.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function yS(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(zs,9),p.Y36(_s,10),p.Y36(Nf,10),p.Y36(Vl,10),p.Y36(p.sBO,8),p.Y36(mI,8))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[p._Bn([vz]),p.qOj,p.TTD]}),n})(),DV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),SV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();let Sm=(()=>{class n{constructor(){this._validator=fS}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):fS,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n,features:[p.TTD]}),n})();const Lz={provide:_s,useExisting:(0,p.Gpc)(()=>CS),multi:!0};let CS=(()=>{class n extends Sm{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=p.D6c,this.createValidator=t=>GL}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&p.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[p._Bn([Lz]),p.qOj]}),n})();const Bz={provide:_s,useExisting:(0,p.Gpc)(()=>$N),multi:!0};let $N=(()=>{class n extends Sm{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=t=>function FV(n){return"number"==typeof n?n:parseInt(n,10)}(t),this.createValidator=t=>function qL(n){return e=>Rf(e.value)||!function jL(n){return null!=n&&"number"==typeof n.length}(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&p.uIk("minlength",r._enabled?r.minlength:null)},inputs:{minlength:"minlength"},features:[p._Bn([Bz]),p.qOj]}),n})(),$z=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[SV]}),n})(),Gz=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:mI,useValue:t.callSetDisabledState??NN}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[$z]}),n})();const zz=[{path:"",component:$W,canActivate:[GW]},{path:"login",component:(()=>{class n{constructor(t,r){this.fb=t,this.router=r}ngOnInit(){}login(t){this.fb.signin(t.target.email.value,t.target.password.value).then(r=>{this.router.navigateByUrl("")}).catch(r=>{console.log("Something went wrong: ",r.message)})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(uS),p.Y36(ai))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-login"]],decls:20,vars:3,consts:[[1,"main__container"],[1,"login-card"],[1,"login-content"],[1,"login-header"],[1,"login-form",3,"ngSubmit"],["authform","ngForm"],["ngModel","","type","email","autofocus","","placeholder","Email","name","email","required","",1,"login-input"],["ngModel","","type","password","placeholder","Password","name","password","minlength","6","required","",1,"login-input"],["type","submit","name","submit","value","Login",1,"login-btn",3,"disabled"],[1,"signup-link-wrapper"],[1,"signup-notice"],["routerLink","/signup",1,"signup-link"],[1,"login-aside"],[1,"login-aside-overlay"],[1,"login-welcome-text"],[1,"login-aside-hr"]],template:function(t,r){if(1&t&&(p.TgZ(0,"div",0)(1,"div",1)(2,"main",2)(3,"span",3),p._uU(4,"Login"),p.qZA(),p.TgZ(5,"form",4,5),p.NdJ("ngSubmit",function(a){return r.login(a)}),p._UZ(7,"input",6)(8,"input",7)(9,"input",8),p.qZA(),p.TgZ(10,"div",9)(11,"span",10),p._uU(12,"Don't have an account?"),p.qZA(),p.TgZ(13,"a",11),p._uU(14,"Sign up"),p.qZA()()(),p.TgZ(15,"aside",12),p._UZ(16,"div",13),p.TgZ(17,"h1",14),p._uU(18,"Welcome Back!"),p.qZA(),p._UZ(19,"hr",15),p.qZA()()()),2&t){const i=p.MAs(6);p.xp6(9),p.ekj("btn-disabled",!i.form.valid),p.Q6J("disabled",!i.form.valid)}},dependencies:[cI,DV,hS,cV,dV,CS,$N,LN,IS],styles:[".main__container[_ngcontent-%COMP%]{min-height:90vh;width:90vw;display:flex;justify-content:center;align-items:center;overflow:hidden}.login-card[_ngcontent-%COMP%]{position:relative;display:flex;background-color:#fff;border-radius:10px;box-shadow:0 0 20px #0000001a;width:85%;min-height:80vh;animation:fadein 1s ease-in-out}.login-header[_ngcontent-%COMP%]{font-size:2.5rem;display:block;margin-bottom:2rem;color:#0c1066;letter-spacing:.2rem;font-weight:700;animation:fadein 1.75s ease-in-out}.login-content[_ngcontent-%COMP%]{flex:2 2;display:flex;flex-flow:column;justify-content:center;align-items:center;animation:fadein 1.5s ease-in-out;min-height:100%}.login-form[_ngcontent-%COMP%]{display:flex;flex-flow:column;width:80%;align-items:center;animation:slidedown 2s ease-in-out}.login-aside[_ngcontent-%COMP%]{animation:fadein 2.25s ease-in-out;flex:3 3;display:flex;justify-content:flex-end;flex-flow:column;min-height:100%;border-radius:0 10px 10px 0;background:url(https://source.unsplash.com/random/1200x900?mountain) no-repeat center center;background-size:cover;position:relative}.login-aside-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;width:100%;background-color:#00000026;border-radius:0 10px 10px 0}.login-aside-hr[_ngcontent-%COMP%]{height:.5rem;width:8rem;border:none;outline:none;background-color:#fff;position:relative;z-index:5;margin:0 0 8rem 3rem;animation:slideright 4s ease-out}.login-welcome-text[_ngcontent-%COMP%]{color:#fff;letter-spacing:.03rem;margin:0 0 2rem 3rem;font-size:2.75rem;position:relative;z-index:5;animation:slideright 2s ease-out}.login-input[_ngcontent-%COMP%]{margin:1rem 0;padding:1.5rem;border-radius:2rem;outline:none;border:none;box-shadow:0 0 2rem #0000ff4d;width:80%}.login-btn[_ngcontent-%COMP%]{background-color:#00ff9b;padding:1rem;border-radius:2rem;outline:none;border:none;color:#fff;font-size:1.1rem;cursor:pointer;margin-top:1.5rem;width:50%;box-shadow:0 0 2rem #0000ff1a}.login-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(to right,#03a9f4,#00ff9b)}.login-input[_ngcontent-%COMP%]::placeholder{color:#39437a;font-size:.9rem}.btn-disabled[_ngcontent-%COMP%]{background-color:#d3d3d3}.btn-disabled[_ngcontent-%COMP%]:hover{background:lightgray}.signup-link-wrapper[_ngcontent-%COMP%]{margin-top:3rem;animation:slideup 1s ease-in-out}.signup-link[_ngcontent-%COMP%]{text-transform:uppercase;margin-top:1rem;text-decoration:none;color:#ff3a82;margin-left:1rem}@media screen and (max-width: 959px){.login-aside[_ngcontent-%COMP%]{display:none}}"]}),n})()}];let qz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[wL.forRoot(zz),wL]}),n})();const Kz=function(n){return{"main__header-dark":n}},GN=function(n){return{"hamburger__icon__fill-dark":n}},Zz=function(n){return{"logo__text-dark":n}},Yz=function(n){return{"mode-toggle__bg-checked":n}},Qz=function(n){return{"mode-toggle__circle-checked":n}};function Xz(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"header",19)(1,"div",20),p.O4$(),p.TgZ(2,"svg",21),p.NdJ("click",function(){p.CHM(t);const i=p.oxw();return p.KtG(i.toggleMenu())}),p.TgZ(3,"defs")(4,"style"),p._uU(5," .hamburger__icon__fill { fill: #594e78; } "),p.qZA()(),p._UZ(6,"rect",22)(7,"rect",23)(8,"rect",24),p.qZA(),p.TgZ(9,"svg",25),p._UZ(10,"path",26)(11,"path",27),p.TgZ(12,"text",28)(13,"tspan",29),p._uU(14,"Minimus"),p.qZA()()()(),p.kcU(),p.TgZ(15,"h3",30),p._uU(16,"Today"),p.qZA(),p.TgZ(17,"div",31)(18,"span",32),p._uU(19,"Light"),p.qZA(),p.TgZ(20,"label",33)(21,"input",34),p.NdJ("click",function(){p.CHM(t);const i=p.oxw();return p.KtG(i.modeToggleSwitch())}),p.qZA(),p._UZ(22,"span",35)(23,"span",36),p.qZA(),p.TgZ(24,"span",32),p._uU(25,"Dark"),p.qZA()()()}if(2&n){const t=p.oxw();p.Q6J("ngClass",p.VKq(7,Kz,t.darkModeActive)),p.xp6(6),p.Q6J("ngClass",p.VKq(9,GN,t.darkModeActive)),p.xp6(1),p.Q6J("ngClass",p.VKq(11,GN,t.darkModeActive)),p.xp6(1),p.Q6J("ngClass",p.VKq(13,GN,t.darkModeActive)),p.xp6(4),p.Q6J("ngClass",p.VKq(15,Zz,t.darkModeActive)),p.xp6(10),p.Q6J("ngClass",p.VKq(17,Yz,t.darkModeActive)),p.xp6(1),p.Q6J("ngClass",p.VKq(19,Qz,t.darkModeActive))}}const Jz=function(n){return{"side-menu__container-active":n}},eq=function(n,e){return{"slide-menu-active":n,"slide-menu-active-dark":e}},tq=function(n){return{"menu-header-dark":n}},nq=function(n){return{"menu-links-dark":n}},GV=function(){return{exact:!0}},rq=function(n){return{"root__container-dark":n}};let iq=(()=>{class n{constructor(t,r,i){this.ui=t,this.router=r,this.fb=i,this.title="Minimus",this.showMenu=!1,this.darkModeActive=!1,this.loggedIn=this.fb.isAuth}ngOnInit(){this.ui.darkModeState.subscribe(t=>{this.darkModeActive=t})}toggleMenu(){this.showMenu=!this.showMenu}logout(){this.toggleMenu(),this.fb.signOut().then(t=>{this.router.navigateByUrl("/login")})}modeToggleSwitch(){this.ui.darkModeState.next(!this.darkModeActive)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(VL),p.Y36(ai),p.Y36(uS))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-root"]],decls:26,vars:21,consts:[[1,"side-menu__container",3,"ngClass","click"],[1,"slide-menu",3,"ngClass","click"],[1,"menu-header",3,"ngClass"],[1,"greeting__text"],[1,"profile-image__container"],["src","https://www.jamf.com/jamf-nation/img/default-avatars/generic-user-purple.png","alt","profile-image",1,"profile__image"],[1,"account-details"],[1,"name__text"],[1,"email__text"],[1,"menu-body"],[1,"menu-links",3,"ngClass"],["routerLink","","routerLinkActive","link-active",1,"menu-link",3,"routerLinkActiveOptions","click"],["routerLink","/add","routerLinkActive","link-active",1,"menu-link",3,"routerLinkActiveOptions","click"],[1,"menu-link",3,"click"],[1,"menu-footer"],[1,"copyright__text"],[1,"root__container",3,"ngClass"],["class","main__header",3,"ngClass",4,"ngIf"],[1,"main-container__bg"],[1,"main__header",3,"ngClass"],[1,"left__section"],["id","Menu_Burger_Icon","data-name","Menu Burger Icon","viewBox","31.5 30 49.9 32",1,"hamburger__icon",3,"click"],["id","Rectangle_9","width","49.9","height","4","data-name","Rectangle 9","rx","2","transform","translate(31.5 58)",1,"hamburger__icon__fill",3,"ngClass"],["id","Rectangle_10","width","49.9","height","4","data-name","Rectangle 10","rx","2","transform","translate(31.5 44)",1,"hamburger__icon__fill",3,"ngClass"],["id","Rectangle_11","width","49.9","height","4","data-name","Rectangle 11","rx","2","transform","translate(31.5 30)",1,"hamburger__icon__fill",3,"ngClass"],["viewBox","150.3 22.2 213.7 42.8",1,"logo__icon"],["fill","#00ff9b","d","M150.3 65V22.2L193 65z","data-name","Path 1"],["fill","#003eff","d","M193.1 65h-42.8L193 22.2z","data-name","Path 2"],["fill","#432c85","font-family","SegoeUI-Semibold,Segoe UI","font-size","30","font-weight","600","letter-spacing",".1em","transform","translate(220 56)",1,"logo__text",3,"ngClass"],["x","0","y","0"],[1,"date__text"],[1,"mode-toggle__container"],[1,"mode-toggle__text"],[1,"toggle-button__container"],["type","checkbox",1,"mode-toggle__input",3,"click"],[1,"mode-toggle__bg",3,"ngClass"],[1,"mode-toggle__circle",3,"ngClass"]],template:function(t,r){1&t&&(p.TgZ(0,"aside",0),p.NdJ("click",function(){return r.toggleMenu()}),p.TgZ(1,"nav",1),p.NdJ("click",function(a){return a.stopImmediatePropagation()}),p.TgZ(2,"section",2)(3,"span",3),p._uU(4,"Welcome Back"),p.qZA(),p.TgZ(5,"div",4),p._UZ(6,"img",5),p.qZA(),p.TgZ(7,"div",6),p._UZ(8,"span",7),p.TgZ(9,"span",8),p._uU(10,"Free Plan"),p.qZA()()(),p.TgZ(11,"section",9)(12,"ul",10)(13,"li",11),p.NdJ("click",function(){return r.toggleMenu()}),p._uU(14," Home "),p.qZA(),p.TgZ(15,"li",12),p.NdJ("click",function(){return r.toggleMenu()}),p._uU(16," Add City "),p.qZA(),p.TgZ(17,"li",13),p.NdJ("click",function(){return r.logout()}),p._uU(18,"Logout"),p.qZA()()(),p.TgZ(19,"section",14)(20,"small",15),p._uU(21,"Copyright \xa9 2019 Minimus"),p.qZA()()()(),p.TgZ(22,"main",16),p.YNc(23,Xz,26,21,"header",17),p.TgZ(24,"div",18),p._UZ(25,"router-outlet"),p.qZA()()),2&t&&(p.Q6J("ngClass",p.VKq(8,Jz,r.showMenu)),p.xp6(1),p.Q6J("ngClass",p.WLB(10,eq,r.showMenu,r.darkModeActive)),p.xp6(1),p.Q6J("ngClass",p.VKq(13,tq,r.darkModeActive)),p.xp6(10),p.Q6J("ngClass",p.VKq(15,nq,r.darkModeActive)),p.xp6(1),p.Q6J("routerLinkActiveOptions",p.DdM(17,GV)),p.xp6(2),p.Q6J("routerLinkActiveOptions",p.DdM(18,GV)),p.xp6(7),p.Q6J("ngClass",p.VKq(19,rq,r.darkModeActive)),p.xp6(1),p.Q6J("ngIf",r.loggedIn))},dependencies:[qr,En,oN,cI,hL],styles:['.root__container[_ngcontent-%COMP%]{width:100%;min-height:100vh;display:flex;align-items:center;flex-flow:column;transition:background .3s linear;background-image:linear-gradient(to top,#5ee7df 0%,#66a6ff 100%)}.root__container-dark[_ngcontent-%COMP%]{background:linear-gradient(to bottom,#372865,#000000)}.side-menu__container[_ngcontent-%COMP%]{position:fixed;left:0;top:0;width:100%;overflow:hidden;pointer-events:none;z-index:50}.side-menu__container-active[_ngcontent-%COMP%]{pointer-events:auto}.side-menu__container[_ngcontent-%COMP%]:before{content:"";cursor:pointer;position:absolute;display:block;top:0;left:0;width:100%;height:100%;background-color:#0c1066;opacity:0;transition:opacity .3s linear;will-change:opacity}.side-menu__container-active[_ngcontent-%COMP%]:before{opacity:.3}.slide-menu[_ngcontent-%COMP%]{box-sizing:border-box;transform:translate(-200%);position:relative;top:0;left:0;z-index:50;min-height:100vh;width:90%;max-width:26rem;background-color:#fff;box-shadow:0 0 2rem #0000ff1a;display:grid;grid-template-columns:1fr;grid-template-rows:2fr 4fr 1fr;grid-gap:1rem;transition:transform .3s linear;will-change:transform}.slide-menu-active[_ngcontent-%COMP%]{transform:none}.slide-menu-active-dark[_ngcontent-%COMP%]{background-color:#2b244d}.menu-header[_ngcontent-%COMP%]{background:linear-gradient(to right,#00ff9b,#5f84fb);display:grid;grid-template-rows:1fr 4fr;grid-template-columns:1fr 4fr;grid-template-areas:"greeting greeting" "image details";box-sizing:border-box;width:100%;align-content:center;color:#fff;box-shadow:0 .5rem 2rem #00f3}.menu-header-dark[_ngcontent-%COMP%]{background:linear-gradient(to top,#30cfd0 0%,#330867 100%)}.greeting__text[_ngcontent-%COMP%]{grid-area:greeting;font-size:1.25rem;letter-spacing:.15rem;text-transform:uppercase;margin-top:1rem;justify-self:center;align-self:center}.account-details[_ngcontent-%COMP%]{grid-area:details;display:flex;flex-flow:column;margin-left:1rem;align-self:center}.name__text[_ngcontent-%COMP%]{font-size:1.15rem;margin-bottom:.5rem}.email__text[_ngcontent-%COMP%]{font-size:.9rem;letter-spacing:.1rem}.menu-body[_ngcontent-%COMP%]{display:grid;width:100%}.menu-links[_ngcontent-%COMP%]{display:flex;flex-flow:column;list-style:none}.menu-links-dark[_ngcontent-%COMP%]{color:#fff}.link-active[_ngcontent-%COMP%]{color:#495cfc;border-bottom:1px solid #495cfc}.menu-link[_ngcontent-%COMP%]{outline:none;font-size:1rem;padding:1rem 0;margin:.5rem 0;cursor:pointer}.profile-image__container[_ngcontent-%COMP%]{grid-area:image;margin-right:.5rem;border-radius:50%;height:4rem;width:4rem;overflow:hidden;display:flex;justify-content:center;align-items:center;background-color:#fff;align-self:center;margin-left:2rem}.profile__image[_ngcontent-%COMP%]{max-width:4rem}.main__header[_ngcontent-%COMP%]{background-color:#fff;width:100%;display:grid;grid-template-columns:1fr 1fr .25fr;box-shadow:0 0 2rem #0000ff1a;margin:0;min-height:4rem;align-items:center;animation:slidedown .5s ease-in-out,fadein 1s ease-in-out}.main__header-dark[_ngcontent-%COMP%]{background-color:#2b244d;color:#fff}.toggle-button__container[_ngcontent-%COMP%]{cursor:pointer;position:relative;margin:0 .75rem 0 .25rem;display:inline-flex}.mode-toggle__container[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:nowrap}.mode-toggle__input[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none}.mode-toggle__bg[_ngcontent-%COMP%]{height:1rem;width:2rem;border-radius:.5rem;background-color:#00000080;display:inline-block;transition:background-color .3s linear}.mode-toggle__circle[_ngcontent-%COMP%]{height:1.3rem;width:1.3rem;background-color:#2b244d;position:absolute;top:-.18rem;border-radius:50%;box-shadow:0 0 #0000ff80;transition:left .3s linear;left:.2rem}.mode-toggle__circle-checked[_ngcontent-%COMP%]{background-color:#fff;left:1.5rem}.mode-toggle__bg-checked[_ngcontent-%COMP%]{background-color:#ff0070}.mode-toggle__text[_ngcontent-%COMP%]{font-size:.75rem;text-transform:uppercase;letter-spacing:.1rem}.left__section[_ngcontent-%COMP%]{display:grid;grid-template-rows:1fr;grid-template-columns:1fr 1fr;max-width:5rem}.date__text[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.1rem;display:inline;margin:.5rem 0}.hamburger__icon[_ngcontent-%COMP%]{position:relative;z-index:50;height:1rem;padding:.5rem 1.5rem;margin-right:1rem;cursor:pointer}.logo__icon[_ngcontent-%COMP%]{height:2rem;margin-left:1rem}.logo__text[_ngcontent-%COMP%]{fill:#2b244d}.logo__text-dark[_ngcontent-%COMP%]{fill:#fff}.hamburger__icon__fill[_ngcontent-%COMP%]{fill:#2b244d}.hamburger__icon__fill-dark[_ngcontent-%COMP%]{fill:#fff}.main-container__bg[_ngcontent-%COMP%]{min-height:100vh;width:100vw;display:flex;justify-content:center;align-items:center}.copyright__text[_ngcontent-%COMP%]{display:block;text-align:center}@media screen and (max-width: 959px){.main__header[_ngcontent-%COMP%]{grid-template-columns:1fr;justify-items:center;padding:1rem 0;min-height:8rem}.left__section[_ngcontent-%COMP%]{justify-self:start;max-width:none;grid-template-columns:0 5fr;width:100%}.logo__icon[_ngcontent-%COMP%]{margin:0 auto}.hamburger__icon[_ngcontent-%COMP%]{margin-right:0}.menu-header[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;flex-flow:column;align-items:center;justify-content:space-around}}@media only screen and (max-width: 300px){.slide-menu[_ngcontent-%COMP%]{width:100%}}']}),n})(),sq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n,bootstrap:[iq]}),n.\u0275inj=p.cJS({imports:[Qf,qz,VW,ar.hO.initializeApp(pc_config),uh,xB,ok,U$,Gz]}),n})();(0,p.G48)(),uc().bootstrapModule(sq).catch(n=>console.error(n))},5867:(lt,Ce,L)=>{L.d(Ce,{C6:()=>p.getApps,Mq:()=>p.getApp});var p=L(9681);(0,p.registerVersion)("firebase","9.14.0","app")},127:(lt,Ce,L)=>{L.d(Ce,{Z:()=>p.Z});var p=L(3942);p.Z.registerVersion("firebase","9.14.0","app-compat")},1277:(lt,Ce,L)=>{L.r(Ce);var p=L(5861),J=L(3942),O=L(2090),ae=L(9681),se=L(1877),fe=L(655),ce=L(4859);const Ye=function Be(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},at=function Se(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ge=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),De=new se.Yd("@firebase/auth");function Le(v,...f){De.logLevel<=se.in.ERROR&&De.error(`Auth (${ae.SDK_VERSION}): ${v}`,...f)}function Me(v,...f){throw Oe(v,...f)}function Ee(v,...f){return Oe(v,...f)}function Re(v,f,m){const E=Object.assign(Object.assign({},at()),{[f]:m});return new O.LL("auth","Firebase",E).create(f,{appName:v.name})}function je(v,f,m){if(!(f instanceof m))throw m.name!==f.constructor.name&&Me(v,"argument-error"),Re(v,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Oe(v,...f){if("string"!=typeof v){const m=f[0],E=[...f.slice(1)];return E[0]&&(E[0].appName=v.name),v._errorFactory.create(m,...E)}return ge.create(v,...f)}function H(v,f,...m){if(!v)throw Oe(f,...m)}function we(v){const f="INTERNAL ASSERTION FAILED: "+v;throw Le(f),new Error(f)}function K(v,f){v||we(f)}const X=new Map;function ie(v){K(v instanceof Function,"Expected a class definition");let f=X.get(v);return f?(K(f instanceof v,"Instance stored in cache mismatched with class"),f):(f=new v,X.set(v,f),f)}function Fe(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function ct(){return"http:"===sn()||"https:"===sn()}function sn(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Lt{constructor(f,m){this.shortDelay=f,this.longDelay=m,K(m>f,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function hn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ct()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function gt(v,f){K(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return f?`${m}${f.startsWith("/")?f.slice(1):f}`:m}class en{static initialize(f,m,E){this.fetchImpl=f,m&&(this.headersImpl=m),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void we("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void we("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void we("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Sr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Gr=new Lt(3e4,6e4);function mt(v,f){return v.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:v.tenantId}):f}function wn(v,f,m,E){return yi.apply(this,arguments)}function yi(){return(yi=(0,p.Z)(function*(v,f,m,E,x={}){return li(v,x,(0,p.Z)(function*(){let k={},z={};E&&("GET"===f?z=E:k={body:JSON.stringify(E)});const le=(0,O.xO)(Object.assign({key:v.config.apiKey},z)).slice(1),Ue=yield v._getAdditionalHeaders();return Ue["Content-Type"]="application/json",v.languageCode&&(Ue["X-Firebase-Locale"]=v.languageCode),en.fetch()(qs(v,v.config.apiHost,m,le),Object.assign({method:f,headers:Ue,referrerPolicy:"no-referrer"},k))}))})).apply(this,arguments)}function li(v,f,m){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,p.Z)(function*(v,f,m){v._canInitEmulator=!1;const E=Object.assign(Object.assign({},Sr),f);try{const x=new vi(v),k=yield Promise.race([m(),x.promise]);x.clearNetworkTimeout();const z=yield k.json();if("needConfirmation"in z)throw zr(v,"account-exists-with-different-credential",z);if(k.ok&&!("errorMessage"in z))return z;{const le=k.ok?z.errorMessage:z.error.message,[Ue,Je]=le.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ue)throw zr(v,"credential-already-in-use",z);if("EMAIL_EXISTS"===Ue)throw zr(v,"email-already-in-use",z);if("USER_DISABLED"===Ue)throw zr(v,"user-disabled",z);const It=E[Ue]||Ue.toLowerCase().replace(/[_\s]+/g,"-");if(Je)throw Re(v,It,Je);Me(v,It)}}catch(x){if(x instanceof O.ZR)throw x;Me(v,"network-request-failed")}})).apply(this,arguments)}function Ar(v,f,m,E){return _o.apply(this,arguments)}function _o(){return(_o=(0,p.Z)(function*(v,f,m,E,x={}){const k=yield wn(v,f,m,E,x);return"mfaPendingCredential"in k&&Me(v,"multi-factor-auth-required",{_serverResponse:k}),k})).apply(this,arguments)}function qs(v,f,m,E){const x=`${f}${m}?${E}`;return v.config.emulator?gt(v.config,x):`${v.config.apiScheme}://${x}`}class vi{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((m,E)=>{this.timer=setTimeout(()=>E(Ee(this.auth,"network-request-failed")),Gr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function zr(v,f,m){const E={appName:v.name};m.email&&(E.email=m.email),m.phoneNumber&&(E.phoneNumber=m.phoneNumber);const x=Ee(v,f,E);return x.customData._tokenResponse=m,x}function _n(){return(_n=(0,p.Z)(function*(v,f){return wn(v,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function ci(v,f){return _t.apply(this,arguments)}function _t(){return(_t=(0,p.Z)(function*(v,f){return wn(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ys(v,f){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,p.Z)(function*(v,f){return wn(v,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function Sn(v){if(v)try{const f=new Date(Number(v));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function Mt(){return(Mt=(0,p.Z)(function*(v,f=!1){const m=(0,O.m9)(v),E=yield m.getIdToken(f),x=Tt(E);H(x&&x.exp&&x.auth_time&&x.iat,m.auth,"internal-error");const k="object"==typeof x.firebase?x.firebase:void 0,z=k?.sign_in_provider;return{claims:x,token:E,authTime:Sn(vt(x.auth_time)),issuedAtTime:Sn(vt(x.iat)),expirationTime:Sn(vt(x.exp)),signInProvider:z||null,signInSecondFactor:k?.sign_in_second_factor||null}})).apply(this,arguments)}function vt(v){return 1e3*Number(v)}function Tt(v){var f;const[m,E,x]=v.split(".");if(void 0===m||void 0===E||void 0===x)return Le("JWT malformed, contained fewer than 3 sections"),null;try{const k=(0,O.tV)(E);return k?JSON.parse(k):(Le("Failed to decode base64 JWT payload"),null)}catch(k){return Le("Caught error parsing JWT payload as JSON",null===(f=k)||void 0===f?void 0:f.toString()),null}}function An(v,f){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,p.Z)(function*(v,f,m=!1){if(m)return f;try{return yield f}catch(E){throw E instanceof O.ZR&&Li(E)&&v.auth.currentUser===v&&(yield v.auth.signOut()),E}})).apply(this,arguments)}function Li({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class vr{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var m;if(f){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const x=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(f=!1){var m=this;if(!this.isRunning)return;const E=this.getInterval(f);this.timerId=setTimeout((0,p.Z)(function*(){yield m.iteration()}),E)}iteration(){var f=this;return(0,p.Z)(function*(){var m;try{yield f.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===(null===(m=E)||void 0===m?void 0:m.code)&&f.schedule(!0))}f.schedule()})()}}class Wo{constructor(f,m){this.createdAt=f,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sn(this.lastLoginAt),this.creationTime=Sn(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ln(v){return ts.apply(this,arguments)}function ts(){return(ts=(0,p.Z)(function*(v){var f;const m=v.auth,E=yield v.getIdToken(),x=yield An(v,ys(m,{idToken:E}));H(x?.users.length,m,"internal-error");const k=x.users[0];v._notifyReloadListener(k);const z=null!==(f=k.providerUserInfo)&&void 0!==f&&f.length?He(k.providerUserInfo):[],le=ns(v.providerData,z),It=!!v.isAnonymous&&!(v.email&&k.passwordHash||le?.length),ht={uid:k.localId,displayName:k.displayName||null,photoURL:k.photoUrl||null,email:k.email||null,emailVerified:k.emailVerified||!1,phoneNumber:k.phoneNumber||null,tenantId:k.tenantId||null,providerData:le,metadata:new Wo(k.createdAt,k.lastLoginAt),isAnonymous:It};Object.assign(v,ht)})).apply(this,arguments)}function Mr(){return(Mr=(0,p.Z)(function*(v){const f=(0,O.m9)(v);yield ln(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function ns(v,f){return[...v.filter(E=>!f.some(x=>x.providerId===E.providerId)),...f]}function He(v){return v.map(f=>{var{providerId:m}=f,E=(0,fe._T)(f,["providerId"]);return{providerId:m,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function tt(){return(tt=(0,p.Z)(function*(v,f){const m=yield li(v,{},(0,p.Z)(function*(){const E=(0,O.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:x,apiKey:k}=v.config,z=qs(v,x,"/v1/token",`key=${k}`),le=yield v._getAdditionalHeaders();return le["Content-Type"]="application/x-www-form-urlencoded",en.fetch()(z,{method:"POST",headers:le,body:E})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class bt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){H(f.idToken,"internal-error"),H(typeof f.idToken<"u","internal-error"),H(typeof f.refreshToken<"u","internal-error");const m="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function vs(v){const f=Tt(v);return H(f,"internal-error"),H(typeof f.exp<"u","internal-error"),H(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,m)}getToken(f,m=!1){var E=this;return(0,p.Z)(function*(){return H(!E.accessToken||E.refreshToken,f,"user-token-expired"),m||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(f,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,m){var E=this;return(0,p.Z)(function*(){const{accessToken:x,refreshToken:k,expiresIn:z}=yield function Te(v,f){return tt.apply(this,arguments)}(f,m);E.updateTokensAndExpiration(x,k,Number(z))})()}updateTokensAndExpiration(f,m,E){this.refreshToken=m||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(f,m){const{refreshToken:E,accessToken:x,expirationTime:k}=m,z=new bt;return E&&(H("string"==typeof E,"internal-error",{appName:f}),z.refreshToken=E),x&&(H("string"==typeof x,"internal-error",{appName:f}),z.accessToken=x),k&&(H("number"==typeof k,"internal-error",{appName:f}),z.expirationTime=k),z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new bt,this.toJSON())}_performRefresh(){return we("not implemented")}}function Dt(v,f){H("string"==typeof v||typeof v>"u","internal-error",{appName:f})}class Ot{constructor(f){var{uid:m,auth:E,stsTokenManager:x}=f,k=(0,fe._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=E,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=k.displayName||null,this.email=k.email||null,this.emailVerified=k.emailVerified||!1,this.phoneNumber=k.phoneNumber||null,this.photoURL=k.photoURL||null,this.isAnonymous=k.isAnonymous||!1,this.tenantId=k.tenantId||null,this.providerData=k.providerData?[...k.providerData]:[],this.metadata=new Wo(k.createdAt||void 0,k.lastLoginAt||void 0)}getIdToken(f){var m=this;return(0,p.Z)(function*(){const E=yield An(m,m.stsTokenManager.getToken(m.auth,f));return H(E,m.auth,"internal-error"),m.accessToken!==E&&(m.accessToken=E,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),E})()}getIdTokenResult(f){return function Zs(v){return Mt.apply(this,arguments)}(this,f)}reload(){return function Zt(v){return Mr.apply(this,arguments)}(this)}_assign(f){this!==f&&(H(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(m=>Object.assign({},m)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new Ot(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){H(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,m=!1){var E=this;return(0,p.Z)(function*(){let x=!1;f.idToken&&f.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(f),x=!0),m&&(yield ln(E)),yield E.auth._persistUserIfCurrent(E),x&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var f=this;return(0,p.Z)(function*(){const m=yield f.getIdToken();return yield An(f,function Ks(v,f){return _n.apply(this,arguments)}(f.auth,{idToken:m})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,m){var E,x,k,z,le,Ue,Je,It;const ht=null!==(E=m.displayName)&&void 0!==E?E:void 0,Xn=null!==(x=m.email)&&void 0!==x?x:void 0,gi=null!==(k=m.phoneNumber)&&void 0!==k?k:void 0,uh=null!==(z=m.photoURL)&&void 0!==z?z:void 0,lh=null!==(le=m.tenantId)&&void 0!==le?le:void 0,Rp=null!==(Ue=m._redirectEventId)&&void 0!==Ue?Ue:void 0,Rs=null!==(Je=m.createdAt)&&void 0!==Je?Je:void 0,ru=null!==(It=m.lastLoginAt)&&void 0!==It?It:void 0,{uid:ch,emailVerified:yv,isAnonymous:vv,providerData:Ym,stsTokenManager:Fn}=m;H(ch&&Fn,f,"internal-error");const Qm=bt.fromJSON(this.name,Fn);H("string"==typeof ch,f,"internal-error"),Dt(ht,f.name),Dt(Xn,f.name),H("boolean"==typeof yv,f,"internal-error"),H("boolean"==typeof vv,f,"internal-error"),Dt(gi,f.name),Dt(uh,f.name),Dt(lh,f.name),Dt(Rp,f.name),Dt(Rs,f.name),Dt(ru,f.name);const ol=new Ot({uid:ch,auth:f,email:Xn,emailVerified:yv,displayName:ht,isAnonymous:vv,photoURL:uh,phoneNumber:gi,tenantId:lh,stsTokenManager:Qm,createdAt:Rs,lastLoginAt:ru});return Ym&&Array.isArray(Ym)&&(ol.providerData=Ym.map(wv=>Object.assign({},wv))),Rp&&(ol._redirectEventId=Rp),ol}static _fromIdTokenResponse(f,m,E=!1){return(0,p.Z)(function*(){const x=new bt;x.updateFromServerResponse(m);const k=new Ot({uid:m.localId,auth:f,stsTokenManager:x,isAnonymous:E});return yield ln(k),k})()}}const j=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(m,E){var x=this;return(0,p.Z)(function*(){x.storage[m]=E})()}_get(m){var E=this;return(0,p.Z)(function*(){const x=E.storage[m];return void 0===x?null:x})()}_remove(m){var E=this;return(0,p.Z)(function*(){delete E.storage[m]})()}_addListener(m,E){}_removeListener(m,E){}}return v.type="NONE",v})();function Z(v,f,m){return`firebase:${v}:${f}:${m}`}class ye{constructor(f,m,E){this.persistence=f,this.auth=m,this.userKey=E;const{config:x,name:k}=this.auth;this.fullUserKey=Z(this.userKey,x.apiKey,k),this.fullPersistenceKey=Z("persistence",x.apiKey,k),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,p.Z)(function*(){const m=yield f.persistence._get(f.fullUserKey);return m?Ot._fromJSON(f.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var m=this;return(0,p.Z)(function*(){if(m.persistence===f)return;const E=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=f,E?m.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,m,E="authUser"){return(0,p.Z)(function*(){if(!m.length)return new ye(ie(j),f,E);const x=(yield Promise.all(m.map(function(){var Je=(0,p.Z)(function*(It){if(yield It._isAvailable())return It});return function(It){return Je.apply(this,arguments)}}()))).filter(Je=>Je);let k=x[0]||ie(j);const z=Z(E,f.config.apiKey,f.name);let le=null;for(const Je of m)try{const It=yield Je._get(z);if(It){const ht=Ot._fromJSON(f,It);Je!==k&&(le=ht),k=Je;break}}catch{}const Ue=x.filter(Je=>Je._shouldAllowMigration);return k._shouldAllowMigration&&Ue.length?(k=Ue[0],le&&(yield k._set(z,le.toJSON())),yield Promise.all(m.map(function(){var Je=(0,p.Z)(function*(It){if(It!==k)try{yield It._remove(z)}catch{}});return function(It){return Je.apply(this,arguments)}}())),new ye(k,f,E)):new ye(k,f,E)})()}}function te(v){const f=v.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(xn(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(st(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(hr(f))return"Blackberry";if(Ht(f))return"Webos";if(Vt(f))return"Safari";if((f.includes("chrome/")||zt(f))&&!f.includes("edge/"))return"Chrome";if(wt(f))return"Android";{const E=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function st(v=(0,O.z$)()){return/firefox\//i.test(v)}function Vt(v=(0,O.z$)()){const f=v.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function zt(v=(0,O.z$)()){return/crios\//i.test(v)}function xn(v=(0,O.z$)()){return/iemobile/i.test(v)}function wt(v=(0,O.z$)()){return/android/i.test(v)}function hr(v=(0,O.z$)()){return/blackberry/i.test(v)}function Ht(v=(0,O.z$)()){return/webos/i.test(v)}function nr(v=(0,O.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function Pf(v=(0,O.z$)()){return nr(v)||wt(v)||Ht(v)||hr(v)||/windows phone/i.test(v)||xn(v)}function Au(v,f=[]){let m;switch(v){case"Browser":m=te((0,O.z$)());break;case"Worker":m=`${te((0,O.z$)())}-${v}`;break;default:m=v}const E=f.length?f.join(","):"FirebaseCore-web";return`${m}/JsCore/${ae.SDK_VERSION}/${E}`}class Ul{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,m){const E=k=>new Promise((z,le)=>{try{z(f(k))}catch(Ue){le(Ue)}});E.onAbort=m,this.queue.push(E);const x=this.queue.length-1;return()=>{this.queue[x]=()=>Promise.resolve()}}runMiddleware(f){var m=this;return(0,p.Z)(function*(){var E;if(m.auth.currentUser===f)return;const x=[];try{for(const k of m.queue)yield k(f),k.onAbort&&x.push(k.onAbort)}catch(k){x.reverse();for(const z of x)try{z()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:null===(E=k)||void 0===E?void 0:E.message})}})()}}class vd{constructor(f,m,E){this.app=f,this.heartbeatServiceProvider=m,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wd(this),this.idTokenSubscription=new wd(this),this.beforeStateQueue=new Ul(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ge,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(f,m){var E=this;return m&&(this._popupRedirectResolver=ie(m)),this._initializationPromise=this.queue((0,p.Z)(function*(){var x,k;if(!E._deleted&&(E.persistenceManager=yield ye.create(E,f),!E._deleted)){if(null!==(x=E._popupRedirectResolver)&&void 0!==x&&x._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(m),E.lastNotifiedUid=(null===(k=E.currentUser)||void 0===k?void 0:k.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,p.Z)(function*(){if(f._deleted)return;const m=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||m){if(f.currentUser&&m&&f.currentUser.uid===m.uid)return f._currentUser._assign(m),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(m,!0)}})()}initializeCurrentUser(f){var m=this;return(0,p.Z)(function*(){var E;const x=yield m.assertedPersistence.getCurrentUser();let k=x,z=!1;if(f&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const le=null===(E=m.redirectUser)||void 0===E?void 0:E._redirectEventId,Ue=k?._redirectEventId,Je=yield m.tryRedirectSignIn(f);(!le||le===Ue)&&Je?.user&&(k=Je.user,z=!0)}if(!k)return m.directlySetCurrentUser(null);if(!k._redirectEventId){if(z)try{yield m.beforeStateQueue.runMiddleware(k)}catch(le){k=x,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(le))}return k?m.reloadAndSetCurrentUserOrClear(k):m.directlySetCurrentUser(null)}return H(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===k._redirectEventId?m.directlySetCurrentUser(k):m.reloadAndSetCurrentUserOrClear(k)})()}tryRedirectSignIn(f){var m=this;return(0,p.Z)(function*(){let E=null;try{E=yield m._popupRedirectResolver._completeRedirectFn(m,f,!0)}catch{yield m._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(f){var m=this;return(0,p.Z)(function*(){var E;try{yield ln(f)}catch(x){if("auth/network-request-failed"!==(null===(E=x)||void 0===E?void 0:E.code))return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function Pt(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var f=this;return(0,p.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var m=this;return(0,p.Z)(function*(){const E=f?(0,O.m9)(f):null;return E&&H(E.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(E&&E._clone(m))})()}_updateCurrentUser(f,m=!1){var E=this;return(0,p.Z)(function*(){if(!E._deleted)return f&&H(E.tenantId===f.tenantId,E,"tenant-id-mismatch"),m||(yield E.beforeStateQueue.runMiddleware(f)),E.queue((0,p.Z)(function*(){yield E.directlySetCurrentUser(f),E.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,p.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var m=this;return this.queue((0,p.Z)(function*(){yield m.assertedPersistence.setPersistence(ie(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new O.LL("auth","Firebase",f())}onAuthStateChanged(f,m,E){return this.registerStateListener(this.authStateSubscription,f,m,E)}beforeAuthStateChanged(f,m){return this.beforeStateQueue.pushCallback(f,m)}onIdTokenChanged(f,m,E){return this.registerStateListener(this.idTokenSubscription,f,m,E)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,m){var E=this;return(0,p.Z)(function*(){const x=yield E.getOrInitRedirectPersistenceManager(m);return null===f?x.removeCurrentUser():x.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var m=this;return(0,p.Z)(function*(){if(!m.redirectPersistenceManager){const E=f&&ie(f)||m._popupRedirectResolver;H(E,m,"argument-error"),m.redirectPersistenceManager=yield ye.create(m,[ie(E._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(f){var m=this;return(0,p.Z)(function*(){var E,x;return m._isInitialized&&(yield m.queue((0,p.Z)(function*(){}))),(null===(E=m._currentUser)||void 0===E?void 0:E._redirectEventId)===f?m._currentUser:(null===(x=m.redirectUser)||void 0===x?void 0:x._redirectEventId)===f?m.redirectUser:null})()}_persistUserIfCurrent(f){var m=this;return(0,p.Z)(function*(){if(f===m.currentUser)return m.queue((0,p.Z)(function*(){return m.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(m=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,m,E,x){if(this._deleted)return()=>{};const k="function"==typeof m?m:m.next.bind(m),z=this._isInitialized?Promise.resolve():this._initializationPromise;return H(z,this,"internal-error"),z.then(()=>k(this.currentUser)),"function"==typeof m?f.addObserver(m,E,x):f.addObserver(m)}directlySetCurrentUser(f){var m=this;return(0,p.Z)(function*(){m.currentUser&&m.currentUser!==f&&m._currentUser._stopProactiveRefresh(),f&&m.isProactiveRefreshEnabled&&f._startProactiveRefresh(),m.currentUser=f,f?yield m.assertedPersistence.setCurrentUser(f):yield m.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return H(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Au(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,p.Z)(function*(){var m;const E={"X-Client-Version":f.clientVersion};f.app.options.appId&&(E["X-Firebase-gmpid"]=f.app.options.appId);const x=yield null===(m=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return x&&(E["X-Firebase-Client"]=x),E})()}}function Mn(v){return(0,O.m9)(v)}class wd{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,O.ne)(m=>this.observer=m)}get next(){return H(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ma(v){const f=v.indexOf(":");return f<0?"":v.substr(0,f+1)}function Yt(v){if(!v)return null;const f=Number(v);return isNaN(f)?null:f}class Bn{constructor(f,m){this.providerId=f,this.signInMethod=m}toJSON(){return we("not implemented")}_getIdTokenResponse(f){return we("not implemented")}_linkToIdToken(f,m){return we("not implemented")}_getReauthenticationResolver(f){return we("not implemented")}}function Kn(v,f){return wr.apply(this,arguments)}function wr(){return(wr=(0,p.Z)(function*(v,f){return wn(v,"POST","/v1/accounts:resetPassword",mt(v,f))})).apply(this,arguments)}function qr(v,f){return qe.apply(this,arguments)}function qe(){return(qe=(0,p.Z)(function*(v,f){return wn(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Nt(v,f){return dn.apply(this,arguments)}function dn(){return(dn=(0,p.Z)(function*(v,f){return wn(v,"POST","/v1/accounts:update",mt(v,f))})).apply(this,arguments)}function ws(){return(ws=(0,p.Z)(function*(v,f){return Ar(v,"POST","/v1/accounts:signInWithPassword",mt(v,f))})).apply(this,arguments)}function Rn(v,f){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,p.Z)(function*(v,f){return wn(v,"POST","/v1/accounts:sendOobCode",mt(v,f))})).apply(this,arguments)}function En(v,f){return yo.apply(this,arguments)}function yo(){return(yo=(0,p.Z)(function*(v,f){return Rn(v,f)})).apply(this,arguments)}function Ys(v,f){return kt.apply(this,arguments)}function kt(){return(kt=(0,p.Z)(function*(v,f){return Rn(v,f)})).apply(this,arguments)}function Na(v,f){return vo.apply(this,arguments)}function vo(){return(vo=(0,p.Z)(function*(v,f){return Rn(v,f)})).apply(this,arguments)}function Ed(v,f){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,p.Z)(function*(v,f){return Rn(v,f)})).apply(this,arguments)}function wo(){return(wo=(0,p.Z)(function*(v,f){return Ar(v,"POST","/v1/accounts:signInWithEmailLink",mt(v,f))})).apply(this,arguments)}function di(){return(di=(0,p.Z)(function*(v,f){return Ar(v,"POST","/v1/accounts:signInWithEmailLink",mt(v,f))})).apply(this,arguments)}class Es extends Bn{constructor(f,m,E,x=null){super("password",E),this._email=f,this._password=m,this._tenantId=x}static _fromEmailAndPassword(f,m){return new Es(f,m,"password")}static _fromEmailAndCode(f,m,E=null){return new Es(f,m,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(f){var m=this;return(0,p.Z)(function*(){switch(m.signInMethod){case"password":return function Nr(v,f){return ws.apply(this,arguments)}(f,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function Er(v,f){return wo.apply(this,arguments)}(f,{email:m._email,oobCode:m._password});default:Me(f,"internal-error")}})()}_linkToIdToken(f,m){var E=this;return(0,p.Z)(function*(){switch(E.signInMethod){case"password":return qr(f,{idToken:m,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function qo(v,f){return di.apply(this,arguments)}(f,{idToken:m,email:E._email,oobCode:E._password});default:Me(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function jn(v,f){return cn.apply(this,arguments)}function cn(){return(cn=(0,p.Z)(function*(v,f){return Ar(v,"POST","/v1/accounts:signInWithIdp",mt(v,f))})).apply(this,arguments)}class rs extends Bn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const m=new rs(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(m.idToken=f.idToken),f.accessToken&&(m.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(m.nonce=f.nonce),f.pendingToken&&(m.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(m.accessToken=f.oauthToken,m.secret=f.oauthTokenSecret):Me("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:x}=m,k=(0,fe._T)(m,["providerId","signInMethod"]);if(!E||!x)return null;const z=new rs(E,x);return z.idToken=k.idToken||void 0,z.accessToken=k.accessToken||void 0,z.secret=k.secret,z.nonce=k.nonce,z.pendingToken=k.pendingToken||null,z}_getIdTokenResponse(f){return jn(f,this.buildRequest())}_linkToIdToken(f,m){const E=this.buildRequest();return E.idToken=m,jn(f,E)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,jn(f,m)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),f.postBody=(0,O.xO)(m)}return f}}function xu(v,f){return ka.apply(this,arguments)}function ka(){return(ka=(0,p.Z)(function*(v,f){return wn(v,"POST","/v1/accounts:sendVerificationCode",mt(v,f))})).apply(this,arguments)}function wi(){return(wi=(0,p.Z)(function*(v,f){return Ar(v,"POST","/v1/accounts:signInWithPhoneNumber",mt(v,f))})).apply(this,arguments)}function ir(){return(ir=(0,p.Z)(function*(v,f){const m=yield Ar(v,"POST","/v1/accounts:signInWithPhoneNumber",mt(v,f));if(m.temporaryProof)throw zr(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Ff={USER_NOT_FOUND:"user-not-found"};function hi(){return(hi=(0,p.Z)(function*(v,f){return Ar(v,"POST","/v1/accounts:signInWithPhoneNumber",mt(v,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Ff)})).apply(this,arguments)}class Is extends Bn{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,m){return new Is({verificationId:f,verificationCode:m})}static _fromTokenResponse(f,m){return new Is({phoneNumber:f,temporaryProof:m})}_getIdTokenResponse(f){return function Qs(v,f){return wi.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,m){return function Eo(v,f){return ir.apply(this,arguments)}(f,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Kr(v,f){return hi.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:m,verificationId:E,verificationCode:x}=this.params;return f&&m?{temporaryProof:f,phoneNumber:m}:{sessionInfo:E,code:x}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:m,verificationCode:E,phoneNumber:x,temporaryProof:k}=f;return E||m||x||k?new Is({verificationId:m,verificationCode:E,phoneNumber:x,temporaryProof:k}):null}}class kr{constructor(f){var m,E,x,k,z,le;const Ue=(0,O.zd)((0,O.pd)(f)),Je=null!==(m=Ue.apiKey)&&void 0!==m?m:null,It=null!==(E=Ue.oobCode)&&void 0!==E?E:null,ht=function jl(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=Ue.mode)&&void 0!==x?x:null);H(Je&&It&&ht,"argument-error"),this.apiKey=Je,this.operation=ht,this.code=It,this.continueUrl=null!==(k=Ue.continueUrl)&&void 0!==k?k:null,this.languageCode=null!==(z=Ue.languageCode)&&void 0!==z?z:null,this.tenantId=null!==(le=Ue.tenantId)&&void 0!==le?le:null}static parseLink(f){const m=function Ko(v){const f=(0,O.zd)((0,O.pd)(v)).link,m=f?(0,O.zd)((0,O.pd)(f)).deep_link_id:null,E=(0,O.zd)((0,O.pd)(v)).deep_link_id;return(E?(0,O.zd)((0,O.pd)(E)).link:null)||E||m||f||v}(f);try{return new kr(m)}catch{return null}}}let Cd=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,E){return Es._fromEmailAndPassword(m,E)}static credentialWithLink(m,E){const x=kr.parseLink(E);return H(x,"argument-error"),Es._fromEmailAndCode(m,x.code,x.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Cs{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Xs extends Cs{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Pa extends Xs{static credentialFromJSON(f){const m="string"==typeof f?JSON.parse(f):f;return H("providerId"in m&&"signInMethod"in m,"argument-error"),rs._fromParams(m)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return H(f.idToken||f.accessToken,"argument-error"),rs._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Pa.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Pa.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:m,oauthAccessToken:E,oauthTokenSecret:x,pendingToken:k,nonce:z,providerId:le}=f;if(!E&&!x&&!m&&!k||!le)return null;try{return new Pa(le)._credential({idToken:m,accessToken:E,nonce:z,pendingToken:k})}catch{return null}}}let bd=(()=>{class v extends Xs{constructor(){super("facebook.com")}static credential(m){return rs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Lf=(()=>{class v extends Xs{constructor(){super("google.com"),this.addScope("profile")}static credential(m,E){return rs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:E})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:E,oauthAccessToken:x}=m;if(!E&&!x)return null;try{return v.credential(E,x)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Hl=(()=>{class v extends Xs{constructor(){super("github.com")}static credential(m){return rs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Mu extends Bn{constructor(f,m){super(f,f),this.pendingToken=m}_getIdTokenResponse(f){return jn(f,this.buildRequest())}_linkToIdToken(f,m){const E=this.buildRequest();return E.idToken=m,jn(f,E)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,jn(f,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:x,pendingToken:k}=m;return E&&x&&k&&E===x?new Mu(E,k):null}static _create(f,m){return new Mu(f,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Bi extends Cs{constructor(f){H(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Bi.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Bi.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const m=Mu.fromJSON(f);return H(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:m,providerId:E}=f;if(!m||!E)return null;try{return Mu._create(E,m)}catch{return null}}}let Td=(()=>{class v extends Xs{constructor(){super("twitter.com")}static credential(m,E){return rs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:E})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:E,oauthTokenSecret:x}=m;if(!E||!x)return null;try{return v.credential(E,x)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function $l(v,f){return Sd.apply(this,arguments)}function Sd(){return(Sd=(0,p.Z)(function*(v,f){return Ar(v,"POST","/v1/accounts:signUp",mt(v,f))})).apply(this,arguments)}class Ei{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,m,E,x=!1){return(0,p.Z)(function*(){const k=yield Ot._fromIdTokenResponse(f,E,x),z=Am(E);return new Ei({user:k,providerId:z,_tokenResponse:E,operationType:m})})()}static _forOperation(f,m,E){return(0,p.Z)(function*(){yield f._updateTokensIfNecessary(E,!0);const x=Am(E);return new Ei({user:f,providerId:x,_tokenResponse:E,operationType:m})})()}}function Am(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Wl(){return(Wl=(0,p.Z)(function*(v){var f;const m=Mn(v);if(yield m._initializationPromise,null!==(f=m.currentUser)&&void 0!==f&&f.isAnonymous)return new Ei({user:m.currentUser,providerId:null,operationType:"signIn"});const E=yield $l(m,{returnSecureToken:!0}),x=yield Ei._fromIdTokenResponse(m,"signIn",E,!0);return yield m._updateCurrentUser(x.user),x})).apply(this,arguments)}class Oa extends O.ZR{constructor(f,m,E,x){var k;super(m.code,m.message),this.operationType=E,this.user=x,Object.setPrototypeOf(this,Oa.prototype),this.customData={appName:f.name,tenantId:null!==(k=f.tenantId)&&void 0!==k?k:void 0,_serverResponse:m.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(f,m,E,x){return new Oa(f,m,E,x)}}function xm(v,f,m,E){return("reauthenticate"===f?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(k=>{throw"auth/multi-factor-auth-required"===k.code?Oa._fromErrorAndOperation(v,k,f,E):k})}function Io(v){return new Set(v.map(({providerId:f})=>f).filter(f=>!!f))}function Ii(){return(Ii=(0,p.Z)(function*(v,f){const m=(0,O.m9)(v);yield Js(!0,m,f);const{providerUserInfo:E}=yield ci(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[f]}),x=Io(E||[]);return m.providerData=m.providerData.filter(k=>x.has(k.providerId)),x.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function Nu(v,f){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,p.Z)(function*(v,f,m=!1){const E=yield An(v,f._linkToIdToken(v.auth,yield v.getIdToken()),m);return Ei._forOperation(v,"link",E)})).apply(this,arguments)}function Js(v,f,m){return ku.apply(this,arguments)}function ku(){return(ku=(0,p.Z)(function*(v,f,m){yield ln(f);const x=!1===v?"provider-already-linked":"no-such-provider";H(Io(f.providerData).has(m)===v,f.auth,x)})).apply(this,arguments)}function Pu(v,f){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,p.Z)(function*(v,f,m=!1){var E;const{auth:x}=v,k="reauthenticate";try{const z=yield An(v,xm(x,k,f,v),m);H(z.idToken,x,"internal-error");const le=Tt(z.idToken);H(le,x,"internal-error");const{sub:Ue}=le;return H(v.uid===Ue,x,"user-mismatch"),Ei._forOperation(v,k,z)}catch(z){throw"auth/user-not-found"===(null===(E=z)||void 0===E?void 0:E.code)&&Me(x,"user-mismatch"),z}})).apply(this,arguments)}function La(v,f){return zl.apply(this,arguments)}function zl(){return(zl=(0,p.Z)(function*(v,f,m=!1){const E="signIn",x=yield xm(v,E,f),k=yield Ei._fromIdTokenResponse(v,E,x);return m||(yield v._updateCurrentUser(k.user)),k})).apply(this,arguments)}function Nn(v,f){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,p.Z)(function*(v,f){return La(Mn(v),f)})).apply(this,arguments)}function Pr(v,f){return eo.apply(this,arguments)}function eo(){return(eo=(0,p.Z)(function*(v,f){const m=(0,O.m9)(v);return yield Js(!1,m,f.providerId),Nu(m,f)})).apply(this,arguments)}function Fu(v,f){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,p.Z)(function*(v,f){return Pu((0,O.m9)(v),f)})).apply(this,arguments)}function xd(v,f){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,p.Z)(function*(v,f){return Ar(v,"POST","/v1/accounts:signInWithCustomToken",mt(v,f))})).apply(this,arguments)}function Va(){return(Va=(0,p.Z)(function*(v,f){const m=Mn(v),E=yield xd(m,{token:f,returnSecureToken:!0}),x=yield Ei._fromIdTokenResponse(m,"signIn",E);return yield m._updateCurrentUser(x.user),x})).apply(this,arguments)}class Vu{constructor(f,m){this.factorId=f,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(f,m){return"phoneInfo"in m?Ua._fromServerResponse(f,m):Me(f,"internal-error")}}class Ua extends Vu{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,m){return new Ua(m)}}function Ir(v,f,m){var E;H((null===(E=m.url)||void 0===E?void 0:E.length)>0,v,"invalid-continue-uri"),H(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),f.continueUrl=m.url,f.dynamicLinkDomain=m.dynamicLinkDomain,f.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(H(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),f.iOSBundleId=m.iOS.bundleId),m.android&&(H(m.android.packageName.length>0,v,"missing-android-pkg-name"),f.androidInstallApp=m.android.installApp,f.androidMinimumVersionCode=m.android.minimumVersion,f.androidPackageName=m.android.packageName)}function Qo(){return(Qo=(0,p.Z)(function*(v,f,m){const E=(0,O.m9)(v),x={requestType:"PASSWORD_RESET",email:f};m&&Ir(E,x,m),yield Ys(E,x)})).apply(this,arguments)}function Zr(){return(Zr=(0,p.Z)(function*(v,f,m){yield Kn((0,O.m9)(v),{oobCode:f,newPassword:m})})).apply(this,arguments)}function Co(){return(Co=(0,p.Z)(function*(v,f){yield Nt((0,O.m9)(v),{oobCode:f})})).apply(this,arguments)}function Uu(v,f){return is.apply(this,arguments)}function is(){return(is=(0,p.Z)(function*(v,f){const m=(0,O.m9)(v),E=yield Kn(m,{oobCode:f}),x=E.requestType;switch(H(x,m,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":H(E.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":H(E.mfaInfo,m,"internal-error");default:H(E.email,m,"internal-error")}let k=null;return E.mfaInfo&&(k=Vu._fromServerResponse(Mn(m),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:k},operation:x}})).apply(this,arguments)}function Ba(){return(Ba=(0,p.Z)(function*(v,f){const{data:m}=yield Uu((0,O.m9)(v),f);return m.email})).apply(this,arguments)}function Yl(){return(Yl=(0,p.Z)(function*(v,f,m){const E=Mn(v),x=yield $l(E,{returnSecureToken:!0,email:f,password:m}),k=yield Ei._fromIdTokenResponse(E,"signIn",x);return yield E._updateCurrentUser(k.user),k})).apply(this,arguments)}function Md(){return(Md=(0,p.Z)(function*(v,f,m){const E=(0,O.m9)(v),x={requestType:"EMAIL_SIGNIN",email:f};H(m.handleCodeInApp,E,"argument-error"),m&&Ir(E,x,m),yield Na(E,x)})).apply(this,arguments)}function ja(){return(ja=(0,p.Z)(function*(v,f,m){const E=(0,O.m9)(v),x=Cd.credentialWithLink(f,m||Fe());return H(x._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Nn(E,x)})).apply(this,arguments)}function Rm(v,f){return be.apply(this,arguments)}function be(){return(be=(0,p.Z)(function*(v,f){return wn(v,"POST","/v1/accounts:createAuthUri",mt(v,f))})).apply(this,arguments)}function Ha(){return(Ha=(0,p.Z)(function*(v,f){const E={identifier:f,continueUri:ct()?Fe():"http://localhost"},{signinMethods:x}=yield Rm((0,O.m9)(v),E);return x||[]})).apply(this,arguments)}function Zn(){return(Zn=(0,p.Z)(function*(v,f){const m=(0,O.m9)(v),x={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};f&&Ir(m.auth,x,f);const{email:k}=yield En(m.auth,x);k!==v.email&&(yield v.reload())})).apply(this,arguments)}function Ci(){return(Ci=(0,p.Z)(function*(v,f,m){const E=(0,O.m9)(v),k={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:f};m&&Ir(E.auth,k,m);const{email:z}=yield Ed(E.auth,k);z!==v.email&&(yield v.reload())})).apply(this,arguments)}function ji(v,f){return ju.apply(this,arguments)}function ju(){return(ju=(0,p.Z)(function*(v,f){return wn(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Ql(){return(Ql=(0,p.Z)(function*(v,{displayName:f,photoURL:m}){if(void 0===f&&void 0===m)return;const E=(0,O.m9)(v),k={idToken:yield E.getIdToken(),displayName:f,photoUrl:m,returnSecureToken:!0},z=yield An(E,ji(E.auth,k));E.displayName=z.displayName||null,E.photoURL=z.photoUrl||null;const le=E.providerData.find(({providerId:Ue})=>"password"===Ue);le&&(le.displayName=E.displayName,le.photoURL=E.photoURL),yield E._updateTokensIfNecessary(z)})).apply(this,arguments)}function Jl(v,f,m){return fr.apply(this,arguments)}function fr(){return(fr=(0,p.Z)(function*(v,f,m){const{auth:E}=v,k={idToken:yield v.getIdToken(),returnSecureToken:!0};f&&(k.email=f),m&&(k.password=m);const z=yield An(v,qr(E,k));yield v._updateTokensIfNecessary(z,!0)})).apply(this,arguments)}class ea{constructor(f,m,E={}){this.isNewUser=f,this.providerId=m,this.profile=E}}class ta extends ea{constructor(f,m,E,x){super(f,m,E),this.username=x}}class bs extends ea{constructor(f,m){super(f,"facebook.com",m)}}class Rd extends ta{constructor(f,m){super(f,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class jf extends ea{constructor(f,m){super(f,"google.com",m)}}class Nd extends ta{constructor(f,m,E){super(f,"twitter.com",m,E)}}function Nm(v){const{user:f,_tokenResponse:m}=v;return f.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function no(v){var f,m;if(!v)return null;const{providerId:E}=v,x=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},k=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!E&&v?.idToken){const z=null===(m=null===(f=Tt(v.idToken))||void 0===f?void 0:f.firebase)||void 0===m?void 0:m.sign_in_provider;if(z)return new ea(k,"anonymous"!==z&&"custom"!==z?z:null)}if(!E)return null;switch(E){case"facebook.com":return new bs(k,x);case"github.com":return new Rd(k,x);case"google.com":return new jf(k,x);case"twitter.com":return new Nd(k,x,v.screenName||null);case"custom":case"anonymous":return new ea(k,null);default:return new ea(k,E,x)}}(m)}class bo{constructor(f,m,E){this.type=f,this.credential=m,this.auth=E}static _fromIdtoken(f,m){return new bo("enroll",f,m)}static _fromMfaPendingCredential(f){return new bo("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var m,E;if(f?.multiFactorSession){if(null!==(m=f.multiFactorSession)&&void 0!==m&&m.pendingCredential)return bo._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(E=f.multiFactorSession)&&void 0!==E&&E.idToken)return bo._fromIdtoken(f.multiFactorSession.idToken)}return null}}class $u{constructor(f,m,E){this.session=f,this.hints=m,this.signInResolver=E}static _fromError(f,m){const E=Mn(f),x=m.customData._serverResponse,k=(x.mfaInfo||[]).map(le=>Vu._fromServerResponse(E,le));H(x.mfaPendingCredential,E,"internal-error");const z=bo._fromMfaPendingCredential(x.mfaPendingCredential);return new $u(z,k,function(){var le=(0,p.Z)(function*(Ue){const Je=yield Ue._process(E,z);delete x.mfaInfo,delete x.mfaPendingCredential;const It=Object.assign(Object.assign({},x),{idToken:Je.idToken,refreshToken:Je.refreshToken});switch(m.operationType){case"signIn":const ht=yield Ei._fromIdTokenResponse(E,m.operationType,It);return yield E._updateCurrentUser(ht.user),ht;case"reauthenticate":return H(m.user,E,"internal-error"),Ei._forOperation(m.user,m.operationType,It);default:Me(E,"internal-error")}});return function(Ue){return le.apply(this,arguments)}}())}resolveSignIn(f){var m=this;return(0,p.Z)(function*(){return m.signInResolver(f)})()}}function kd(v,f){return wn(v,"POST","/v2/accounts/mfaEnrollment:start",mt(v,f))}class Ds{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(E=>Vu._fromServerResponse(f.auth,E)))})}static _fromUser(f){return new Ds(f)}getSession(){var f=this;return(0,p.Z)(function*(){return bo._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,m){var E=this;return(0,p.Z)(function*(){const x=f,k=yield E.getSession(),z=yield An(E.user,x._process(E.user.auth,k,m));return yield E.user._updateTokensIfNecessary(z),E.user.reload()})()}unenroll(f){var m=this;return(0,p.Z)(function*(){var E;const x="string"==typeof f?f:f.uid,k=yield m.user.getIdToken(),z=yield An(m.user,function Yn(v,f){return wn(v,"POST","/v2/accounts/mfaEnrollment:withdraw",mt(v,f))}(m.user.auth,{idToken:k,mfaEnrollmentId:x}));m.enrolledFactors=m.enrolledFactors.filter(({uid:le})=>le!==x),yield m.user._updateTokensIfNecessary(z);try{yield m.user.reload()}catch(le){if("auth/user-token-expired"!==(null===(E=le)||void 0===E?void 0:E.code))throw le}})()}}const an=new WeakMap,Do="__sak";class rc{constructor(f,m){this.storageRetriever=f,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Do,"1"),this.storage.removeItem(Do),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,m){return this.storage.setItem(f,JSON.stringify(m)),Promise.resolve()}_get(f){const m=this.storage.getItem(f);return Promise.resolve(m?JSON.parse(m):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const ss=(()=>{class v extends rc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,E)=>this.onStorageEvent(m,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function zf(){const v=(0,O.z$)();return Vt(v)||nr(v)}()&&function xa(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Pf(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const E of Object.keys(this.listeners)){const x=this.storage.getItem(E),k=this.localCache[E];x!==k&&m(E,k,x)}}onStorageEvent(m,E=!1){if(!m.key)return void this.forAllChangedKeys((le,Ue,Je)=>{this.notifyListeners(le,Je)});const x=m.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const le=this.storage.getItem(x);if(m.newValue!==le)null!==m.newValue?this.storage.setItem(x,m.newValue):this.storage.removeItem(x);else if(this.localCache[x]===m.newValue&&!E)return}const k=()=>{const le=this.storage.getItem(x);!E&&this.localCache[x]===le||this.notifyListeners(x,le)},z=this.storage.getItem(x);!function Aa(){return(0,O.w1)()&&10===document.documentMode}()||z===m.newValue||m.newValue===m.oldValue?k():setTimeout(k,10)}notifyListeners(m,E){this.localCache[m]=E;const x=this.listeners[m];if(x)for(const k of Array.from(x))k(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,E,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:E,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,E){var x=()=>super._set,k=this;return(0,p.Z)(function*(){yield x().call(k,m,E),k.localCache[m]=JSON.stringify(E)})()}_get(m){var E=()=>super._get,x=this;return(0,p.Z)(function*(){const k=yield E().call(x,m);return x.localCache[m]=JSON.stringify(k),k})()}_remove(m){var E=()=>super._remove,x=this;return(0,p.Z)(function*(){yield E().call(x,m),delete x.localCache[m]})()}}return v.type="LOCAL",v})(),Hi=(()=>{class v extends rc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,E){}_removeListener(m,E){}}return v.type="SESSION",v})();let Od=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const E=this.receivers.find(k=>k.isListeningto(m));if(E)return E;const x=new v(m);return this.receivers.push(x),x}isListeningto(m){return this.eventTarget===m}handleEvent(m){var E=this;return(0,p.Z)(function*(){const x=m,{eventId:k,eventType:z,data:le}=x.data,Ue=E.handlersMap[z];if(!Ue?.size)return;x.ports[0].postMessage({status:"ack",eventId:k,eventType:z});const Je=Array.from(Ue).map(function(){var ht=(0,p.Z)(function*(Xn){return Xn(x.origin,le)});return function(Xn){return ht.apply(this,arguments)}}()),It=yield function To(v){return Promise.all(v.map(function(){var f=(0,p.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(E){return{fulfilled:!1,reason:E}}});return function(m){return f.apply(this,arguments)}}()))}(Je);x.ports[0].postMessage({status:"done",eventId:k,eventType:z,response:It})})()}_subscribe(m,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(E)}_unsubscribe(m,E){this.handlersMap[m]&&E&&this.handlersMap[m].delete(E),(!E||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Yr(v="",f=10){let m="";for(let E=0;E<f;E++)m+=Math.floor(10*Math.random());return v+m}class Ts{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,m,E=50){var x=this;return(0,p.Z)(function*(){const k=typeof MessageChannel<"u"?new MessageChannel:null;if(!k)throw new Error("connection_unavailable");let z,le;return new Promise((Ue,Je)=>{const It=Yr("",20);k.port1.start();const ht=setTimeout(()=>{Je(new Error("unsupported_event"))},E);le={messageChannel:k,onMessage(Xn){const gi=Xn;if(gi.data.eventId===It)switch(gi.data.status){case"ack":clearTimeout(ht),z=setTimeout(()=>{Je(new Error("timeout"))},3e3);break;case"done":clearTimeout(z),Ue(gi.data.response);break;default:clearTimeout(ht),clearTimeout(z),Je(new Error("invalid_response"))}}},x.handlers.add(le),k.port1.addEventListener("message",le.onMessage),x.target.postMessage({eventType:f,eventId:It,data:m},[k.port2])}).finally(()=>{le&&x.removeMessageHandler(le)})})()}}function Hn(){return window}function ro(){return typeof Hn().WorkerGlobalScope<"u"&&"function"==typeof Hn().importScripts}function ic(){return(ic=(0,p.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const zu="firebaseLocalStorageDb",Ss="firebaseLocalStorage",Ga="fbase_key";class $i{constructor(f){this.request=f}toPromise(){return new Promise((f,m)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function na(v,f){return v.transaction([Ss],f?"readwrite":"readonly").objectStore(Ss)}function io(){const v=indexedDB.open(zu,1);return new Promise((f,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const E=v.result;try{E.createObjectStore(Ss,{keyPath:Ga})}catch(x){m(x)}}),v.addEventListener("success",(0,p.Z)(function*(){const E=v.result;E.objectStoreNames.contains(Ss)?f(E):(E.close(),yield function Wa(){const v=indexedDB.deleteDatabase(zu);return new $i(v).toPromise()}(),f(yield io()))}))})}function qu(v,f,m){return so.apply(this,arguments)}function so(){return(so=(0,p.Z)(function*(v,f,m){const E=na(v,!0).put({[Ga]:f,value:m});return new $i(E).toPromise()})).apply(this,arguments)}function oo(){return(oo=(0,p.Z)(function*(v,f){const m=na(v,!1).get(f),E=yield new $i(m).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Ld(v,f){const m=na(v,!0).delete(f);return new $i(m).toPromise()}const Qr=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,p.Z)(function*(){return m.db||(m.db=yield io()),m.db})()}_withRetries(m){var E=this;return(0,p.Z)(function*(){let x=0;for(;;)try{const k=yield E._openDb();return yield m(k)}catch(k){if(x++>3)throw k;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,p.Z)(function*(){return ro()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,p.Z)(function*(){m.receiver=Od._getInstance(function sc(){return ro()?self:null}()),m.receiver._subscribe("keyChanged",function(){var E=(0,p.Z)(function*(x,k){return{keyProcessed:(yield m._poll()).includes(k.key)}});return function(x,k){return E.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var E=(0,p.Z)(function*(x,k){return["keyChanged"]});return function(x,k){return E.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,p.Z)(function*(){var E,x;if(m.activeServiceWorker=yield function $a(){return ic.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Ts(m.activeServiceWorker);const k=yield m.sender._send("ping",{},800);!k||(null===(E=k[0])||void 0===E?void 0:E.fulfilled)&&(null===(x=k[0])||void 0===x?void 0:x.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var E=this;return(0,p.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Zf(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:m},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const m=yield io();return yield qu(m,Do,"1"),yield Ld(m,Do),!0}catch{}return!1})()}_withPendingWrite(m){var E=this;return(0,p.Z)(function*(){E.pendingWrites++;try{yield m()}finally{E.pendingWrites--}})()}_set(m,E){var x=this;return(0,p.Z)(function*(){return x._withPendingWrite((0,p.Z)(function*(){return yield x._withRetries(k=>qu(k,m,E)),x.localCache[m]=E,x.notifyServiceWorker(m)}))})()}_get(m){var E=this;return(0,p.Z)(function*(){const x=yield E._withRetries(k=>function ra(v,f){return oo.apply(this,arguments)}(k,m));return E.localCache[m]=x,x})()}_remove(m){var E=this;return(0,p.Z)(function*(){return E._withPendingWrite((0,p.Z)(function*(){return yield E._withRetries(x=>Ld(x,m)),delete E.localCache[m],E.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,p.Z)(function*(){const E=yield m._withRetries(z=>{const le=na(z,!1).getAll();return new $i(le).toPromise()});if(!E)return[];if(0!==m.pendingWrites)return[];const x=[],k=new Set;for(const{fbase_key:z,value:le}of E)k.add(z),JSON.stringify(m.localCache[z])!==JSON.stringify(le)&&(m.notifyListeners(z,le),x.push(z));for(const z of Object.keys(m.localCache))m.localCache[z]&&!k.has(z)&&(m.notifyListeners(z,null),x.push(z));return x})()}notifyListeners(m,E){this.localCache[m]=E;const x=this.listeners[m];if(x)for(const k of Array.from(x))k(E)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function Zu(v,f){return wn(v,"POST","/v2/accounts/mfaSignIn:start",mt(v,f))}function ia(){return(ia=(0,p.Z)(function*(v){return(yield wn(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ao(v){return new Promise((f,m)=>{const E=document.createElement("script");E.setAttribute("src",v),E.onload=f,E.onerror=x=>{const k=Ee("internal-error");k.customData=x,m(k)},E.type="text/javascript",E.charset="UTF-8",function za(){var v,f;return null!==(f=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==f?f:document}().appendChild(E)})}function uc(v){return`__${v}${Math.floor(1e6*Math.random())}`}const uo=1e12;class Qf{constructor(f){this.auth=f,this.counter=uo,this._widgets=new Map}render(f,m){const E=this.counter;return this._widgets.set(E,new Pm(f,this.auth.name,m||{})),this.counter++,E}reset(f){var m;const E=f||uo;null===(m=this._widgets.get(E))||void 0===m||m.delete(),this._widgets.delete(E)}getResponse(f){var m;return(null===(m=this._widgets.get(f||uo))||void 0===m?void 0:m.getResponse())||""}execute(f){var m=this;return(0,p.Z)(function*(){var E;return null===(E=m._widgets.get(f||uo))||void 0===E||E.execute(),""})()}}class Pm{constructor(f,m,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof f?document.getElementById(f):f;H(x,"argument-error",{appName:m}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Qu(v){const f=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<v;E++)f.push(m.charAt(Math.floor(Math.random()*m.length)));return f.join("")}(50);const{callback:f,"expired-callback":m}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const sa=uc("rcb"),Xf=new Lt(3e4,6e4);class Xu{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=Hn().grecaptcha)||void 0===f||!f.render)}load(f,m=""){return H(function qa(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),f,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(Hn().grecaptcha):new Promise((E,x)=>{const k=Hn().setTimeout(()=>{x(Ee(f,"network-request-failed"))},Xf.get());Hn()[sa]=()=>{Hn().clearTimeout(k),delete Hn()[sa];const le=Hn().grecaptcha;if(!le)return void x(Ee(f,"internal-error"));const Ue=le.render;le.render=(Je,It)=>{const ht=Ue(Je,It);return this.counter++,ht},this.hostLanguage=m,E(le)},ao(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:sa,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(k),x(Ee(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var m;return!(null===(m=Hn().grecaptcha)||void 0===m||!m.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class nv{load(f){return(0,p.Z)(function*(){return new Qf(f)})()}clearedOneInstance(){}}const Jf="recaptcha",cc={theme:"light",type:"image"};class So{constructor(f,m=Object.assign({},cc),E){this.parameters=m,this.type=Jf,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Mn(E),this.isInvisible="invisible"===this.parameters.size,H(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof f?document.getElementById(f):f;H(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new nv:new Xu,this.validateStartingState()}verify(){var f=this;return(0,p.Z)(function*(){f.assertNotDestroyed();const m=yield f.render(),E=f.getAssertedRecaptcha();return E.getResponse(m)||new Promise(k=>{const z=le=>{!le||(f.tokenChangeListeners.delete(z),k(le))};f.tokenChangeListeners.add(z),f.isInvisible&&E.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){H(!this.parameters.sitekey,this.auth,"argument-error"),H(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),H(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return m=>{if(this.tokenChangeListeners.forEach(E=>E(m)),"function"==typeof f)f(m);else if("string"==typeof f){const E=Hn()[f];"function"==typeof E&&E(m)}}}assertNotDestroyed(){H(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,p.Z)(function*(){if(yield f.init(),!f.widgetId){let m=f.container;if(!f.isInvisible){const E=document.createElement("div");m.appendChild(E),m=E}f.widgetId=f.getAssertedRecaptcha().render(m,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,p.Z)(function*(){H(ct()&&!ro(),f.auth,"internal-error"),yield function Vd(){let v=null;return new Promise(f=>{"complete"!==document.readyState?(v=()=>f(),window.addEventListener("load",v)):f()}).catch(f=>{throw v&&window.removeEventListener("load",v),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const m=yield function Gi(v){return ia.apply(this,arguments)}(f.auth);H(m,f.auth,"internal-error"),f.parameters.sitekey=m})()}getAssertedRecaptcha(){return H(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ju{constructor(f,m){this.verificationId=f,this.onConfirmation=m}confirm(f){const m=Is._fromVerification(this.verificationId,f);return this.onConfirmation(m)}}function os(){return(os=(0,p.Z)(function*(v,f,m){const E=Mn(v),x=yield Bd(E,f,(0,O.m9)(m));return new Ju(x,k=>Nn(E,k))})).apply(this,arguments)}function dc(){return(dc=(0,p.Z)(function*(v,f,m){const E=(0,O.m9)(v);yield Js(!1,E,"phone");const x=yield Bd(E.auth,f,(0,O.m9)(m));return new Ju(x,k=>Pr(E,k))})).apply(this,arguments)}function lo(){return(lo=(0,p.Z)(function*(v,f,m){const E=(0,O.m9)(v),x=yield Bd(E.auth,f,(0,O.m9)(m));return new Ju(x,k=>Fu(E,k))})).apply(this,arguments)}function Bd(v,f,m){return jd.apply(this,arguments)}function jd(){return(jd=(0,p.Z)(function*(v,f,m){var E;const x=yield m.verify();try{let k;if(H("string"==typeof x,v,"argument-error"),H(m.type===Jf,v,"argument-error"),k="string"==typeof f?{phoneNumber:f}:f,"session"in k){const z=k.session;if("phoneNumber"in k)return H("enroll"===z.type,v,"internal-error"),(yield kd(v,{idToken:z.credential,phoneEnrollmentInfo:{phoneNumber:k.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{H("signin"===z.type,v,"internal-error");const le=(null===(E=k.multiFactorHint)||void 0===E?void 0:E.uid)||k.multiFactorUid;return H(le,v,"missing-multi-factor-info"),(yield Zu(v,{mfaPendingCredential:z.credential,mfaEnrollmentId:le,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:z}=yield xu(v,{phoneNumber:k.phoneNumber,recaptchaToken:x});return z}}finally{m._reset()}})).apply(this,arguments)}function ep(){return(ep=(0,p.Z)(function*(v,f){yield Nu((0,O.m9)(v),f)})).apply(this,arguments)}let hc=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=Mn(m)}verifyPhoneNumber(m,E){return Bd(this.auth,m,(0,O.m9)(E))}static credential(m,E){return Is._fromVerification(m,E)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:E,temporaryProof:x}=m;return E&&x?Is._fromTokenResponse(E,x):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Ao(v,f){return f?ie(f):(H(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class tp extends Bn{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return jn(f,this._buildIdpRequest())}_linkToIdToken(f,m){return jn(f,this._buildIdpRequest(m))}_getReauthenticationResolver(f){return jn(f,this._buildIdpRequest())}_buildIdpRequest(f){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(m.idToken=f),m}}function rv(v){return La(v.auth,new tp(v),v.bypassAuthState)}function np(v){const{auth:f,user:m}=v;return H(m,f,"internal-error"),Pu(m,new tp(v),v.bypassAuthState)}function rp(v){return co.apply(this,arguments)}function co(){return(co=(0,p.Z)(function*(v){const{auth:f,user:m}=v;return H(m,f,"internal-error"),Nu(m,new tp(v),v.bypassAuthState)})).apply(this,arguments)}class Hd{constructor(f,m,E,x,k=!1){this.auth=f,this.resolver=E,this.user=x,this.bypassAuthState=k,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var f=this;return new Promise(function(){var m=(0,p.Z)(function*(E,x){f.pendingPromise={resolve:E,reject:x};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(k){f.reject(k)}});return function(E,x){return m.apply(this,arguments)}}())}onAuthEvent(f){var m=this;return(0,p.Z)(function*(){const{urlResponse:E,sessionId:x,postBody:k,tenantId:z,error:le,type:Ue}=f;if(le)return void m.reject(le);const Je={auth:m.auth,requestUri:E,sessionId:x,tenantId:z||void 0,postBody:k||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Ue)(Je))}catch(It){m.reject(It)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return rv;case"linkViaPopup":case"linkViaRedirect":return rp;case"reauthViaPopup":case"reauthViaRedirect":return np;default:Me(this.auth,"internal-error")}}resolve(f){K(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){K(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ip=new Lt(2e3,1e4);function xo(){return(xo=(0,p.Z)(function*(v,f,m){const E=Mn(v);je(v,f,Cs);const x=Ao(E,m);return new Or(E,"signInViaPopup",f,x).executeNotNull()})).apply(this,arguments)}function pc(){return(pc=(0,p.Z)(function*(v,f,m){const E=(0,O.m9)(v);je(E.auth,f,Cs);const x=Ao(E.auth,m);return new Or(E.auth,"reauthViaPopup",f,x,E).executeNotNull()})).apply(this,arguments)}function kn(){return(kn=(0,p.Z)(function*(v,f,m){const E=(0,O.m9)(v);je(E.auth,f,Cs);const x=Ao(E.auth,m);return new Or(E.auth,"linkViaPopup",f,x,E).executeNotNull()})).apply(this,arguments)}let Or=(()=>{class v extends Hd{constructor(m,E,x,k,z){super(m,E,k,z),this.provider=x,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,p.Z)(function*(){const E=yield m.execute();return H(E,m.auth,"internal-error"),E})()}onExecution(){var m=this;return(0,p.Z)(function*(){K(1===m.filter.length,"Popup operations only handle one event");const E=Yr();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],E),m.authWindow.associatedEvent=E,m.resolver._originValidation(m.auth).catch(x=>{m.reject(x)}),m.resolver._isIframeWebStorageSupported(m.auth,x=>{x||m.reject(Ee(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Ee(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var E,x;this.pollId=null!==(x=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==x&&x.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ee(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,ip.get())};m()}}return v.currentPopupAction=null,v})();const Xe=new Map;class Cr extends Hd{constructor(f,m,E=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,E),this.eventId=null}execute(){var f=()=>super.execute,m=this;return(0,p.Z)(function*(){let E=Xe.get(m.auth._key());if(!E){try{const k=(yield function el(v,f){return bi.apply(this,arguments)}(m.resolver,m.auth))?yield f().call(m):null;E=()=>Promise.resolve(k)}catch(x){E=()=>Promise.reject(x)}Xe.set(m.auth._key(),E)}return m.bypassAuthState||Xe.set(m.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(f){var m=()=>super.onAuthEvent,E=this;return(0,p.Z)(function*(){if("signInViaRedirect"===f.type)return m().call(E,f);if("unknown"!==f.type){if(f.eventId){const x=yield E.auth._redirectUserForId(f.eventId);if(x)return E.user=x,m().call(E,f);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function bi(){return(bi=(0,p.Z)(function*(v,f){const m=tl(f),E=Ke(v);if(!(yield E._isAvailable()))return!1;const x="true"===(yield E._get(m));return yield E._remove(m),x})).apply(this,arguments)}function Mo(v,f){return vn.apply(this,arguments)}function vn(){return(vn=(0,p.Z)(function*(v,f){return Ke(v)._set(tl(f),"true")})).apply(this,arguments)}function bn(v,f){Xe.set(v._key(),f)}function Ke(v){return ie(v._redirectPersistence)}function tl(v){return Z("pendingRedirect",v.config.apiKey,v.name)}function D(){return(D=(0,p.Z)(function*(v,f,m){const E=Mn(v);je(v,f,Cs);const x=Ao(E,m);return yield Mo(x,E),x._openRedirect(E,f,"signInViaRedirect")})).apply(this,arguments)}function U(){return(U=(0,p.Z)(function*(v,f,m){const E=(0,O.m9)(v);je(E.auth,f,Cs);const x=Ao(E.auth,m);yield Mo(x,E.auth);const k=yield ft(E);return x._openRedirect(E.auth,f,"reauthViaRedirect",k)})).apply(this,arguments)}function Ie(){return(Ie=(0,p.Z)(function*(v,f,m){const E=(0,O.m9)(v);je(E.auth,f,Cs);const x=Ao(E.auth,m);yield Js(!1,E,f.providerId),yield Mo(x,E.auth);const k=yield ft(E);return x._openRedirect(E.auth,f,"linkViaRedirect",k)})).apply(this,arguments)}function dt(){return(dt=(0,p.Z)(function*(v,f){return yield Mn(v)._initializationPromise,Et(v,f,!1)})).apply(this,arguments)}function Et(v,f){return yt.apply(this,arguments)}function yt(){return(yt=(0,p.Z)(function*(v,f,m=!1){const E=Mn(v),x=Ao(E,f),z=yield new Cr(E,x,m).execute();return z&&!m&&(delete z.user._redirectEventId,yield E._persistUserIfCurrent(z.user),yield E._setRedirectUser(null,f)),z})).apply(this,arguments)}function ft(v){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,p.Z)(function*(v){const f=Yr(`${v.uid}:::`);return v._redirectEventId=f,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),f})).apply(this,arguments)}class $t{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let m=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(f,E)&&(m=!0,this.sendToConsumer(f,E),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function $d(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fi(v);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=f,m=!0)),m}sendToConsumer(f,m){var E;if(f.error&&!fi(f)){const x=(null===(E=f.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";m.onError(Ee(this.auth,x))}else m.onAuthEvent(f)}isEventForConsumer(f,m){const E=null===m.eventId||!!f.eventId&&f.eventId===m.eventId;return m.filter.includes(f.type)&&E}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(zi(f))}saveEventToCache(f){this.cachedEventUids.add(zi(f)),this.lastProcessedEventTime=Date.now()}}function zi(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(f=>f).join("-")}function fi({type:v,error:f}){return"unknown"===v&&"auth/no-auth-event"===f?.code}function gc(v){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,p.Z)(function*(v,f={}){return wn(v,"GET","/v1/projects",f)})).apply(this,arguments)}const Xr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xs=/^https?/;function Fm(){return(Fm=(0,p.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:f}=yield gc(v);for(const m of f)try{if(Lm(m))return}catch{}Me(v,"unauthorized-domain")})).apply(this,arguments)}function Lm(v){const f=Fe(),{protocol:m,hostname:E}=new URL(f);if(v.startsWith("chrome-extension://")){const z=new URL(v);return""===z.hostname&&""===E?"chrome-extension:"===m&&v.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===m&&z.hostname===E}if(!xs.test(m))return!1;if(Xr.test(v))return E===v;const x=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(E)}const wI=new Lt(3e4,6e4);function EI(){const v=Hn().___jsl;if(v?.H)for(const f of Object.keys(v.H))if(v.H[f].r=v.H[f].r||[],v.H[f].L=v.H[f].L||[],v.H[f].r=[...v.H[f].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let op=null;function CI(v){return op=op||function II(v){return new Promise((f,m)=>{var E,x,k;function z(){EI(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{EI(),m(Ee(v,"network-request-failed"))},timeout:wI.get()})}if(null!==(x=null===(E=Hn().gapi)||void 0===E?void 0:E.iframes)&&void 0!==x&&x.Iframe)f(gapi.iframes.getContext());else{if(null===(k=Hn().gapi)||void 0===k||!k.load){const le=uc("iframefcb");return Hn()[le]=()=>{gapi.load?z():m(Ee(v,"network-request-failed"))},ao(`https://apis.google.com/js/api.js?onload=${le}`).catch(Ue=>m(Ue))}z()}}).catch(f=>{throw op=null,f})}(v),op}const ap=new Lt(5e3,15e3),_e={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Di=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function as(v){const f=v.config;H(f.authDomain,v,"auth-domain-config-required");const m=f.emulator?gt(f,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,E={apiKey:f.apiKey,appName:v.name,v:ae.SDK_VERSION},x=Di.get(v.config.apiHost);x&&(E.eid=x);const k=v._getFrameworks();return k.length&&(E.fw=k.join(",")),`${m}?${(0,O.xO)(E).slice(1)}`}function qi(){return qi=(0,p.Z)(function*(v){const f=yield CI(v),m=Hn().gapi;return H(m,v,"internal-error"),f.open({where:document.body,url:as(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_e,dontclear:!0},E=>new Promise(function(){var x=(0,p.Z)(function*(k,z){yield E.restyle({setHideOnLeave:!1});const le=Ee(v,"network-request-failed"),Ue=Hn().setTimeout(()=>{z(le)},ap.get());function Je(){Hn().clearTimeout(Ue),k(E)}E.ping(Je).then(Je,()=>{z(le)})});return function(k,z){return x.apply(this,arguments)}}()))}),qi.apply(this,arguments)}const up={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Wd{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zd(v,f,m,E,x,k){H(v.config.authDomain,v,"auth-domain-config-required"),H(v.config.apiKey,v,"invalid-api-key");const z={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:E,v:ae.SDK_VERSION,eventId:x};if(f instanceof Cs){f.setDefaultLanguage(v.languageCode),z.providerId=f.providerId||"",(0,O.xb)(f.getCustomParameters())||(z.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Ue,Je]of Object.entries(k||{}))z[Ue]=Je}if(f instanceof Xs){const Ue=f.getScopes().filter(Je=>""!==Je);Ue.length>0&&(z.scopes=Ue.join(","))}v.tenantId&&(z.tid=v.tenantId);const le=z;for(const Ue of Object.keys(le))void 0===le[Ue]&&delete le[Ue];return`${function Um({config:v}){return v.emulator?gt(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,O.xO)(le).slice(1)}`}const mc="webStorageSupport",cp=class Bm{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Hi,this._completeRedirectFn=Et,this._overrideRedirectResult=bn}_openPopup(f,m,E,x){var k=this;return(0,p.Z)(function*(){var z;K(null===(z=k.eventManagers[f._key()])||void 0===z?void 0:z.manager,"_initialize() not called before _openPopup()");const le=zd(f,m,E,Fe(),x);return function Vm(v,f,m,E=500,x=600){const k=Math.max((window.screen.availHeight-x)/2,0).toString(),z=Math.max((window.screen.availWidth-E)/2,0).toString();let le="";const Ue=Object.assign(Object.assign({},up),{width:E.toString(),height:x.toString(),top:k,left:z}),Je=(0,O.z$)().toLowerCase();m&&(le=zt(Je)?"_blank":m),st(Je)&&(f=f||"http://localhost",Ue.scrollbars="yes");const It=Object.entries(Ue).reduce((Xn,[gi,uh])=>`${Xn}${gi}=${uh},`,"");if(function Rr(v=(0,O.z$)()){var f;return nr(v)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(Je)&&"_self"!==le)return function TI(v,f){const m=document.createElement("a");m.href=v,m.target=f;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(E)}(f||"",le),new Wd(null);const ht=window.open(f||"",le,It);H(ht,v,"popup-blocked");try{ht.focus()}catch{}return new Wd(ht)}(f,le,Yr())})()}_openRedirect(f,m,E,x){var k=this;return(0,p.Z)(function*(){return yield k._originValidation(f),function Wu(v){Hn().location.href=v}(zd(f,m,E,Fe(),x)),new Promise(()=>{})})()}_initialize(f){const m=f._key();if(this.eventManagers[m]){const{manager:x,promise:k}=this.eventManagers[m];return x?Promise.resolve(x):(K(k,"If manager is not set, promise should be"),k)}const E=this.initAndGetManager(f);return this.eventManagers[m]={promise:E},E.catch(()=>{delete this.eventManagers[m]}),E}initAndGetManager(f){var m=this;return(0,p.Z)(function*(){const E=yield function P(v){return qi.apply(this,arguments)}(f),x=new $t(f);return E.register("authEvent",k=>(H(k?.authEvent,f,"invalid-auth-event"),{status:x.onEvent(k.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[f._key()]={manager:x},m.iframes[f._key()]=E,x})()}_isIframeWebStorageSupported(f,m){this.iframes[f._key()].send(mc,{type:mc},x=>{var k;const z=null===(k=x?.[0])||void 0===k?void 0:k[mc];void 0!==z&&m(!!z),Me(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function sp(v){return Fm.apply(this,arguments)}(f)),this.originValidationPromises[m]}get _shouldInitProactively(){return Pf()||Vt()||nr()}};class ei{constructor(f){this.factorId=f}_process(f,m,E){switch(m.type){case"enroll":return this._finalizeEnroll(f,m.credential,E);case"signin":return this._finalizeSignIn(f,m.credential);default:return we("unexpected MultiFactorSessionType")}}}class pi extends ei{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new pi(f)}_finalizeEnroll(f,m,E){return function nc(v,f){return wn(v,"POST","/v2/accounts/mfaEnrollment:finalize",mt(v,f))}(f,{idToken:m,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,m){return function ac(v,f){return wn(v,"POST","/v2/accounts/mfaSignIn:finalize",mt(v,f))}(f,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let jm=(()=>{class v{constructor(){}static assertion(m){return pi._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var qd="@firebase/auth",_c="0.20.11";class Kd{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var m=this;return(0,p.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const m=this.auth.onIdTokenChanged(E=>{var x;f((null===(x=E)||void 0===x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,m),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const m=this.internalListeners.get(f);!m||(this.internalListeners.delete(f),m(),this.updateProactiveRefresh())}assertAuthConfigured(){H(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Gn(){return window}function vc(){return(vc=(0,p.Z)(function*(v,f,m){var E;const{BuildInfo:x}=Gn();K(f.sessionId,"AuthEvent did not contain a session ID");const k=yield gp(f.sessionId),z={};return nr()?z.ibi=x.packageName:wt()?z.apn=x.packageName:Me(v,"operation-not-supported-in-this-environment"),x.displayName&&(z.appDisplayName=x.displayName),z.sessionId=k,zd(v,m,f.type,void 0,null!==(E=f.eventId)&&void 0!==E?E:void 0,z)})).apply(this,arguments)}function Za(){return(Za=(0,p.Z)(function*(v){const{BuildInfo:f}=Gn(),m={};nr()?m.iosBundleId=f.packageName:wt()?m.androidPackageName=f.packageName:Me(v,"operation-not-supported-in-this-environment"),yield gc(v,m)})).apply(this,arguments)}function wc(){return(wc=(0,p.Z)(function*(v,f,m){const{cordova:E}=Gn();let x=()=>{};try{yield new Promise((k,z)=>{let le=null;function Ue(){var ht;k();const Xn=null===(ht=E.plugins.browsertab)||void 0===ht?void 0:ht.close;"function"==typeof Xn&&Xn(),"function"==typeof m?.close&&m.close()}function Je(){le||(le=window.setTimeout(()=>{z(Ee(v,"redirect-cancelled-by-user"))},2e3))}function It(){"visible"===document?.visibilityState&&Je()}f.addPassiveListener(Ue),document.addEventListener("resume",Je,!1),wt()&&document.addEventListener("visibilitychange",It,!1),x=()=>{f.removePassiveListener(Ue),document.removeEventListener("resume",Je,!1),document.removeEventListener("visibilitychange",It,!1),le&&window.clearTimeout(le)}})}finally{x()}})).apply(this,arguments)}function gp(v){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,p.Z)(function*(v){const f=Ic(v),m=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(m)).map(x=>x.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ic(v){if(K(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const f=new ArrayBuffer(v.length),m=new Uint8Array(f);for(let E=0;E<v.length;E++)m[E]=v.charCodeAt(E);return m}(0,O.Pz)("authIdTokenMaxAge"),function sv(v){(0,ae._registerComponent)(new ce.wA("auth",(f,{options:m})=>{const E=f.getProvider("app").getImmediate(),x=f.getProvider("heartbeat"),{apiKey:k,authDomain:z}=E.options;return((le,Ue)=>{H(k&&!k.includes(":"),"invalid-api-key",{appName:le.name}),H(!z?.includes(":"),"argument-error",{appName:le.name});const Je={apiKey:k,authDomain:z,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Au(v)},It=new vd(le,Ue,Je);return function Ve(v,f){const m=f?.persistence||[],E=(Array.isArray(m)?m:[m]).map(ie);f?.errorMap&&v._updateErrorMap(f.errorMap),v._initializeWithPersistence(E,f?.popupRedirectResolver)}(It,m),It})(E,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,m,E)=>{f.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new ce.wA("auth-internal",f=>{const m=Mn(f.getProvider("auth").getImmediate());return new Kd(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)(qd,_c,function yc(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,ae.registerVersion)(qd,_c,"esm2017")}("Browser");class mp extends $t{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(f)),super.onEvent(f)}initialized(){var f=this;return(0,p.Z)(function*(){yield f.initPromise})()}}function rl(v){return Yd.apply(this,arguments)}function Yd(){return(Yd=(0,p.Z)(function*(v){const f=yield Ya()._get(Ep(v));return f&&(yield Ya()._remove(Ep(v))),f})).apply(this,arguments)}function wp(){const v=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const E=Math.floor(Math.random()*f.length);v.push(f.charAt(E))}return v.join("")}function Ya(){return ie(ss)}function Ep(v){return Z("authEvent",v.config.apiKey,v.name)}function aa(v){if(!v?.includes("?"))return{};const[f,...m]=v.split("?");return(0,O.zd)(m.join("?"))}const Qa=class Gm{constructor(){this._redirectPersistence=Hi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Et,this._overrideRedirectResult=bn}_initialize(f){var m=this;return(0,p.Z)(function*(){const E=f._key();let x=m.eventManagers.get(E);return x||(x=new mp(f),m.eventManagers.set(E,x),m.attachCallbackListeners(f,x)),x})()}_openPopup(f){Me(f,"operation-not-supported-in-this-environment")}_openRedirect(f,m,E,x){var k=this;return(0,p.Z)(function*(){!function pp(v){var f,m,E,x,k,z,le,Ue,Je,It;const ht=Gn();H("function"==typeof(null===(f=ht?.universalLinks)||void 0===f?void 0:f.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),H(typeof(null===(m=ht?.BuildInfo)||void 0===m?void 0:m.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),H("function"==typeof(null===(k=null===(x=null===(E=ht?.cordova)||void 0===E?void 0:E.plugins)||void 0===x?void 0:x.browsertab)||void 0===k?void 0:k.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),H("function"==typeof(null===(Ue=null===(le=null===(z=ht?.cordova)||void 0===z?void 0:z.plugins)||void 0===le?void 0:le.browsertab)||void 0===Ue?void 0:Ue.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),H("function"==typeof(null===(It=null===(Je=ht?.cordova)||void 0===Je?void 0:Je.InAppBrowser)||void 0===It?void 0:It.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const z=yield k._initialize(f);yield z.initialized(),z.resetRedirect(),function Qn(){Xe.clear()}(),yield k._originValidation(f);const le=function _p(v,f,m=null){return{type:f,eventId:m,urlResponse:null,sessionId:wp(),postBody:null,tenantId:v.tenantId,error:Ee(v,"no-auth-event")}}(f,E,x);yield function yp(v,f){return Ya()._set(Ep(v),f)}(f,le);const Ue=yield function hp(v,f,m){return vc.apply(this,arguments)}(f,le,m),Je=yield function Hm(v){const{cordova:f}=Gn();return new Promise(m=>{f.plugins.browsertab.isAvailable(E=>{let x=null;E?f.plugins.browsertab.openUrl(v):x=f.InAppBrowser.open(v,function zo(v=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),m(x)})})}(Ue);return function fp(v,f,m){return wc.apply(this,arguments)}(f,z,Je)})()}_isIframeWebStorageSupported(f,m){throw new Error("Method not implemented.")}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function ti(v){return Za.apply(this,arguments)}(f)),this.originValidationPromises[m]}attachCallbackListeners(f,m){const{universalLinks:E,handleOpenURL:x,BuildInfo:k}=Gn(),z=setTimeout((0,p.Z)(function*(){yield rl(f),m.onEvent(Xd())}),500),le=function(){var It=(0,p.Z)(function*(ht){clearTimeout(z);const Xn=yield rl(f);let gi=null;Xn&&ht?.url&&(gi=function vp(v,f){var m,E;const x=function il(v){const f=aa(v),m=f.link?decodeURIComponent(f.link):void 0,E=aa(m).link,x=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return aa(x).link||x||E||m||v}(f);if(x.includes("/__/auth/callback")){const k=aa(x),z=k.firebaseError?function lv(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(k.firebaseError)):null,le=null===(E=null===(m=z?.code)||void 0===m?void 0:m.split("auth/"))||void 0===E?void 0:E[1],Ue=le?Ee(le):null;return Ue?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:Ue,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:x,postBody:null}}return null}(Xn,ht.url)),m.onEvent(gi||Xd())});return function(Xn){return It.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,le);const Ue=x,Je=`${k.packageName.toLowerCase()}://`;Gn().handleOpenURL=function(){var It=(0,p.Z)(function*(ht){if(ht.toLowerCase().startsWith(Je)&&le({url:ht}),"function"==typeof Ue)try{Ue(ht)}catch(Xn){console.error(Xn)}});return function(ht){return It.apply(this,arguments)}}()}};function Xd(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ee("no-auth-event")}}function Cc(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function Wm(v=(0,O.z$)()){return!("file:"!==Cc()&&"ionic:"!==Cc()&&"capacitor:"!==Cc()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function bp(){try{const v=self.localStorage,f=Yr();if(v)return v.setItem(f,"1"),v.removeItem(f),!function Cp(v=(0,O.z$)()){return function fv(){return(0,O.w1)()&&11===document?.documentMode}()||function zm(v=(0,O.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,O.hl)()}catch{return ua()&&(0,O.hl)()}return!1}function ua(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function eh(){return(function dv(){return"http:"===Cc()||"https:"===Cc()}()||(0,O.ru)()||Wm())&&!function hv(){return(0,O.b$)()||(0,O.UG)()}()&&bp()&&!ua()}function Dp(){return Wm()&&typeof document<"u"}function nh(){return(nh=(0,p.Z)(function*(){return!!Dp()&&new Promise(v=>{const f=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),v(!0)})})})).apply(this,arguments)}const Ti={LOCAL:"local",NONE:"none",SESSION:"session"},Ja=H,Tp="persistence";function eu(v){return rh.apply(this,arguments)}function rh(){return(rh=(0,p.Z)(function*(v){yield v._initializationPromise;const f=Sp(),m=Z(Tp,v.config.apiKey,v.name);f&&f.setItem(m,v._getPersistence())})).apply(this,arguments)}function Sp(){var v;try{return(null===(v=function Xa(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const mv=H;class No{constructor(){this.browserResolver=ie(cp),this.cordovaResolver=ie(Qa),this.underlyingResolver=null,this._redirectPersistence=Hi,this._completeRedirectFn=Et,this._overrideRedirectResult=bn}_initialize(f){var m=this;return(0,p.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,m,E,x){var k=this;return(0,p.Z)(function*(){return yield k.selectUnderlyingResolver(),k.assertedUnderlyingResolver._openPopup(f,m,E,x)})()}_openRedirect(f,m,E,x){var k=this;return(0,p.Z)(function*(){return yield k.selectUnderlyingResolver(),k.assertedUnderlyingResolver._openRedirect(f,m,E,x)})()}_isIframeWebStorageSupported(f,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,m)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Dp()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return mv(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,p.Z)(function*(){if(f.underlyingResolver)return;const m=yield function th(){return nh.apply(this,arguments)}();f.underlyingResolver=m?f.cordovaResolver:f.browserResolver})()}}function bc(v){return v.unwrap()}function ih(v){return sh(v)}function sh(v){const{_tokenResponse:f}=v instanceof O.ZR?v.customData:v;if(!f)return null;if(!(v instanceof O.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return hc.credentialFromResult(v);const m=f.providerId;if(!m||"password"===m)return null;let E;switch(m){case"google.com":E=Lf;break;case"facebook.com":E=bd;break;case"github.com":E=Hl;break;case"twitter.com":E=Td;break;default:const{oauthIdToken:x,oauthAccessToken:k,oauthTokenSecret:z,pendingToken:le,nonce:Ue}=f;return k||z||x||le?le?m.startsWith("saml.")?Mu._create(m,le):rs._fromParams({providerId:m,signInMethod:m,pendingToken:le,idToken:x,accessToken:k}):new Pa(m).credential({idToken:x,accessToken:k,rawNonce:Ue}):null}return v instanceof O.ZR?E.credentialFromError(v):E.credentialFromResult(v)}function Lr(v,f){return f.catch(m=>{throw m instanceof O.ZR&&function xp(v,f){var m,E;const x=null===(m=f.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===(null===(E=f)||void 0===E?void 0:E.code))f.resolver=new xI(v,function sr(v,f){var m;const E=(0,O.m9)(v),x=f;return H(f.customData.operationType,E,"argument-error"),H(null===(m=x.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,E,"argument-error"),$u._fromError(E,x)}(v,f));else if(x){const k=sh(f),z=f;k&&(z.credential=k,z.tenantId=x.tenantId||void 0,z.email=x.email||void 0,z.phoneNumber=x.phoneNumber||void 0)}}(v,m),m}).then(m=>{const x=m.user;return{operationType:m.operationType,credential:ih(m),additionalUserInfo:Nm(m),user:us.getOrCreate(x)}})}function tu(v,f){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,p.Z)(function*(v,f){const m=yield f;return{verificationId:m.verificationId,confirm:E=>Lr(v,m.confirm(E))}})).apply(this,arguments)}class xI{constructor(f,m){this.resolver=m,this.auth=function Ap(v){return v.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return Lr(bc(this.auth),this.resolver.resolveSignIn(f))}}class us{constructor(f){this._delegate=f,this.multiFactor=function Pd(v){const f=(0,O.m9)(v);return an.has(f)||an.set(f,Ds._fromUser(f)),an.get(f)}(f)}static getOrCreate(f){return us.USER_MAP.has(f)||us.USER_MAP.set(f,new us(f)),us.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var m=this;return(0,p.Z)(function*(){return Lr(m.auth,Pr(m._delegate,f))})()}linkWithPhoneNumber(f,m){var E=this;return(0,p.Z)(function*(){return tu(E.auth,function Ka(v,f,m){return dc.apply(this,arguments)}(E._delegate,f,m))})()}linkWithPopup(f){var m=this;return(0,p.Z)(function*(){return Lr(m.auth,function ar(v,f,m){return kn.apply(this,arguments)}(m._delegate,f,No))})()}linkWithRedirect(f){var m=this;return(0,p.Z)(function*(){return yield eu(Mn(m.auth)),function Y(v,f,m){return function re(v,f,m){return Ie.apply(this,arguments)}(v,f,m)}(m._delegate,f,No)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var m=this;return(0,p.Z)(function*(){return Lr(m.auth,Fu(m._delegate,f))})()}reauthenticateWithPhoneNumber(f,m){return tu(this.auth,function Ud(v,f,m){return lo.apply(this,arguments)}(this._delegate,f,m))}reauthenticateWithPopup(f){return Lr(this.auth,function fc(v,f,m){return pc.apply(this,arguments)}(this._delegate,f,No))}reauthenticateWithRedirect(f){var m=this;return(0,p.Z)(function*(){return yield eu(Mn(m.auth)),function T(v,f,m){return function M(v,f,m){return U.apply(this,arguments)}(v,f,m)}(m._delegate,f,No)})()}sendEmailVerification(f){return function Bu(v,f){return Zn.apply(this,arguments)}(this._delegate,f)}unlink(f){var m=this;return(0,p.Z)(function*(){return yield function Ad(v,f){return Ii.apply(this,arguments)}(m._delegate,f),m})()}updateEmail(f){return function Bf(v,f){return Jl((0,O.m9)(v),f,null)}(this._delegate,f)}updatePassword(f){return function Xl(v,f){return Jl((0,O.m9)(v),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function yn(v,f){return ep.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function Jo(v,f){return Ql.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,m){return function Xo(v,f,m){return Ci.apply(this,arguments)}(this._delegate,f,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}us.USER_MAP=new WeakMap;const oh=H;let qm=(()=>{class v{constructor(m,E){if(this.app=m,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:x}=m.options;oh(x,"invalid-api-key",{appName:m.name}),oh(x,"invalid-api-key",{appName:m.name});const k=typeof window<"u"?No:void 0;this._delegate=E.initialize({options:{persistence:Km(x,m.name),popupRedirectResolver:k}}),this._delegate._updateErrorMap(Ye),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?us.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,E){!function Bl(v,f,m){const E=Mn(v);H(E._canInitEmulator,E,"emulator-config-failed"),H(/^https?:\/\//.test(f),E,"invalid-emulator-scheme");const x=!!m?.disableWarnings,k=Ma(f),{host:z,port:le}=function Ra(v){const f=Ma(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(f.length));if(!m)return{host:"",port:null};const E=m[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(E);if(x){const k=x[1];return{host:k,port:Yt(E.substr(k.length+1))}}{const[k,z]=E.split(":");return{host:k,port:Yt(z)}}}(f);E.config.emulator={url:`${k}//${z}${null===le?"":`:${le}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:z,port:le,protocol:k.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function rr(){function v(){const f=document.createElement("p"),m=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,m,E)}applyActionCode(m){return function Kl(v,f){return Co.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Uu(this._delegate,m)}confirmPasswordReset(m,E){return function to(v,f,m){return Zr.apply(this,arguments)}(this._delegate,m,E)}createUserWithEmailAndPassword(m,E){var x=this;return(0,p.Z)(function*(){return Lr(x._delegate,function it(v,f,m){return Yl.apply(this,arguments)}(x._delegate,m,E))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function qt(v,f){return Ha.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function Vf(v,f){return"EMAIL_SIGNIN"===kr.parseLink(f)?.operation}(0,m)}getRedirectResult(){var m=this;return(0,p.Z)(function*(){oh(eh(),m._delegate,"operation-not-supported-in-this-environment");const E=yield function $e(v,f){return dt.apply(this,arguments)}(m._delegate,No);return E?Lr(m._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function Ip(v,f){Mn(v)._logFramework(f)}(this._delegate,m)}onAuthStateChanged(m,E,x){const{next:k,error:z,complete:le}=_v(m,E,x);return this._delegate.onAuthStateChanged(k,z,le)}onIdTokenChanged(m,E,x){const{next:k,error:z,complete:le}=_v(m,E,x);return this._delegate.onIdTokenChanged(k,z,le)}sendSignInLinkToEmail(m,E){return function Mm(v,f,m){return Md.apply(this,arguments)}(this._delegate,m,E)}sendPasswordResetEmail(m,E){return function ql(v,f,m){return Qo.apply(this,arguments)}(this._delegate,m,E||void 0)}setPersistence(m){var E=this;return(0,p.Z)(function*(){let x;switch(function pv(v,f){Ja(Object.values(Ti).includes(f),v,"invalid-persistence-type"),(0,O.b$)()?Ja(f!==Ti.SESSION,v,"unsupported-persistence-type"):(0,O.UG)()?Ja(f===Ti.NONE,v,"unsupported-persistence-type"):ua()?Ja(f===Ti.NONE||f===Ti.LOCAL&&(0,O.hl)(),v,"unsupported-persistence-type"):Ja(f===Ti.NONE||bp(),v,"unsupported-persistence-type")}(E._delegate,m),m){case Ti.SESSION:x=Hi;break;case Ti.LOCAL:x=(yield ie(Qr)._isAvailable())?Qr:ss;break;case Ti.NONE:x=j;break;default:return Me("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(x)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return Lr(this._delegate,function Gl(v){return Wl.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return Lr(this._delegate,Nn(this._delegate,m))}signInWithCustomToken(m){return Lr(this._delegate,function On(v,f){return Va.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,E){return Lr(this._delegate,function tv(v,f,m){return Nn((0,O.m9)(v),Cd.credential(f,m))}(this._delegate,m,E))}signInWithEmailLink(m,E){return Lr(this._delegate,function Uf(v,f,m){return ja.apply(this,arguments)}(this._delegate,m,E))}signInWithPhoneNumber(m,E){return tu(this._delegate,function As(v,f,m){return os.apply(this,arguments)}(this._delegate,m,E))}signInWithPopup(m){var E=this;return(0,p.Z)(function*(){return oh(eh(),E._delegate,"operation-not-supported-in-this-environment"),Lr(E._delegate,function $n(v,f,m){return xo.apply(this,arguments)}(E._delegate,m,No))})()}signInWithRedirect(m){var E=this;return(0,p.Z)(function*(){return oh(eh(),E._delegate,"operation-not-supported-in-this-environment"),yield eu(E._delegate),function oa(v,f,m){return function Om(v,f,m){return D.apply(this,arguments)}(v,f,m)}(E._delegate,m,No)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function Zl(v,f){return Ba.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=Ti,v})();function _v(v,f,m){let E=v;"function"!=typeof v&&({next:E,error:f,complete:m}=v);const x=E;return{next:z=>x(z&&us.getOrCreate(z)),error:f,complete:m}}function Km(v,f){const m=function gv(v,f){const m=Sp();if(!m)return[];const E=Z(Tp,v,f);switch(m.getItem(E)){case Ti.NONE:return[j];case Ti.LOCAL:return[Qr,Hi];case Ti.SESSION:return[Hi];default:return[]}}(v,f);if(typeof self<"u"&&!m.includes(Qr)&&m.push(Qr),typeof window<"u")for(const E of[ss,Hi])m.includes(E)||m.push(E);return m.includes(j)||m.push(j),m}class ah{constructor(){this.providerId="phone",this._delegate=new hc(bc(J.Z.auth()))}static credential(f,m){return hc.credential(f,m)}verifyPhoneNumber(f,m){return this._delegate.verifyPhoneNumber(f,m)}unwrap(){return this._delegate}}ah.PHONE_SIGN_IN_METHOD=hc.PHONE_SIGN_IN_METHOD,ah.PROVIDER_ID=hc.PROVIDER_ID;const Mp=H;class Zm{constructor(f,m,E=J.Z.app()){var x;Mp(null===(x=E.options)||void 0===x?void 0:x.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new So(f,m,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function MI(v){v.INTERNAL.registerComponent(new ce.wA("auth-compat",f=>{const m=f.getProvider("app-compat").getImmediate(),E=f.getProvider("auth");return new qm(m,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Cd,FacebookAuthProvider:bd,GithubAuthProvider:Hl,GoogleAuthProvider:Lf,OAuthProvider:Pa,SAMLAuthProvider:Bi,PhoneAuthProvider:ah,PhoneMultiFactorGenerator:jm,RecaptchaVerifier:Zm,TwitterAuthProvider:Td,Auth:qm,AuthCredential:Bn,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.2.24")}(J.Z)},9751:(lt,Ce,L)=>{L.d(Ce,{y:()=>pe});var p=L(930),J=L(727),O=L(8822),ae=L(9635),se=L(2416),fe=L(576),ce=L(2806);let pe=(()=>{class Q{constructor(Se){Se&&(this._subscribe=Se)}lift(Se){const Ye=new Q;return Ye.source=this,Ye.operator=Se,Ye}subscribe(Se,Ye,at){const ge=function G(Q){return Q&&Q instanceof p.Lv||function $(Q){return Q&&(0,fe.m)(Q.next)&&(0,fe.m)(Q.error)&&(0,fe.m)(Q.complete)}(Q)&&(0,J.Nn)(Q)}(Se)?Se:new p.Hp(Se,Ye,at);return(0,ce.x)(()=>{const{operator:Ae,source:De}=this;ge.add(Ae?Ae.call(ge,De):De?this._subscribe(ge):this._trySubscribe(ge))}),ge}_trySubscribe(Se){try{return this._subscribe(Se)}catch(Ye){Se.error(Ye)}}forEach(Se,Ye){return new(Ye=me(Ye))((at,ge)=>{const Ae=new p.Hp({next:De=>{try{Se(De)}catch(Le){ge(Le),Ae.unsubscribe()}},error:ge,complete:at});this.subscribe(Ae)})}_subscribe(Se){var Ye;return null===(Ye=this.source)||void 0===Ye?void 0:Ye.subscribe(Se)}[O.L](){return this}pipe(...Se){return(0,ae.U)(Se)(this)}toPromise(Se){return new(Se=me(Se))((Ye,at)=>{let ge;this.subscribe(Ae=>ge=Ae,Ae=>at(Ae),()=>Ye(ge))})}}return Q.create=Be=>new Q(Be),Q})();function me(Q){var Be;return null!==(Be=Q??se.v.Promise)&&void 0!==Be?Be:Promise}},7579:(lt,Ce,L)=>{L.d(Ce,{x:()=>ce});var p=L(9751),J=L(727);const ae=(0,L(3888).d)(me=>function(){me(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var se=L(8737),fe=L(2806);let ce=(()=>{class me extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const Q=new pe(this,this);return Q.operator=G,Q}_throwIfClosed(){if(this.closed)throw new ae}next(G){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Q of this.currentObservers)Q.next(G)}})}error(G){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:Q}=this;for(;Q.length;)Q.shift().error(G)}})}complete(){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:Q,isStopped:Be,observers:Se}=this;return Q||Be?J.Lc:(this.currentObservers=null,Se.push(G),new J.w0(()=>{this.currentObservers=null,(0,se.P)(Se,G)}))}_checkFinalizedStatuses(G){const{hasError:Q,thrownError:Be,isStopped:Se}=this;Q?G.error(Be):Se&&G.complete()}asObservable(){const G=new p.y;return G.source=this,G}}return me.create=($,G)=>new pe($,G),me})();class pe extends ce{constructor($,G){super(),this.destination=$,this.source=G}next($){var G,Q;null===(Q=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===Q||Q.call(G,$)}error($){var G,Q;null===(Q=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===Q||Q.call(G,$)}complete(){var $,G;null===(G=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===G||G.call($)}_subscribe($){var G,Q;return null!==(Q=null===(G=this.source)||void 0===G?void 0:G.subscribe($))&&void 0!==Q?Q:J.Lc}}},930:(lt,Ce,L)=>{L.d(Ce,{Hp:()=>at,Lv:()=>Q});var p=L(576),J=L(727),O=L(2416),ae=L(7849),se=L(5032);const fe=me("C",void 0,void 0);function me(Me,Ee,Re){return{kind:Me,value:Ee,error:Re}}var $=L(3410),G=L(2806);class Q extends J.w0{constructor(Ee){super(),this.isStopped=!1,Ee?(this.destination=Ee,(0,J.Nn)(Ee)&&Ee.add(this)):this.destination=Le}static create(Ee,Re,je){return new at(Ee,Re,je)}next(Ee){this.isStopped?De(function pe(Me){return me("N",Me,void 0)}(Ee),this):this._next(Ee)}error(Ee){this.isStopped?De(function ce(Me){return me("E",void 0,Me)}(Ee),this):(this.isStopped=!0,this._error(Ee))}complete(){this.isStopped?De(fe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ee){this.destination.next(Ee)}_error(Ee){try{this.destination.error(Ee)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Be=Function.prototype.bind;function Se(Me,Ee){return Be.call(Me,Ee)}class Ye{constructor(Ee){this.partialObserver=Ee}next(Ee){const{partialObserver:Re}=this;if(Re.next)try{Re.next(Ee)}catch(je){ge(je)}}error(Ee){const{partialObserver:Re}=this;if(Re.error)try{Re.error(Ee)}catch(je){ge(je)}else ge(Ee)}complete(){const{partialObserver:Ee}=this;if(Ee.complete)try{Ee.complete()}catch(Re){ge(Re)}}}class at extends Q{constructor(Ee,Re,je){let Oe;if(super(),(0,p.m)(Ee)||!Ee)Oe={next:Ee??void 0,error:Re??void 0,complete:je??void 0};else{let H;this&&O.v.useDeprecatedNextContext?(H=Object.create(Ee),H.unsubscribe=()=>this.unsubscribe(),Oe={next:Ee.next&&Se(Ee.next,H),error:Ee.error&&Se(Ee.error,H),complete:Ee.complete&&Se(Ee.complete,H)}):Oe=Ee}this.destination=new Ye(Oe)}}function ge(Me){O.v.useDeprecatedSynchronousErrorHandling?(0,G.O)(Me):(0,ae.h)(Me)}function De(Me,Ee){const{onStoppedNotification:Re}=O.v;Re&&$.z.setTimeout(()=>Re(Me,Ee))}const Le={closed:!0,next:se.Z,error:function Ae(Me){throw Me},complete:se.Z}},727:(lt,Ce,L)=>{L.d(Ce,{Lc:()=>fe,w0:()=>se,Nn:()=>ce});var p=L(576);const O=(0,L(3888).d)(me=>function(G){me(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((Q,Be)=>`${Be+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var ae=L(8737);class se{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const Se of G)Se.remove(this);else G.remove(this);const{initialTeardown:Q}=this;if((0,p.m)(Q))try{Q()}catch(Se){$=Se instanceof O?Se.errors:[Se]}const{_finalizers:Be}=this;if(Be){this._finalizers=null;for(const Se of Be)try{pe(Se)}catch(Ye){$=$??[],Ye instanceof O?$=[...$,...Ye.errors]:$.push(Ye)}}if($)throw new O($)}}add($){var G;if($&&$!==this)if(this.closed)pe($);else{if($ instanceof se){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push($)}}_hasParent($){const{_parentage:G}=this;return G===$||Array.isArray(G)&&G.includes($)}_addParent($){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push($),G):G?[G,$]:$}_removeParent($){const{_parentage:G}=this;G===$?this._parentage=null:Array.isArray(G)&&(0,ae.P)(G,$)}remove($){const{_finalizers:G}=this;G&&(0,ae.P)(G,$),$ instanceof se&&$._removeParent(this)}}se.EMPTY=(()=>{const me=new se;return me.closed=!0,me})();const fe=se.EMPTY;function ce(me){return me instanceof se||me&&"closed"in me&&(0,p.m)(me.remove)&&(0,p.m)(me.add)&&(0,p.m)(me.unsubscribe)}function pe(me){(0,p.m)(me)?me():me.unsubscribe()}},2416:(lt,Ce,L)=>{L.d(Ce,{v:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(lt,Ce,L)=>{L.d(Ce,{E:()=>J});const J=new(L(9751).y)(se=>se.complete())},8996:(lt,Ce,L)=>{L.d(Ce,{D:()=>Ee});var p=L(8421),J=L(5363),O=L(9468),fe=L(9751),pe=L(2202),me=L(576),$=L(9672);function Q(Re,je){if(!Re)throw new Error("Iterable cannot be null");return new fe.y(Oe=>{(0,$.f)(Oe,je,()=>{const H=Re[Symbol.asyncIterator]();(0,$.f)(Oe,je,()=>{H.next().then(we=>{we.done?Oe.complete():Oe.next(we.value)})},0,!0)})})}var Be=L(3670),Se=L(8239),Ye=L(1144),at=L(6495),ge=L(2206),Ae=L(4532),De=L(3260);function Ee(Re,je){return je?function Me(Re,je){if(null!=Re){if((0,Be.c)(Re))return function ae(Re,je){return(0,p.Xf)(Re).pipe((0,O.R)(je),(0,J.Q)(je))}(Re,je);if((0,Ye.z)(Re))return function ce(Re,je){return new fe.y(Oe=>{let H=0;return je.schedule(function(){H===Re.length?Oe.complete():(Oe.next(Re[H++]),Oe.closed||this.schedule())})})}(Re,je);if((0,Se.t)(Re))return function se(Re,je){return(0,p.Xf)(Re).pipe((0,O.R)(je),(0,J.Q)(je))}(Re,je);if((0,ge.D)(Re))return Q(Re,je);if((0,at.T)(Re))return function G(Re,je){return new fe.y(Oe=>{let H;return(0,$.f)(Oe,je,()=>{H=Re[pe.h](),(0,$.f)(Oe,je,()=>{let we,K;try{({value:we,done:K}=H.next())}catch(X){return void Oe.error(X)}K?Oe.complete():Oe.next(we)},0,!0)}),()=>(0,me.m)(H?.return)&&H.return()})}(Re,je);if((0,De.L)(Re))return function Le(Re,je){return Q((0,De.Q)(Re),je)}(Re,je)}throw(0,Ae.z)(Re)}(Re,je):(0,p.Xf)(Re)}},8421:(lt,Ce,L)=>{L.d(Ce,{Xf:()=>Be});var p=L(655),J=L(1144),O=L(8239),ae=L(9751),se=L(3670),fe=L(2206),ce=L(4532),pe=L(6495),me=L(3260),$=L(576),G=L(7849),Q=L(8822);function Be(Me){if(Me instanceof ae.y)return Me;if(null!=Me){if((0,se.c)(Me))return function Se(Me){return new ae.y(Ee=>{const Re=Me[Q.L]();if((0,$.m)(Re.subscribe))return Re.subscribe(Ee);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Me);if((0,J.z)(Me))return function Ye(Me){return new ae.y(Ee=>{for(let Re=0;Re<Me.length&&!Ee.closed;Re++)Ee.next(Me[Re]);Ee.complete()})}(Me);if((0,O.t)(Me))return function at(Me){return new ae.y(Ee=>{Me.then(Re=>{Ee.closed||(Ee.next(Re),Ee.complete())},Re=>Ee.error(Re)).then(null,G.h)})}(Me);if((0,fe.D)(Me))return Ae(Me);if((0,pe.T)(Me))return function ge(Me){return new ae.y(Ee=>{for(const Re of Me)if(Ee.next(Re),Ee.closed)return;Ee.complete()})}(Me);if((0,me.L)(Me))return function De(Me){return Ae((0,me.Q)(Me))}(Me)}throw(0,ce.z)(Me)}function Ae(Me){return new ae.y(Ee=>{(function Le(Me,Ee){var Re,je,Oe,H;return(0,p.mG)(this,void 0,void 0,function*(){try{for(Re=(0,p.KL)(Me);!(je=yield Re.next()).done;)if(Ee.next(je.value),Ee.closed)return}catch(we){Oe={error:we}}finally{try{je&&!je.done&&(H=Re.return)&&(yield H.call(Re))}finally{if(Oe)throw Oe.error}}Ee.complete()})})(Me,Ee).catch(Re=>Ee.error(Re))})}},6451:(lt,Ce,L)=>{L.d(Ce,{T:()=>fe});var p=L(8189),J=L(8421),O=L(515),ae=L(7669),se=L(8996);function fe(...ce){const pe=(0,ae.yG)(ce),me=(0,ae._6)(ce,1/0),$=ce;return $.length?1===$.length?(0,J.Xf)($[0]):(0,p.J)(me)((0,se.D)($,pe)):O.E}},5403:(lt,Ce,L)=>{L.d(Ce,{x:()=>J});var p=L(930);function J(ae,se,fe,ce,pe){return new O(ae,se,fe,ce,pe)}class O extends p.Lv{constructor(se,fe,ce,pe,me,$){super(se),this.onFinalize=me,this.shouldUnsubscribe=$,this._next=fe?function(G){try{fe(G)}catch(Q){se.error(Q)}}:super._next,this._error=pe?function(G){try{pe(G)}catch(Q){se.error(Q)}finally{this.unsubscribe()}}:super._error,this._complete=ce?function(){try{ce()}catch(G){se.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:fe}=this;super.unsubscribe(),!fe&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}}},4004:(lt,Ce,L)=>{L.d(Ce,{U:()=>O});var p=L(4482),J=L(5403);function O(ae,se){return(0,p.e)((fe,ce)=>{let pe=0;fe.subscribe((0,J.x)(ce,me=>{ce.next(ae.call(se,me,pe++))}))})}},8189:(lt,Ce,L)=>{L.d(Ce,{J:()=>O});var p=L(5577),J=L(4671);function O(ae=1/0){return(0,p.z)(J.y,ae)}},5577:(lt,Ce,L)=>{L.d(Ce,{z:()=>pe});var p=L(4004),J=L(8421),O=L(4482),ae=L(9672),se=L(5403),ce=L(576);function pe(me,$,G=1/0){return(0,ce.m)($)?pe((Q,Be)=>(0,p.U)((Se,Ye)=>$(Q,Se,Be,Ye))((0,J.Xf)(me(Q,Be))),G):("number"==typeof $&&(G=$),(0,O.e)((Q,Be)=>function fe(me,$,G,Q,Be,Se,Ye,at){const ge=[];let Ae=0,De=0,Le=!1;const Me=()=>{Le&&!ge.length&&!Ae&&$.complete()},Ee=je=>Ae<Q?Re(je):ge.push(je),Re=je=>{Se&&$.next(je),Ae++;let Oe=!1;(0,J.Xf)(G(je,De++)).subscribe((0,se.x)($,H=>{Be?.(H),Se?Ee(H):$.next(H)},()=>{Oe=!0},void 0,()=>{if(Oe)try{for(Ae--;ge.length&&Ae<Q;){const H=ge.shift();Ye?(0,ae.f)($,Ye,()=>Re(H)):Re(H)}Me()}catch(H){$.error(H)}}))};return me.subscribe((0,se.x)($,Ee,()=>{Le=!0,Me()})),()=>{at?.()}}(Q,Be,me,G)))}},5363:(lt,Ce,L)=>{L.d(Ce,{Q:()=>ae});var p=L(9672),J=L(4482),O=L(5403);function ae(se,fe=0){return(0,J.e)((ce,pe)=>{ce.subscribe((0,O.x)(pe,me=>(0,p.f)(pe,se,()=>pe.next(me),fe),()=>(0,p.f)(pe,se,()=>pe.complete(),fe),me=>(0,p.f)(pe,se,()=>pe.error(me),fe)))})}},3099:(lt,Ce,L)=>{L.d(Ce,{B:()=>se});var p=L(8421),J=L(7579),O=L(930),ae=L(4482);function se(ce={}){const{connector:pe=(()=>new J.x),resetOnError:me=!0,resetOnComplete:$=!0,resetOnRefCountZero:G=!0}=ce;return Q=>{let Be,Se,Ye,at=0,ge=!1,Ae=!1;const De=()=>{Se?.unsubscribe(),Se=void 0},Le=()=>{De(),Be=Ye=void 0,ge=Ae=!1},Me=()=>{const Ee=Be;Le(),Ee?.unsubscribe()};return(0,ae.e)((Ee,Re)=>{at++,!Ae&&!ge&&De();const je=Ye=Ye??pe();Re.add(()=>{at--,0===at&&!Ae&&!ge&&(Se=fe(Me,G))}),je.subscribe(Re),!Be&&at>0&&(Be=new O.Hp({next:Oe=>je.next(Oe),error:Oe=>{Ae=!0,De(),Se=fe(Le,me,Oe),je.error(Oe)},complete:()=>{ge=!0,De(),Se=fe(Le,$),je.complete()}}),(0,p.Xf)(Ee).subscribe(Be))})(Q)}}function fe(ce,pe,...me){if(!0===pe)return void ce();if(!1===pe)return;const $=new O.Hp({next:()=>{$.unsubscribe(),ce()}});return pe(...me).subscribe($)}},9468:(lt,Ce,L)=>{L.d(Ce,{R:()=>J});var p=L(4482);function J(O,ae=0){return(0,p.e)((se,fe)=>{fe.add(O.schedule(()=>se.subscribe(fe),ae))})}},8505:(lt,Ce,L)=>{L.d(Ce,{b:()=>se});var p=L(576),J=L(4482),O=L(5403),ae=L(4671);function se(fe,ce,pe){const me=(0,p.m)(fe)||ce||pe?{next:fe,error:ce,complete:pe}:fe;return me?(0,J.e)(($,G)=>{var Q;null===(Q=me.subscribe)||void 0===Q||Q.call(me);let Be=!0;$.subscribe((0,O.x)(G,Se=>{var Ye;null===(Ye=me.next)||void 0===Ye||Ye.call(me,Se),G.next(Se)},()=>{var Se;Be=!1,null===(Se=me.complete)||void 0===Se||Se.call(me),G.complete()},Se=>{var Ye;Be=!1,null===(Ye=me.error)||void 0===Ye||Ye.call(me,Se),G.error(Se)},()=>{var Se,Ye;Be&&(null===(Se=me.unsubscribe)||void 0===Se||Se.call(me)),null===(Ye=me.finalize)||void 0===Ye||Ye.call(me)}))}):ae.y}},4408:(lt,Ce,L)=>{L.d(Ce,{o:()=>se});var p=L(727);class J extends p.w0{constructor(ce,pe){super()}schedule(ce,pe=0){return this}}const O={setInterval(fe,ce,...pe){const{delegate:me}=O;return me?.setInterval?me.setInterval(fe,ce,...pe):setInterval(fe,ce,...pe)},clearInterval(fe){const{delegate:ce}=O;return(ce?.clearInterval||clearInterval)(fe)},delegate:void 0};var ae=L(8737);class se extends J{constructor(ce,pe){super(ce,pe),this.scheduler=ce,this.work=pe,this.pending=!1}schedule(ce,pe=0){var me;if(this.closed)return this;this.state=ce;const $=this.id,G=this.scheduler;return null!=$&&(this.id=this.recycleAsyncId(G,$,pe)),this.pending=!0,this.delay=pe,this.id=null!==(me=this.id)&&void 0!==me?me:this.requestAsyncId(G,this.id,pe),this}requestAsyncId(ce,pe,me=0){return O.setInterval(ce.flush.bind(ce,this),me)}recycleAsyncId(ce,pe,me=0){if(null!=me&&this.delay===me&&!1===this.pending)return pe;null!=pe&&O.clearInterval(pe)}execute(ce,pe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const me=this._execute(ce,pe);if(me)return me;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ce,pe){let $,me=!1;try{this.work(ce)}catch(G){me=!0,$=G||new Error("Scheduled action threw falsy error")}if(me)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:ce,scheduler:pe}=this,{actions:me}=pe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(me,this),null!=ce&&(this.id=this.recycleAsyncId(pe,ce,null)),this.delay=null,super.unsubscribe()}}}},7565:(lt,Ce,L)=>{L.d(Ce,{v:()=>O});var p=L(6063);class J{constructor(se,fe=J.now){this.schedulerActionCtor=se,this.now=fe}schedule(se,fe=0,ce){return new this.schedulerActionCtor(this,se).schedule(ce,fe)}}J.now=p.l.now;class O extends J{constructor(se,fe=J.now){super(se,fe),this.actions=[],this._active=!1}flush(se){const{actions:fe}=this;if(this._active)return void fe.push(se);let ce;this._active=!0;do{if(ce=se.execute(se.state,se.delay))break}while(se=fe.shift());if(this._active=!1,ce){for(;se=fe.shift();)se.unsubscribe();throw ce}}}},4986:(lt,Ce,L)=>{L.d(Ce,{z:()=>O});var p=L(4408);const O=new(L(7565).v)(p.o)},6063:(lt,Ce,L)=>{L.d(Ce,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},3410:(lt,Ce,L)=>{L.d(Ce,{z:()=>p});const p={setTimeout(J,O,...ae){const{delegate:se}=p;return se?.setTimeout?se.setTimeout(J,O,...ae):setTimeout(J,O,...ae)},clearTimeout(J){const{delegate:O}=p;return(O?.clearTimeout||clearTimeout)(J)},delegate:void 0}},2202:(lt,Ce,L)=>{L.d(Ce,{h:()=>J});const J=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(lt,Ce,L)=>{L.d(Ce,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(lt,Ce,L)=>{L.d(Ce,{_6:()=>fe,jO:()=>ae,yG:()=>se});var p=L(576);function O(ce){return ce[ce.length-1]}function ae(ce){return(0,p.m)(O(ce))?ce.pop():void 0}function se(ce){return function J(ce){return ce&&(0,p.m)(ce.schedule)}(O(ce))?ce.pop():void 0}function fe(ce,pe){return"number"==typeof O(ce)?ce.pop():pe}},8737:(lt,Ce,L)=>{function p(J,O){if(J){const ae=J.indexOf(O);0<=ae&&J.splice(ae,1)}}L.d(Ce,{P:()=>p})},3888:(lt,Ce,L)=>{function p(J){const ae=J(se=>{Error.call(se),se.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}L.d(Ce,{d:()=>p})},2806:(lt,Ce,L)=>{L.d(Ce,{O:()=>ae,x:()=>O});var p=L(2416);let J=null;function O(se){if(p.v.useDeprecatedSynchronousErrorHandling){const fe=!J;if(fe&&(J={errorThrown:!1,error:null}),se(),fe){const{errorThrown:ce,error:pe}=J;if(J=null,ce)throw pe}}else se()}function ae(se){p.v.useDeprecatedSynchronousErrorHandling&&J&&(J.errorThrown=!0,J.error=se)}},9672:(lt,Ce,L)=>{function p(J,O,ae,se=0,fe=!1){const ce=O.schedule(function(){ae(),fe?J.add(this.schedule(null,se)):this.unsubscribe()},se);if(J.add(ce),!fe)return ce}L.d(Ce,{f:()=>p})},4671:(lt,Ce,L)=>{function p(J){return J}L.d(Ce,{y:()=>p})},1144:(lt,Ce,L)=>{L.d(Ce,{z:()=>p});const p=J=>J&&"number"==typeof J.length&&"function"!=typeof J},2206:(lt,Ce,L)=>{L.d(Ce,{D:()=>J});var p=L(576);function J(O){return Symbol.asyncIterator&&(0,p.m)(O?.[Symbol.asyncIterator])}},576:(lt,Ce,L)=>{function p(J){return"function"==typeof J}L.d(Ce,{m:()=>p})},3670:(lt,Ce,L)=>{L.d(Ce,{c:()=>O});var p=L(8822),J=L(576);function O(ae){return(0,J.m)(ae[p.L])}},6495:(lt,Ce,L)=>{L.d(Ce,{T:()=>O});var p=L(2202),J=L(576);function O(ae){return(0,J.m)(ae?.[p.h])}},8239:(lt,Ce,L)=>{L.d(Ce,{t:()=>J});var p=L(576);function J(O){return(0,p.m)(O?.then)}},3260:(lt,Ce,L)=>{L.d(Ce,{L:()=>ae,Q:()=>O});var p=L(655),J=L(576);function O(se){return(0,p.FC)(this,arguments,function*(){const ce=se.getReader();try{for(;;){const{value:pe,done:me}=yield(0,p.qq)(ce.read());if(me)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(pe)}}finally{ce.releaseLock()}})}function ae(se){return(0,J.m)(se?.getReader)}},4482:(lt,Ce,L)=>{L.d(Ce,{A:()=>J,e:()=>O});var p=L(576);function J(ae){return(0,p.m)(ae?.lift)}function O(ae){return se=>{if(J(se))return se.lift(function(fe){try{return ae(fe,this)}catch(ce){this.error(ce)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(lt,Ce,L)=>{function p(){}L.d(Ce,{Z:()=>p})},9635:(lt,Ce,L)=>{L.d(Ce,{U:()=>O,z:()=>J});var p=L(4671);function J(...ae){return O(ae)}function O(ae){return 0===ae.length?p.y:1===ae.length?ae[0]:function(fe){return ae.reduce((ce,pe)=>pe(ce),fe)}}},7849:(lt,Ce,L)=>{L.d(Ce,{h:()=>O});var p=L(2416),J=L(3410);function O(ae){J.z.setTimeout(()=>{const{onUnhandledError:se}=p.v;if(!se)throw ae;se(ae)})}},4532:(lt,Ce,L)=>{function p(J){return new TypeError(`You provided ${null!==J&&"object"==typeof J?"an invalid object":`'${J}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(Ce,{z:()=>p})},655:(lt,Ce,L)=>{function ae(K,X){var ie={};for(var ne in K)Object.prototype.hasOwnProperty.call(K,ne)&&X.indexOf(ne)<0&&(ie[ne]=K[ne]);if(null!=K&&"function"==typeof Object.getOwnPropertySymbols){var Ve=0;for(ne=Object.getOwnPropertySymbols(K);Ve<ne.length;Ve++)X.indexOf(ne[Ve])<0&&Object.prototype.propertyIsEnumerable.call(K,ne[Ve])&&(ie[ne[Ve]]=K[ne[Ve]])}return ie}function pe(K,X,ie,ne){return new(ie||(ie=Promise))(function(Fe,ct){function sn(Lt){try{Pt(ne.next(Lt))}catch(gt){ct(gt)}}function hn(Lt){try{Pt(ne.throw(Lt))}catch(gt){ct(gt)}}function Pt(Lt){Lt.done?Fe(Lt.value):function Ve(Fe){return Fe instanceof ie?Fe:new ie(function(ct){ct(Fe)})}(Lt.value).then(sn,hn)}Pt((ne=ne.apply(K,X||[])).next())})}function ge(K){return this instanceof ge?(this.v=K,this):new ge(K)}function Ae(K,X,ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ve,ne=ie.apply(K,X||[]),Fe=[];return Ve={},ct("next"),ct("throw"),ct("return"),Ve[Symbol.asyncIterator]=function(){return this},Ve;function ct(en){ne[en]&&(Ve[en]=function(Sr){return new Promise(function(Gr,mt){Fe.push([en,Sr,Gr,mt])>1||sn(en,Sr)})})}function sn(en,Sr){try{!function hn(en){en.value instanceof ge?Promise.resolve(en.value.v).then(Pt,Lt):gt(Fe[0][2],en)}(ne[en](Sr))}catch(Gr){gt(Fe[0][3],Gr)}}function Pt(en){sn("next",en)}function Lt(en){sn("throw",en)}function gt(en,Sr){en(Sr),Fe.shift(),Fe.length&&sn(Fe[0][0],Fe[0][1])}}function Le(K){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ie,X=K[Symbol.asyncIterator];return X?X.call(K):(K=function Q(K){var X="function"==typeof Symbol&&Symbol.iterator,ie=X&&K[X],ne=0;if(ie)return ie.call(K);if(K&&"number"==typeof K.length)return{next:function(){return K&&ne>=K.length&&(K=void 0),{value:K&&K[ne++],done:!K}}};throw new TypeError(X?"Object is not iterable.":"Symbol.iterator is not defined.")}(K),ie={},ne("next"),ne("throw"),ne("return"),ie[Symbol.asyncIterator]=function(){return this},ie);function ne(Fe){ie[Fe]=K[Fe]&&function(ct){return new Promise(function(sn,hn){!function Ve(Fe,ct,sn,hn){Promise.resolve(hn).then(function(Pt){Fe({value:Pt,done:sn})},ct)}(sn,hn,(ct=K[Fe](ct)).done,ct.value)})}}}L.d(Ce,{FC:()=>Ae,KL:()=>Le,_T:()=>ae,mG:()=>pe,qq:()=>ge})},4650:(lt,Ce,L)=>{L.d(Ce,{$8M:()=>Ju,$Z:()=>_C,AFp:()=>gD,AaK:()=>pe,CHM:()=>Ha,CRH:()=>tD,CZH:()=>ly,CqO:()=>kw,D6c:()=>cf,DdM:()=>Gh,EJc:()=>_D,EpF:()=>Rw,F4k:()=>Nw,FYo:()=>KI,FiY:()=>yt,G48:()=>vy,GfV:()=>Ov,Gpc:()=>G,JOm:()=>pi,KtG:()=>Bu,LFG:()=>He,Lbi:()=>Rx,Lck:()=>gu,MAs:()=>Ah,MMx:()=>Sg,MR2:()=>PS,NdJ:()=>ug,O4$:()=>Pd,OlP:()=>yn,P3R:()=>FI,PXZ:()=>Vx,Q6J:()=>xw,QGY:()=>Vo,QP$:()=>Kn,Qsj:()=>US,R0b:()=>fs,RDi:()=>x,Rgc:()=>qh,SBq:()=>Fp,Sil:()=>B0,Suo:()=>eD,TTD:()=>Zo,TgZ:()=>R_,VKq:()=>Mg,WLB:()=>w0,X6Q:()=>ND,XFs:()=>_t,Xpm:()=>xa,Xts:()=>Sv,Y36:()=>pa,YKP:()=>Jc,YNc:()=>Aw,Yjl:()=>Ra,Yz7:()=>mt,Z0I:()=>Wr,ZZ4:()=>iE,_Bn:()=>Ob,_UZ:()=>Mw,_Vd:()=>fa,_c5:()=>oE,_uU:()=>$w,aQg:()=>Qg,c2e:()=>ud,cJS:()=>yi,cg1:()=>pn,dDg:()=>DD,dqk:()=>Mt,eFA:()=>q0,ekj:()=>gg,eoX:()=>TD,f3M:()=>tt,g9A:()=>V0,h0i:()=>Xc,hGG:()=>aE,iGM:()=>Jb,ifc:()=>zt,ip1:()=>L0,jDz:()=>mr,kL8:()=>Wc,kcU:()=>rc,lG2:()=>Ma,lqb:()=>da,lri:()=>hy,n5z:()=>Jf,oAB:()=>Mn,oxw:()=>cg,q4F:()=>Lp,qLn:()=>Up,qOj:()=>Lc,qZA:()=>N_,rWj:()=>bD,sBO:()=>Hx,sIi:()=>lu,s_b:()=>ey,soG:()=>$g,tb:()=>U0,tp0:()=>Dn,uIk:()=>S_,vHH:()=>ge,vpe:()=>ds,wAp:()=>nt,xp6:()=>sC,z2F:()=>qg,zSh:()=>Mv,zs3:()=>Sc});var p=L(7579),J=L(727),O=L(9751),ae=L(6451),se=L(3099);function fe(s){for(let o in s)if(s[o]===fe)return o;throw Error("Could not find renamed property on target object.")}function ce(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function pe(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(pe).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function me(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const $=fe({__forward_ref__:fe});function G(s){return s.__forward_ref__=G,s.toString=function(){return pe(this())},s}function Q(s){return Be(s)?s():s}function Be(s){return"function"==typeof s&&s.hasOwnProperty($)&&s.__forward_ref__===G}function Se(s){return s&&!!s.\u0275providers}const at="https://g.co/ng/security#xss";class ge extends Error{constructor(o,u){super(function Ae(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,u)),this.code=o}}function De(s){return"string"==typeof s?s:null==s?"":String(s)}function je(s,o){throw new ge(-201,!1)}function Lt(s,o){null==s&&function gt(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function mt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function yi(s){return{providers:s.providers||[],imports:s.imports||[]}}function li(s){return Ar(s,zr)||Ar(s,_n)}function Wr(s){return null!==li(s)}function Ar(s,o){return s.hasOwnProperty(o)?s[o]:null}function vi(s){return s&&(s.hasOwnProperty(Ks)||s.hasOwnProperty(ci))?s[Ks]:null}const zr=fe({\u0275prov:fe}),Ks=fe({\u0275inj:fe}),_n=fe({ngInjectableDef:fe}),ci=fe({ngInjectorDef:fe});var _t=(()=>((_t=_t||{})[_t.Default=0]="Default",_t[_t.Host=1]="Host",_t[_t.Self=2]="Self",_t[_t.SkipSelf=4]="SkipSelf",_t[_t.Optional=8]="Optional",_t))();let ys;function Sn(s){const o=ys;return ys=s,o}function xr(s,o,u){const c=li(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&_t.Optional?null:void 0!==o?o:void je(pe(s))}const Mt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),An={},Cn="__NG_DI_FLAG__",Li="ngTempTokenPath",Wo=/\n/gm,ts="__source";let Zt;function Mr(s){const o=Zt;return Zt=s,o}function ns(s,o=_t.Default){if(void 0===Zt)throw new ge(-203,!1);return null===Zt?xr(s,void 0,o):Zt.get(s,o&_t.Optional?null:void 0,o)}function He(s,o=_t.Default){return(function Fi(){return ys}()||ns)(Q(s),o)}function tt(s,o=_t.Default){return He(s,bt(o))}function bt(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function Dt(s){const o=[];for(let u=0;u<s.length;u++){const c=Q(s[u]);if(Array.isArray(c)){if(0===c.length)throw new ge(900,!1);let d,g=_t.Default;for(let y=0;y<c.length;y++){const I=c[y],C=W(I);"number"==typeof C?-1===C?d=I.token:g|=C:d=I}o.push(He(d,g))}else o.push(He(c))}return o}function Ot(s,o){return s[Cn]=o,s.prototype[Cn]=o,s}function W(s){return s[Cn]}function ye(s){return{toString:s}.toString()}var te=(()=>((te=te||{})[te.OnPush=0]="OnPush",te[te.Default=1]="Default",te))(),zt=(()=>{return(s=zt||(zt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",zt;var s})();const xn={},wt=[],hr=fe({\u0275cmp:fe}),Ht=fe({\u0275dir:fe}),nr=fe({\u0275pipe:fe}),zo=fe({\u0275mod:fe}),Rr=fe({\u0275fac:fe}),Aa=fe({__NG_ELEMENT_ID__:fe});let Pf=0;function xa(s){return ye(()=>{const u=!0===s.standalone,c={},d={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===te.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||wt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||zt.Emulated,id:"c"+Pf++,styles:s.styles||wt,_:null,setInput:null,schemas:s.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},g=s.dependencies,y=s.features;return d.inputs=Bl(s.inputs,c),d.outputs=Bl(s.outputs),y&&y.forEach(I=>I(d)),d.directiveDefs=g?()=>("function"==typeof g?g():g).map(Ul).filter(vd):null,d.pipeDefs=g?()=>("function"==typeof g?g():g).map(Bn).filter(vd):null,d})}function Ul(s){return Yt(s)||rr(s)}function vd(s){return null!==s}function Mn(s){return ye(()=>({type:s.type,bootstrap:s.bootstrap||wt,declarations:s.declarations||wt,imports:s.imports||wt,exports:s.exports||wt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function Bl(s,o){if(null==s)return xn;const u={};for(const c in s)if(s.hasOwnProperty(c)){let d=s[c],g=d;Array.isArray(d)&&(g=d[1],d=d[0]),u[d]=c,o&&(o[d]=g)}return u}const Ma=xa;function Ra(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function Yt(s){return s[hr]||null}function rr(s){return s[Ht]||null}function Bn(s){return s[nr]||null}function Kn(s){const o=Yt(s)||rr(s)||Bn(s);return null!==o&&o.standalone}function wr(s,o){const u=s[zo]||null;if(!u&&!0===o)throw new Error(`Type ${pe(s)} does not have '\u0275mod' property.`);return u}function Kr(s){return Array.isArray(s)&&"object"==typeof s[1]}function hi(s){return Array.isArray(s)&&!0===s[1]}function Is(s){return 0!=(4&s.flags)}function jl(s){return s.componentOffset>-1}function Ko(s){return 1==(1&s.flags)}function kr(s){return null!==s.template}function Id(s){return 0!=(256&s[2])}function Ii(s,o){return s.hasOwnProperty(Rr)?s[Rr]:null}class Nu{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function Zo(){return Js}function Js(s){return s.type.prototype.ngOnChanges&&(s.setInput=Pu),ku}function ku(){const s=La(this),o=s?.current;if(o){const u=s.previous;if(u===xn)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function Pu(s,o,u,c){const d=this.declaredInputs[u],g=La(s)||function zl(s,o){return s[Fa]=o}(s,{previous:xn,current:null}),y=g.current||(g.current={}),I=g.previous,C=I[d];y[d]=new Nu(C&&C.currentValue,o,I===xn),s[c]=o}Zo.ngInherit=!0;const Fa="__ngSimpleChanges__";function La(s){return s[Fa]||null}function On(s){for(;Array.isArray(s);)s=s[0];return s}function Ir(s,o){return On(o[s.index])}function Qo(s,o){return s.data[o]}function Zr(s,o){const u=o[s];return Kr(u)?u:u[0]}function Co(s){return 64==(64&s[2])}function is(s,o){return null==o?null:s[o]}function Zl(s){s[18]=0}function Ba(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const it={lFrame:tc(null),bindingsEnabled:!0};function Uf(){return it.bindingsEnabled}function be(){return it.lFrame.lView}function qt(){return it.lFrame.tView}function Ha(s){return it.lFrame.contextLView=s,s[8]}function Bu(s){return it.lFrame.contextLView=null,s}function Zn(){let s=Xo();for(;null!==s&&64===s.type;)s=s.parent;return s}function Xo(){return it.lFrame.currentTNode}function ji(s,o){const u=it.lFrame;u.currentTNode=s,u.isParent=o}function ju(){return it.lFrame.isParent}function fr(){const s=it.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function ta(){return it.lFrame.bindingIndex++}function Nd(s,o){const u=it.lFrame;u.bindingIndex=u.bindingRootIndex=s,Hf(o)}function Hf(s){it.lFrame.currentDirectiveIndex=s}function Hu(){return it.lFrame.currentQueryIndex}function Gf(s){it.lFrame.currentQueryIndex=s}function vI(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function ec(s,o,u){if(u&_t.SkipSelf){let d=o,g=s;for(;!(d=d.parent,null!==d||u&_t.Host||(d=vI(g),null===d||(g=g[15],10&d.type))););if(null===d)return!1;o=d,s=g}const c=it.lFrame=km();return c.currentTNode=o,c.lView=s,!0}function Wf(s){const o=km(),u=s[1];it.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function km(){const s=it.lFrame,o=null===s?null:s.child;return null===o?tc(s):o}function tc(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function bo(){const s=it.lFrame;return it.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const $u=bo;function sr(){const s=bo();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Yn(){return it.lFrame.selectedIndex}function Ds(s){it.lFrame.selectedIndex=s}function an(){const s=it.lFrame;return Qo(s.tView,s.selectedIndex)}function Pd(){it.lFrame.currentNamespace="svg"}function rc(){!function zf(){it.lFrame.currentNamespace=null}()}function or(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const g=s.data[u].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:I,ngAfterViewInit:C,ngAfterViewChecked:S,ngOnDestroy:R}=g;y&&(s.contentHooks||(s.contentHooks=[])).push(-u,y),I&&((s.contentHooks||(s.contentHooks=[])).push(u,I),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,I)),C&&(s.viewHooks||(s.viewHooks=[])).push(-u,C),S&&((s.viewHooks||(s.viewHooks=[])).push(u,S),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,S)),null!=R&&(s.destroyHooks||(s.destroyHooks=[])).push(u,R)}}function ss(s,o,u){To(s,o,3,u)}function Gu(s,o,u,c){(3&s[2])===u&&To(s,o,u,c)}function Hi(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function To(s,o,u,c){const g=c??-1,y=o.length-1;let I=0;for(let C=void 0!==c?65535&s[18]:0;C<y;C++)if("number"==typeof o[C+1]){if(I=o[C],null!=c&&I>=c)break}else o[C]<0&&(s[18]+=65536),(I<g||-1==g)&&(Od(s,u,o,C),s[18]=(4294901760&s[18])+C+2),C++}function Od(s,o,u,c){const d=u[c]<0,g=u[c+1],I=s[d?-u[c]:u[c]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{g.call(I)}finally{}}}else try{g.call(I)}finally{}}class Ts{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function Fd(s,o,u){let c=0;for(;c<u.length;){const d=u[c];if("number"==typeof d){if(0!==d)break;c++;const g=u[c++],y=u[c++],I=u[c++];s.setAttribute(o,y,I,g)}else{const g=d,y=u[++c];Ga(g)?s.setProperty(o,g,y):s.setAttribute(o,g,y),c++}}return c}function Ss(s){return 3===s||4===s||6===s}function Ga(s){return 64===s.charCodeAt(0)}function $i(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?u=d:0===u||na(s,u,d,null,-1===u||2===u?o[++c]:null)}}return s}function na(s,o,u,c,d){let g=0,y=s.length;if(-1===o)y=-1;else for(;g<s.length;){const I=s[g++];if("number"==typeof I){if(I===o){y=-1;break}if(I>o){y=g-1;break}}}for(;g<s.length;){const I=s[g];if("number"==typeof I)break;if(I===u){if(null===c)return void(null!==d&&(s[g+1]=d));if(c===s[g+1])return void(s[g+2]=d)}g++,null!==c&&g++,null!==d&&g++}-1!==y&&(s.splice(y,0,o),g=y+1),s.splice(g++,0,u),null!==c&&s.splice(g++,0,c),null!==d&&s.splice(g++,0,d)}function Wa(s){return-1!==s}function io(s){return 32767&s}function so(s,o){let u=function qu(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let ra=!0;function oo(s){const o=ra;return ra=s,o}let Yf=0;const Qr={};function ac(s,o){const u=ia(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,Gi(c.data,s),Gi(o,null),Gi(c.blueprint,null));const d=za(s,o),g=s.injectorIndex;if(Wa(d)){const y=io(d),I=so(d,o),C=I[1].data;for(let S=0;S<8;S++)o[g+S]=I[y+S]|C[y+S]}return o[g+8]=d,g}function Gi(s,o){s.push(0,0,0,0,0,0,0,0,o)}function ia(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function za(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,d=o;for(;null!==d;){if(c=Vd(d),null===c)return-1;if(u++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function ao(s,o,u){!function Zu(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(Aa)&&(c=u[Aa]),null==c&&(c=u[Aa]=Yf++);const d=255&c;o.data[s+(d>>5)]|=1<<d}(s,o,u)}function Yu(s,o,u){if(u&_t.Optional||void 0!==s)return s;je()}function Wi(s,o,u,c){if(u&_t.Optional&&void 0===c&&(c=null),0==(u&(_t.Self|_t.Host))){const d=s[9],g=Sn(void 0);try{return d?d.get(o,c,u&_t.Optional):xr(o,c,u&_t.Optional)}finally{Sn(g)}}return Yu(c,0,u)}function uo(s,o,u,c=_t.Default,d){if(null!==s){if(1024&o[2]){const y=function So(s,o,u,c,d){let g=s,y=o;for(;null!==g&&null!==y&&1024&y[2]&&!(256&y[2]);){const I=Qf(g,y,u,c|_t.Self,Qr);if(I!==Qr)return I;let C=g.parent;if(!C){const S=y[21];if(S){const R=S.get(u,Qr,c);if(R!==Qr)return R}C=Vd(y),y=y[15]}g=C}return d}(s,o,u,c,Qr);if(y!==Qr)return y}const g=Qf(s,o,u,c,Qr);if(g!==Qr)return g}return Wi(o,u,c,d)}function Qf(s,o,u,c,d){const g=function Xf(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Aa)?s[Aa]:void 0;return"number"==typeof o?o>=0?255&o:nv:o}(u);if("function"==typeof g){if(!ec(o,s,c))return c&_t.Host?Yu(d,0,c):Wi(o,u,c,d);try{const y=g(c);if(null!=y||c&_t.Optional)return y;je()}finally{$u()}}else if("number"==typeof g){let y=null,I=ia(s,o),C=-1,S=c&_t.Host?o[16][6]:null;for((-1===I||c&_t.SkipSelf)&&(C=-1===I?za(s,o):o[I+8],-1!==C&&Xu(c,!1)?(y=o[1],I=io(C),o=so(C,o)):I=-1);-1!==I;){const R=o[1];if(lc(g,I,R.data)){const V=Pm(I,o,u,y,c,S);if(V!==Qr)return V}C=o[I+8],-1!==C&&Xu(c,o[1].data[I+8]===S)&&lc(g,I,o)?(y=R,I=io(C),o=so(C,o)):I=-1}}return d}function Pm(s,o,u,c,d,g){const y=o[1],I=y.data[s+8],R=Qu(I,y,u,null==c?jl(I)&&ra:c!=y&&0!=(3&I.type),d&_t.Host&&g===I);return null!==R?sa(o,y,R,I):Qr}function Qu(s,o,u,c,d){const g=s.providerIndexes,y=o.data,I=1048575&g,C=s.directiveStart,R=g>>20,q=d?I+R:s.directiveEnd;for(let ee=c?I:I+R;ee<q;ee++){const ve=y[ee];if(ee<C&&u===ve||ee>=C&&ve.type===u)return ee}if(d){const ee=y[C];if(ee&&kr(ee)&&ee.type===u)return C}return null}function sa(s,o,u,c){let d=s[u];const g=o.data;if(function Hn(s){return s instanceof Ts}(d)){const y=d;y.resolving&&function Me(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new ge(-200,`Circular dependency in DI detected for ${s}${u}`)}(function Le(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():De(s)}(g[u]));const I=oo(y.canSeeViewProviders);y.resolving=!0;const C=y.injectImpl?Sn(y.injectImpl):null;ec(s,c,_t.Default);try{d=s[u]=y.factory(void 0,g,s,c),o.firstCreatePass&&u>=c.directiveStart&&function Kf(s,o,u){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:g}=o.type.prototype;if(c){const y=Js(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,y),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,y)}d&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,d),g&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,g),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,g))}(u,g[u],o)}finally{null!==C&&Sn(C),oo(I),y.resolving=!1,$u()}}return d}function lc(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function Xu(s,o){return!(s&_t.Self||s&_t.Host&&o)}class qa{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return uo(this._tNode,this._lView,o,bt(c),u)}}function nv(){return new qa(Zn(),be())}function Jf(s){return ye(()=>{const o=s.prototype.constructor,u=o[Rr]||cc(o),c=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==c;){const g=d[Rr]||cc(d);if(g&&g!==u)return g;d=Object.getPrototypeOf(d)}return g=>new g})}function cc(s){return Be(s)?()=>{const o=cc(Q(s));return o&&o()}:Ii(s)}function Vd(s){const o=s[1],u=o.type;return 2===u?o.declTNode:1===u?s[6]:null}function Ju(s){return function uc(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let d=0;for(;d<c;){const g=u[d];if(Ss(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<c&&"string"==typeof u[d];)d++;else{if(g===o)return u[d+1];d+=2}}}return null}(Zn(),s)}const os="__parameters__";function lo(s,o,u){return ye(()=>{const c=function Ud(s){return function(...u){if(s){const c=s(...u);for(const d in c)this[d]=c[d]}}}(o);function d(...g){if(this instanceof d)return c.apply(this,g),this;const y=new d(...g);return I.annotation=y,I;function I(C,S,R){const V=C.hasOwnProperty(os)?C[os]:Object.defineProperty(C,os,{value:[]})[os];for(;V.length<=R;)V.push(null);return(V[R]=V[R]||[]).push(y),C}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class yn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=mt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function kn(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let c=s[u];Array.isArray(c)?(o===s&&(o=s.slice(0,u)),kn(c,o)):o!==s&&o.push(c)}return o}function Or(s,o){s.forEach(u=>Array.isArray(u)?Or(u,o):o(u))}function Kt(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function Xe(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Ke(s,o,u){let c=oa(s,o);return c>=0?s[1|c]=u:(c=~c,function Mo(s,o,u,c){let d=s.length;if(d==o)s.push(u,c);else if(1===d)s.push(c,s[0]),s[0]=u;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function tl(s,o){const u=oa(s,o);if(u>=0)return s[1|u]}function oa(s,o){return function D(s,o,u){let c=0,d=s.length>>u;for(;d!==c;){const g=c+(d-c>>1),y=s[g<<u];if(o===y)return g<<u;y>o?d=g:c=g+1}return~(d<<u)}(s,o,1)}const yt=Ot(lo("Optional"),8),Dn=Ot(lo("SkipSelf"),4);var pi=(()=>((pi=pi||{})[pi.Important=1]="Important",pi[pi.DashCase=2]="DashCase",pi))();const yc=new Map;let sv=0;const vc="__ngContext__";function ti(s,o){Kr(o)?(s[vc]=o[20],function av(s){yc.set(s[20],s)}(o)):s[vc]=o}function rl(s,o){return undefined(s,o)}function Ya(s){const o=s[3];return hi(o)?o[3]:o}function il(s){return Qd(s[13])}function aa(s){return Qd(s[4])}function Qd(s){for(;null!==s&&!hi(s);)s=s[4];return s}function Qa(s,o,u,c,d){if(null!=c){let g,y=!1;hi(c)?g=c:Kr(c)&&(y=!0,c=c[0]);const I=On(c);0===s&&null!==u?null==d?Ti(o,u,I):Xa(o,u,I,d||null,!0):1===s&&null!==u?Xa(o,u,I,d||null,!0):2===s?function Lr(s,o,u){const c=eu(s,o);c&&function Tp(s,o,u,c){s.removeChild(o,u,c)}(s,c,o,u)}(o,I,y):3===s&&o.destroyNode(I),null!=g&&function oh(s,o,u,c,d){const g=u[7];g!==On(u)&&Qa(o,s,c,g,d);for(let I=10;I<u.length;I++){const C=u[I];Ms(C[1],C,s,o,c,g)}}(o,s,g,u,d)}}function Jd(s,o,u){return s.createElement(o,u)}function zm(s,o){const u=s[9],c=u.indexOf(o),d=o[3];512&o[2]&&(o[2]&=-513,Ba(d,-1)),u.splice(c,1)}function Cp(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const d=c[17];null!==d&&d!==s&&zm(d,c),o>0&&(s[u-1][4]=c[4]);const g=Xe(s,10+o);!function cv(s,o){Ms(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const y=g[19];null!==y&&y.detachView(g[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function bp(s,o){if(!(128&o[2])){const u=o[11];u.destroyNode&&Ms(s,o,u,3,null,null),function Wm(s){let o=s[13];if(!o)return ua(s[1],s);for(;o;){let u=null;if(Kr(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)Kr(o)&&ua(o[1],o),o=o[3];null===o&&(o=s),Kr(o)&&ua(o[1],o),u=o&&o[4]}o=u}}(o)}}function ua(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function Dp(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const d=o[u[c]];if(!(d instanceof Ts)){const g=u[c+1];if(Array.isArray(g))for(let y=0;y<g.length;y+=2){const I=d[g[y]],C=g[y+1];try{C.call(I)}finally{}}else try{g.call(d)}finally{}}}}(s,o),function eh(s,o){const u=s.cleanup,c=o[7];let d=-1;if(null!==u)for(let g=0;g<u.length-1;g+=2)if("string"==typeof u[g]){const y=u[g+3];y>=0?c[d=y]():c[d=-y].unsubscribe(),g+=2}else{const y=c[d=u[g+1]];u[g].call(y)}if(null!==c){for(let g=d+1;g<c.length;g++)(0,c[g])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const u=o[17];if(null!==u&&hi(o[3])){u!==o[3]&&zm(u,o);const c=o[19];null!==c&&c.detachView(s)}!function uv(s){yc.delete(s[20])}(o)}}function th(s,o,u){return function nh(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];{const{componentOffset:d}=c;if(d>-1){const{encapsulation:g}=s.data[c.directiveStart+d];if(g===zt.None||g===zt.Emulated)return null}return Ir(c,u)}}(s,o.parent,u)}function Xa(s,o,u,c,d){s.insertBefore(o,u,c,d)}function Ti(s,o,u){s.appendChild(o,u)}function Ja(s,o,u,c,d){null!==c?Xa(s,o,u,c,d):Ti(s,o,u)}function eu(s,o){return s.parentNode(o)}let E,z,mv=function Sp(s,o,u){return 40&s.type?Ir(s,u):null};function Ap(s,o,u,c){const d=th(s,c,o),g=o[11],I=function gv(s,o,u){return mv(s,o,u)}(c.parent||o[6],c,o);if(null!=d)if(Array.isArray(u))for(let C=0;C<u.length;C++)Ja(g,d,u[C],I,!1);else Ja(g,d,u,I,!1)}function ih(s,o){if(null!==o){const u=o.type;if(3&u)return Ir(o,s);if(4&u)return sh(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return ih(s,c);{const d=s[o.index];return hi(d)?sh(-1,d):On(d)}}if(32&u)return rl(o,s)()||On(s[o.index]);{const c=xp(s,o);return null!==c?Array.isArray(c)?c[0]:ih(Ya(s[16]),c):ih(s,o.next)}}return null}function xp(s,o){return null!==o?s[16][6].projection[o.projection]:null}function sh(s,o){const u=10+s+1;if(u<o.length){const c=o[u],d=c[1].firstChild;if(null!==d)return ih(c,d)}return o[7]}function tu(s,o,u,c,d,g,y){for(;null!=u;){const I=c[u.index],C=u.type;if(y&&0===o&&(I&&ti(On(I),c),u.flags|=2),32!=(32&u.flags))if(8&C)tu(s,o,u.child,c,d,g,!1),Qa(o,s,d,I,g);else if(32&C){const S=rl(u,c);let R;for(;R=S();)Qa(o,s,d,R,g);Qa(o,s,d,I,g)}else 16&C?us(s,o,c,u,d,g):Qa(o,s,d,I,g);u=y?u.projectionNext:u.next}}function Ms(s,o,u,c,d,g){tu(u,c,s.firstChild,o,d,g,!1)}function us(s,o,u,c,d,g){const y=u[16],C=y[6].projection[c.projection];if(Array.isArray(C))for(let S=0;S<C.length;S++)Qa(o,s,d,C[S],g);else tu(s,o,C,y[3],d,g,!0)}function Km(s,o,u){""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u)}function ah(s,o,u){const{mergedAttrs:c,classes:d,styles:g}=u;null!==c&&Fd(s,o,c),null!==d&&Km(s,o,d),null!==g&&function _v(s,o,u){s.setAttribute(o,"style",u)}(s,o,g)}function x(s){E=s}function It(s){return function le(){if(void 0===z&&(z=null,Mt.trustedTypes))try{z=Mt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return z}()?.createScriptURL(s)||s}class ht{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${at})`}}function Rs(s){return s instanceof ht?s.changingThisBreaksApplicationSecurity:s}function ru(s,o){const u=function ch(s){return s instanceof ht&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see ${at})`)}return u===o}const TS=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var pr=(()=>((pr=pr||{})[pr.NONE=0]="NONE",pr[pr.HTML=1]="HTML",pr[pr.STYLE=2]="STYLE",pr[pr.SCRIPT=3]="SCRIPT",pr[pr.URL=4]="URL",pr[pr.RESOURCE_URL=5]="RESOURCE_URL",pr))();function ca(s){const o=kp();return o?o.sanitize(pr.URL,s)||"":ru(s,"URL")?Rs(s):function Ev(s){return(s=String(s)).match(TS)?s:"unsafe:"+s}(De(s))}function Tv(s){const o=kp();if(o)return It(o.sanitize(pr.RESOURCE_URL,s)||"");if(ru(s,"ResourceURL"))return It(Rs(s));throw new ge(904,!1)}function FI(s,o,u){return function e_(s,o){return"src"===o&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===o&&("base"===s||"link"===s)?Tv:ca}(o,u)(s)}function kp(){const s=be();return s&&s[12]}const Sv=new yn("ENVIRONMENT_INITIALIZER"),LI=new yn("INJECTOR",-1),VI=new yn("INJECTOR_DEF_TYPES");class UI{get(o,u=An){if(u===An){const c=new Error(`NullInjectorError: No provider for ${pe(o)}!`);throw c.name="NullInjectorError",c}return u}}function PS(s){return{\u0275providers:s}}function Ns(...s){return{\u0275providers:t_(0,s),\u0275fromNgModule:!0}}function t_(s,...o){const u=[],c=new Set;let d;return Or(o,g=>{const y=g;r_(y,u,[],c)&&(d||(d=[]),d.push(y))}),void 0!==d&&n_(d,u),u}function n_(s,o){for(let u=0;u<s.length;u++){const{providers:d}=s[u];i_(d,g=>{o.push(g)})}}function r_(s,o,u,c){if(!(s=Q(s)))return!1;let d=null,g=vi(s);const y=!g&&Yt(s);if(g||y){if(y&&!y.standalone)return!1;d=s}else{const C=s.ngModule;if(g=vi(C),!g)return!1;d=C}const I=c.has(d);if(y){if(I)return!1;if(c.add(d),y.dependencies){const C="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const S of C)r_(S,o,u,c)}}else{if(!g)return!1;{if(null!=g.imports&&!I){let S;c.add(d);try{Or(g.imports,R=>{r_(R,o,u,c)&&(S||(S=[]),S.push(R))})}finally{}void 0!==S&&n_(S,o)}if(!I){const S=Ii(d)||(()=>new d);o.push({provide:d,useFactory:S,deps:wt},{provide:VI,useValue:d,multi:!0},{provide:Sv,useValue:()=>He(d),multi:!0})}const C=g.providers;null==C||I||i_(C,R=>{o.push(R)})}}return d!==s&&void 0!==s.providers}function i_(s,o){for(let u of s)Se(u)&&(u=u.\u0275providers),Array.isArray(u)?i_(u,o):o(u)}const BI=fe({provide:String,useValue:fe});function Av(s){return null!==s&&"object"==typeof s&&BI in s}function Ai(s){return"function"==typeof s}const Mv=new yn("Set Injector scope."),s_={},$I={};let Rv;function ni(){return void 0===Rv&&(Rv=new UI),Rv}class da{}class GI extends da{constructor(o,u,c,d){super(),this.parent=u,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Pv(o,y=>this.processProvider(y)),this.records.set(LI,fh(void 0,this)),d.has("environment")&&this.records.set(da,fh(void 0,this));const g=this.records.get(Mv);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(VI.multi,wt,_t.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const u=Mr(this),c=Sn(void 0);try{return o()}finally{Mr(u),Sn(c)}}get(o,u=An,c=_t.Default){this.assertNotDestroyed(),c=bt(c);const d=Mr(this),g=Sn(void 0);try{if(!(c&_t.SkipSelf)){let I=this.records.get(o);if(void 0===I){const C=function zI(s){return"function"==typeof s||"object"==typeof s&&s instanceof yn}(o)&&li(o);I=C&&this.injectableDefInScope(C)?fh(Dc(o),s_):null,this.records.set(o,I)}if(null!=I)return this.hydrate(o,I)}return(c&_t.Self?ni():this.parent).get(o,u=c&_t.Optional&&u===An?null:u)}catch(y){if("NullInjectorError"===y.name){if((y[Li]=y[Li]||[]).unshift(pe(o)),d)throw y;return function j(s,o,u,c){const d=s[Li];throw o[ts]&&d.unshift(o[ts]),s.message=function Z(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let d=pe(o);if(Array.isArray(o))d=o.map(pe).join(" -> ");else if("object"==typeof o){let g=[];for(let y in o)if(o.hasOwnProperty(y)){let I=o[y];g.push(y+":"+("string"==typeof I?JSON.stringify(I):pe(I)))}d=`{${g.join(", ")}}`}return`${u}${c?"("+c+")":""}[${d}]: ${s.replace(Wo,"\n  ")}`}("\n"+s.message,d,u,c),s.ngTokenPath=d,s[Li]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{Sn(g),Mr(d)}}resolveInjectorInitializers(){const o=Mr(this),u=Sn(void 0);try{const c=this.get(Sv.multi,wt,_t.Self);for(const d of c)d()}finally{Mr(o),Sn(u)}}toString(){const o=[],u=this.records;for(const c of u.keys())o.push(pe(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ge(205,!1)}processProvider(o){let u=Ai(o=Q(o))?o:Q(o&&o.provide);const c=function FS(s){return Av(s)?fh(void 0,s.useValue):fh(Nv(s),s_)}(o);if(Ai(o)||!0!==o.multi)this.records.get(u);else{let d=this.records.get(u);d||(d=fh(void 0,s_,!0),d.factory=()=>Dt(d.multi),this.records.set(u,d)),u=o,d.multi.push(o)}this.records.set(u,c)}hydrate(o,u){return u.value===s_&&(u.value=$I,u.value=u.factory()),"object"==typeof u.value&&u.value&&function WI(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=Q(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function Dc(s){const o=li(s),u=null!==o?o.factory:Ii(s);if(null!==u)return u;if(s instanceof yn)throw new ge(204,!1);if(s instanceof Function)return function OS(s){const o=s.length;if(o>0)throw function Cr(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}(o,"?"),new ge(204,!1);const u=function _o(s){const o=s&&(s[zr]||s[_n]);if(o){const u=function qs(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new ge(204,!1)}function Nv(s,o,u){let c;if(Ai(s)){const d=Q(s);return Ii(d)||Dc(d)}if(Av(s))c=()=>Q(s.useValue);else if(function HI(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...Dt(s.deps||[]));else if(function jI(s){return!(!s||!s.useExisting)}(s))c=()=>He(Q(s.useExisting));else{const d=Q(s&&(s.useClass||s.provide));if(!function kv(s){return!!s.deps}(s))return Ii(d)||Dc(d);c=()=>new d(...Dt(s.deps))}return c}function fh(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function Pv(s,o){for(const u of s)Array.isArray(u)?Pv(u,o):u&&Se(u)?Pv(u.\u0275providers,o):o(u)}class LS{}class ko{}class VS{resolveComponentFactory(o){throw function ha(s){const o=Error(`No component factory found for ${pe(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let fa=(()=>{class s{}return s.NULL=new VS,s})();function Op(){return Tc(Zn(),be())}function Tc(s,o){return new Fp(Ir(s,o))}let Fp=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=Op,s})();function qI(s){return s instanceof Fp?s.nativeElement:s}class KI{}let US=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function BS(){const s=be(),u=Zr(Zn().index,s);return(Kr(u)?u:s)[11]}(),s})(),ZI=(()=>{class s{}return s.\u0275prov=mt({token:s,providedIn:"root",factory:()=>null}),s})();class Ov{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Lp=new Ov("15.0.1"),Vp={};function o_(s){return s.ngOriginalError}class Up{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&o_(o);for(;u&&o_(u);)u=o_(u);return u||null}}function Vr(s){return s instanceof Function?s():s}function QI(s,o,u){let c=s.length;for(;;){const d=s.indexOf(o,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const g=o.length;if(d+g===c||s.charCodeAt(d+g)<=32)return d}u=d+1}}const Uv="ng-template";function qS(s,o,u){let c=0;for(;c<s.length;){let d=s[c++];if(u&&"class"===d){if(d=s[c],-1!==QI(d.toLowerCase(),o,0))return!0}else if(1===d){for(;c<s.length&&"string"==typeof(d=s[c++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function XI(s){return 4===s.type&&s.value!==Uv}function KS(s,o,u){return o===(4!==s.type||u?s.value:Uv)}function JI(s,o,u){let c=4;const d=s.attrs||[],g=function YS(s){for(let o=0;o<s.length;o++)if(Ss(s[o]))return o;return s.length}(d);let y=!1;for(let I=0;I<o.length;I++){const C=o[I];if("number"!=typeof C){if(!y)if(4&c){if(c=2|1&c,""!==C&&!KS(s,C,u)||""===C&&1===o.length){if(ks(c))return!1;y=!0}}else{const S=8&c?C:o[++I];if(8&c&&null!==s.attrs){if(!qS(s.attrs,S,u)){if(ks(c))return!1;y=!0}continue}const V=eC(8&c?"class":C,d,XI(s),u);if(-1===V){if(ks(c))return!1;y=!0;continue}if(""!==S){let q;q=V>g?"":d[V+1].toLowerCase();const ee=8&c?q:null;if(ee&&-1!==QI(ee,S,0)||2&c&&S!==q){if(ks(c))return!1;y=!0}}}}else{if(!y&&!ks(c)&&!ks(C))return!1;if(y&&ks(C))continue;y=!1,c=C|1&c}}return ks(c)||y}function ks(s){return 0==(1&s)}function eC(s,o,u,c){if(null===o)return-1;let d=0;if(c||!u){let g=!1;for(;d<o.length;){const y=o[d];if(y===s)return d;if(3===y||6===y)g=!0;else{if(1===y||2===y){let I=o[++d];for(;"string"==typeof I;)I=o[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=g?1:2}return-1}return function QS(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function tC(s,o,u=!1){for(let c=0;c<o.length;c++)if(JI(s,o[c],u))return!0;return!1}function rC(s,o){return s?":not("+o.trim()+")":o}function XS(s){let o=s[0],u=1,c=2,d="",g=!1;for(;u<s.length;){let y=s[u];if("string"==typeof y)if(2&c){const I=s[++u];d+="["+y+(I.length>0?'="'+I+'"':"")+"]"}else 8&c?d+="."+y:4&c&&(d+=" "+y);else""!==d&&!ks(y)&&(o+=rC(g,d),d=""),c=y,g=g||!ks(c);u++}return""!==d&&(o+=rC(g,d)),o}const Ut={};function sC(s){a_(qt(),be(),Yn()+s,!1)}function a_(s,o,u,c){if(!c)if(3==(3&o[2])){const g=s.preOrderCheckHooks;null!==g&&ss(o,g,u)}else{const g=s.preOrderHooks;null!==g&&Gu(o,g,0,u)}Ds(u)}function uC(s,o=null,u=null,c){const d=lC(s,o,u,c);return d.resolveInjectorInitializers(),d}function lC(s,o=null,u=null,c,d=new Set){const g=[u||wt,Ns(s)];return c=c||("object"==typeof s?void 0:pe(s)),new GI(g,o||ni(),c||null,d)}let Sc=(()=>{class s{static create(u,c){if(Array.isArray(u))return uC({name:""},c,u,"");{const d=u.name??"";return uC({name:d},u.parent,u.providers,d)}}}return s.THROW_IF_NOT_FOUND=An,s.NULL=new UI,s.\u0275prov=mt({token:s,providedIn:"any",factory:()=>He(LI)}),s.__NG_ELEMENT_ID__=-1,s})();function pa(s,o=_t.Default){const u=be();return null===u?He(s,o):uo(Zn(),u,Q(s),o)}function _C(){throw new Error("invalid")}function xc(s,o){return s<<17|o<<2}function Ps(s){return s>>17&32767}function c_(s){return 2|s}function su(s){return(131068&s)>>2}function vC(s,o){return-131069&s|o<<2}function Po(s){return 1|s}function DC(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const d=u[c],g=u[c+1];if(-1!==g){const y=s.data[g];Gf(d),y.contentQueries(2,o[g],g)}}}function cl(s,o,u,c,d,g,y,I,C,S,R){const V=o.blueprint.slice();return V[0]=d,V[2]=76|c,(null!==R||s&&1024&s[2])&&(V[2]|=1024),Zl(V),V[3]=V[15]=s,V[8]=u,V[10]=y||s&&s[10],V[11]=I||s&&s[11],V[12]=C||s&&s[12]||null,V[9]=S||s&&s[9]||null,V[6]=g,V[20]=function ov(){return sv++}(),V[21]=R,V[16]=2==o.type?s[16]:V,V}function yh(s,o,u,c,d){let g=s.data[o];if(null===g)g=function Jv(s,o,u,c,d){const g=Xo(),y=ju(),C=s.data[o]=function IA(s,o,u,c,d,g){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?g:g&&g.parent,u,o,c,d);return null===s.firstChild&&(s.firstChild=C),null!==g&&(y?null==g.child&&null!==C.parent&&(g.child=C):null===g.next&&(g.next=C)),C}(s,o,u,c,d),function Rd(){return it.lFrame.inI18n}()&&(g.flags|=32);else if(64&g.type){g.type=u,g.value=c,g.attrs=d;const y=function Ci(){const s=it.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===y?-1:y.injectorIndex}return ji(g,!0),g}function dl(s,o,u,c){if(0===u)return-1;const d=o.length;for(let g=0;g<u;g++)o.push(c),s.blueprint.push(c),s.data.push(null);return d}function zp(s,o,u){Wf(o);try{const c=s.viewQuery;null!==c&&au(1,c,u);const d=s.template;null!==d&&ew(s,o,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&DC(s,o),s.staticViewQueries&&au(2,s.viewQuery,u);const g=s.components;null!==g&&function EA(s,o){for(let u=0;u<o.length;u++)E_(s,o[u])}(o,g)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,sr()}}function qp(s,o,u,c){const d=o[2];if(128!=(128&d)){Wf(o);try{Zl(o),function ea(s){return it.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&ew(s,o,u,2,c);const y=3==(3&d);if(y){const S=s.preOrderCheckHooks;null!==S&&ss(o,S,null)}else{const S=s.preOrderHooks;null!==S&&Gu(o,S,0,null),Hi(o,0)}if(function PC(s){for(let o=il(s);null!==o;o=aa(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const d=u[c],g=d[3];0==(512&d[2])&&Ba(g,1),d[2]|=512}}}(o),function Yp(s){for(let o=il(s);null!==o;o=aa(o))for(let u=10;u<o.length;u++){const c=o[u],d=c[1];Co(c)&&qp(d,c,d.template,c[8])}}(o),null!==s.contentQueries&&DC(s,o),y){const S=s.contentCheckHooks;null!==S&&ss(o,S)}else{const S=s.contentHooks;null!==S&&Gu(o,S,1),Hi(o,1)}!function bC(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const d=u[c];if(d<0)Ds(~d);else{const g=d,y=u[++c],I=u[++c];Nd(y,g),I(2,o[g])}}}finally{Ds(-1)}}(s,o);const I=s.components;null!==I&&function Wp(s,o){for(let u=0;u<o.length;u++)OC(s,o[u])}(o,I);const C=s.viewQuery;if(null!==C&&au(2,C,c),y){const S=s.viewCheckHooks;null!==S&&ss(o,S)}else{const S=s.viewHooks;null!==S&&Gu(o,S,2),Hi(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,Ba(o[3],-1))}finally{sr()}}}function ew(s,o,u,c,d){const g=Yn(),y=2&c;try{Ds(-1),y&&o.length>22&&a_(s,o,22,!1),u(c,d)}finally{Ds(g)}}function m_(s,o,u){if(Is(o)){const d=o.directiveEnd;for(let g=o.directiveStart;g<d;g++){const y=s.data[g];y.contentQueries&&y.contentQueries(1,u[g],g)}}}function vh(s,o,u){!Uf()||(function CA(s,o,u,c){const d=u.directiveStart,g=u.directiveEnd;s.firstCreatePass||ac(u,o),ti(c,o);const y=u.initialInputs;for(let I=d;I<g;I++){const C=s.data[I],S=kr(C);S&&NC(o,u,C);const R=sa(o,s,I,u);ti(R,o),null!==y&&dw(0,I-d,R,C,0,y),S&&(Zr(u.index,o)[8]=R)}}(s,o,u,Ir(u,o)),64==(64&u.flags)&&xC(s,o,u))}function Kp(s,o,u=Ir){const c=o.localNames;if(null!==c){let d=o.index+1;for(let g=0;g<c.length;g+=2){const y=c[g+1],I=-1===y?u(o,s):s[y];s[d++]=I}}}function __(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Zp(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Zp(s,o,u,c,d,g,y,I,C,S){const R=22+c,V=R+d,q=function tw(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:Ut);return u}(R,V),ee="function"==typeof S?S():S;return q[1]={type:s,blueprint:q,template:u,queries:null,viewQuery:I,declTNode:o,data:q.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:V,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:C,consts:ee,incompleteFirstPass:!1}}function nw(s,o,u,c){const d=Qp(o);null===u?d.push(c):(d.push(u),s.firstCreatePass&&fw(s).push(c,d.length-1))}function rw(s,o,u,c){for(let d in s)if(s.hasOwnProperty(d)){u=null===u?{}:u;const g=s[d];null===c?iw(u,o,d,g):c.hasOwnProperty(d)&&iw(u,o,c[d],g)}return u}function iw(s,o,u,c){s.hasOwnProperty(u)?s[u].push(o,c):s[u]=[o,c]}function y_(s,o){const u=Zr(o,s);16&u[2]||(u[2]|=32)}function br(s,o,u,c){let d=!1;if(Uf()){const g=null===c?null:{"":-1},y=function bA(s,o){const u=s.directiveRegistry;let c=null,d=null;if(u)for(let g=0;g<u.length;g++){const y=u[g];if(tC(o,y.selectors,!1))if(c||(c=[]),kr(y))if(null!==y.findHostDirectiveDefs){const I=[];d=d||new Map,y.findHostDirectiveDefs(y,I,d),c.unshift(...I,y),uw(s,o,I.length)}else c.unshift(y),uw(s,o,0);else d=d||new Map,y.findHostDirectiveDefs?.(y,c,d),c.push(y)}return null===c?null:[c,d]}(s,u);let I,C;null===y?I=C=null:[I,C]=y,null!==I&&(d=!0,ii(s,o,u,I,g,C)),g&&function RC(s,o,u){if(o){const c=s.localNames=[];for(let d=0;d<o.length;d+=2){const g=u[o[d+1]];if(null==g)throw new ge(-301,!1);c.push(o[d],g)}}}(u,c,g)}return u.mergedAttrs=$i(u.mergedAttrs,u.attrs),d}function ii(s,o,u,c,d,g){for(let S=0;S<c.length;S++)ao(ac(u,o),s,c[S].type);!function DA(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}(u,s.data.length,c.length);for(let S=0;S<c.length;S++){const R=c[S];R.providersResolver&&R.providersResolver(R)}let y=!1,I=!1,C=dl(s,o,c.length,null);for(let S=0;S<c.length;S++){const R=c[S];u.mergedAttrs=$i(u.mergedAttrs,R.hostAttrs),cw(s,u,o,C,R),lw(C,R,d),null!==R.contentQueries&&(u.flags|=4),(null!==R.hostBindings||null!==R.hostAttrs||0!==R.hostVars)&&(u.flags|=64);const V=R.type.prototype;!y&&(V.ngOnChanges||V.ngOnInit||V.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),y=!0),!I&&(V.ngOnChanges||V.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),I=!0),C++}!function sw(s,o,u){const d=o.directiveEnd,g=s.data,y=o.attrs,I=[];let C=null,S=null;for(let R=o.directiveStart;R<d;R++){const V=g[R],q=u?u.get(V):null,ve=q?q.outputs:null;C=rw(V.inputs,R,C,q?q.inputs:null),S=rw(V.outputs,R,S,ve);const ke=null===C||null===y||XI(o)?null:hw(C,R,y);I.push(ke)}null!==C&&(C.hasOwnProperty("class")&&(o.flags|=8),C.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=I,o.inputs=C,o.outputs=S}(s,u,g)}function xC(s,o,u){const c=u.directiveStart,d=u.directiveEnd,g=u.index,y=function Nm(){return it.lFrame.currentDirectiveIndex}();try{Ds(g);for(let I=c;I<d;I++){const C=s.data[I],S=o[I];Hf(I),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&MC(C,S)}}finally{Ds(-1),Hf(y)}}function MC(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function uw(s,o,u){o.componentOffset=u,(s.components||(s.components=[])).push(o.index)}function lw(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;kr(o)&&(u[""]=s)}}function cw(s,o,u,c,d){s.data[c]=d;const g=d.factory||(d.factory=Ii(d.type)),y=new Ts(g,kr(d),pa);s.blueprint[c]=y,u[c]=y,function v_(s,o,u,c,d){const g=d.hostBindings;if(g){let y=s.hostBindingOpCodes;null===y&&(y=s.hostBindingOpCodes=[]);const I=~o.index;(function aw(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(y)!=I&&y.push(I),y.push(u,c,g)}}(s,o,c,dl(s,u,d.hostVars,Ut),d)}function NC(s,o,u){const c=Ir(o,s),d=__(u),g=s[10],y=I_(s,cl(s,d,null,u.onPush?32:16,c,o,g,g.createRenderer(c,u),null,null,null));s[o.index]=y}function ma(s,o,u,c,d,g){const y=Ir(s,o);!function wh(s,o,u,c,d,g,y){if(null==g)s.removeAttribute(o,d,u);else{const I=null==y?De(g):y(g,c||"",d);s.setAttribute(o,d,I,u)}}(o[11],y,g,s.value,u,c,d)}function dw(s,o,u,c,d,g){const y=g[o];if(null!==y){const I=c.setInput;for(let C=0;C<y.length;){const S=y[C++],R=y[C++],V=y[C++];null!==I?c.setInput(u,V,S,R):u[R]=V}}}function hw(s,o,u){let c=null,d=0;for(;d<u.length;){const g=u[d];if(0!==g)if(5!==g){if("number"==typeof g)break;if(s.hasOwnProperty(g)){null===c&&(c=[]);const y=s[g];for(let I=0;I<y.length;I+=2)if(y[I]===o){c.push(g,y[I+1],u[d+1]);break}}d+=2}else d+=2;else d+=4}return c}function kC(s,o,u,c){return new Array(s,!0,!1,o,null,0,c,u,null,null)}function OC(s,o){const u=Zr(o,s);if(Co(u)){const c=u[1];48&u[2]?qp(c,u,c.template,u[8]):u[5]>0&&w_(u)}}function w_(s){for(let c=il(s);null!==c;c=aa(c))for(let d=10;d<c.length;d++){const g=c[d];if(Co(g))if(512&g[2]){const y=g[1];qp(y,g,y.template,g[8])}else g[5]>0&&w_(g)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const d=Zr(u[c],s);Co(d)&&d[5]>0&&w_(d)}}function E_(s,o){const u=Zr(o,s),c=u[1];(function SA(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),zp(c,u,u[8])}function I_(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function hl(s){for(;s;){s[2]|=32;const o=Ya(s);if(Id(s)&&!o)return s;s=o}return null}function C_(s,o,u,c=!0){const d=o[10];d.begin&&d.begin();try{qp(s,o,s.template,u)}catch(y){throw c&&pw(o,y),y}finally{d.end&&d.end()}}function au(s,o,u){Gf(0),o(s,u)}function Qp(s){return s[7]||(s[7]=[])}function fw(s){return s.cleanup||(s.cleanup=[])}function pw(s,o){const u=s[9],c=u?u.get(Up,null):null;c&&c.handleError(o)}function mi(s,o,u,c,d){for(let g=0;g<u.length;){const y=u[g++],I=u[g++],C=o[y],S=s.data[y];null!==S.setInput?S.setInput(C,d,c,I):C[I]=d}}function fl(s,o,u){let c=u?s.styles:null,d=u?s.classes:null,g=0;if(null!==o)for(let y=0;y<o.length;y++){const I=o[y];"number"==typeof I?g=I:1==g?d=me(d,I):2==g&&(c=me(c,I+": "+o[++y]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=d:s.classesWithoutHost=d}function Oc(s,o,u,c,d=!1){for(;null!==u;){const g=o[u.index];if(null!==g&&c.push(On(g)),hi(g))for(let I=10;I<g.length;I++){const C=g[I],S=C[1].firstChild;null!==S&&Oc(C[1],C,S,c)}const y=u.type;if(8&y)Oc(s,o,u.child,c);else if(32&y){const I=rl(u,o);let C;for(;C=I();)c.push(C)}else if(16&y){const I=xp(o,u);if(Array.isArray(I))c.push(...I);else{const C=Ya(o[16]);Oc(C[1],C,I,c,!0)}}u=d?u.projectionNext:u.next}return c}class Ih{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return Oc(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(hi(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(Cp(o,c),Xe(u,c))}this._attachedToViewContainer=!1}bp(this._lView[1],this._lView)}onDestroy(o){nw(this._lView[1],this._lView,null,o)}markForCheck(){hl(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){C_(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ge(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function dv(s,o){Ms(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new ge(902,!1);this._appRef=o}}class gw extends Ih{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;C_(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class b_ extends fa{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=Yt(o);return new Fc(u,this.ngModule)}}function mw(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class _w{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,c){c=bt(c);const d=this.injector.get(o,Vp,c);return d!==Vp||u===Vp?d:this.parentInjector.get(o,u,c)}}class Fc extends ko{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function iC(s){return s.map(XS).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return mw(this.componentDef.inputs)}get outputs(){return mw(this.componentDef.outputs)}create(o,u,c,d){let g=(d=d||this.ngModule)instanceof da?d:d?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const y=g?new _w(o,g):o,I=y.get(KI,null);if(null===I)throw new ge(407,!1);const C=y.get(ZI,null),S=I.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",V=c?function TC(s,o,u){return s.selectRootElement(o,u===zt.ShadowDom)}(S,c,this.componentDef.encapsulation):Jd(S,R,function Xp(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(R)),q=this.componentDef.onPush?288:272,ee=Zp(0,null,null,1,0,null,null,null,null,null),ve=cl(null,ee,null,q,null,null,I,S,C,y,null);let ke,Ge;Wf(ve);try{const et=this.componentDef;let Ct,xe=null;et.findHostDirectiveDefs?(Ct=[],xe=new Map,et.findHostDirectiveDefs(et,Ct,xe),Ct.push(et)):Ct=[et];const Rt=function MA(s,o){const u=s[1];return s[22]=o,yh(u,22,2,"#host",null)}(ve,V),gn=function ww(s,o,u,c,d,g,y,I){const C=d[1];!function D_(s,o,u,c){for(const d of s)o.mergedAttrs=$i(o.mergedAttrs,d.hostAttrs);null!==o.mergedAttrs&&(fl(o,o.mergedAttrs,!0),null!==u&&ah(c,u,o))}(c,s,o,y);const S=g.createRenderer(o,u),R=cl(d,__(u),null,u.onPush?32:16,d[s.index],s,g,S,I||null,null,null);return C.firstCreatePass&&uw(C,s,c.length-1),I_(d,R),d[s.index]=R}(Rt,V,et,Ct,ve,I,S);Ge=Qo(ee,22),V&&function FC(s,o,u,c){if(c)Fd(s,u,["ng-version",Lp.full]);else{const{attrs:d,classes:g}=function JS(s){const o=[],u=[];let c=1,d=2;for(;c<s.length;){let g=s[c];if("string"==typeof g)2===d?""!==g&&o.push(g,s[++c]):8===d&&u.push(g);else{if(!ks(d))break;d=g}c++}return{attrs:o,classes:u}}(o.selectors[0]);d&&Fd(s,u,d),g&&g.length>0&&Km(s,u,g.join(" "))}}(S,et,V,c),void 0!==u&&function LC(s,o,u){const c=s.projection=[];for(let d=0;d<o.length;d++){const g=u[d];c.push(null!=g?Array.from(g):null)}}(Ge,this.ngContentSelectors,u),ke=function Ew(s,o,u,c,d,g){const y=Zn(),I=d[1],C=Ir(y,d);ii(I,d,y,u,null,c);for(let R=0;R<u.length;R++)ti(sa(d,I,y.directiveStart+R,y),d);xC(I,d,y),C&&ti(C,d);const S=sa(d,I,y.directiveStart+y.componentOffset,y);if(s[8]=d[8]=S,null!==g)for(const R of g)R(S,o);return m_(I,y,s),S}(gn,et,Ct,xe,ve,[VC]),zp(ee,ve,null)}finally{sr()}return new Jp(this.componentType,ke,Tc(Ge,ve),ve,Ge)}}class Jp extends LS{constructor(o,u,c,d,g){super(),this.location=c,this._rootLView=d,this._tNode=g,this.instance=u,this.hostView=this.changeDetectorRef=new gw(d),this.componentType=o}setInput(o,u){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[o])){const g=this._rootLView;mi(g[1],g,d,o,u),y_(g,this._tNode.index)}}get injector(){return new qa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function VC(){const s=Zn();or(be()[1],s)}function Lc(s){let o=function UC(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;o;){let d;if(kr(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new ge(903,!1);d=o.\u0275dir}if(d){if(u){c.push(d);const y=s;y.inputs=Ch(s.inputs),y.declaredInputs=Ch(s.declaredInputs),y.outputs=Ch(s.outputs);const I=d.hostBindings;I&&Iw(s,I);const C=d.viewQuery,S=d.contentQueries;if(C&&eg(s,C),S&&Vc(s,S),ce(s.inputs,d.inputs),ce(s.declaredInputs,d.declaredInputs),ce(s.outputs,d.outputs),kr(d)&&d.data.animation){const R=s.data;R.animation=(R.animation||[]).concat(d.data.animation)}}const g=d.features;if(g)for(let y=0;y<g.length;y++){const I=g[y];I&&I.ngInherit&&I(s),I===Lc&&(u=!1)}}o=Object.getPrototypeOf(o)}!function BC(s){let o=0,u=null;for(let c=s.length-1;c>=0;c--){const d=s[c];d.hostVars=o+=d.hostVars,d.hostAttrs=$i(d.hostAttrs,u=$i(u,d.hostAttrs))}}(c)}function Ch(s){return s===xn?{}:s===wt?[]:s}function eg(s,o){const u=s.viewQuery;s.viewQuery=u?(c,d)=>{o(c,d),u(c,d)}:o}function Vc(s,o){const u=s.contentQueries;s.contentQueries=u?(c,d,g)=>{o(c,d,g),u(c,d,g)}:o}function Iw(s,o){const u=s.hostBindings;s.hostBindings=u?(c,d)=>{o(c,d),u(c,d)}:o}let ng=null;function fn(){if(!ng){const s=Mt.Symbol;if(s&&s.iterator)ng=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(ng=c)}}}return ng}function lu(s){return!!T_(s)&&(Array.isArray(s)||!(s instanceof Map)&&fn()in s)}function T_(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function ya(s,o,u){return s[o]=u}function Ri(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function S_(s,o,u,c){const d=be();return Ri(d,ta(),o)&&(qt(),ma(an(),d,s,o,u,c)),S_}function Aw(s,o,u,c,d,g,y,I){const C=be(),S=qt(),R=s+22,V=S.firstCreatePass?function Sw(s,o,u,c,d,g,y,I,C){const S=o.consts,R=yh(o,s,4,y||null,is(S,I));br(o,u,R,is(S,C)),or(o,R);const V=R.tViews=Zp(2,R,c,d,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,S);return null!==o.queries&&(o.queries.template(o,R),V.queries=o.queries.embeddedTView(R)),R}(R,S,C,o,u,c,d,g,y):S.data[R];ji(V,!1);const q=C[11].createComment("");Ap(S,C,q,V),ti(q,C),I_(C,C[R]=kC(q,C,q,V)),Ko(V)&&vh(S,C,V),null!=y&&Kp(C,V,I)}function Ah(s){return function to(s,o){return s[o]}(function Bf(){return it.lFrame.contextLView}(),22+s)}function xw(s,o,u){const c=be();return Ri(c,ta(),o)&&function Os(s,o,u,c,d,g,y,I){const C=Ir(o,u);let R,S=o.inputs;!I&&null!=S&&(R=S[c])?(mi(s,u,R,c,d),jl(o)&&y_(u,o.index)):3&o.type&&(c=function SC(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),d=null!=y?y(d,o.value||"",c):d,g.setProperty(C,c,d))}(qt(),an(),c,s,o,c[11],u,!1),xw}function Wn(s,o,u,c,d){const y=d?"class":"style";mi(s,u,o.inputs[y],y,c)}function R_(s,o,u,c){const d=be(),g=qt(),y=22+s,I=d[11],C=d[y]=Jd(I,o,function qf(){return it.lFrame.currentNamespace}()),S=g.firstCreatePass?function qC(s,o,u,c,d,g,y){const I=o.consts,S=yh(o,s,2,d,is(I,g));return br(o,u,S,is(I,y)),null!==S.attrs&&fl(S,S.attrs,!1),null!==S.mergedAttrs&&fl(S,S.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,S),S}(y,g,d,0,o,u,c):g.data[y];return ji(S,!0),ah(I,C,S),32!=(32&S.flags)&&Ap(g,d,C,S),0===function Mm(){return it.lFrame.elementDepthCount}()&&ti(C,d),function Md(){it.lFrame.elementDepthCount++}(),Ko(S)&&(vh(g,d,S),m_(g,S,d)),null!==c&&Kp(d,S),R_}function N_(){let s=Zn();ju()?function Jo(){it.lFrame.isParent=!1}():(s=s.parent,ji(s,!1));const o=s;!function Vf(){it.lFrame.elementDepthCount--}();const u=qt();return u.firstCreatePass&&(or(u,s),Is(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function ic(s){return 0!=(8&s.flags)}(o)&&Wn(u,o,be(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Zf(s){return 0!=(16&s.flags)}(o)&&Wn(u,o,be(),o.stylesWithoutHost,!1),N_}function Mw(s,o,u,c){return R_(s,o,u,c),N_(),Mw}function Rw(){return be()}function Vo(s){return!!s&&"function"==typeof s.then}function Nw(s){return!!s&&"function"==typeof s.subscribe}const kw=Nw;function ug(s,o,u,c){const d=be(),g=qt(),y=Zn();return function O_(s,o,u,c,d,g,y){const I=Ko(c),S=s.firstCreatePass&&fw(s),R=o[8],V=Qp(o);let q=!0;if(3&c.type||y){const ke=Ir(c,o),Ge=y?y(ke):ke,et=V.length,Ct=y?Rt=>y(On(Rt[c.index])):c.index;let xe=null;if(!y&&I&&(xe=function ZC(s,o,u,c){const d=s.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const y=d[g];if(y===u&&d[g+1]===c){const I=o[7],C=d[g+2];return I.length>C?I[C]:null}"string"==typeof y&&(g+=2)}return null}(s,o,d,c.index)),null!==xe)(xe.__ngLastListenerFn__||xe).__ngNextListenerFn__=g,xe.__ngLastListenerFn__=g,q=!1;else{g=Pw(c,o,R,g,!1);const Rt=u.listen(Ge,d,g);V.push(g,Rt),S&&S.push(d,Ct,et,et+1)}}else g=Pw(c,o,R,g,!1);const ee=c.outputs;let ve;if(q&&null!==ee&&(ve=ee[d])){const ke=ve.length;if(ke)for(let Ge=0;Ge<ke;Ge+=2){const gn=o[ve[Ge]][ve[Ge+1]].subscribe(g),Pn=V.length;V.push(g,gn),S&&S.push(d,c.index,Pn,-(Pn+1))}}}(g,d,d[11],y,s,o,c),ug}function lg(s,o,u,c){try{return!1!==u(c)}catch(d){return pw(s,d),!1}}function Pw(s,o,u,c,d){return function g(y){if(y===Function)return c;hl(s.componentOffset>-1?Zr(s.index,o):o);let C=lg(o,0,c,y),S=g.__ngNextListenerFn__;for(;S;)C=lg(o,0,S,y)&&C,S=S.__ngNextListenerFn__;return d&&!1===C&&(y.preventDefault(),y.returnValue=!1),C}}function cg(s=1){return function kd(s){return(it.lFrame.contextLView=function nc(s,o){for(;s>0;)o=o[15],s--;return o}(s,it.lFrame.contextLView))[8]}(s)}function fg(s,o,u,c,d){const g=s[u+1],y=null===o;let I=c?Ps(g):su(g),C=!1;for(;0!==I&&(!1===C||y);){const R=s[I+1];Ls(s[I],o)&&(C=!0,s[I+1]=c?Po(R):c_(R)),I=c?Ps(R):su(R)}C&&(s[u+1]=c?c_(g):Po(g))}function Ls(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&oa(s,o)>=0}function gg(s,o){return function Vs(s,o,u,c){const d=be(),g=qt(),y=function bs(s){const o=it.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}(2);g.firstUpdatePass&&function ib(s,o,u,c){const d=s.data;if(null===d[u+1]){const g=d[Yn()],y=function St(s,o){return o>=s.expandoStartIndex}(s,u);(function ab(s,o){return 0!=(s.flags&(o?8:16))})(g,c)&&null===o&&!y&&(o=!1),o=function Ze(s,o,u,c){const d=function $f(s){const o=it.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let g=c?o.residualClasses:o.residualStyles;if(null===d)0===(c?o.classBindings:o.styleBindings)&&(u=mg(u=B_(null,s,o,u,c),o.attrs,c),g=null);else{const y=o.directiveStylingLast;if(-1===y||s[y]!==d)if(u=B_(d,s,o,u,c),null===g){let C=function de(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==su(c))return s[Ps(c)]}(s,o,c);void 0!==C&&Array.isArray(C)&&(C=B_(null,s,o,C[1],c),C=mg(C,o.attrs,c),function Ne(s,o,u,c){s[Ps(u?o.classBindings:o.styleBindings)]=c}(s,o,c,C))}else g=function Br(s,o,u){let c;const d=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<d;g++)c=mg(c,s[g].hostAttrs,u);return mg(c,o.attrs,u)}(s,o,c)}return void 0!==g&&(c?o.residualClasses=g:o.residualStyles=g),u}(d,g,o,c),function QC(s,o,u,c,d,g){let y=g?o.classBindings:o.styleBindings,I=Ps(y),C=su(y);s[c]=u;let R,S=!1;if(Array.isArray(u)){const V=u;R=V[1],(null===R||oa(V,R)>0)&&(S=!0)}else R=u;if(d)if(0!==C){const q=Ps(s[I+1]);s[c+1]=xc(q,I),0!==q&&(s[q+1]=vC(s[q+1],c)),s[I+1]=function Mc(s,o){return 131071&s|o<<17}(s[I+1],c)}else s[c+1]=xc(I,0),0!==I&&(s[I+1]=vC(s[I+1],c)),I=c;else s[c+1]=xc(C,0),0===I?I=c:s[C+1]=vC(s[C+1],c),C=c;S&&(s[c+1]=c_(s[c+1])),fg(s,R,c,!0),fg(s,R,c,!1),function XC(s,o,u,c,d){const g=d?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&oa(g,o)>=0&&(u[c+1]=Po(u[c+1]))}(o,R,s,c,g),y=xc(I,C),g?o.classBindings=y:o.styleBindings=y}(d,g,o,u,y,c)}}(g,s,y,c),o!==Ut&&Ri(d,y,o)&&function ob(s,o,u,c,d,g,y,I){if(!(3&o.type))return;const C=s.data,S=C[I+1];j_(function wC(s){return 1==(1&s)}(S)?Hw(C,o,u,d,su(S),y):void 0)||(j_(g)||function yC(s){return 2==(2&s)}(S)&&(g=Hw(C,null,u,d,I,y)),function qm(s,o,u,c,d){if(o)d?s.addClass(u,c):s.removeClass(u,c);else{let g=-1===c.indexOf("-")?void 0:pi.DashCase;null==d?s.removeStyle(u,c,g):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),g|=pi.Important),s.setStyle(u,c,d,g))}}(c,y,function Ua(s,o){return On(o[s])}(Yn(),u),d,g))}(g,g.data[Yn()],d,d[11],s,d[y+1]=function dk(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=pe(Rs(s)))),s}(o,u),c,y)}(s,o,null,!0),gg}function B_(s,o,u,c,d){let g=null;const y=u.directiveEnd;let I=u.directiveStylingLast;for(-1===I?I=u.directiveStart:I++;I<y&&(g=o[I],c=mg(c,g.hostAttrs,d),g!==s);)I++;return null!==s&&(u.directiveStylingLast=I),c}function mg(s,o,u){const c=u?1:2;let d=-1;if(null!==o)for(let g=0;g<o.length;g++){const y=o[g];"number"==typeof y?d=y:d===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Ke(s,y,!!u||o[++g]))}return void 0===s?null:s}function Hw(s,o,u,c,d,g){const y=null===o;let I;for(;d>0;){const C=s[d],S=Array.isArray(C),R=S?C[1]:C,V=null===R;let q=u[d+1];q===Ut&&(q=V?wt:void 0);let ee=V?tl(q,c):R===c?q:void 0;if(S&&!j_(ee)&&(ee=tl(C,c)),j_(ee)&&(I=ee,y))return I;const ve=s[d+1];d=y?Ps(ve):su(ve)}if(null!==o){let C=g?o.residualClasses:o.residualStyles;null!=C&&(I=tl(C,c))}return I}function j_(s){return void 0!==s}function $w(s,o=""){const u=be(),c=qt(),d=s+22,g=c.firstCreatePass?yh(c,d,1,o,null):c.data[d],y=u[d]=function Xd(s,o){return s.createText(o)}(u[11],o);Ap(c,u,y,g),ji(g,!1)}const Bs=void 0;var ur=["en",[["a","p"],["AM","PM"],Bs],[["AM","PM"],Bs,Bs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Bs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Bs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Bs,"{1} 'at' {0}",Bs],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function _b(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let hu={};function pn(s){const o=function GA(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=ls(o);if(u)return u;const c=o.split("-")[0];if(u=ls(c),u)return u;if("en"===c)return ur;throw new ge(701,!1)}function Wc(s){return pn(s)[nt.PluralCase]}function ls(s){return s in hu||(hu[s]=Mt.ng&&Mt.ng.common&&Mt.ng.common.locales&&Mt.ng.common.locales[s]),hu[s]}var nt=(()=>((nt=nt||{})[nt.LocaleId=0]="LocaleId",nt[nt.DayPeriodsFormat=1]="DayPeriodsFormat",nt[nt.DayPeriodsStandalone=2]="DayPeriodsStandalone",nt[nt.DaysFormat=3]="DaysFormat",nt[nt.DaysStandalone=4]="DaysStandalone",nt[nt.MonthsFormat=5]="MonthsFormat",nt[nt.MonthsStandalone=6]="MonthsStandalone",nt[nt.Eras=7]="Eras",nt[nt.FirstDayOfWeek=8]="FirstDayOfWeek",nt[nt.WeekendRange=9]="WeekendRange",nt[nt.DateFormat=10]="DateFormat",nt[nt.TimeFormat=11]="TimeFormat",nt[nt.DateTimeFormat=12]="DateTimeFormat",nt[nt.NumberSymbols=13]="NumberSymbols",nt[nt.NumberFormats=14]="NumberFormats",nt[nt.CurrencyCode=15]="CurrencyCode",nt[nt.CurrencySymbol=16]="CurrencySymbol",nt[nt.CurrencyName=17]="CurrencyName",nt[nt.Currencies=18]="Currencies",nt[nt.Directionality=19]="Directionality",nt[nt.PluralCase=20]="PluralCase",nt[nt.ExtraData=21]="ExtraData",nt))();const ho="en-US";let kh=ho;function p0(s,o,u,c,d){if(s=Q(s),Array.isArray(s))for(let g=0;g<s.length;g++)p0(s[g],o,u,c,d);else{const g=qt(),y=be();let I=Ai(s)?s:Q(s.provide),C=Nv(s);const S=Zn(),R=1048575&S.providerIndexes,V=S.directiveStart,q=S.providerIndexes>>20;if(Ai(s)||!s.multi){const ee=new Ts(C,d,pa),ve=jh(I,o,d?R:R+q,V);-1===ve?(ao(ac(S,y),g,I),g0(g,s,o.length),o.push(I),S.directiveStart++,S.directiveEnd++,d&&(S.providerIndexes+=1048576),u.push(ee),y.push(ee)):(u[ve]=ee,y[ve]=ee)}else{const ee=jh(I,o,R+q,V),ve=jh(I,o,R,R+q),ke=ee>=0&&u[ee],Ge=ve>=0&&u[ve];if(d&&!Ge||!d&&!ke){ao(ac(S,y),g,I);const et=function Tg(s,o,u,c,d){const g=new Ts(s,u,pa);return g.multi=[],g.index=o,g.componentProviders=0,Vn(g,d,c&&!u),g}(d?Pb:Y_,u.length,d,c,C);!d&&Ge&&(u[ve].providerFactory=et),g0(g,s,o.length,0),o.push(I),S.directiveStart++,S.directiveEnd++,d&&(S.providerIndexes+=1048576),u.push(et),y.push(et)}else g0(g,s,ee>-1?ee:ve,Vn(u[d?ve:ee],C,!d&&c));!d&&c&&Ge&&u[ve].componentProviders++}}}function g0(s,o,u,c){const d=Ai(o),g=function xv(s){return!!s.useClass}(o);if(d||g){const C=(g?Q(o.useClass):o).prototype.ngOnDestroy;if(C){const S=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const R=S.indexOf(u);-1===R?S.push(u,[c,C]):S[R+1].push(c,C)}else S.push(u,C)}}}function Vn(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function jh(s,o,u,c){for(let d=u;d<c;d++)if(o[d]===s)return d;return-1}function Y_(s,o,u,c){return m0(this.multi,[])}function Pb(s,o,u,c){const d=this.multi;let g;if(this.providerFactory){const y=this.providerFactory.componentProviders,I=sa(u,u[1],this.providerFactory.index,c);g=I.slice(0,y),m0(d,g);for(let C=y;C<I.length;C++)g.push(I[C])}else g=[],m0(d,g);return g}function m0(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function Ob(s,o=[]){return u=>{u.providersResolver=(c,d)=>function Dg(s,o,u){const c=qt();if(c.firstCreatePass){const d=kr(s);p0(u,c.data,c.blueprint,d,!0),p0(o,c.data,c.blueprint,d,!1)}}(c,d?d(s):s,o)}}class Xc{}class Jc{}function gu(s,o){return new _0(s,o??null)}class _0 extends Xc{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new b_(this);const c=wr(o);this._bootstrapComponents=Vr(c.bootstrap),this._r3Injector=lC(o,u,[{provide:Xc,useValue:this},{provide:fa,useValue:this.componentFactoryResolver}],pe(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Q_ extends Jc{constructor(o){super(),this.moduleType=o}create(o){return new _0(this.moduleType,o)}}class Hh extends Xc{constructor(o,u,c){super(),this.componentFactoryResolver=new b_(this),this.instance=null;const d=new GI([...o,{provide:Xc,useValue:this},{provide:fa,useValue:this.componentFactoryResolver}],u||ni(),c,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function Sg(s,o,u=null){return new Hh(s,o,u).injector}let sx=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const c=t_(0,u.type),d=c.length>0?Sg([c],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,d)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=mt({token:s,providedIn:"environment",factory:()=>new s(He(da))}),s})();function mr(s){s.getStandaloneInjector=o=>o.get(sx).getOrCreateStandaloneInjector(s)}function Gh(s,o,u){const c=fr()+s,d=be();return d[c]===Ut?ya(d,c,u?o.call(u):o()):function ig(s,o){return s[o]}(d,c)}function Mg(s,o,u,c){return function Wh(s,o,u,c,d,g){const y=o+u;return Ri(s,y,d)?ya(s,y+1,g?c.call(g,d):c(d)):Rg(s,y+1)}(be(),fr(),s,o,u,c)}function w0(s,o,u,c,d){return function E0(s,o,u,c,d,g,y){const I=o+u;return function Oo(s,o,u,c){const d=Ri(s,o,u);return Ri(s,o+1,c)||d}(s,I,d,g)?ya(s,I+2,y?c.call(y,d,g):c(d,g)):Rg(s,I+2)}(be(),fr(),s,o,u,c,d)}function Rg(s,o){const u=s[o];return u===Ut?void 0:u}function C0(s){return o=>{setTimeout(s,void 0,o)}}const ds=class hx extends p.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){let d=o,g=u||(()=>null),y=c;if(o&&"object"==typeof o){const C=o;d=C.next?.bind(C),g=C.error?.bind(C),y=C.complete?.bind(C)}this.__isAsync&&(g=C0(g),d&&(d=C0(d)),y&&(y=C0(y)));const I=super.subscribe({next:d,error:g,complete:y});return o instanceof J.w0&&o.add(I),I}};function b0(){return this._results[fn()]()}class D0{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=fn(),c=D0.prototype;c[u]||(c[u]=b0)}get changes(){return this._changes||(this._changes=new ds)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const d=kn(o);(this._changesDetected=!function ar(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let d=s[c],g=o[c];if(u&&(d=u(d),g=u(g)),g!==d)return!1}return!0}(c._results,d,u))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let qh=(()=>{class s{}return s.__NG_ELEMENT_ID__=fx,s})();const T0=qh,Kb=class extends T0{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o,u){const c=this._declarationTContainer.tViews,d=cl(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,u||null);d[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(d[19]=y.createEmbeddedView(c)),zp(c,d,o),new Ih(d)}};function fx(){return Pg(Zn(),be())}function Pg(s,o){return 4&s.type?new Kb(o,s,Tc(s,o)):null}let ey=(()=>{class s{}return s.__NG_ELEMENT_ID__=px,s})();function px(){return Yb(Zn(),be())}const Kh=ey,ed=class extends Kh{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return Tc(this._hostTNode,this._hostLView)}get injector(){return new qa(this._hostTNode,this._hostLView)}get parentInjector(){const o=za(this._hostTNode,this._hostLView);if(Wa(o)){const u=so(o,this._hostLView),c=io(o);return new qa(u[1].data[c+8],u)}return new qa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=Zb(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){let d,g;"number"==typeof c?d=c:null!=c&&(d=c.index,g=c.injector);const y=o.createEmbeddedView(u||{},g);return this.insert(y,d),y}createComponent(o,u,c,d,g){const y=o&&!function fc(s){return"function"==typeof s}(o);let I;if(y)I=u;else{const V=u||{};I=V.index,c=V.injector,d=V.projectableNodes,g=V.environmentInjector||V.ngModuleRef}const C=y?o:new Fc(Yt(o)),S=c||this.parentInjector;if(!g&&null==C.ngModule){const q=(y?S:this.parentInjector).get(da,null);q&&(g=q)}const R=C.create(S,d,void 0,g);return this.insert(R.hostView,I),R}insert(o,u){const c=o._lView,d=c[1];if(function Uu(s){return hi(s[3])}(c)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const V=c[3],q=new ed(V,V[6],V[3]);q.detach(q.indexOf(o))}}const g=this._adjustIndex(u),y=this._lContainer;!function hv(s,o,u,c){const d=10+c,g=u.length;c>0&&(u[d-1][4]=o),c<g-10?(o[4]=u[d],Kt(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const y=o[17];null!==y&&u!==y&&function fv(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(y,o);const I=o[19];null!==I&&I.insertView(s),o[2]|=64}(d,c,y,g);const I=sh(g,y),C=c[11],S=eu(C,y[7]);return null!==S&&function Cc(s,o,u,c,d,g){c[0]=d,c[6]=o,Ms(s,c,u,1,d,g)}(d,y[6],C,c,S,I),o.attachToViewContainerRef(),Kt(S0(y),g,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=Zb(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=Cp(this._lContainer,u);c&&(Xe(S0(this._lContainer),u),bp(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=Cp(this._lContainer,u);return c&&null!=Xe(S0(this._lContainer),u)?new Ih(c):null}_adjustIndex(o,u=0){return o??this.length+u}};function Zb(s){return s[8]}function S0(s){return s[8]||(s[8]=[])}function Yb(s,o){let u;const c=o[s.index];if(hi(c))u=c;else{let d;if(8&s.type)d=On(c);else{const g=o[11];d=g.createComment("");const y=Ir(s,o);Xa(g,eu(g,y),d,function rh(s,o){return s.nextSibling(o)}(g,y),!1)}o[s.index]=u=kC(c,o,d,s),I_(o,u)}return new ed(u,s,o)}class ty{constructor(o){this.queryList=o,this.matches=null}clone(){return new ty(this.queryList)}setDirty(){this.queryList.setDirty()}}class fo{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let g=0;g<c;g++){const y=u.getByIndex(g);d.push(this.queries[y.indexInDeclarationView].clone())}return new fo(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==iD(o,u).matches&&this.queries[u].setDirty()}}class A0{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class Zh{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const d=null!==u?u.length:0,g=this.getByIndex(c).embeddedTView(o,d);g&&(g.indexInDeclarationView=c,null!==u?u.push(g):u=[g])}return null!==u?new Zh(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class ny{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new ny(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const g=c[d];this.matchTNodeWithReadOption(o,u,gx(u,g)),this.matchTNodeWithReadOption(o,u,Qu(u,o,g,!1,!1))}else c===qh?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,Qu(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===Fp||d===ey||d===qh&&4&u.type)this.addMatch(u.index,-2);else{const g=Qu(u,o,d,!1,!1);null!==g&&this.addMatch(u.index,g)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function gx(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function _x(s,o,u,c){return-1===u?function mx(s,o){return 11&s.type?Tc(s,o):4&s.type?Pg(s,o):null}(o,s):-2===u?function yx(s,o,u){return u===Fp?Tc(o,s):u===qh?Pg(o,s):u===ey?Yb(o,s):void 0}(s,o,c):sa(s,s[1],u,o)}function Xb(s,o,u,c){const d=o[19].queries[c];if(null===d.matches){const g=s.data,y=u.matches,I=[];for(let C=0;C<y.length;C+=2){const S=y[C];I.push(S<0?null:_x(o,g[S],y[C+1],u.metadata.read))}d.matches=I}return d.matches}function x0(s,o,u,c){const d=s.queries.getByIndex(u),g=d.matches;if(null!==g){const y=Xb(s,o,d,u);for(let I=0;I<g.length;I+=2){const C=g[I];if(C>0)c.push(y[I/2]);else{const S=g[I+1],R=o[-C];for(let V=10;V<R.length;V++){const q=R[V];q[17]===q[3]&&x0(q[1],q,S,c)}if(null!==R[9]){const V=R[9];for(let q=0;q<V.length;q++){const ee=V[q];x0(ee[1],ee,S,c)}}}}}return c}function Jb(s){const o=be(),u=qt(),c=Hu();Gf(c+1);const d=iD(u,c);if(s.dirty&&function Kl(s){return 4==(4&s[2])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const g=d.crossesNgTemplate?x0(u,o,c,[]):Xb(u,o,d,c);s.reset(g,qI),s.notifyOnChanges()}return!0}return!1}function eD(s,o,u,c){const d=qt();if(d.firstCreatePass){const g=Zn();(function rD(s,o,u){null===s.queries&&(s.queries=new Zh),s.queries.track(new ny(o,u))})(d,new A0(o,u,c),g.index),function Ex(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}!function nD(s,o,u){const c=new D0(4==(4&u));nw(s,o,c,c.destroy),null===o[19]&&(o[19]=new fo),o[19].queries.push(new ty(c))}(d,be(),u)}function tD(){return function wx(s,o){return s[19].queries[o].queryList}(be(),Hu())}function iD(s,o){return s.queries.getByIndex(o)}function jg(...s){}const L0=new yn("Application Initializer");let ly=(()=>{class s{constructor(u){this.appInits=u,this.resolve=jg,this.reject=jg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const g=this.appInits[d]();if(Vo(g))u.push(g);else if(kw(g)){const y=new Promise((I,C)=>{g.subscribe({complete:I,error:C})});u.push(y)}}Promise.all(u).then(()=>{c()}).catch(d=>{this.reject(d)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(He(L0,8))},s.\u0275prov=mt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const gD=new yn("AppId",{providedIn:"root",factory:function mD(){return`${nf()}${nf()}${nf()}`}});function nf(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const V0=new yn("Platform Initializer"),Rx=new yn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),U0=new yn("appBootstrapListener");let ud=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=mt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const $g=new yn("LocaleId",{providedIn:"root",factory:()=>tt($g,_t.Optional|_t.SkipSelf)||function Hg(){return typeof $localize<"u"&&$localize.locale||ho}()}),_D=new yn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Px{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let B0=(()=>{class s{compileModuleSync(u){return new Q_(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),g=Vr(wr(u).declarations).reduce((y,I)=>{const C=Yt(I);return C&&y.push(new Fc(C)),y},[]);return new Px(c,g)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=mt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const cy=(()=>Promise.resolve(0))();function j0(s){typeof Zone>"u"?cy.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class fs{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ds(!1),this.onMicrotaskEmpty=new ds(!1),this.onStable=new ds(!1),this.onError=new ds(!1),typeof Zone>"u")throw new ge(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&u,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function wD(){let s=Mt.requestAnimationFrame,o=Mt.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function $0(s){const o=()=>{!function H0(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Mt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,dy(s),s.isCheckStableRunning=!0,rf(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),dy(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,d,g,y,I)=>{try{return ID(s),u.invokeTask(d,g,y,I)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),G0(s)}},onInvoke:(u,c,d,g,y,I,C)=>{try{return ID(s),u.invoke(d,g,y,I,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),G0(s)}},onHasTask:(u,c,d,g)=>{u.hasTask(d,g),c===d&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,dy(s),rf(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(u,c,d,g)=>(u.handleError(d,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!fs.isInAngularZone())throw new ge(909,!1)}static assertNotInAngularZone(){if(fs.isInAngularZone())throw new ge(909,!1)}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,d){const g=this._inner,y=g.scheduleEventTask("NgZoneEvent: "+d,o,Gg,jg,jg);try{return g.runTask(y,u,c)}finally{g.cancelTask(y)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const Gg={};function rf(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function dy(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function ID(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function G0(s){s._nesting--,rf(s)}class CD{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ds,this.onMicrotaskEmpty=new ds,this.onStable=new ds,this.onError=new ds}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,d){return o.apply(u,c)}}const hy=new yn(""),bD=new yn("");let W0,DD=(()=>{class s{constructor(u,c,d){this._ngZone=u,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,W0||(function SD(s){W0=s}(d),d.addToWindow(c)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{fs.assertNotInAngularZone(),j0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())j0(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,d){let g=-1;c&&c>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==g),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:g,updateCb:d})}whenStable(u,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,c,d){return[]}}return s.\u0275fac=function(u){return new(u||s)(He(fs),He(TD),He(bD))},s.\u0275prov=mt({token:s,factory:s.\u0275fac}),s})(),TD=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return W0?.findTestabilityInTree(this,u,c)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=mt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),js=null;const ld=new yn("AllowMultipleToken"),Wg=new yn("PlatformDestroyListeners");class Vx{constructor(o,u){this.name=o,this.token=u}}function q0(s,o,u=[]){const c=`Platform: ${o}`,d=new yn(c);return(g=[])=>{let y=sf();if(!y||y.injector.get(ld,!1)){const I=[...u,...g,{provide:d,useValue:!0}];s?s(I):function z0(s){if(js&&!js.get(ld,!1))throw new ge(400,!1);js=s;const o=s.get(gy);(function fy(s){const o=s.get(V0,null);o&&o.forEach(u=>u())})(s)}(function zg(s=[],o){return Sc.create({name:o,providers:[{provide:Mv,useValue:"platform"},{provide:Wg,useValue:new Set([()=>js=null])},...s]})}(I,c))}return function K0(s){const o=sf();if(!o)throw new ge(401,!1);return o}()}}function sf(){return js?.get(gy)??null}let gy=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const d=function _y(s,o){let u;return u="noop"===s?new CD:("zone.js"===s?void 0:s)||new fs(o),u}(c?.ngZone,function my(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),g=[{provide:fs,useValue:d}];return d.run(()=>{const y=Sc.create({providers:g,parent:this.injector,name:u.moduleType.name}),I=u.create(y),C=I.injector.get(Up,null);if(!C)throw new ge(402,!1);return d.runOutsideAngular(()=>{const S=d.onError.subscribe({next:R=>{C.handleError(R)}});I.onDestroy(()=>{yy(this._modules,I),S.unsubscribe()})}),function Z0(s,o,u){try{const c=u();return Vo(c)?c.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(C,d,()=>{const S=I.injector.get(ly);return S.runInitializers(),S.donePromise.then(()=>(function Ph(s){Lt(s,"Expected localeId to be defined"),"string"==typeof s&&(kh=s.toLowerCase().replace(/_/g,"-"))}(I.injector.get($g,ho)||ho),this._moduleDoBootstrap(I),I))})})}bootstrapModule(u,c=[]){const d=MD({},c);return function AD(s,o,u){const c=new Q_(u);return Promise.resolve(c)}(0,0,u).then(g=>this.bootstrapModuleFactory(g,d))}_moduleDoBootstrap(u){const c=u.injector.get(qg);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new ge(403,!1);u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ge(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const u=this._injector.get(Wg,null);u&&(u.forEach(c=>c()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(He(Sc))},s.\u0275prov=mt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function MD(s,o){return Array.isArray(o)?o.reduce(MD,s):{...s,...o}}let qg=(()=>{class s{constructor(u,c,d){this._zone=u,this._injector=c,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new O.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),y=new O.y(I=>{let C;this._zone.runOutsideAngular(()=>{C=this._zone.onStable.subscribe(()=>{fs.assertNotInAngularZone(),j0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{fs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{C.unsubscribe(),S.unsubscribe()}});this.isStable=(0,ae.T)(g,y.pipe((0,se.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,c){const d=u instanceof ko;if(!this._injector.get(ly).done)throw!d&&Kn(u),new ge(405,false);let y;y=d?u:this._injector.get(fa).resolveComponentFactory(u),this.componentTypes.push(y.componentType);const I=function xD(s){return s.isBoundToModule}(y)?void 0:this._injector.get(Xc),S=y.create(Sc.NULL,[],c||y.selector,I),R=S.location.nativeElement,V=S.injector.get(hy,null);return V?.registerApplication(R),S.onDestroy(()=>{this.detachView(S.hostView),yy(this.components,S),V?.unregisterApplication(R)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new ge(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;yy(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(U0,[]).concat(this._bootstrapListeners).forEach(d=>d(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>yy(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new ge(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)(He(fs),He(da),He(Up))},s.\u0275prov=mt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function yy(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}function ND(){return!1}function vy(){}let Hx=(()=>{class s{}return s.__NG_ELEMENT_ID__=$x,s})();function $x(s){return function Gx(s,o,u){if(jl(s)&&!u){const c=Zr(s.index,o);return new Ih(c,c)}return 47&s.type?new Ih(o[16],o):null}(Zn(),be(),16==(16&s))}class Yg{constructor(){}supports(o){return lu(o)}create(o){return new LD(o)}}const tE=(s,o)=>o;class LD{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||tE}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,d=0,g=null;for(;u||c;){const y=!c||u&&u.currentIndex<UD(c,d,g)?u:c,I=UD(y,d,g),C=y.currentIndex;if(y===c)d--,c=c._nextRemoved;else if(u=u._next,null==y.previousIndex)d++;else{g||(g=[]);const S=I-d,R=C-d;if(S!=R){for(let q=0;q<S;q++){const ee=q<g.length?g[q]:g[q]=0,ve=ee+q;R<=ve&&ve<S&&(g[q]=ee+1)}g[y.previousIndex]=R-S}}I!==C&&o(y,I,C)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!lu(o))throw new ge(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,g,y,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)g=o[I],y=this._trackByFn(I,g),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,g,y,I)),Object.is(u.item,g)||this._addIdentityChange(u,g)):(u=this._mismatch(u,g,y,I),c=!0),u=u._next}else d=0,function kA(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[fn()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,I=>{y=this._trackByFn(d,I),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,I,y,d)),Object.is(u.item,I)||this._addIdentityChange(u,I)):(u=this._mismatch(u,I,y,d),c=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,d){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,g,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,g,d)):o=this._addAfter(new lf(u,c),g,d),o}_verifyReinsertion(o,u,c,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==g?o=this._reinsertAfter(g,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,g=o._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new VD),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new VD),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class lf{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class nE{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class VD{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new nE,this.map.set(u,c)),c.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function UD(s,o,u){const c=s.previousIndex;if(null===c)return c;let d=0;return u&&c<u.length&&(d=u[c]),c+o+d}class rE{constructor(){}supports(o){return o instanceof Map||T_(o)}create(){return new BD}}class BD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||T_(o)))throw new ge(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const g=this._getOrCreateRecordForKey(d,c);u=this._insertBeforeOrAppend(u,g)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const g=d._prev,y=d._next;return g&&(g._next=y),y&&(y._prev=g),d._next=null,d._prev=null,d}const c=new Wx(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class Wx{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function by(){return new iE([new Yg])}let iE=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||by()),deps:[[s,new Dn,new yt]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(null!=c)return c;throw new ge(901,!1)}}return s.\u0275prov=mt({token:s,providedIn:"root",factory:by}),s})();function HD(){return new Qg([new rE])}let Qg=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||HD()),deps:[[s,new Dn,new yt]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(c)return c;throw new ge(901,!1)}}return s.\u0275prov=mt({token:s,providedIn:"root",factory:HD}),s})();const oE=q0(null,"core",[]);let aE=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(He(qg))},s.\u0275mod=Mn({type:s}),s.\u0275inj=yi({}),s})();function cf(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(lt,Ce,L)=>{L.d(Ce,{Z:()=>Ye});var p=L(2090),J=L(4859),O=L(9681),ae=L(1877);class se{constructor(ge,Ae){this._delegate=ge,this.firebase=Ae,(0,O._addComponent)(ge,new J.wA("app-compat",()=>this,"PUBLIC")),this.container=ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ge){this._delegate.automaticDataCollectionEnabled=ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ge=>{this._delegate.checkDestroyed(),ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(ge,Ae=O._DEFAULT_ENTRY_NAME){var De;this._delegate.checkDestroyed();const Le=this._delegate.container.getProvider(ge);return!Le.isInitialized()&&"EXPLICIT"===(null===(De=Le.getComponent())||void 0===De?void 0:De.instantiationMode)&&Le.initialize(),Le.getImmediate({identifier:Ae})}_removeServiceInstance(ge,Ae=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ge).clearInstance(Ae)}_addComponent(ge){(0,O._addComponent)(this._delegate,ge)}_addOrOverwriteComponent(ge){(0,O._addOrOverwriteComponent)(this._delegate,ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ce=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function me(){const at=function pe(at){const ge={},Ae={__esModule:!0,initializeApp:function Me(Oe,H={}){const we=O.initializeApp(Oe,H);if((0,p.r3)(ge,we.name))return ge[we.name];const K=new at(we,Ae);return ge[we.name]=K,K},app:Le,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Re(Oe){const H=Oe.name,we=H.replace("-compat","");if(O._registerComponent(Oe)&&"PUBLIC"===Oe.type){const K=(X=Le())=>{if("function"!=typeof X[we])throw ce.create("invalid-app-argument",{appName:H});return X[we]()};void 0!==Oe.serviceProps&&(0,p.ZB)(K,Oe.serviceProps),Ae[we]=K,at.prototype[we]=function(...X){return this._getService.bind(this,H).apply(this,Oe.multipleInstances?X:[])}}return"PUBLIC"===Oe.type?Ae[we]:null},removeApp:function De(Oe){delete ge[Oe]},useAsService:function je(Oe,H){return"serverAuth"===H?null:H},modularAPIs:O}};function Le(Oe){if(!(0,p.r3)(ge,Oe=Oe||O._DEFAULT_ENTRY_NAME))throw ce.create("no-app",{appName:Oe});return ge[Oe]}return Ae.default=Ae,Object.defineProperty(Ae,"apps",{get:function Ee(){return Object.keys(ge).map(Oe=>ge[Oe])}}),Le.App=at,Ae}(se);return at.INTERNAL=Object.assign(Object.assign({},at.INTERNAL),{createFirebaseNamespace:me,extendNamespace:function ge(Ae){(0,p.ZB)(at,Ae)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),at}(),G=new ae.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const at=self.firebase.SDK_VERSION;at&&at.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ye=$;!function Se(at){(0,O.registerVersion)("@firebase/app-compat","0.1.39",at)}()},9681:(lt,Ce,L)=>{L.r(Ce),L.d(Ce,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>_o,_DEFAULT_ENTRY_NAME:()=>hn,_addComponent:()=>en,_addOrOverwriteComponent:()=>Sr,_apps:()=>Lt,_clearComponents:()=>yi,_components:()=>gt,_getProvider:()=>mt,_registerComponent:()=>Gr,_removeServiceInstance:()=>wn,deleteApp:()=>Ks,getApp:()=>vi,getApps:()=>zr,initializeApp:()=>qs,onLog:()=>_t,registerVersion:()=>ci,setLogLevel:()=>ys});var p=L(5861),J=L(4859),O=L(1877),ae=L(2090),se=L(8766);class fe{constructor(Te){this.container=Te}getPlatformInfoString(){return this.container.getProviders().map(tt=>{if(function ce(He){return"VERSION"===He.getComponent()?.type}(tt)){const bt=tt.getImmediate();return`${bt.library}/${bt.version}`}return null}).filter(tt=>tt).join(" ")}}const pe="@firebase/app",$=new O.Yd("@firebase/app"),hn="[DEFAULT]",Pt={[pe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Lt=new Map,gt=new Map;function en(He,Te){try{He.container.addComponent(Te)}catch(tt){$.debug(`Component ${Te.name} failed to register with FirebaseApp ${He.name}`,tt)}}function Sr(He,Te){He.container.addOrOverwriteComponent(Te)}function Gr(He){const Te=He.name;if(gt.has(Te))return $.debug(`There were multiple attempts to register component ${Te}.`),!1;gt.set(Te,He);for(const tt of Lt.values())en(tt,He);return!0}function mt(He,Te){const tt=He.container.getProvider("heartbeat").getImmediate({optional:!0});return tt&&tt.triggerHeartbeat(),He.container.getProvider(Te)}function wn(He,Te,tt=hn){mt(He,Te).clearInstance(tt)}function yi(){gt.clear()}const Wr=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Ar{constructor(Te,tt,bt){this._isDeleted=!1,this._options=Object.assign({},Te),this._config=Object.assign({},tt),this._name=tt.name,this._automaticDataCollectionEnabled=tt.automaticDataCollectionEnabled,this._container=bt,this.container.addComponent(new J.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Te){this.checkDestroyed(),this._automaticDataCollectionEnabled=Te}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Te){this._isDeleted=Te}checkDestroyed(){if(this.isDeleted)throw Wr.create("app-deleted",{appName:this._name})}}const _o="9.14.0";function qs(He,Te={}){let tt=He;"object"!=typeof Te&&(Te={name:Te});const bt=Object.assign({name:hn,automaticDataCollectionEnabled:!1},Te),Dt=bt.name;if("string"!=typeof Dt||!Dt)throw Wr.create("bad-app-name",{appName:String(Dt)});if(tt||(tt=(0,ae.aH)()),!tt)throw Wr.create("no-options");const Ot=Lt.get(Dt);if(Ot){if((0,ae.vZ)(tt,Ot.options)&&(0,ae.vZ)(bt,Ot.config))return Ot;throw Wr.create("duplicate-app",{appName:Dt})}const W=new J.H0(Dt);for(const Z of gt.values())W.addComponent(Z);const j=new Ar(tt,bt,W);return Lt.set(Dt,j),j}function vi(He=hn){const Te=Lt.get(He);if(!Te&&He===hn)return qs();if(!Te)throw Wr.create("no-app",{appName:He});return Te}function zr(){return Array.from(Lt.values())}function Ks(He){return _n.apply(this,arguments)}function _n(){return(_n=(0,p.Z)(function*(He){const Te=He.name;Lt.has(Te)&&(Lt.delete(Te),yield Promise.all(He.container.getProviders().map(tt=>tt.delete())),He.isDeleted=!0)})).apply(this,arguments)}function ci(He,Te,tt){var bt;let Dt=null!==(bt=Pt[He])&&void 0!==bt?bt:He;tt&&(Dt+=`-${tt}`);const Ot=Dt.match(/\s|\//),W=Te.match(/\s|\//);if(Ot||W){const j=[`Unable to register library "${Dt}" with version "${Te}":`];return Ot&&j.push(`library name "${Dt}" contains illegal characters (whitespace or "/")`),Ot&&W&&j.push("and"),W&&j.push(`version name "${Te}" contains illegal characters (whitespace or "/")`),void $.warn(j.join(" "))}Gr(new J.wA(`${Dt}-version`,()=>({library:Dt,version:Te}),"VERSION"))}function _t(He,Te){if(null!==He&&"function"!=typeof He)throw Wr.create("invalid-log-argument");(0,O.Am)(He,Te)}function ys(He){(0,O.Ub)(He)}const xr="firebase-heartbeat-store";let Zs=null;function Mt(){return Zs||(Zs=(0,se.X3)("firebase-heartbeat-database",1,{upgrade:(He,Te)=>{0===Te&&He.createObjectStore(xr)}}).catch(He=>{throw Wr.create("idb-open",{originalErrorMessage:He.message})})),Zs}function Tt(){return(Tt=(0,p.Z)(function*(He){var Te;try{return(yield Mt()).transaction(xr).objectStore(xr).get(Cn(He))}catch(tt){if(tt instanceof ae.ZR)$.warn(tt.message);else{const bt=Wr.create("idb-get",{originalErrorMessage:null===(Te=tt)||void 0===Te?void 0:Te.message});$.warn(bt.message)}}})).apply(this,arguments)}function vs(He,Te){return An.apply(this,arguments)}function An(){return(An=(0,p.Z)(function*(He,Te){var tt;try{const Dt=(yield Mt()).transaction(xr,"readwrite");return yield Dt.objectStore(xr).put(Te,Cn(He)),Dt.done}catch(bt){if(bt instanceof ae.ZR)$.warn(bt.message);else{const Dt=Wr.create("idb-set",{originalErrorMessage:null===(tt=bt)||void 0===tt?void 0:tt.message});$.warn(Dt.message)}}})).apply(this,arguments)}function Cn(He){return`${He.name}!${He.options.appId}`}class Wo{constructor(Te){this.container=Te,this._heartbeatsCache=null;const tt=this.container.getProvider("app").getImmediate();this._storage=new Zt(tt),this._heartbeatsCachePromise=this._storage.read().then(bt=>(this._heartbeatsCache=bt,bt))}triggerHeartbeat(){var Te=this;return(0,p.Z)(function*(){const bt=Te.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Dt=ln();if(null===Te._heartbeatsCache&&(Te._heartbeatsCache=yield Te._heartbeatsCachePromise),Te._heartbeatsCache.lastSentHeartbeatDate!==Dt&&!Te._heartbeatsCache.heartbeats.some(Ot=>Ot.date===Dt))return Te._heartbeatsCache.heartbeats.push({date:Dt,agent:bt}),Te._heartbeatsCache.heartbeats=Te._heartbeatsCache.heartbeats.filter(Ot=>{const W=new Date(Ot.date).valueOf();return Date.now()-W<=2592e6}),Te._storage.overwrite(Te._heartbeatsCache)})()}getHeartbeatsHeader(){var Te=this;return(0,p.Z)(function*(){if(null===Te._heartbeatsCache&&(yield Te._heartbeatsCachePromise),null===Te._heartbeatsCache||0===Te._heartbeatsCache.heartbeats.length)return"";const tt=ln(),{heartbeatsToSend:bt,unsentEntries:Dt}=function ts(He,Te=1024){const tt=[];let bt=He.slice();for(const Dt of He){const Ot=tt.find(W=>W.agent===Dt.agent);if(Ot){if(Ot.dates.push(Dt.date),Mr(tt)>Te){Ot.dates.pop();break}}else if(tt.push({agent:Dt.agent,dates:[Dt.date]}),Mr(tt)>Te){tt.pop();break}bt=bt.slice(1)}return{heartbeatsToSend:tt,unsentEntries:bt}}(Te._heartbeatsCache.heartbeats),Ot=(0,ae.L)(JSON.stringify({version:2,heartbeats:bt}));return Te._heartbeatsCache.lastSentHeartbeatDate=tt,Dt.length>0?(Te._heartbeatsCache.heartbeats=Dt,yield Te._storage.overwrite(Te._heartbeatsCache)):(Te._heartbeatsCache.heartbeats=[],Te._storage.overwrite(Te._heartbeatsCache)),Ot})()}}function ln(){return(new Date).toISOString().substring(0,10)}class Zt{constructor(Te){this.app=Te,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Te=this;return(0,p.Z)(function*(){return(yield Te._canUseIndexedDBPromise)&&(yield function vt(He){return Tt.apply(this,arguments)}(Te.app))||{heartbeats:[]}})()}overwrite(Te){var tt=this;return(0,p.Z)(function*(){var bt;if(yield tt._canUseIndexedDBPromise){const Ot=yield tt.read();return vs(tt.app,{lastSentHeartbeatDate:null!==(bt=Te.lastSentHeartbeatDate)&&void 0!==bt?bt:Ot.lastSentHeartbeatDate,heartbeats:Te.heartbeats})}})()}add(Te){var tt=this;return(0,p.Z)(function*(){var bt;if(yield tt._canUseIndexedDBPromise){const Ot=yield tt.read();return vs(tt.app,{lastSentHeartbeatDate:null!==(bt=Te.lastSentHeartbeatDate)&&void 0!==bt?bt:Ot.lastSentHeartbeatDate,heartbeats:[...Ot.heartbeats,...Te.heartbeats]})}})()}}function Mr(He){return(0,ae.L)(JSON.stringify({version:2,heartbeats:He})).length}!function ns(He){Gr(new J.wA("platform-logger",Te=>new fe(Te),"PRIVATE")),Gr(new J.wA("heartbeat",Te=>new Wo(Te),"PRIVATE")),ci(pe,"0.8.4",He),ci(pe,"0.8.4","esm2017"),ci("fire-js","")}("")},4859:(lt,Ce,L)=>{L.d(Ce,{H0:()=>pe,wA:()=>O,zt:()=>se});var p=L(5861),J=L(2090);class O{constructor($,G,Q){this.name=$,this.instanceFactory=G,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const ae="[DEFAULT]";class se{constructor($,G){this.name=$,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const G=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(G)){const Q=new J.BH;if(this.instancesDeferred.set(G,Q),this.isInitialized(G)||this.shouldAutoInitialize())try{const Be=this.getOrInitializeService({instanceIdentifier:G});Be&&Q.resolve(Be)}catch{}}return this.instancesDeferred.get(G).promise}getImmediate($){var G;const Q=this.normalizeInstanceIdentifier($?.identifier),Be=null!==(G=$?.optional)&&void 0!==G&&G;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if(Be)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(Se){if(Be)return null;throw Se}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function ce(me){return"EAGER"===me.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:ae})}catch{}for(const[G,Q]of this.instancesDeferred.entries()){const Be=this.normalizeInstanceIdentifier(G);try{const Se=this.getOrInitializeService({instanceIdentifier:Be});Q.resolve(Se)}catch{}}}}clearInstance($=ae){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,p.Z)(function*(){const G=Array.from($.instances.values());yield Promise.all([...G.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...G.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=ae){return this.instances.has($)}getOptions($=ae){return this.instancesOptions.get($)||{}}initialize($={}){const{options:G={}}=$,Q=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Be=this.getOrInitializeService({instanceIdentifier:Q,options:G});for(const[Se,Ye]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(Se)&&Ye.resolve(Be);return Be}onInit($,G){var Q;const Be=this.normalizeInstanceIdentifier(G),Se=null!==(Q=this.onInitCallbacks.get(Be))&&void 0!==Q?Q:new Set;Se.add($),this.onInitCallbacks.set(Be,Se);const Ye=this.instances.get(Be);return Ye&&$(Ye,Be),()=>{Se.delete($)}}invokeOnInitCallbacks($,G){const Q=this.onInitCallbacks.get(G);if(Q)for(const Be of Q)try{Be($,G)}catch{}}getOrInitializeService({instanceIdentifier:$,options:G={}}){let Q=this.instances.get($);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(me=$,me===ae?void 0:me),options:G}),this.instances.set($,Q),this.instancesOptions.set($,G),this.invokeOnInitCallbacks(Q,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,Q)}catch{}var me;return Q||null}normalizeInstanceIdentifier($=ae){return this.component?this.component.multipleInstances?$:ae:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class pe{constructor($){this.name=$,this.providers=new Map}addComponent($){const G=this.getProvider($.name);if(G.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);G.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const G=new se($,this);return this.providers.set($,G),G}getProviders(){return Array.from(this.providers.values())}}},1877:(lt,Ce,L)=>{L.d(Ce,{Am:()=>me,Ub:()=>pe,Yd:()=>ce,in:()=>J});const p=[];var J=(()=>{return($=J||(J={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",J;var $})();const O={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},ae=J.INFO,se={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},fe=($,G,...Q)=>{if(G<$.logLevel)return;const Be=(new Date).toISOString(),Se=se[G];if(!Se)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[Se](`[${Be}]  ${$.name}:`,...Q)};class ce{constructor(G){this.name=G,this._logLevel=ae,this._logHandler=fe,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in J))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?O[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...G),this._logHandler(this,J.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...G),this._logHandler(this,J.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,J.INFO,...G),this._logHandler(this,J.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,J.WARN,...G),this._logHandler(this,J.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...G),this._logHandler(this,J.ERROR,...G)}}function pe($){p.forEach(G=>{G.setLogLevel($)})}function me($,G){for(const Q of p){let Be=null;G&&G.level&&(Be=O[G.level]),Q.userLogHandler=null===$?null:(Se,Ye,...at)=>{const ge=at.map(Ae=>{if(null==Ae)return null;if("string"==typeof Ae)return Ae;if("number"==typeof Ae||"boolean"==typeof Ae)return Ae.toString();if(Ae instanceof Error)return Ae.message;try{return JSON.stringify(Ae)}catch{return null}}).filter(Ae=>Ae).join(" ");Ye>=(Be??Se.logLevel)&&$({level:J[Ye].toLowerCase(),message:ge,args:at,type:Se.name})}}}},8766:(lt,Ce,L)=>{L.d(Ce,{Lj:()=>Me,X3:()=>Le});var p=L(5861);let O,ae;const ce=new WeakMap,pe=new WeakMap,me=new WeakMap,$=new WeakMap,G=new WeakMap;let Se={get(H,we,K){if(H instanceof IDBTransaction){if("done"===we)return pe.get(H);if("objectStoreNames"===we)return H.objectStoreNames||me.get(H);if("store"===we)return K.objectStoreNames[1]?void 0:K.objectStore(K.objectStoreNames[0])}return Ae(H[we])},set:(H,we,K)=>(H[we]=K,!0),has:(H,we)=>H instanceof IDBTransaction&&("done"===we||"store"===we)||we in H};function ge(H){return"function"==typeof H?function at(H){return H!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function fe(){return ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(H)?function(...we){return H.apply(De(this),we),Ae(ce.get(this))}:function(...we){return Ae(H.apply(De(this),we))}:function(we,...K){const X=H.call(De(this),we,...K);return me.set(X,we.sort?we.sort():[we]),Ae(X)}}(H):(H instanceof IDBTransaction&&function Be(H){if(pe.has(H))return;const we=new Promise((K,X)=>{const ie=()=>{H.removeEventListener("complete",ne),H.removeEventListener("error",Ve),H.removeEventListener("abort",Ve)},ne=()=>{K(),ie()},Ve=()=>{X(H.error||new DOMException("AbortError","AbortError")),ie()};H.addEventListener("complete",ne),H.addEventListener("error",Ve),H.addEventListener("abort",Ve)});pe.set(H,we)}(H),((H,we)=>we.some(K=>H instanceof K))(H,function se(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(H,Se):H)}function Ae(H){if(H instanceof IDBRequest)return function Q(H){const we=new Promise((K,X)=>{const ie=()=>{H.removeEventListener("success",ne),H.removeEventListener("error",Ve)},ne=()=>{K(Ae(H.result)),ie()},Ve=()=>{X(H.error),ie()};H.addEventListener("success",ne),H.addEventListener("error",Ve)});return we.then(K=>{K instanceof IDBCursor&&ce.set(K,H)}).catch(()=>{}),G.set(we,H),we}(H);if($.has(H))return $.get(H);const we=ge(H);return we!==H&&($.set(H,we),G.set(we,H)),we}const De=H=>G.get(H);function Le(H,we,{blocked:K,upgrade:X,blocking:ie,terminated:ne}={}){const Ve=indexedDB.open(H,we),Fe=Ae(Ve);return X&&Ve.addEventListener("upgradeneeded",ct=>{X(Ae(Ve.result),ct.oldVersion,ct.newVersion,Ae(Ve.transaction))}),K&&Ve.addEventListener("blocked",()=>K()),Fe.then(ct=>{ne&&ct.addEventListener("close",()=>ne()),ie&&ct.addEventListener("versionchange",()=>ie())}).catch(()=>{}),Fe}function Me(H,{blocked:we}={}){const K=indexedDB.deleteDatabase(H);return we&&K.addEventListener("blocked",()=>we()),Ae(K).then(()=>{})}const Ee=["get","getKey","getAll","getAllKeys","count"],Re=["put","add","delete","clear"],je=new Map;function Oe(H,we){if(!(H instanceof IDBDatabase)||we in H||"string"!=typeof we)return;if(je.get(we))return je.get(we);const K=we.replace(/FromIndex$/,""),X=we!==K,ie=Re.includes(K);if(!(K in(X?IDBIndex:IDBObjectStore).prototype)||!ie&&!Ee.includes(K))return;const ne=function(){var Ve=(0,p.Z)(function*(Fe,...ct){const sn=this.transaction(Fe,ie?"readwrite":"readonly");let hn=sn.store;return X&&(hn=hn.index(ct.shift())),(yield Promise.all([hn[K](...ct),ie&&sn.done]))[0]});return function(ct){return Ve.apply(this,arguments)}}();return je.set(we,ne),ne}!function Ye(H){Se=H(Se)}(H=>({...H,get:(we,K,X)=>Oe(we,K)||H.get(we,K,X),has:(we,K)=>!!Oe(we,K)||H.has(we,K)}))},5861:(lt,Ce,L)=>{function p(O,ae,se,fe,ce,pe,me){try{var $=O[pe](me),G=$.value}catch(Q){return void se(Q)}$.done?ae(G):Promise.resolve(G).then(fe,ce)}function J(O){return function(){var ae=this,se=arguments;return new Promise(function(fe,ce){var pe=O.apply(ae,se);function me(G){p(pe,fe,ce,me,$,"next",G)}function $(G){p(pe,fe,ce,me,$,"throw",G)}me(void 0)})}}L.d(Ce,{Z:()=>J})}},lt=>{lt(lt.s=3591)}]);